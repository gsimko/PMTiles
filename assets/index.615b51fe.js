function n4(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(o){if(o!=="default"&&!(o in e)){var l=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:function(){return n[o]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const r4=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}};r4();var Ef=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function i4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={exports:{}},rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep=Symbol.for("react.element"),o4=Symbol.for("react.portal"),a4=Symbol.for("react.fragment"),s4=Symbol.for("react.strict_mode"),l4=Symbol.for("react.profiler"),u4=Symbol.for("react.provider"),c4=Symbol.for("react.context"),h4=Symbol.for("react.forward_ref"),d4=Symbol.for("react.suspense"),f4=Symbol.for("react.memo"),p4=Symbol.for("react.lazy"),mS=Symbol.iterator;function m4(e){return e===null||typeof e!="object"?null:(e=mS&&e[mS]||e["@@iterator"],typeof e=="function"?e:null)}var mC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gC=Object.assign,yC={};function Ih(e,t,n){this.props=e,this.context=t,this.refs=yC,this.updater=n||mC}Ih.prototype.isReactComponent={};Ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _C(){}_C.prototype=Ih.prototype;function Fx(e,t,n){this.props=e,this.context=t,this.refs=yC,this.updater=n||mC}var Ox=Fx.prototype=new _C;Ox.constructor=Fx;gC(Ox,Ih.prototype);Ox.isPureReactComponent=!0;var gS=Array.isArray,vC=Object.prototype.hasOwnProperty,$x={current:null},xC={key:!0,ref:!0,__self:!0,__source:!0};function bC(e,t,n){var o,l={},h=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(h=""+t.key),t)vC.call(t,o)&&!xC.hasOwnProperty(o)&&(l[o]=t[o]);var u=arguments.length-2;if(u===1)l.children=n;else if(1<u){for(var S=Array(u),b=0;b<u;b++)S[b]=arguments[b+2];l.children=S}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)l[o]===void 0&&(l[o]=u[o]);return{$$typeof:ep,type:e,key:h,ref:g,props:l,_owner:$x.current}}function g4(e,t){return{$$typeof:ep,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bx(e){return typeof e=="object"&&e!==null&&e.$$typeof===ep}function y4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yS=/\/+/g;function $_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y4(""+e.key):t.toString(36)}function Hm(e,t,n,o,l){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(h){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case ep:case o4:g=!0}}if(g)return g=e,l=l(g),e=o===""?"."+$_(g,0):o,gS(l)?(n="",e!=null&&(n=e.replace(yS,"$&/")+"/"),Hm(l,t,n,"",function(b){return b})):l!=null&&(Bx(l)&&(l=g4(l,n+(!l.key||g&&g.key===l.key?"":(""+l.key).replace(yS,"$&/")+"/")+e)),t.push(l)),1;if(g=0,o=o===""?".":o+":",gS(e))for(var u=0;u<e.length;u++){h=e[u];var S=o+$_(h,u);g+=Hm(h,t,n,S,l)}else if(S=m4(e),typeof S=="function")for(e=S.call(e),u=0;!(h=e.next()).done;)h=h.value,S=o+$_(h,u++),g+=Hm(h,t,n,S,l);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function hm(e,t,n){if(e==null)return e;var o=[],l=0;return Hm(e,o,"","",function(h){return t.call(n,h,l++)}),o}function _4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wi={current:null},Xm={transition:null},v4={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:Xm,ReactCurrentOwner:$x};rn.Children={map:hm,forEach:function(e,t,n){hm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hm(e,function(){t++}),t},toArray:function(e){return hm(e,function(t){return t})||[]},only:function(e){if(!Bx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rn.Component=Ih;rn.Fragment=a4;rn.Profiler=l4;rn.PureComponent=Fx;rn.StrictMode=s4;rn.Suspense=d4;rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v4;rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=gC({},e.props),l=e.key,h=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,g=$x.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)vC.call(t,S)&&!xC.hasOwnProperty(S)&&(o[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)o.children=n;else if(1<S){u=Array(S);for(var b=0;b<S;b++)u[b]=arguments[b+2];o.children=u}return{$$typeof:ep,type:e.type,key:l,ref:h,props:o,_owner:g}};rn.createContext=function(e){return e={$$typeof:c4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u4,_context:e},e.Consumer=e};rn.createElement=bC;rn.createFactory=function(e){var t=bC.bind(null,e);return t.type=e,t};rn.createRef=function(){return{current:null}};rn.forwardRef=function(e){return{$$typeof:h4,render:e}};rn.isValidElement=Bx;rn.lazy=function(e){return{$$typeof:p4,_payload:{_status:-1,_result:e},_init:_4}};rn.memo=function(e,t){return{$$typeof:f4,type:e,compare:t===void 0?null:t}};rn.startTransition=function(e){var t=Xm.transition;Xm.transition={};try{e()}finally{Xm.transition=t}};rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rn.useCallback=function(e,t){return Wi.current.useCallback(e,t)};rn.useContext=function(e){return Wi.current.useContext(e)};rn.useDebugValue=function(){};rn.useDeferredValue=function(e){return Wi.current.useDeferredValue(e)};rn.useEffect=function(e,t){return Wi.current.useEffect(e,t)};rn.useId=function(){return Wi.current.useId()};rn.useImperativeHandle=function(e,t,n){return Wi.current.useImperativeHandle(e,t,n)};rn.useInsertionEffect=function(e,t){return Wi.current.useInsertionEffect(e,t)};rn.useLayoutEffect=function(e,t){return Wi.current.useLayoutEffect(e,t)};rn.useMemo=function(e,t){return Wi.current.useMemo(e,t)};rn.useReducer=function(e,t,n){return Wi.current.useReducer(e,t,n)};rn.useRef=function(e){return Wi.current.useRef(e)};rn.useState=function(e){return Wi.current.useState(e)};rn.useSyncExternalStore=function(e,t,n){return Wi.current.useSyncExternalStore(e,t,n)};rn.useTransition=function(){return Wi.current.useTransition()};rn.version="18.1.0";W.exports=rn;var Oe=W.exports,qv=n4({__proto__:null,default:Oe},[W.exports]),Zv={},by={exports:{}},Lo={},wC={exports:{}},SC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ue,ot){var Tt=Ue.length;Ue.push(ot);e:for(;0<Tt;){var Ot=Tt-1>>>1,at=Ue[Ot];if(0<l(at,ot))Ue[Ot]=ot,Ue[Tt]=at,Tt=Ot;else break e}}function n(Ue){return Ue.length===0?null:Ue[0]}function o(Ue){if(Ue.length===0)return null;var ot=Ue[0],Tt=Ue.pop();if(Tt!==ot){Ue[0]=Tt;e:for(var Ot=0,at=Ue.length,hn=at>>>1;Ot<hn;){var Dt=2*(Ot+1)-1,Zn=Ue[Dt],dn=Dt+1,Qn=Ue[dn];if(0>l(Zn,Tt))dn<at&&0>l(Qn,Zn)?(Ue[Ot]=Qn,Ue[dn]=Tt,Ot=dn):(Ue[Ot]=Zn,Ue[Dt]=Tt,Ot=Dt);else if(dn<at&&0>l(Qn,Tt))Ue[Ot]=Qn,Ue[dn]=Tt,Ot=dn;else break e}}return ot}function l(Ue,ot){var Tt=Ue.sortIndex-ot.sortIndex;return Tt!==0?Tt:Ue.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var S=[],b=[],C=1,A=null,z=3,j=!1,Z=!1,H=!1,de=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Ue){for(var ot=n(b);ot!==null;){if(ot.callback===null)o(b);else if(ot.startTime<=Ue)o(b),ot.sortIndex=ot.expirationTime,t(S,ot);else break;ot=n(b)}}function ce(Ue){if(H=!1,K(Ue),!Z)if(n(S)!==null)Z=!0,cn(ue);else{var ot=n(b);ot!==null&&bn(ce,ot.startTime-Ue)}}function ue(Ue,ot){Z=!1,H&&(H=!1,B(Te),Te=-1),j=!0;var Tt=z;try{for(K(ot),A=n(S);A!==null&&(!(A.expirationTime>ot)||Ue&&!nt());){var Ot=A.callback;if(typeof Ot=="function"){A.callback=null,z=A.priorityLevel;var at=Ot(A.expirationTime<=ot);ot=e.unstable_now(),typeof at=="function"?A.callback=at:A===n(S)&&o(S),K(ot)}else o(S);A=n(S)}if(A!==null)var hn=!0;else{var Dt=n(b);Dt!==null&&bn(ce,Dt.startTime-ot),hn=!1}return hn}finally{A=null,z=Tt,j=!1}}var ye=!1,me=null,Te=-1,Ne=5,we=-1;function nt(){return!(e.unstable_now()-we<Ne)}function wt(){if(me!==null){var Ue=e.unstable_now();we=Ue;var ot=!0;try{ot=me(!0,Ue)}finally{ot?It():(ye=!1,me=null)}}else ye=!1}var It;if(typeof N=="function")It=function(){N(wt)};else if(typeof MessageChannel!="undefined"){var Lt=new MessageChannel,Bt=Lt.port2;Lt.port1.onmessage=wt,It=function(){Bt.postMessage(null)}}else It=function(){de(wt,0)};function cn(Ue){me=Ue,ye||(ye=!0,It())}function bn(Ue,ot){Te=de(function(){Ue(e.unstable_now())},ot)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ue){Ue.callback=null},e.unstable_continueExecution=function(){Z||j||(Z=!0,cn(ue))},e.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<Ue?Math.floor(1e3/Ue):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return n(S)},e.unstable_next=function(Ue){switch(z){case 1:case 2:case 3:var ot=3;break;default:ot=z}var Tt=z;z=ot;try{return Ue()}finally{z=Tt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ue,ot){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var Tt=z;z=Ue;try{return ot()}finally{z=Tt}},e.unstable_scheduleCallback=function(Ue,ot,Tt){var Ot=e.unstable_now();switch(typeof Tt=="object"&&Tt!==null?(Tt=Tt.delay,Tt=typeof Tt=="number"&&0<Tt?Ot+Tt:Ot):Tt=Ot,Ue){case 1:var at=-1;break;case 2:at=250;break;case 5:at=1073741823;break;case 4:at=1e4;break;default:at=5e3}return at=Tt+at,Ue={id:C++,callback:ot,priorityLevel:Ue,startTime:Tt,expirationTime:at,sortIndex:-1},Tt>Ot?(Ue.sortIndex=Tt,t(b,Ue),n(S)===null&&Ue===n(b)&&(H?(B(Te),Te=-1):H=!0,bn(ce,Tt-Ot))):(Ue.sortIndex=at,t(S,Ue),Z||j||(Z=!0,cn(ue))),Ue},e.unstable_shouldYield=nt,e.unstable_wrapCallback=function(Ue){var ot=z;return function(){var Tt=z;z=ot;try{return Ue.apply(this,arguments)}finally{z=Tt}}}})(SC);wC.exports=SC;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=W.exports,zo=wC.exports;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kC=new Set,kf={};function Fu(e,t){mh(e,t),mh(e+"Capture",t)}function mh(e,t){for(kf[e]=t,e=0;e<t.length;e++)kC.add(t[e])}var Ss=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Hv=Object.prototype.hasOwnProperty,x4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_S={},vS={};function b4(e){return Hv.call(vS,e)?!0:Hv.call(_S,e)?!1:x4.test(e)?vS[e]=!0:(_S[e]=!0,!1)}function w4(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S4(e,t,n,o){if(t===null||typeof t=="undefined"||w4(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qi(e,t,n,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ti[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ti[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ti[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ti[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ti[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ti[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ti[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ti[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ti[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vx=/[\-:]([a-z])/g;function Nx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vx,Nx);ti[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vx,Nx);ti[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vx,Nx);ti[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ti[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});ti.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ti[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ux(e,t,n,o){var l=ti.hasOwnProperty(t)?ti[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S4(t,n,l,o)&&(n=null),o||l===null?b4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,o=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var zs=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dm=Symbol.for("react.element"),qc=Symbol.for("react.portal"),Zc=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),Xv=Symbol.for("react.profiler"),TC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),Gx=Symbol.for("react.forward_ref"),Kv=Symbol.for("react.suspense"),Yv=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),tl=Symbol.for("react.lazy"),PC=Symbol.for("react.offscreen"),xS=Symbol.iterator;function Fd(e){return e===null||typeof e!="object"?null:(e=xS&&e[xS]||e["@@iterator"],typeof e=="function"?e:null)}var cr=Object.assign,B_;function Yd(e){if(B_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B_=t&&t[1]||""}return`
`+B_+e}var V_=!1;function N_(e,t){if(!e||V_)return"";V_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var o=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){o=b}e.call(t.prototype)}else{try{throw Error()}catch(b){o=b}e()}}catch(b){if(b&&o&&typeof b.stack=="string"){for(var l=b.stack.split(`
`),h=o.stack.split(`
`),g=l.length-1,u=h.length-1;1<=g&&0<=u&&l[g]!==h[u];)u--;for(;1<=g&&0<=u;g--,u--)if(l[g]!==h[u]){if(g!==1||u!==1)do if(g--,u--,0>u||l[g]!==h[u]){var S=`
`+l[g].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=g&&0<=u);break}}}finally{V_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yd(e):""}function E4(e){switch(e.tag){case 5:return Yd(e.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return e=N_(e.type,!1),e;case 11:return e=N_(e.type.render,!1),e;case 1:return e=N_(e.type,!0),e;default:return""}}function Jv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zc:return"Fragment";case qc:return"Portal";case Xv:return"Profiler";case jx:return"StrictMode";case Kv:return"Suspense";case Yv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CC:return(e.displayName||"Context")+".Consumer";case TC:return(e._context.displayName||"Context")+".Provider";case Gx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wx:return t=e.displayName||null,t!==null?t:Jv(e.type)||"Memo";case tl:t=e._payload,e=e._init;try{return Jv(e(t))}catch{}}return null}function k4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jv(t);case 8:return t===jx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _l(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function IC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function T4(e){var t=IC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(g){o=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fm(e){e._valueTracker||(e._valueTracker=T4(e))}function MC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=IC(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function Sg(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qv(e,t){var n=t.checked;return cr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function bS(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=_l(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function AC(e,t){t=t.checked,t!=null&&Ux(e,"checked",t,!1)}function e1(e,t){AC(e,t);var n=_l(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?t1(e,t.type,n):t.hasOwnProperty("defaultValue")&&t1(e,t.type,_l(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function t1(e,t,n){(t!=="number"||Sg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jd=Array.isArray;function ah(e,t,n,o){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&o&&(e[n].defaultSelected=!0)}else{for(n=""+_l(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function n1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return cr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(Jd(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_l(n)}}function zC(e,t){var n=_l(t.value),o=_l(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function ES(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pm,RC=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pm=pm||document.createElement("div"),pm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C4=["Webkit","ms","Moz","O"];Object.keys(uf).forEach(function(e){C4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uf[t]=uf[e]})});function LC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||uf.hasOwnProperty(e)&&uf[e]?(""+t).trim():t+"px"}function FC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,l=LC(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,l):e[n]=l}}var P4=cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i1(e,t){if(t){if(P4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function o1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a1=null;function qx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s1=null,sh=null,lh=null;function kS(e){if(e=rp(e)){if(typeof s1!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=Ty(t),s1(e.stateNode,e.type,t))}}function OC(e){sh?lh?lh.push(e):lh=[e]:sh=e}function $C(){if(sh){var e=sh,t=lh;if(lh=sh=null,kS(e),t)for(e=0;e<t.length;e++)kS(t[e])}}function BC(e,t){return e(t)}function VC(){}var U_=!1;function NC(e,t,n){if(U_)return e(t,n);U_=!0;try{return BC(e,t,n)}finally{U_=!1,(sh!==null||lh!==null)&&(VC(),$C())}}function Cf(e,t){var n=e.stateNode;if(n===null)return null;var o=Ty(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var l1=!1;if(Ss)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){l1=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{l1=!1}function I4(e,t,n,o,l,h,g,u,S){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(C){this.onError(C)}}var cf=!1,Eg=null,kg=!1,u1=null,M4={onError:function(e){cf=!0,Eg=e}};function A4(e,t,n,o,l,h,g,u,S){cf=!1,Eg=null,I4.apply(M4,arguments)}function z4(e,t,n,o,l,h,g,u,S){if(A4.apply(this,arguments),cf){if(cf){var b=Eg;cf=!1,Eg=null}else throw Error(qe(198));kg||(kg=!0,u1=b)}}function Ou(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function UC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function TS(e){if(Ou(e)!==e)throw Error(qe(188))}function D4(e){var t=e.alternate;if(!t){if(t=Ou(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,o=t;;){var l=n.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){n=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===n)return TS(l),e;if(h===o)return TS(l),t;h=h.sibling}throw Error(qe(188))}if(n.return!==o.return)n=l,o=h;else{for(var g=!1,u=l.child;u;){if(u===n){g=!0,n=l,o=h;break}if(u===o){g=!0,o=l,n=h;break}u=u.sibling}if(!g){for(u=h.child;u;){if(u===n){g=!0,n=h,o=l;break}if(u===o){g=!0,o=h,n=l;break}u=u.sibling}if(!g)throw Error(qe(189))}}if(n.alternate!==o)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function jC(e){return e=D4(e),e!==null?GC(e):null}function GC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=GC(e);if(t!==null)return t;e=e.sibling}return null}var WC=zo.unstable_scheduleCallback,CS=zo.unstable_cancelCallback,R4=zo.unstable_shouldYield,L4=zo.unstable_requestPaint,Sr=zo.unstable_now,F4=zo.unstable_getCurrentPriorityLevel,Zx=zo.unstable_ImmediatePriority,qC=zo.unstable_UserBlockingPriority,Tg=zo.unstable_NormalPriority,O4=zo.unstable_LowPriority,ZC=zo.unstable_IdlePriority,wy=null,ja=null;function $4(e){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(wy,e,void 0,(e.current.flags&128)===128)}catch{}}var xa=Math.clz32?Math.clz32:N4,B4=Math.log,V4=Math.LN2;function N4(e){return e>>>=0,e===0?32:31-(B4(e)/V4|0)|0}var mm=64,gm=4194304;function Qd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cg(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,g=n&268435455;if(g!==0){var u=g&~l;u!==0?o=Qd(u):(h&=g,h!==0&&(o=Qd(h)))}else g=n&~l,g!==0?o=Qd(g):h!==0&&(o=Qd(h));if(o===0)return 0;if(t!==0&&t!==o&&(t&l)===0&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((o&4)!==0&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-xa(t),l=1<<n,o|=e[n],t&=~l;return o}function U4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j4(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-xa(h),u=1<<g,S=l[g];S===-1?((u&n)===0||(u&o)!==0)&&(l[g]=U4(u,t)):S<=t&&(e.expiredLanes|=u),h&=~u}}function c1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HC(){var e=mm;return mm<<=1,(mm&4194240)===0&&(mm=64),e}function j_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xa(t),e[t]=n}function G4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-xa(n),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,n&=~h}}function Hx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-xa(n),l=1<<o;l&t|e[o]&t&&(e[o]|=t),n&=~l}}var kn=0;function XC(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var KC,Xx,YC,JC,QC,h1=!1,ym=[],cl=null,hl=null,dl=null,Pf=new Map,If=new Map,rl=[],W4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PS(e,t){switch(e){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Pf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":If.delete(t.pointerId)}}function $d(e,t,n,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=rp(t),t!==null&&Xx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function q4(e,t,n,o,l){switch(t){case"focusin":return cl=$d(cl,e,t,n,o,l),!0;case"dragenter":return hl=$d(hl,e,t,n,o,l),!0;case"mouseover":return dl=$d(dl,e,t,n,o,l),!0;case"pointerover":var h=l.pointerId;return Pf.set(h,$d(Pf.get(h)||null,e,t,n,o,l)),!0;case"gotpointercapture":return h=l.pointerId,If.set(h,$d(If.get(h)||null,e,t,n,o,l)),!0}return!1}function eP(e){var t=_u(e.target);if(t!==null){var n=Ou(t);if(n!==null){if(t=n.tag,t===13){if(t=UC(n),t!==null){e.blockedOn=t,QC(e.priority,function(){YC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Km(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=d1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);a1=o,n.target.dispatchEvent(o),a1=null}else return t=rp(n),t!==null&&Xx(t),e.blockedOn=n,!1;t.shift()}return!0}function IS(e,t,n){Km(e)&&n.delete(t)}function Z4(){h1=!1,cl!==null&&Km(cl)&&(cl=null),hl!==null&&Km(hl)&&(hl=null),dl!==null&&Km(dl)&&(dl=null),Pf.forEach(IS),If.forEach(IS)}function Bd(e,t){e.blockedOn===t&&(e.blockedOn=null,h1||(h1=!0,zo.unstable_scheduleCallback(zo.unstable_NormalPriority,Z4)))}function Mf(e){function t(l){return Bd(l,e)}if(0<ym.length){Bd(ym[0],e);for(var n=1;n<ym.length;n++){var o=ym[n];o.blockedOn===e&&(o.blockedOn=null)}}for(cl!==null&&Bd(cl,e),hl!==null&&Bd(hl,e),dl!==null&&Bd(dl,e),Pf.forEach(t),If.forEach(t),n=0;n<rl.length;n++)o=rl[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<rl.length&&(n=rl[0],n.blockedOn===null);)eP(n),n.blockedOn===null&&rl.shift()}var uh=zs.ReactCurrentBatchConfig,Pg=!0;function H4(e,t,n,o){var l=kn,h=uh.transition;uh.transition=null;try{kn=1,Kx(e,t,n,o)}finally{kn=l,uh.transition=h}}function X4(e,t,n,o){var l=kn,h=uh.transition;uh.transition=null;try{kn=4,Kx(e,t,n,o)}finally{kn=l,uh.transition=h}}function Kx(e,t,n,o){if(Pg){var l=d1(e,t,n,o);if(l===null)Q_(e,t,o,Ig,n),PS(e,o);else if(q4(l,e,t,n,o))o.stopPropagation();else if(PS(e,o),t&4&&-1<W4.indexOf(e)){for(;l!==null;){var h=rp(l);if(h!==null&&KC(h),h=d1(e,t,n,o),h===null&&Q_(e,t,o,Ig,n),h===l)break;l=h}l!==null&&o.stopPropagation()}else Q_(e,t,o,null,n)}}var Ig=null;function d1(e,t,n,o){if(Ig=null,e=qx(o),e=_u(e),e!==null)if(t=Ou(e),t===null)e=null;else if(n=t.tag,n===13){if(e=UC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ig=e,null}function tP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F4()){case Zx:return 1;case qC:return 4;case Tg:case O4:return 16;case ZC:return 536870912;default:return 16}default:return 16}}var al=null,Yx=null,Ym=null;function nP(){if(Ym)return Ym;var e,t=Yx,n=t.length,o,l="value"in al?al.value:al.textContent,h=l.length;for(e=0;e<n&&t[e]===l[e];e++);var g=n-e;for(o=1;o<=g&&t[n-o]===l[h-o];o++);return Ym=l.slice(e,1<o?1-o:void 0)}function Jm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _m(){return!0}function MS(){return!1}function Fo(e){function t(n,o,l,h,g){this._reactName=n,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?_m:MS,this.isPropagationStopped=MS,this}return cr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),t}var Mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=Fo(Mh),np=cr({},Mh,{view:0,detail:0}),K4=Fo(np),G_,W_,Vd,Sy=cr({},np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vd&&(Vd&&e.type==="mousemove"?(G_=e.screenX-Vd.screenX,W_=e.screenY-Vd.screenY):W_=G_=0,Vd=e),G_)},movementY:function(e){return"movementY"in e?e.movementY:W_}}),AS=Fo(Sy),Y4=cr({},Sy,{dataTransfer:0}),J4=Fo(Y4),Q4=cr({},np,{relatedTarget:0}),q_=Fo(Q4),eD=cr({},Mh,{animationName:0,elapsedTime:0,pseudoElement:0}),tD=Fo(eD),nD=cr({},Mh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rD=Fo(nD),iD=cr({},Mh,{data:0}),zS=Fo(iD),oD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sD[e])?!!t[e]:!1}function Qx(){return lD}var uD=cr({},np,{key:function(e){if(e.key){var t=oD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qx,charCode:function(e){return e.type==="keypress"?Jm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cD=Fo(uD),hD=cr({},Sy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DS=Fo(hD),dD=cr({},np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qx}),fD=Fo(dD),pD=cr({},Mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),mD=Fo(pD),gD=cr({},Sy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yD=Fo(gD),_D=[9,13,27,32],eb=Ss&&"CompositionEvent"in window,hf=null;Ss&&"documentMode"in document&&(hf=document.documentMode);var vD=Ss&&"TextEvent"in window&&!hf,rP=Ss&&(!eb||hf&&8<hf&&11>=hf),RS=String.fromCharCode(32),LS=!1;function iP(e,t){switch(e){case"keyup":return _D.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hc=!1;function xD(e,t){switch(e){case"compositionend":return oP(t);case"keypress":return t.which!==32?null:(LS=!0,RS);case"textInput":return e=t.data,e===RS&&LS?null:e;default:return null}}function bD(e,t){if(Hc)return e==="compositionend"||!eb&&iP(e,t)?(e=nP(),Ym=Yx=al=null,Hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rP&&t.locale!=="ko"?null:t.data;default:return null}}var wD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wD[e.type]:t==="textarea"}function aP(e,t,n,o){OC(o),t=Mg(t,"onChange"),0<t.length&&(n=new Jx("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var df=null,Af=null;function SD(e){yP(e,0)}function Ey(e){var t=Yc(e);if(MC(t))return e}function ED(e,t){if(e==="change")return t}var sP=!1;if(Ss){var Z_;if(Ss){var H_="oninput"in document;if(!H_){var OS=document.createElement("div");OS.setAttribute("oninput","return;"),H_=typeof OS.oninput=="function"}Z_=H_}else Z_=!1;sP=Z_&&(!document.documentMode||9<document.documentMode)}function $S(){df&&(df.detachEvent("onpropertychange",lP),Af=df=null)}function lP(e){if(e.propertyName==="value"&&Ey(Af)){var t=[];aP(t,Af,e,qx(e)),NC(SD,t)}}function kD(e,t,n){e==="focusin"?($S(),df=t,Af=n,df.attachEvent("onpropertychange",lP)):e==="focusout"&&$S()}function TD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ey(Af)}function CD(e,t){if(e==="click")return Ey(t)}function PD(e,t){if(e==="input"||e==="change")return Ey(t)}function ID(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ba=typeof Object.is=="function"?Object.is:ID;function zf(e,t){if(ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var l=n[o];if(!Hv.call(t,l)||!ba(e[l],t[l]))return!1}return!0}function BS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VS(e,t){var n=BS(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BS(n)}}function uP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cP(){for(var e=window,t=Sg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sg(e.document)}return t}function tb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MD(e){var t=cP(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&uP(n.ownerDocument.documentElement,n)){if(o!==null&&tb(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=VS(n,h);var g=VS(n,o);l&&g&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AD=Ss&&"documentMode"in document&&11>=document.documentMode,Xc=null,f1=null,ff=null,p1=!1;function NS(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p1||Xc==null||Xc!==Sg(o)||(o=Xc,"selectionStart"in o&&tb(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ff&&zf(ff,o)||(ff=o,o=Mg(f1,"onSelect"),0<o.length&&(t=new Jx("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Xc)))}function vm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kc={animationend:vm("Animation","AnimationEnd"),animationiteration:vm("Animation","AnimationIteration"),animationstart:vm("Animation","AnimationStart"),transitionend:vm("Transition","TransitionEnd")},X_={},hP={};Ss&&(hP=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function ky(e){if(X_[e])return X_[e];if(!Kc[e])return e;var t=Kc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hP)return X_[e]=t[n];return e}var dP=ky("animationend"),fP=ky("animationiteration"),pP=ky("animationstart"),mP=ky("transitionend"),gP=new Map,US="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(e,t){gP.set(e,t),Fu(t,[e])}for(var K_=0;K_<US.length;K_++){var Y_=US[K_],zD=Y_.toLowerCase(),DD=Y_[0].toUpperCase()+Y_.slice(1);Sl(zD,"on"+DD)}Sl(dP,"onAnimationEnd");Sl(fP,"onAnimationIteration");Sl(pP,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(mP,"onTransitionEnd");mh("onMouseEnter",["mouseout","mouseover"]);mh("onMouseLeave",["mouseout","mouseover"]);mh("onPointerEnter",["pointerout","pointerover"]);mh("onPointerLeave",["pointerout","pointerover"]);Fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ef));function jS(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,z4(o,t,void 0,e),e.currentTarget=null}function yP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var g=o.length-1;0<=g;g--){var u=o[g],S=u.instance,b=u.currentTarget;if(u=u.listener,S!==h&&l.isPropagationStopped())break e;jS(l,u,b),h=S}else for(g=0;g<o.length;g++){if(u=o[g],S=u.instance,b=u.currentTarget,u=u.listener,S!==h&&l.isPropagationStopped())break e;jS(l,u,b),h=S}}}if(kg)throw e=u1,kg=!1,u1=null,e}function Gn(e,t){var n=t[v1];n===void 0&&(n=t[v1]=new Set);var o=e+"__bubble";n.has(o)||(_P(t,e,2,!1),n.add(o))}function J_(e,t,n){var o=0;t&&(o|=4),_P(n,e,o,t)}var xm="_reactListening"+Math.random().toString(36).slice(2);function Df(e){if(!e[xm]){e[xm]=!0,kC.forEach(function(n){n!=="selectionchange"&&(RD.has(n)||J_(n,!1,e),J_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xm]||(t[xm]=!0,J_("selectionchange",!1,t))}}function _P(e,t,n,o){switch(tP(t)){case 1:var l=H4;break;case 4:l=X4;break;default:l=Kx}n=l.bind(null,t,n,e),l=void 0,!l1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Q_(e,t,n,o,l){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var u=o.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(g===4)for(g=o.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===l||S.nodeType===8&&S.parentNode===l))return;g=g.return}for(;u!==null;){if(g=_u(u),g===null)return;if(S=g.tag,S===5||S===6){o=h=g;continue e}u=u.parentNode}}o=o.return}NC(function(){var b=h,C=qx(n),A=[];e:{var z=gP.get(e);if(z!==void 0){var j=Jx,Z=e;switch(e){case"keypress":if(Jm(n)===0)break e;case"keydown":case"keyup":j=cD;break;case"focusin":Z="focus",j=q_;break;case"focusout":Z="blur",j=q_;break;case"beforeblur":case"afterblur":j=q_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=AS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=J4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=fD;break;case dP:case fP:case pP:j=tD;break;case mP:j=mD;break;case"scroll":j=K4;break;case"wheel":j=yD;break;case"copy":case"cut":case"paste":j=rD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=DS}var H=(t&4)!==0,de=!H&&e==="scroll",B=H?z!==null?z+"Capture":null:z;H=[];for(var N=b,K;N!==null;){K=N;var ce=K.stateNode;if(K.tag===5&&ce!==null&&(K=ce,B!==null&&(ce=Cf(N,B),ce!=null&&H.push(Rf(N,ce,K)))),de)break;N=N.return}0<H.length&&(z=new j(z,Z,null,n,C),A.push({event:z,listeners:H}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&n!==a1&&(Z=n.relatedTarget||n.fromElement)&&(_u(Z)||Z[Es]))break e;if((j||z)&&(z=C.window===C?C:(z=C.ownerDocument)?z.defaultView||z.parentWindow:window,j?(Z=n.relatedTarget||n.toElement,j=b,Z=Z?_u(Z):null,Z!==null&&(de=Ou(Z),Z!==de||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(j=null,Z=b),j!==Z)){if(H=AS,ce="onMouseLeave",B="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(H=DS,ce="onPointerLeave",B="onPointerEnter",N="pointer"),de=j==null?z:Yc(j),K=Z==null?z:Yc(Z),z=new H(ce,N+"leave",j,n,C),z.target=de,z.relatedTarget=K,ce=null,_u(C)===b&&(H=new H(B,N+"enter",Z,n,C),H.target=K,H.relatedTarget=de,ce=H),de=ce,j&&Z)t:{for(H=j,B=Z,N=0,K=H;K;K=Ic(K))N++;for(K=0,ce=B;ce;ce=Ic(ce))K++;for(;0<N-K;)H=Ic(H),N--;for(;0<K-N;)B=Ic(B),K--;for(;N--;){if(H===B||B!==null&&H===B.alternate)break t;H=Ic(H),B=Ic(B)}H=null}else H=null;j!==null&&GS(A,z,j,H,!1),Z!==null&&de!==null&&GS(A,de,Z,H,!0)}}e:{if(z=b?Yc(b):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var ue=ED;else if(FS(z))if(sP)ue=PD;else{ue=TD;var ye=kD}else(j=z.nodeName)&&j.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ue=CD);if(ue&&(ue=ue(e,b))){aP(A,ue,n,C);break e}ye&&ye(e,z,b),e==="focusout"&&(ye=z._wrapperState)&&ye.controlled&&z.type==="number"&&t1(z,"number",z.value)}switch(ye=b?Yc(b):window,e){case"focusin":(FS(ye)||ye.contentEditable==="true")&&(Xc=ye,f1=b,ff=null);break;case"focusout":ff=f1=Xc=null;break;case"mousedown":p1=!0;break;case"contextmenu":case"mouseup":case"dragend":p1=!1,NS(A,n,C);break;case"selectionchange":if(AD)break;case"keydown":case"keyup":NS(A,n,C)}var me;if(eb)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Hc?iP(e,n)&&(Te="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Te="onCompositionStart");Te&&(rP&&n.locale!=="ko"&&(Hc||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Hc&&(me=nP()):(al=C,Yx="value"in al?al.value:al.textContent,Hc=!0)),ye=Mg(b,Te),0<ye.length&&(Te=new zS(Te,e,null,n,C),A.push({event:Te,listeners:ye}),me?Te.data=me:(me=oP(n),me!==null&&(Te.data=me)))),(me=vD?xD(e,n):bD(e,n))&&(b=Mg(b,"onBeforeInput"),0<b.length&&(C=new zS("onBeforeInput","beforeinput",null,n,C),A.push({event:C,listeners:b}),C.data=me))}yP(A,t)})}function Rf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mg(e,t){for(var n=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Cf(e,n),h!=null&&o.unshift(Rf(e,h,l)),h=Cf(e,t),h!=null&&o.push(Rf(e,h,l))),e=e.return}return o}function Ic(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GS(e,t,n,o,l){for(var h=t._reactName,g=[];n!==null&&n!==o;){var u=n,S=u.alternate,b=u.stateNode;if(S!==null&&S===o)break;u.tag===5&&b!==null&&(u=b,l?(S=Cf(n,h),S!=null&&g.unshift(Rf(n,S,u))):l||(S=Cf(n,h),S!=null&&g.push(Rf(n,S,u)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var LD=/\r\n?/g,FD=/\u0000|\uFFFD/g;function WS(e){return(typeof e=="string"?e:""+e).replace(LD,`
`).replace(FD,"")}function bm(e,t,n){if(t=WS(t),WS(e)!==t&&n)throw Error(qe(425))}function Ag(){}var m1=null,g1=null;function y1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _1=typeof setTimeout=="function"?setTimeout:void 0,OD=typeof clearTimeout=="function"?clearTimeout:void 0,qS=typeof Promise=="function"?Promise:void 0,$D=typeof queueMicrotask=="function"?queueMicrotask:typeof qS!="undefined"?function(e){return qS.resolve(null).then(e).catch(BD)}:_1;function BD(e){setTimeout(function(){throw e})}function ev(e,t){var n=t,o=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(o===0){e.removeChild(l),Mf(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=l}while(n);Mf(t)}function _s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ZS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ah=Math.random().toString(36).slice(2),Va="__reactFiber$"+Ah,Lf="__reactProps$"+Ah,Es="__reactContainer$"+Ah,v1="__reactEvents$"+Ah,VD="__reactListeners$"+Ah,ND="__reactHandles$"+Ah;function _u(e){var t=e[Va];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Es]||n[Va]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ZS(e);e!==null;){if(n=e[Va])return n;e=ZS(e)}return t}e=n,n=e.parentNode}return null}function rp(e){return e=e[Va]||e[Es],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function Ty(e){return e[Lf]||null}var x1=[],Jc=-1;function El(e){return{current:e}}function qn(e){0>Jc||(e.current=x1[Jc],x1[Jc]=null,Jc--)}function Vn(e,t){Jc++,x1[Jc]=e.current,e.current=t}var vl={},Ei=El(vl),ao=El(!1),Iu=vl;function gh(e,t){var n=e.type.contextTypes;if(!n)return vl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in n)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function so(e){return e=e.childContextTypes,e!=null}function zg(){qn(ao),qn(Ei)}function HS(e,t,n){if(Ei.current!==vl)throw Error(qe(168));Vn(Ei,t),Vn(ao,n)}function vP(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(qe(108,k4(e)||"Unknown",l));return cr({},n,o)}function Dg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vl,Iu=Ei.current,Vn(Ei,e),Vn(ao,ao.current),!0}function XS(e,t,n){var o=e.stateNode;if(!o)throw Error(qe(169));n?(e=vP(e,t,Iu),o.__reactInternalMemoizedMergedChildContext=e,qn(ao),qn(Ei),Vn(Ei,e)):qn(ao),Vn(ao,n)}var ys=null,Cy=!1,tv=!1;function xP(e){ys===null?ys=[e]:ys.push(e)}function UD(e){Cy=!0,xP(e)}function kl(){if(!tv&&ys!==null){tv=!0;var e=0,t=kn;try{var n=ys;for(kn=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}ys=null,Cy=!1}catch(l){throw ys!==null&&(ys=ys.slice(e+1)),WC(Zx,kl),l}finally{kn=t,tv=!1}}return null}var jD=zs.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){t=cr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Rg=El(null),Lg=null,Qc=null,nb=null;function rb(){nb=Qc=Lg=null}function ib(e){var t=Rg.current;qn(Rg),e._currentValue=t}function b1(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function ch(e,t){Lg=e,nb=Qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(oo=!0),e.firstContext=null)}function ta(e){var t=e._currentValue;if(nb!==e)if(e={context:e,memoizedValue:t,next:null},Qc===null){if(Lg===null)throw Error(qe(308));Qc=e,Lg.dependencies={lanes:0,firstContext:e}}else Qc=Qc.next=e;return t}var _a=null,nl=!1;function ob(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fl(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,cI(e)?(e=n.interleaved,e===null?(t.next=t,_a===null?_a=[n]:_a.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function Qm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Hx(e,n)}}function KS(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var l=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?l=h=g:h=h.next=g,n=n.next}while(n!==null);h===null?l=h=t:h=h.next=t}else l=h=t;n={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fg(e,t,n,o){var l=e.updateQueue;nl=!1;var h=l.firstBaseUpdate,g=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var S=u,b=S.next;S.next=null,g===null?h=b:g.next=b,g=S;var C=e.alternate;C!==null&&(C=C.updateQueue,u=C.lastBaseUpdate,u!==g&&(u===null?C.firstBaseUpdate=b:u.next=b,C.lastBaseUpdate=S))}if(h!==null){var A=l.baseState;g=0,C=b=S=null,u=h;do{var z=u.lane,j=u.eventTime;if((o&z)===z){C!==null&&(C=C.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var Z=e,H=u;switch(z=t,j=n,H.tag){case 1:if(Z=H.payload,typeof Z=="function"){A=Z.call(j,A,z);break e}A=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=H.payload,z=typeof Z=="function"?Z.call(j,A,z):Z,z==null)break e;A=cr({},A,z);break e;case 2:nl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,z=l.effects,z===null?l.effects=[u]:z.push(u))}else j={eventTime:j,lane:z,tag:u.tag,payload:u.payload,callback:u.callback,next:null},C===null?(b=C=j,S=A):C=C.next=j,g|=z;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;z=u,u=z.next,z.next=null,l.lastBaseUpdate=z,l.shared.pending=null}}while(1);if(C===null&&(S=A),l.baseState=S,l.firstBaseUpdate=b,l.lastBaseUpdate=C,t=l.shared.interleaved,t!==null){l=t;do g|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);zu|=g,e.lanes=g,e.memoizedState=A}}function YS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=n,typeof l!="function")throw Error(qe(191,l));l.call(o)}}}var wP=new EC.Component().refs;function w1(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:cr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Py={isMounted:function(e){return(e=e._reactInternals)?Ou(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Ui(),l=ml(e),h=bs(o,l);h.payload=t,n!=null&&(h.callback=n),fl(e,h),t=Qo(e,l,o),t!==null&&Qm(t,e,l)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Ui(),l=ml(e),h=bs(o,l);h.tag=1,h.payload=t,n!=null&&(h.callback=n),fl(e,h),t=Qo(e,l,o),t!==null&&Qm(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ui(),o=ml(e),l=bs(n,o);l.tag=2,t!=null&&(l.callback=t),fl(e,l),t=Qo(e,o,n),t!==null&&Qm(t,e,o)}};function JS(e,t,n,o,l,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,g):t.prototype&&t.prototype.isPureReactComponent?!zf(n,o)||!zf(l,h):!0}function SP(e,t,n){var o=!1,l=vl,h=t.contextType;return typeof h=="object"&&h!==null?h=ta(h):(l=so(t)?Iu:Ei.current,o=t.contextTypes,h=(o=o!=null)?gh(e,l):vl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Py,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function QS(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Py.enqueueReplaceState(t,t.state,null)}function S1(e,t,n,o){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=wP,ob(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=ta(h):(h=so(t)?Iu:Ei.current,l.context=gh(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(w1(e,t,h,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Py.enqueueReplaceState(l,l.state,null),Fg(e,n,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}var eh=[],th=0,Og=null,$g=0,Xo=[],Ko=0,Mu=null,vs=1,xs="";function cu(e,t){eh[th++]=$g,eh[th++]=Og,Og=e,$g=t}function EP(e,t,n){Xo[Ko++]=vs,Xo[Ko++]=xs,Xo[Ko++]=Mu,Mu=e;var o=vs;e=xs;var l=32-xa(o)-1;o&=~(1<<l),n+=1;var h=32-xa(t)+l;if(30<h){var g=l-l%5;h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,vs=1<<32-xa(t)+l|n<<l|o,xs=h+e}else vs=1<<h|n<<l|o,xs=e}function ab(e){e.return!==null&&(cu(e,1),EP(e,1,0))}function sb(e){for(;e===Og;)Og=eh[--th],eh[th]=null,$g=eh[--th],eh[th]=null;for(;e===Mu;)Mu=Xo[--Ko],Xo[Ko]=null,xs=Xo[--Ko],Xo[Ko]=null,vs=Xo[--Ko],Xo[Ko]=null}var Io=null,io=null,Jn=!1,ya=null;function kP(e,t){var n=Yo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function eE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Io=e,io=_s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Io=e,io=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mu!==null?{id:vs,overflow:xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Io=e,io=null,!0):!1;default:return!1}}function E1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function k1(e){if(Jn){var t=io;if(t){var n=t;if(!eE(e,t)){if(E1(e))throw Error(qe(418));t=_s(n.nextSibling);var o=Io;t&&eE(e,t)?kP(o,n):(e.flags=e.flags&-4097|2,Jn=!1,Io=e)}}else{if(E1(e))throw Error(qe(418));e.flags=e.flags&-4097|2,Jn=!1,Io=e}}}function tE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Io=e}function Nd(e){if(e!==Io)return!1;if(!Jn)return tE(e),Jn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!y1(e.type,e.memoizedProps)),t&&(t=io)){if(E1(e)){for(e=io;e;)e=_s(e.nextSibling);throw Error(qe(418))}for(;t;)kP(e,t),t=_s(t.nextSibling)}if(tE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){io=_s(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}io=null}}else io=Io?_s(e.stateNode.nextSibling):null;return!0}function yh(){io=Io=null,Jn=!1}function lb(e){ya===null?ya=[e]:ya.push(e)}function Ud(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var o=n.stateNode}if(!o)throw Error(qe(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(g){var u=l.refs;u===wP&&(u=l.refs={}),g===null?delete u[h]:u[h]=g},t._stringRef=h,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function wm(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nE(e){var t=e._init;return t(e._payload)}function TP(e){function t(B,N){if(e){var K=B.deletions;K===null?(B.deletions=[N],B.flags|=16):K.push(N)}}function n(B,N){if(!e)return null;for(;N!==null;)t(B,N),N=N.sibling;return null}function o(B,N){for(B=new Map;N!==null;)N.key!==null?B.set(N.key,N):B.set(N.index,N),N=N.sibling;return B}function l(B,N){return B=xl(B,N),B.index=0,B.sibling=null,B}function h(B,N,K){return B.index=K,e?(K=B.alternate,K!==null?(K=K.index,K<N?(B.flags|=2,N):K):(B.flags|=2,N)):(B.flags|=1048576,N)}function g(B){return e&&B.alternate===null&&(B.flags|=2),B}function u(B,N,K,ce){return N===null||N.tag!==6?(N=sv(K,B.mode,ce),N.return=B,N):(N=l(N,K),N.return=B,N)}function S(B,N,K,ce){var ue=K.type;return ue===Zc?C(B,N,K.props.children,ce,K.key):N!==null&&(N.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===tl&&nE(ue)===N.type)?(ce=l(N,K.props),ce.ref=Ud(B,N,K),ce.return=B,ce):(ce=ig(K.type,K.key,K.props,null,B.mode,ce),ce.ref=Ud(B,N,K),ce.return=B,ce)}function b(B,N,K,ce){return N===null||N.tag!==4||N.stateNode.containerInfo!==K.containerInfo||N.stateNode.implementation!==K.implementation?(N=lv(K,B.mode,ce),N.return=B,N):(N=l(N,K.children||[]),N.return=B,N)}function C(B,N,K,ce,ue){return N===null||N.tag!==7?(N=Su(K,B.mode,ce,ue),N.return=B,N):(N=l(N,K),N.return=B,N)}function A(B,N,K){if(typeof N=="string"&&N!==""||typeof N=="number")return N=sv(""+N,B.mode,K),N.return=B,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case dm:return K=ig(N.type,N.key,N.props,null,B.mode,K),K.ref=Ud(B,null,N),K.return=B,K;case qc:return N=lv(N,B.mode,K),N.return=B,N;case tl:var ce=N._init;return A(B,ce(N._payload),K)}if(Jd(N)||Fd(N))return N=Su(N,B.mode,K,null),N.return=B,N;wm(B,N)}return null}function z(B,N,K,ce){var ue=N!==null?N.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ue!==null?null:u(B,N,""+K,ce);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case dm:return K.key===ue?S(B,N,K,ce):null;case qc:return K.key===ue?b(B,N,K,ce):null;case tl:return ue=K._init,z(B,N,ue(K._payload),ce)}if(Jd(K)||Fd(K))return ue!==null?null:C(B,N,K,ce,null);wm(B,K)}return null}function j(B,N,K,ce,ue){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return B=B.get(K)||null,u(N,B,""+ce,ue);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case dm:return B=B.get(ce.key===null?K:ce.key)||null,S(N,B,ce,ue);case qc:return B=B.get(ce.key===null?K:ce.key)||null,b(N,B,ce,ue);case tl:var ye=ce._init;return j(B,N,K,ye(ce._payload),ue)}if(Jd(ce)||Fd(ce))return B=B.get(K)||null,C(N,B,ce,ue,null);wm(N,ce)}return null}function Z(B,N,K,ce){for(var ue=null,ye=null,me=N,Te=N=0,Ne=null;me!==null&&Te<K.length;Te++){me.index>Te?(Ne=me,me=null):Ne=me.sibling;var we=z(B,me,K[Te],ce);if(we===null){me===null&&(me=Ne);break}e&&me&&we.alternate===null&&t(B,me),N=h(we,N,Te),ye===null?ue=we:ye.sibling=we,ye=we,me=Ne}if(Te===K.length)return n(B,me),Jn&&cu(B,Te),ue;if(me===null){for(;Te<K.length;Te++)me=A(B,K[Te],ce),me!==null&&(N=h(me,N,Te),ye===null?ue=me:ye.sibling=me,ye=me);return Jn&&cu(B,Te),ue}for(me=o(B,me);Te<K.length;Te++)Ne=j(me,B,Te,K[Te],ce),Ne!==null&&(e&&Ne.alternate!==null&&me.delete(Ne.key===null?Te:Ne.key),N=h(Ne,N,Te),ye===null?ue=Ne:ye.sibling=Ne,ye=Ne);return e&&me.forEach(function(nt){return t(B,nt)}),Jn&&cu(B,Te),ue}function H(B,N,K,ce){var ue=Fd(K);if(typeof ue!="function")throw Error(qe(150));if(K=ue.call(K),K==null)throw Error(qe(151));for(var ye=ue=null,me=N,Te=N=0,Ne=null,we=K.next();me!==null&&!we.done;Te++,we=K.next()){me.index>Te?(Ne=me,me=null):Ne=me.sibling;var nt=z(B,me,we.value,ce);if(nt===null){me===null&&(me=Ne);break}e&&me&&nt.alternate===null&&t(B,me),N=h(nt,N,Te),ye===null?ue=nt:ye.sibling=nt,ye=nt,me=Ne}if(we.done)return n(B,me),Jn&&cu(B,Te),ue;if(me===null){for(;!we.done;Te++,we=K.next())we=A(B,we.value,ce),we!==null&&(N=h(we,N,Te),ye===null?ue=we:ye.sibling=we,ye=we);return Jn&&cu(B,Te),ue}for(me=o(B,me);!we.done;Te++,we=K.next())we=j(me,B,Te,we.value,ce),we!==null&&(e&&we.alternate!==null&&me.delete(we.key===null?Te:we.key),N=h(we,N,Te),ye===null?ue=we:ye.sibling=we,ye=we);return e&&me.forEach(function(wt){return t(B,wt)}),Jn&&cu(B,Te),ue}function de(B,N,K,ce){if(typeof K=="object"&&K!==null&&K.type===Zc&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case dm:e:{for(var ue=K.key,ye=N;ye!==null;){if(ye.key===ue){if(ue=K.type,ue===Zc){if(ye.tag===7){n(B,ye.sibling),N=l(ye,K.props.children),N.return=B,B=N;break e}}else if(ye.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===tl&&nE(ue)===ye.type){n(B,ye.sibling),N=l(ye,K.props),N.ref=Ud(B,ye,K),N.return=B,B=N;break e}n(B,ye);break}else t(B,ye);ye=ye.sibling}K.type===Zc?(N=Su(K.props.children,B.mode,ce,K.key),N.return=B,B=N):(ce=ig(K.type,K.key,K.props,null,B.mode,ce),ce.ref=Ud(B,N,K),ce.return=B,B=ce)}return g(B);case qc:e:{for(ye=K.key;N!==null;){if(N.key===ye)if(N.tag===4&&N.stateNode.containerInfo===K.containerInfo&&N.stateNode.implementation===K.implementation){n(B,N.sibling),N=l(N,K.children||[]),N.return=B,B=N;break e}else{n(B,N);break}else t(B,N);N=N.sibling}N=lv(K,B.mode,ce),N.return=B,B=N}return g(B);case tl:return ye=K._init,de(B,N,ye(K._payload),ce)}if(Jd(K))return Z(B,N,K,ce);if(Fd(K))return H(B,N,K,ce);wm(B,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,N!==null&&N.tag===6?(n(B,N.sibling),N=l(N,K),N.return=B,B=N):(n(B,N),N=sv(K,B.mode,ce),N.return=B,B=N),g(B)):n(B,N)}return de}var _h=TP(!0),CP=TP(!1),ip={},Ga=El(ip),Ff=El(ip),Of=El(ip);function vu(e){if(e===ip)throw Error(qe(174));return e}function ub(e,t){switch(Vn(Of,t),Vn(Ff,e),Vn(Ga,ip),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:r1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=r1(t,e)}qn(Ga),Vn(Ga,t)}function vh(){qn(Ga),qn(Ff),qn(Of)}function PP(e){vu(Of.current);var t=vu(Ga.current),n=r1(t,e.type);t!==n&&(Vn(Ff,e),Vn(Ga,n))}function cb(e){Ff.current===e&&(qn(Ga),qn(Ff))}var lr=El(0);function Bg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nv=[];function hb(){for(var e=0;e<nv.length;e++)nv[e]._workInProgressVersionPrimary=null;nv.length=0}var eg=zs.ReactCurrentDispatcher,rv=zs.ReactCurrentBatchConfig,Au=0,ur=null,zr=null,qr=null,Vg=!1,pf=!1,$f=0,GD=0;function vi(){throw Error(qe(321))}function db(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ba(e[n],t[n]))return!1;return!0}function fb(e,t,n,o,l,h){if(Au=h,ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eg.current=e===null||e.memoizedState===null?HD:XD,e=n(o,l),pf){h=0;do{if(pf=!1,$f=0,25<=h)throw Error(qe(301));h+=1,qr=zr=null,t.updateQueue=null,eg.current=KD,e=n(o,l)}while(pf)}if(eg.current=Ng,t=zr!==null&&zr.next!==null,Au=0,qr=zr=ur=null,Vg=!1,t)throw Error(qe(300));return e}function pb(){var e=$f!==0;return $f=0,e}function Oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?ur.memoizedState=qr=e:qr=qr.next=e,qr}function na(){if(zr===null){var e=ur.alternate;e=e!==null?e.memoizedState:null}else e=zr.next;var t=qr===null?ur.memoizedState:qr.next;if(t!==null)qr=t,zr=e;else{if(e===null)throw Error(qe(310));zr=e,e={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},qr===null?ur.memoizedState=qr=e:qr=qr.next=e}return qr}function Bf(e,t){return typeof t=="function"?t(e):t}function iv(e){var t=na(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var o=zr,l=o.baseQueue,h=n.pending;if(h!==null){if(l!==null){var g=l.next;l.next=h.next,h.next=g}o.baseQueue=l=h,n.pending=null}if(l!==null){h=l.next,o=o.baseState;var u=g=null,S=null,b=h;do{var C=b.lane;if((Au&C)===C)S!==null&&(S=S.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),o=b.hasEagerState?b.eagerState:e(o,b.action);else{var A={lane:C,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};S===null?(u=S=A,g=o):S=S.next=A,ur.lanes|=C,zu|=C}b=b.next}while(b!==null&&b!==h);S===null?g=o:S.next=u,ba(o,t.memoizedState)||(oo=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=S,n.lastRenderedState=o}if(e=n.interleaved,e!==null){l=e;do h=l.lane,ur.lanes|=h,zu|=h,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ov(e){var t=na(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var o=n.dispatch,l=n.pending,h=t.memoizedState;if(l!==null){n.pending=null;var g=l=l.next;do h=e(h,g.action),g=g.next;while(g!==l);ba(h,t.memoizedState)||(oo=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,o]}function IP(){}function MP(e,t){var n=ur,o=na(),l=t(),h=!ba(o.memoizedState,l);if(h&&(o.memoizedState=l,oo=!0),o=o.queue,mb(DP.bind(null,n,o,e),[e]),o.getSnapshot!==t||h||qr!==null&&qr.memoizedState.tag&1){if(n.flags|=2048,Vf(9,zP.bind(null,n,o,l,t),void 0,null),Lr===null)throw Error(qe(349));(Au&30)!==0||AP(n,t,l)}return l}function AP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zP(e,t,n,o){t.value=n,t.getSnapshot=o,RP(t)&&Qo(e,1,-1)}function DP(e,t,n){return n(function(){RP(t)&&Qo(e,1,-1)})}function RP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ba(e,n)}catch{return!0}}function rE(e){var t=Oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bf,lastRenderedState:e},t.queue=e,e=e.dispatch=ZD.bind(null,ur,e),[t.memoizedState,e]}function Vf(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=ur.updateQueue,t===null?(t={lastEffect:null,stores:null},ur.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function LP(){return na().memoizedState}function tg(e,t,n,o){var l=Oa();ur.flags|=e,l.memoizedState=Vf(1|t,n,void 0,o===void 0?null:o)}function Iy(e,t,n,o){var l=na();o=o===void 0?null:o;var h=void 0;if(zr!==null){var g=zr.memoizedState;if(h=g.destroy,o!==null&&db(o,g.deps)){l.memoizedState=Vf(t,n,h,o);return}}ur.flags|=e,l.memoizedState=Vf(1|t,n,h,o)}function iE(e,t){return tg(8390656,8,e,t)}function mb(e,t){return Iy(2048,8,e,t)}function FP(e,t){return Iy(4,2,e,t)}function OP(e,t){return Iy(4,4,e,t)}function $P(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BP(e,t,n){return n=n!=null?n.concat([e]):null,Iy(4,4,$P.bind(null,t,e),n)}function gb(){}function VP(e,t){var n=na();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&db(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function NP(e,t){var n=na();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&db(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function UP(e,t,n){return(Au&21)===0?(e.baseState&&(e.baseState=!1,oo=!0),e.memoizedState=n):(ba(n,t)||(n=HC(),ur.lanes|=n,zu|=n,e.baseState=!0),t)}function WD(e,t){var n=kn;kn=n!==0&&4>n?n:4,e(!0);var o=rv.transition;rv.transition={};try{e(!1),t()}finally{kn=n,rv.transition=o}}function jP(){return na().memoizedState}function qD(e,t,n){var o=ml(e);n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},GP(e)?WP(t,n):(qP(e,t,n),n=Ui(),e=Qo(e,o,n),e!==null&&ZP(e,t,o))}function ZD(e,t,n){var o=ml(e),l={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(GP(e))WP(t,l);else{qP(e,t,l);var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,u=h(g,n);if(l.hasEagerState=!0,l.eagerState=u,ba(u,g))return}catch{}finally{}n=Ui(),e=Qo(e,o,n),e!==null&&ZP(e,t,o)}}function GP(e){var t=e.alternate;return e===ur||t!==null&&t===ur}function WP(e,t){pf=Vg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qP(e,t,n){cI(e)?(e=t.interleaved,e===null?(n.next=n,_a===null?_a=[t]:_a.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ZP(e,t,n){if((n&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,Hx(e,n)}}var Ng={readContext:ta,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},HD={readContext:ta,useCallback:function(e,t){return Oa().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:iE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tg(4194308,4,$P.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tg(4194308,4,e,t)},useInsertionEffect:function(e,t){return tg(4,2,e,t)},useMemo:function(e,t){var n=Oa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Oa();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=qD.bind(null,ur,e),[o.memoizedState,e]},useRef:function(e){var t=Oa();return e={current:e},t.memoizedState=e},useState:rE,useDebugValue:gb,useDeferredValue:function(e){return Oa().memoizedState=e},useTransition:function(){var e=rE(!1),t=e[0];return e=WD.bind(null,e[1]),Oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=ur,l=Oa();if(Jn){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Lr===null)throw Error(qe(349));(Au&30)!==0||AP(o,t,n)}l.memoizedState=n;var h={value:n,getSnapshot:t};return l.queue=h,iE(DP.bind(null,o,h,e),[e]),o.flags|=2048,Vf(9,zP.bind(null,o,h,n,t),void 0,null),n},useId:function(){var e=Oa(),t=Lr.identifierPrefix;if(Jn){var n=xs,o=vs;n=(o&~(1<<32-xa(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=$f++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XD={readContext:ta,useCallback:VP,useContext:ta,useEffect:mb,useImperativeHandle:BP,useInsertionEffect:FP,useLayoutEffect:OP,useMemo:NP,useReducer:iv,useRef:LP,useState:function(){return iv(Bf)},useDebugValue:gb,useDeferredValue:function(e){var t=na();return UP(t,zr.memoizedState,e)},useTransition:function(){var e=iv(Bf)[0],t=na().memoizedState;return[e,t]},useMutableSource:IP,useSyncExternalStore:MP,useId:jP,unstable_isNewReconciler:!1},KD={readContext:ta,useCallback:VP,useContext:ta,useEffect:mb,useImperativeHandle:BP,useInsertionEffect:FP,useLayoutEffect:OP,useMemo:NP,useReducer:ov,useRef:LP,useState:function(){return ov(Bf)},useDebugValue:gb,useDeferredValue:function(e){var t=na();return zr===null?t.memoizedState=e:UP(t,zr.memoizedState,e)},useTransition:function(){var e=ov(Bf)[0],t=na().memoizedState;return[e,t]},useMutableSource:IP,useSyncExternalStore:MP,useId:jP,unstable_isNewReconciler:!1};function yb(e,t){try{var n="",o=t;do n+=E4(o),o=o.return;while(o);var l=n}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l}}function T1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var YD=typeof WeakMap=="function"?WeakMap:Map;function HP(e,t,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){jg||(jg=!0,L1=o),T1(e,t)},n}function XP(e,t,n){n=bs(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;n.payload=function(){return o(l)},n.callback=function(){T1(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){T1(e,t),typeof o!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),n}function oE(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new YD;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(n)||(l.add(n),e=cR.bind(null,e,t,n),t.then(e,e))}function aE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sE(e,t,n,o,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bs(-1,1),t.tag=2,fl(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var KP,C1,YP,JP;KP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};C1=function(){};YP=function(e,t,n,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,vu(Ga.current);var h=null;switch(n){case"input":l=Qv(e,l),o=Qv(e,o),h=[];break;case"select":l=cr({},l,{value:void 0}),o=cr({},o,{value:void 0}),h=[];break;case"textarea":l=n1(e,l),o=n1(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ag)}i1(n,o);var g;n=null;for(b in l)if(!o.hasOwnProperty(b)&&l.hasOwnProperty(b)&&l[b]!=null)if(b==="style"){var u=l[b];for(g in u)u.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(kf.hasOwnProperty(b)?h||(h=[]):(h=h||[]).push(b,null));for(b in o){var S=o[b];if(u=l!=null?l[b]:void 0,o.hasOwnProperty(b)&&S!==u&&(S!=null||u!=null))if(b==="style")if(u){for(g in u)!u.hasOwnProperty(g)||S&&S.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in S)S.hasOwnProperty(g)&&u[g]!==S[g]&&(n||(n={}),n[g]=S[g])}else n||(h||(h=[]),h.push(b,n)),n=S;else b==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(h=h||[]).push(b,S)):b==="children"?typeof S!="string"&&typeof S!="number"||(h=h||[]).push(b,""+S):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(kf.hasOwnProperty(b)?(S!=null&&b==="onScroll"&&Gn("scroll",e),h||u===S||(h=[])):(h=h||[]).push(b,S))}n&&(h=h||[]).push("style",n);var b=h;(t.updateQueue=b)&&(t.flags|=4)}};JP=function(e,t,n,o){n!==o&&(t.flags|=4)};function jd(e,t){if(!Jn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function xi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function JD(e,t,n){var o=t.pendingProps;switch(sb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(t),null;case 1:return so(t.type)&&zg(),xi(t),null;case 3:return o=t.stateNode,vh(),qn(ao),qn(Ei),hb(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Nd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ya!==null&&($1(ya),ya=null))),C1(e,t),xi(t),null;case 5:cb(t);var l=vu(Of.current);if(n=t.type,e!==null&&t.stateNode!=null)YP(e,t,n,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(qe(166));return xi(t),null}if(e=vu(Ga.current),Nd(t)){o=t.stateNode,n=t.type;var h=t.memoizedProps;switch(o[Va]=t,o[Lf]=h,e=(t.mode&1)!==0,n){case"dialog":Gn("cancel",o),Gn("close",o);break;case"iframe":case"object":case"embed":Gn("load",o);break;case"video":case"audio":for(l=0;l<ef.length;l++)Gn(ef[l],o);break;case"source":Gn("error",o);break;case"img":case"image":case"link":Gn("error",o),Gn("load",o);break;case"details":Gn("toggle",o);break;case"input":bS(o,h),Gn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Gn("invalid",o);break;case"textarea":SS(o,h),Gn("invalid",o)}i1(n,h),l=null;for(var g in h)if(h.hasOwnProperty(g)){var u=h[g];g==="children"?typeof u=="string"?o.textContent!==u&&(h.suppressHydrationWarning!==!0&&bm(o.textContent,u,e),l=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&bm(o.textContent,u,e),l=["children",""+u]):kf.hasOwnProperty(g)&&u!=null&&g==="onScroll"&&Gn("scroll",o)}switch(n){case"input":fm(o),wS(o,h,!0);break;case"textarea":fm(o),ES(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Ag)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(n,{is:o.is}):(e=g.createElement(n),n==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,n),e[Va]=t,e[Lf]=o,KP(e,t,!1,!1),t.stateNode=e;e:{switch(g=o1(n,o),n){case"dialog":Gn("cancel",e),Gn("close",e),l=o;break;case"iframe":case"object":case"embed":Gn("load",e),l=o;break;case"video":case"audio":for(l=0;l<ef.length;l++)Gn(ef[l],e);l=o;break;case"source":Gn("error",e),l=o;break;case"img":case"image":case"link":Gn("error",e),Gn("load",e),l=o;break;case"details":Gn("toggle",e),l=o;break;case"input":bS(e,o),l=Qv(e,o),Gn("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=cr({},o,{value:void 0}),Gn("invalid",e);break;case"textarea":SS(e,o),l=n1(e,o),Gn("invalid",e);break;default:l=o}i1(n,l),u=l;for(h in u)if(u.hasOwnProperty(h)){var S=u[h];h==="style"?FC(e,S):h==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&RC(e,S)):h==="children"?typeof S=="string"?(n!=="textarea"||S!=="")&&Tf(e,S):typeof S=="number"&&Tf(e,""+S):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(kf.hasOwnProperty(h)?S!=null&&h==="onScroll"&&Gn("scroll",e):S!=null&&Ux(e,h,S,g))}switch(n){case"input":fm(e),wS(e,o,!1);break;case"textarea":fm(e),ES(e);break;case"option":o.value!=null&&e.setAttribute("value",""+_l(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?ah(e,!!o.multiple,h,!1):o.defaultValue!=null&&ah(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ag)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xi(t),null;case 6:if(e&&t.stateNode!=null)JP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(qe(166));if(n=vu(Of.current),vu(Ga.current),Nd(t)){if(o=t.stateNode,n=t.memoizedProps,o[Va]=t,(h=o.nodeValue!==n)&&(e=Io,e!==null))switch(e.tag){case 3:bm(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bm(o.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[Va]=t,t.stateNode=o}return xi(t),null;case 13:if(qn(lr),o=t.memoizedState,Jn&&io!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(o=io;o;)o=_s(o.nextSibling);return yh(),t.flags|=98560,t}if(o!==null&&o.dehydrated!==null){if(o=Nd(t),e===null){if(!o)throw Error(qe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(qe(317));o[Va]=t}else yh(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return xi(t),null}return ya!==null&&($1(ya),ya=null),(t.flags&128)!==0?(t.lanes=n,t):(o=o!==null,n=!1,e===null?Nd(t):n=e.memoizedState!==null,o!==n&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(lr.current&1)!==0?Dr===0&&(Dr=3):Sb())),t.updateQueue!==null&&(t.flags|=4),xi(t),null);case 4:return vh(),C1(e,t),e===null&&Df(t.stateNode.containerInfo),xi(t),null;case 10:return ib(t.type._context),xi(t),null;case 17:return so(t.type)&&zg(),xi(t),null;case 19:if(qn(lr),h=t.memoizedState,h===null)return xi(t),null;if(o=(t.flags&128)!==0,g=h.rendering,g===null)if(o)jd(h,!1);else{if(Dr!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Bg(e),g!==null){for(t.flags|=128,jd(h,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)h=n,e=o,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vn(lr,lr.current&1|2),t.child}e=e.sibling}h.tail!==null&&Sr()>xh&&(t.flags|=128,o=!0,jd(h,!1),t.lanes=4194304)}else{if(!o)if(e=Bg(g),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jd(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Jn)return xi(t),null}else 2*Sr()-h.renderingStartTime>xh&&n!==1073741824&&(t.flags|=128,o=!0,jd(h,!1),t.lanes=4194304);h.isBackwards?(g.sibling=t.child,t.child=g):(n=h.last,n!==null?n.sibling=g:t.child=g,h.last=g)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Sr(),t.sibling=null,n=lr.current,Vn(lr,o?n&1|2:n&1),t):(xi(t),null);case 22:case 23:return wb(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(vo&1073741824)!==0&&(xi(t),t.subtreeFlags&6&&(t.flags|=8192)):xi(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}var QD=zs.ReactCurrentOwner,oo=!1;function Bi(e,t,n,o){t.child=e===null?CP(t,null,n,o):_h(t,e.child,n,o)}function lE(e,t,n,o,l){n=n.render;var h=t.ref;return ch(t,l),o=fb(e,t,n,o,h,l),n=pb(),e!==null&&!oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ks(e,t,l)):(Jn&&n&&ab(t),t.flags|=1,Bi(e,t,o,l),t.child)}function uE(e,t,n,o,l){if(e===null){var h=n.type;return typeof h=="function"&&!Eb(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,QP(e,t,h,o,l)):(e=ig(n.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var g=h.memoizedProps;if(n=n.compare,n=n!==null?n:zf,n(g,o)&&e.ref===t.ref)return ks(e,t,l)}return t.flags|=1,e=xl(h,o),e.ref=t.ref,e.return=t,t.child=e}function QP(e,t,n,o,l){if(e!==null){var h=e.memoizedProps;if(zf(h,o)&&e.ref===t.ref)if(oo=!1,t.pendingProps=o=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(oo=!0);else return t.lanes=e.lanes,ks(e,t,l)}return P1(e,t,n,o,l)}function eI(e,t,n){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(rh,vo),vo|=n;else if((n&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:n,Vn(rh,vo),vo|=o;else return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vn(rh,vo),vo|=e,null;else h!==null?(o=h.baseLanes|n,t.memoizedState=null):o=n,Vn(rh,vo),vo|=o;return Bi(e,t,l,n),t.child}function tI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function P1(e,t,n,o,l){var h=so(n)?Iu:Ei.current;return h=gh(t,h),ch(t,l),n=fb(e,t,n,o,h,l),o=pb(),e!==null&&!oo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ks(e,t,l)):(Jn&&o&&ab(t),t.flags|=1,Bi(e,t,n,l),t.child)}function cE(e,t,n,o,l){if(so(n)){var h=!0;Dg(t)}else h=!1;if(ch(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),SP(t,n,o),S1(t,n,o,l),o=!0;else if(e===null){var g=t.stateNode,u=t.memoizedProps;g.props=u;var S=g.context,b=n.contextType;typeof b=="object"&&b!==null?b=ta(b):(b=so(n)?Iu:Ei.current,b=gh(t,b));var C=n.getDerivedStateFromProps,A=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function";A||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==o||S!==b)&&QS(t,g,o,b),nl=!1;var z=t.memoizedState;g.state=z,Fg(t,o,g,l),S=t.memoizedState,u!==o||z!==S||ao.current||nl?(typeof C=="function"&&(w1(t,n,C,o),S=t.memoizedState),(u=nl||JS(t,n,u,o,z,S,b))?(A||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=S),g.props=o,g.state=S,g.context=b,o=u):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,bP(e,t),u=t.memoizedProps,b=t.type===t.elementType?u:ma(t.type,u),g.props=b,A=t.pendingProps,z=g.context,S=n.contextType,typeof S=="object"&&S!==null?S=ta(S):(S=so(n)?Iu:Ei.current,S=gh(t,S));var j=n.getDerivedStateFromProps;(C=typeof j=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==A||z!==S)&&QS(t,g,o,S),nl=!1,z=t.memoizedState,g.state=z,Fg(t,o,g,l);var Z=t.memoizedState;u!==A||z!==Z||ao.current||nl?(typeof j=="function"&&(w1(t,n,j,o),Z=t.memoizedState),(b=nl||JS(t,n,b,o,z,Z,S)||!1)?(C||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,Z,S),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,Z,S)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Z),g.props=o,g.state=Z,g.context=S,o=b):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return I1(e,t,n,o,h,l)}function I1(e,t,n,o,l,h){tI(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return l&&XS(t,n,!1),ks(e,t,h);o=t.stateNode,QD.current=t;var u=g&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=_h(t,e.child,null,h),t.child=_h(t,null,u,h)):Bi(e,t,u,h),t.memoizedState=o.state,l&&XS(t,n,!0),t.child}function nI(e){var t=e.stateNode;t.pendingContext?HS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HS(e,t.context,!1),ub(e,t.containerInfo)}function hE(e,t,n,o,l){return yh(),lb(l),t.flags|=256,Bi(e,t,n,o),t.child}var Sm={dehydrated:null,treeContext:null,retryLane:0};function Em(e){return{baseLanes:e,cachePool:null,transitions:null}}function dE(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function rI(e,t,n){var o=t.pendingProps,l=lr.current,h=!1,g=(t.flags&128)!==0,u;if((u=g)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Vn(lr,l&1),e===null)return k1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,h?(o=t.mode,h=t.child,l={mode:"hidden",children:l},(o&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=l):h=qg(l,o,0,null),e=Su(e,o,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Em(n),t.memoizedState=Sm,e):M1(t,l));if(l=e.memoizedState,l!==null){if(u=l.dehydrated,u!==null){if(g)return t.flags&256?(t.flags&=-257,km(e,t,n,Error(qe(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=qg({mode:"visible",children:o.children},l,0,null),h=Su(h,l,n,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,(t.mode&1)!==0&&_h(t,e.child,null,n),t.child.memoizedState=Em(n),t.memoizedState=Sm,h);if((t.mode&1)===0)t=km(e,t,n,null);else if(u.data==="$!")t=km(e,t,n,Error(qe(419)));else if(o=(n&e.childLanes)!==0,oo||o){if(o=Lr,o!==null){switch(n&-n){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}o=(h&(o.suspendedLanes|n))!==0?0:h,o!==0&&o!==l.retryLane&&(l.retryLane=o,Qo(e,o,-1))}Sb(),t=km(e,t,n,Error(qe(421)))}else u.data==="$?"?(t.flags|=128,t.child=e.child,t=hR.bind(null,e),u._reactRetry=t,t=null):(n=l.treeContext,io=_s(u.nextSibling),Io=t,Jn=!0,ya=null,n!==null&&(Xo[Ko++]=vs,Xo[Ko++]=xs,Xo[Ko++]=Mu,vs=n.id,xs=n.overflow,Mu=t),t=M1(t,t.pendingProps.children),t.flags|=4096);return t}return h?(o=pE(e,t,o.children,o.fallback,n),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?Em(n):dE(l,n),h.childLanes=e.childLanes&~n,t.memoizedState=Sm,o):(n=fE(e,t,o.children,n),t.memoizedState=null,n)}return h?(o=pE(e,t,o.children,o.fallback,n),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?Em(n):dE(l,n),h.childLanes=e.childLanes&~n,t.memoizedState=Sm,o):(n=fE(e,t,o.children,n),t.memoizedState=null,n)}function M1(e,t){return t=qg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fE(e,t,n,o){var l=e.child;return e=l.sibling,n=xl(l,{mode:"visible",children:n}),(t.mode&1)===0&&(n.lanes=o),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n}function pE(e,t,n,o,l){var h=t.mode;e=e.child;var g=e.sibling,u={mode:"hidden",children:n};return(h&1)===0&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=xl(e,u),n.subtreeFlags=e.subtreeFlags&14680064),g!==null?o=xl(g,o):(o=Su(o,h,l,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,o}function km(e,t,n,o){return o!==null&&lb(o),_h(t,e.child,null,n),e=M1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mE(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),b1(e.return,t,n)}function av(e,t,n,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=n,h.tailMode=l)}function iI(e,t,n){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(Bi(e,t,o.children,n),o=lr.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mE(e,n,t);else if(e.tag===19)mE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Vn(lr,o),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Bg(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),av(t,!1,l,n,h);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Bg(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}av(t,!0,n,null,h);break;case"together":av(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ks(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zu|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=xl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eR(e,t,n){switch(t.tag){case 3:nI(t),yh();break;case 5:PP(t);break;case 1:so(t.type)&&Dg(t);break;case 4:ub(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Vn(Rg,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Vn(lr,lr.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?rI(e,t,n):(Vn(lr,lr.current&1),e=ks(e,t,n),e!==null?e.sibling:null);Vn(lr,lr.current&1);break;case 19:if(o=(n&t.childLanes)!==0,(e.flags&128)!==0){if(o)return iI(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Vn(lr,lr.current),o)break;return null;case 22:case 23:return t.lanes=0,eI(e,t,n)}return ks(e,t,n)}function tR(e,t){switch(sb(t),t.tag){case 1:return so(t.type)&&zg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vh(),qn(ao),qn(Ei),hb(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return cb(t),null;case 13:if(qn(lr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));yh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qn(lr),null;case 4:return vh(),null;case 10:return ib(t.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var Tm=!1,wi=!1,nR=typeof WeakSet=="function"?WeakSet:Set,ft=null;function nh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){yr(e,t,o)}else n.current=null}function A1(e,t,n){try{n()}catch(o){yr(e,t,o)}}var gE=!1;function rR(e,t){if(m1=Pg,e=cP(),tb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var g=0,u=-1,S=-1,b=0,C=0,A=e,z=null;t:for(;;){for(var j;A!==n||l!==0&&A.nodeType!==3||(u=g+l),A!==h||o!==0&&A.nodeType!==3||(S=g+o),A.nodeType===3&&(g+=A.nodeValue.length),(j=A.firstChild)!==null;)z=A,A=j;for(;;){if(A===e)break t;if(z===n&&++b===l&&(u=g),z===h&&++C===o&&(S=g),(j=A.nextSibling)!==null)break;A=z,z=A.parentNode}A=j}n=u===-1||S===-1?null:{start:u,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(g1={focusedElem:e,selectionRange:n},Pg=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){t=ft;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var H=Z.memoizedProps,de=Z.memoizedState,B=t.stateNode,N=B.getSnapshotBeforeUpdate(t.elementType===t.type?H:ma(t.type,H),de);B.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var K=t.stateNode.containerInfo;if(K.nodeType===1)K.textContent="";else if(K.nodeType===9){var ce=K.body;ce!=null&&(ce.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(ue){yr(t,t.return,ue)}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return Z=gE,gE=!1,Z}function mf(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&A1(t,n,h)}l=l.next}while(l!==o)}}function My(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function z1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function oI(e){var t=e.alternate;t!==null&&(e.alternate=null,oI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Va],delete t[Lf],delete t[v1],delete t[VD],delete t[ND])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aI(e){return e.tag===5||e.tag===3||e.tag===4}function yE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function D1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ag));else if(o!==4&&(e=e.child,e!==null))for(D1(e,t,n),e=e.sibling;e!==null;)D1(e,t,n),e=e.sibling}function R1(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(R1(e,t,n),e=e.sibling;e!==null;)R1(e,t,n),e=e.sibling}var Yr=null,ga=!1;function Js(e,t,n){for(n=n.child;n!==null;)sI(e,t,n),n=n.sibling}function sI(e,t,n){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(wy,n)}catch{}switch(n.tag){case 5:wi||nh(n,t);case 6:var o=Yr,l=ga;Yr=null,Js(e,t,n),Yr=o,ga=l,Yr!==null&&(ga?(e=Yr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Yr.removeChild(n.stateNode));break;case 18:Yr!==null&&(ga?(e=Yr,n=n.stateNode,e.nodeType===8?ev(e.parentNode,n):e.nodeType===1&&ev(e,n),Mf(e)):ev(Yr,n.stateNode));break;case 4:o=Yr,l=ga,Yr=n.stateNode.containerInfo,ga=!0,Js(e,t,n),Yr=o,ga=l;break;case 0:case 11:case 14:case 15:if(!wi&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,g=h.destroy;h=h.tag,g!==void 0&&((h&2)!==0||(h&4)!==0)&&A1(n,t,g),l=l.next}while(l!==o)}Js(e,t,n);break;case 1:if(!wi&&(nh(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){yr(n,t,u)}Js(e,t,n);break;case 21:Js(e,t,n);break;case 22:n.mode&1?(wi=(o=wi)||n.memoizedState!==null,Js(e,t,n),wi=o):Js(e,t,n);break;default:Js(e,t,n)}}function _E(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nR),t.forEach(function(o){var l=dR.bind(null,e,o);n.has(o)||(n.add(o),o.then(l,l))})}}function da(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var l=n[o];try{var h=e,g=t,u=g;e:for(;u!==null;){switch(u.tag){case 5:Yr=u.stateNode,ga=!1;break e;case 3:Yr=u.stateNode.containerInfo,ga=!0;break e;case 4:Yr=u.stateNode.containerInfo,ga=!0;break e}u=u.return}if(Yr===null)throw Error(qe(160));sI(h,g,l),Yr=null,ga=!1;var S=l.alternate;S!==null&&(S.return=null),l.return=null}catch(b){yr(l,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lI(t,e),t=t.sibling}function lI(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(da(t,e),Ra(e),o&4){try{mf(3,e,e.return),My(3,e)}catch(Z){yr(e,e.return,Z)}try{mf(5,e,e.return)}catch(Z){yr(e,e.return,Z)}}break;case 1:da(t,e),Ra(e),o&512&&n!==null&&nh(n,n.return);break;case 5:if(da(t,e),Ra(e),o&512&&n!==null&&nh(n,n.return),e.flags&32){var l=e.stateNode;try{Tf(l,"")}catch(Z){yr(e,e.return,Z)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,g=n!==null?n.memoizedProps:h,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&AC(l,h),o1(u,g);var b=o1(u,h);for(g=0;g<S.length;g+=2){var C=S[g],A=S[g+1];C==="style"?FC(l,A):C==="dangerouslySetInnerHTML"?RC(l,A):C==="children"?Tf(l,A):Ux(l,C,A,b)}switch(u){case"input":e1(l,h);break;case"textarea":zC(l,h);break;case"select":var z=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var j=h.value;j!=null?ah(l,!!h.multiple,j,!1):z!==!!h.multiple&&(h.defaultValue!=null?ah(l,!!h.multiple,h.defaultValue,!0):ah(l,!!h.multiple,h.multiple?[]:"",!1))}l[Lf]=h}catch(Z){yr(e,e.return,Z)}}break;case 6:if(da(t,e),Ra(e),o&4){if(e.stateNode===null)throw Error(qe(162));b=e.stateNode,C=e.memoizedProps;try{b.nodeValue=C}catch(Z){yr(e,e.return,Z)}}break;case 3:if(da(t,e),Ra(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Mf(t.containerInfo)}catch(Z){yr(e,e.return,Z)}break;case 4:da(t,e),Ra(e);break;case 13:da(t,e),Ra(e),b=e.child,b.flags&8192&&b.memoizedState!==null&&(b.alternate===null||b.alternate.memoizedState===null)&&(xb=Sr()),o&4&&_E(e);break;case 22:if(b=n!==null&&n.memoizedState!==null,e.mode&1?(wi=(C=wi)||b,da(t,e),wi=C):da(t,e),Ra(e),o&8192){C=e.memoizedState!==null;e:for(A=null,z=e;;){if(z.tag===5){if(A===null){A=z;try{l=z.stateNode,C?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=z.stateNode,S=z.memoizedProps.style,g=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=LC("display",g))}catch(Z){yr(e,e.return,Z)}}}else if(z.tag===6){if(A===null)try{z.stateNode.nodeValue=C?"":z.memoizedProps}catch(Z){yr(e,e.return,Z)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;A===z&&(A=null),z=z.return}A===z&&(A=null),z.sibling.return=z.return,z=z.sibling}if(C&&!b&&(e.mode&1)!==0)for(ft=e,e=e.child;e!==null;){for(b=ft=e;ft!==null;){switch(C=ft,A=C.child,C.tag){case 0:case 11:case 14:case 15:mf(4,C,C.return);break;case 1:if(nh(C,C.return),h=C.stateNode,typeof h.componentWillUnmount=="function"){z=C,j=C.return;try{l=z,h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(Z){yr(z,j,Z)}}break;case 5:nh(C,C.return);break;case 22:if(C.memoizedState!==null){xE(b);continue}}A!==null?(A.return=C,ft=A):xE(b)}e=e.sibling}}break;case 19:da(t,e),Ra(e),o&4&&_E(e);break;case 21:break;default:da(t,e),Ra(e)}}function Ra(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(aI(n)){var o=n;break e}n=n.return}throw Error(qe(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(Tf(l,""),o.flags&=-33);var h=yE(e);R1(e,h,l);break;case 3:case 4:var g=o.stateNode.containerInfo,u=yE(e);D1(e,u,g);break;default:throw Error(qe(161))}}catch(S){yr(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iR(e,t,n){ft=e,uI(e)}function uI(e,t,n){for(var o=(e.mode&1)!==0;ft!==null;){var l=ft,h=l.child;if(l.tag===22&&o){var g=l.memoizedState!==null||Tm;if(!g){var u=l.alternate,S=u!==null&&u.memoizedState!==null||wi;u=Tm;var b=wi;if(Tm=g,(wi=S)&&!b)for(ft=l;ft!==null;)g=ft,S=g.child,g.tag===22&&g.memoizedState!==null?bE(l):S!==null?(S.return=g,ft=S):bE(l);for(;h!==null;)ft=h,uI(h),h=h.sibling;ft=l,Tm=u,wi=b}vE(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,ft=h):vE(e)}}function vE(e){for(;ft!==null;){var t=ft;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:wi||My(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!wi)if(n===null)o.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);o.componentDidUpdate(l,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&YS(t,h,o);break;case 3:var g=t.updateQueue;if(g!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}YS(t,g,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&n.focus();break;case"img":S.src&&(n.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var C=b.memoizedState;if(C!==null){var A=C.dehydrated;A!==null&&Mf(A)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(qe(163))}wi||t.flags&512&&z1(t)}catch(z){yr(t,t.return,z)}}if(t===e){ft=null;break}if(n=t.sibling,n!==null){n.return=t.return,ft=n;break}ft=t.return}}function xE(e){for(;ft!==null;){var t=ft;if(t===e){ft=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ft=n;break}ft=t.return}}function bE(e){for(;ft!==null;){var t=ft;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{My(4,t)}catch(S){yr(t,n,S)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(S){yr(t,l,S)}}var h=t.return;try{z1(t)}catch(S){yr(t,h,S)}break;case 5:var g=t.return;try{z1(t)}catch(S){yr(t,g,S)}}}catch(S){yr(t,t.return,S)}if(t===e){ft=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ft=u;break}ft=t.return}}var oR=Math.ceil,Ug=zs.ReactCurrentDispatcher,_b=zs.ReactCurrentOwner,Jo=zs.ReactCurrentBatchConfig,pn=0,Lr=null,Cr=null,ei=0,vo=0,rh=El(0),Dr=0,Nf=null,zu=0,Ay=0,vb=0,gf=null,ro=null,xb=0,xh=1/0,gs=null,jg=!1,L1=null,pl=null,Cm=!1,sl=null,Gg=0,yf=0,F1=null,ng=-1,rg=0;function Ui(){return(pn&6)!==0?Sr():ng!==-1?ng:ng=Sr()}function ml(e){return(e.mode&1)===0?1:(pn&2)!==0&&ei!==0?ei&-ei:jD.transition!==null?(rg===0&&(rg=HC()),rg):(e=kn,e!==0||(e=window.event,e=e===void 0?16:tP(e.type)),e)}function Qo(e,t,n){if(50<yf)throw yf=0,F1=null,Error(qe(185));var o=zy(e,t);return o===null?null:(tp(o,t,n),((pn&2)===0||o!==Lr)&&(o===Lr&&((pn&2)===0&&(Ay|=t),Dr===4&&il(o,ei)),lo(o,n),t===1&&pn===0&&(e.mode&1)===0&&(xh=Sr()+500,Cy&&kl())),o)}function zy(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function cI(e){return(Lr!==null||_a!==null)&&(e.mode&1)!==0&&(pn&2)===0}function lo(e,t){var n=e.callbackNode;j4(e,t);var o=Cg(e,e===Lr?ei:0);if(o===0)n!==null&&CS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&CS(n),t===1)e.tag===0?UD(wE.bind(null,e)):xP(wE.bind(null,e)),$D(function(){pn===0&&kl()}),n=null;else{switch(XC(o)){case 1:n=Zx;break;case 4:n=qC;break;case 16:n=Tg;break;case 536870912:n=ZC;break;default:n=Tg}n=_I(n,hI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hI(e,t){if(ng=-1,rg=0,(pn&6)!==0)throw Error(qe(327));var n=e.callbackNode;if(hh()&&e.callbackNode!==n)return null;var o=Cg(e,e===Lr?ei:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=Wg(e,o);else{t=o;var l=pn;pn|=2;var h=fI();(Lr!==e||ei!==t)&&(gs=null,xh=Sr()+500,wu(e,t));do try{lR();break}catch(u){dI(e,u)}while(1);rb(),Ug.current=h,pn=l,Cr!==null?t=0:(Lr=null,ei=0,t=Dr)}if(t!==0){if(t===2&&(l=c1(e),l!==0&&(o=l,t=O1(e,l))),t===1)throw n=Nf,wu(e,0),il(e,o),lo(e,Sr()),n;if(t===6)il(e,o);else{if(l=e.current.alternate,(o&30)===0&&!aR(l)&&(t=Wg(e,o),t===2&&(h=c1(e),h!==0&&(o=h,t=O1(e,h))),t===1))throw n=Nf,wu(e,0),il(e,o),lo(e,Sr()),n;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(qe(345));case 2:hu(e,ro,gs);break;case 3:if(il(e,o),(o&130023424)===o&&(t=xb+500-Sr(),10<t)){if(Cg(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){Ui(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=_1(hu.bind(null,e,ro,gs),t);break}hu(e,ro,gs);break;case 4:if(il(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var g=31-xa(o);h=1<<g,g=t[g],g>l&&(l=g),o&=~h}if(o=l,o=Sr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*oR(o/1960))-o,10<o){e.timeoutHandle=_1(hu.bind(null,e,ro,gs),o);break}hu(e,ro,gs);break;case 5:hu(e,ro,gs);break;default:throw Error(qe(329))}}}return lo(e,Sr()),e.callbackNode===n?hI.bind(null,e):null}function O1(e,t){var n=gf;return e.current.memoizedState.isDehydrated&&(wu(e,t).flags|=256),e=Wg(e,t),e!==2&&(t=ro,ro=n,t!==null&&$1(t)),e}function $1(e){ro===null?ro=e:ro.push.apply(ro,e)}function aR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var l=n[o],h=l.getSnapshot;l=l.value;try{if(!ba(h(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function il(e,t){for(t&=~vb,t&=~Ay,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xa(t),o=1<<n;e[n]=-1,t&=~o}}function wE(e){if((pn&6)!==0)throw Error(qe(327));hh();var t=Cg(e,0);if((t&1)===0)return lo(e,Sr()),null;var n=Wg(e,t);if(e.tag!==0&&n===2){var o=c1(e);o!==0&&(t=o,n=O1(e,o))}if(n===1)throw n=Nf,wu(e,0),il(e,t),lo(e,Sr()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hu(e,ro,gs),lo(e,Sr()),null}function bb(e,t){var n=pn;pn|=1;try{return e(t)}finally{pn=n,pn===0&&(xh=Sr()+500,Cy&&kl())}}function Du(e){sl!==null&&sl.tag===0&&(pn&6)===0&&hh();var t=pn;pn|=1;var n=Jo.transition,o=kn;try{if(Jo.transition=null,kn=1,e)return e()}finally{kn=o,Jo.transition=n,pn=t,(pn&6)===0&&kl()}}function wb(){vo=rh.current,qn(rh)}function wu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,OD(n)),Cr!==null)for(n=Cr.return;n!==null;){var o=n;switch(sb(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&zg();break;case 3:vh(),qn(ao),qn(Ei),hb();break;case 5:cb(o);break;case 4:vh();break;case 13:qn(lr);break;case 19:qn(lr);break;case 10:ib(o.type._context);break;case 22:case 23:wb()}n=n.return}if(Lr=e,Cr=e=xl(e.current,null),ei=vo=t,Dr=0,Nf=null,vb=Ay=zu=0,ro=gf=null,_a!==null){for(t=0;t<_a.length;t++)if(n=_a[t],o=n.interleaved,o!==null){n.interleaved=null;var l=o.next,h=n.pending;if(h!==null){var g=h.next;h.next=l,o.next=g}n.pending=o}_a=null}return e}function dI(e,t){do{var n=Cr;try{if(rb(),eg.current=Ng,Vg){for(var o=ur.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Vg=!1}if(Au=0,qr=zr=ur=null,pf=!1,$f=0,_b.current=null,n===null||n.return===null){Dr=1,Nf=t,Cr=null;break}e:{var h=e,g=n.return,u=n,S=t;if(t=ei,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var b=S,C=u,A=C.tag;if((C.mode&1)===0&&(A===0||A===11||A===15)){var z=C.alternate;z?(C.updateQueue=z.updateQueue,C.memoizedState=z.memoizedState,C.lanes=z.lanes):(C.updateQueue=null,C.memoizedState=null)}var j=aE(g);if(j!==null){j.flags&=-257,sE(j,g,u,h,t),j.mode&1&&oE(h,b,t),t=j,S=b;var Z=t.updateQueue;if(Z===null){var H=new Set;H.add(S),t.updateQueue=H}else Z.add(S);break e}else{if((t&1)===0){oE(h,b,t),Sb();break e}S=Error(qe(426))}}else if(Jn&&u.mode&1){var de=aE(g);if(de!==null){(de.flags&65536)===0&&(de.flags|=256),sE(de,g,u,h,t),lb(S);break e}}h=S,Dr!==4&&(Dr=2),gf===null?gf=[h]:gf.push(h),S=yb(S,u),u=g;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var B=HP(u,S,t);KS(u,B);break e;case 1:h=S;var N=u.type,K=u.stateNode;if((u.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(pl===null||!pl.has(K)))){u.flags|=65536,t&=-t,u.lanes|=t;var ce=XP(u,h,t);KS(u,ce);break e}}u=u.return}while(u!==null)}mI(n)}catch(ue){t=ue,Cr===n&&n!==null&&(Cr=n=n.return);continue}break}while(1)}function fI(){var e=Ug.current;return Ug.current=Ng,e===null?Ng:e}function Sb(){(Dr===0||Dr===3||Dr===2)&&(Dr=4),Lr===null||(zu&268435455)===0&&(Ay&268435455)===0||il(Lr,ei)}function Wg(e,t){var n=pn;pn|=2;var o=fI();(Lr!==e||ei!==t)&&(gs=null,wu(e,t));do try{sR();break}catch(l){dI(e,l)}while(1);if(rb(),pn=n,Ug.current=o,Cr!==null)throw Error(qe(261));return Lr=null,ei=0,Dr}function sR(){for(;Cr!==null;)pI(Cr)}function lR(){for(;Cr!==null&&!R4();)pI(Cr)}function pI(e){var t=yI(e.alternate,e,vo);e.memoizedProps=e.pendingProps,t===null?mI(e):Cr=t,_b.current=null}function mI(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=JD(n,t,vo),n!==null){Cr=n;return}}else{if(n=tR(n,t),n!==null){n.flags&=32767,Cr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dr=6,Cr=null;return}}if(t=t.sibling,t!==null){Cr=t;return}Cr=t=e}while(t!==null);Dr===0&&(Dr=5)}function hu(e,t,n){var o=kn,l=Jo.transition;try{Jo.transition=null,kn=1,uR(e,t,n,o)}finally{Jo.transition=l,kn=o}return null}function uR(e,t,n,o){do hh();while(sl!==null);if((pn&6)!==0)throw Error(qe(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(G4(e,h),e===Lr&&(Cr=Lr=null,ei=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Cm||(Cm=!0,_I(Tg,function(){return hh(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=Jo.transition,Jo.transition=null;var g=kn;kn=1;var u=pn;pn|=4,_b.current=null,rR(e,n),lI(n,e),MD(g1),Pg=!!m1,g1=m1=null,e.current=n,iR(n),L4(),pn=u,kn=g,Jo.transition=h}else e.current=n;if(Cm&&(Cm=!1,sl=e,Gg=l),h=e.pendingLanes,h===0&&(pl=null),$4(n.stateNode),lo(e,Sr()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)o(t[n]);if(jg)throw jg=!1,e=L1,L1=null,e;return(Gg&1)!==0&&e.tag!==0&&hh(),h=e.pendingLanes,(h&1)!==0?e===F1?yf++:(yf=0,F1=e):yf=0,kl(),null}function hh(){if(sl!==null){var e=XC(Gg),t=Jo.transition,n=kn;try{if(Jo.transition=null,kn=16>e?16:e,sl===null)var o=!1;else{if(e=sl,sl=null,Gg=0,(pn&6)!==0)throw Error(qe(331));var l=pn;for(pn|=4,ft=e.current;ft!==null;){var h=ft,g=h.child;if((ft.flags&16)!==0){var u=h.deletions;if(u!==null){for(var S=0;S<u.length;S++){var b=u[S];for(ft=b;ft!==null;){var C=ft;switch(C.tag){case 0:case 11:case 15:mf(8,C,h)}var A=C.child;if(A!==null)A.return=C,ft=A;else for(;ft!==null;){C=ft;var z=C.sibling,j=C.return;if(oI(C),C===b){ft=null;break}if(z!==null){z.return=j,ft=z;break}ft=j}}}var Z=h.alternate;if(Z!==null){var H=Z.child;if(H!==null){Z.child=null;do{var de=H.sibling;H.sibling=null,H=de}while(H!==null)}}ft=h}}if((h.subtreeFlags&2064)!==0&&g!==null)g.return=h,ft=g;else e:for(;ft!==null;){if(h=ft,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:mf(9,h,h.return)}var B=h.sibling;if(B!==null){B.return=h.return,ft=B;break e}ft=h.return}}var N=e.current;for(ft=N;ft!==null;){g=ft;var K=g.child;if((g.subtreeFlags&2064)!==0&&K!==null)K.return=g,ft=K;else e:for(g=N;ft!==null;){if(u=ft,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:My(9,u)}}catch(ue){yr(u,u.return,ue)}if(u===g){ft=null;break e}var ce=u.sibling;if(ce!==null){ce.return=u.return,ft=ce;break e}ft=u.return}}if(pn=l,kl(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(wy,e)}catch{}o=!0}return o}finally{kn=n,Jo.transition=t}}return!1}function SE(e,t,n){t=yb(n,t),t=HP(e,t,1),fl(e,t),t=Ui(),e=zy(e,1),e!==null&&(tp(e,1,t),lo(e,t))}function yr(e,t,n){if(e.tag===3)SE(e,e,n);else for(;t!==null;){if(t.tag===3){SE(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pl===null||!pl.has(o))){e=yb(n,e),e=XP(t,e,1),fl(t,e),e=Ui(),t=zy(t,1),t!==null&&(tp(t,1,e),lo(t,e));break}}t=t.return}}function cR(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=Ui(),e.pingedLanes|=e.suspendedLanes&n,Lr===e&&(ei&n)===n&&(Dr===4||Dr===3&&(ei&130023424)===ei&&500>Sr()-xb?wu(e,0):vb|=n),lo(e,t)}function gI(e,t){t===0&&((e.mode&1)===0?t=1:(t=gm,gm<<=1,(gm&130023424)===0&&(gm=4194304)));var n=Ui();e=zy(e,t),e!==null&&(tp(e,t,n),lo(e,n))}function hR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gI(e,n)}function dR(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(qe(314))}o!==null&&o.delete(t),gI(e,n)}var yI;yI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ao.current)oo=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return oo=!1,eR(e,t,n);oo=(e.flags&131072)!==0}else oo=!1,Jn&&(t.flags&1048576)!==0&&EP(t,$g,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=gh(t,Ei.current);ch(t,n),l=fb(null,t,o,e,l,n);var h=pb();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,so(o)?(h=!0,Dg(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,ob(t),l.updater=Py,t.stateNode=l,l._reactInternals=t,S1(t,o,e,n),t=I1(null,t,o,!0,h,n)):(t.tag=0,Jn&&h&&ab(t),Bi(null,t,l,n),t=t.child),t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=pR(o),e=ma(o,e),l){case 0:t=P1(null,t,o,e,n);break e;case 1:t=cE(null,t,o,e,n);break e;case 11:t=lE(null,t,o,e,n);break e;case 14:t=uE(null,t,o,ma(o.type,e),n);break e}throw Error(qe(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ma(o,l),P1(e,t,o,l,n);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ma(o,l),cE(e,t,o,l,n);case 3:e:{if(nI(t),e===null)throw Error(qe(387));o=t.pendingProps,h=t.memoizedState,l=h.element,bP(e,t),Fg(t,o,null,n);var g=t.memoizedState;if(o=g.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=Error(qe(423)),t=hE(e,t,o,n,l);break e}else if(o!==l){l=Error(qe(424)),t=hE(e,t,o,n,l);break e}else for(io=_s(t.stateNode.containerInfo.firstChild),Io=t,Jn=!0,ya=null,n=CP(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yh(),o===l){t=ks(e,t,n);break e}Bi(e,t,o,n)}t=t.child}return t;case 5:return PP(t),e===null&&k1(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,g=l.children,y1(o,l)?g=null:h!==null&&y1(o,h)&&(t.flags|=32),tI(e,t),Bi(e,t,g,n),t.child;case 6:return e===null&&k1(t),null;case 13:return rI(e,t,n);case 4:return ub(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=_h(t,null,o,n):Bi(e,t,o,n),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ma(o,l),lE(e,t,o,l,n);case 7:return Bi(e,t,t.pendingProps,n),t.child;case 8:return Bi(e,t,t.pendingProps.children,n),t.child;case 12:return Bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,g=l.value,Vn(Rg,o._currentValue),o._currentValue=g,h!==null)if(ba(h.value,g)){if(h.children===l.children&&!ao.current){t=ks(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){g=h.child;for(var S=u.firstContext;S!==null;){if(S.context===o){if(h.tag===1){S=bs(-1,n&-n),S.tag=2;var b=h.updateQueue;if(b!==null){b=b.shared;var C=b.pending;C===null?S.next=S:(S.next=C.next,C.next=S),b.pending=S}}h.lanes|=n,S=h.alternate,S!==null&&(S.lanes|=n),b1(h.return,n,t),u.lanes|=n;break}S=S.next}}else if(h.tag===10)g=h.type===t.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(qe(341));g.lanes|=n,u=g.alternate,u!==null&&(u.lanes|=n),b1(g,n,t),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}Bi(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,ch(t,n),l=ta(l),o=o(l),t.flags|=1,Bi(e,t,o,n),t.child;case 14:return o=t.type,l=ma(o,t.pendingProps),l=ma(o.type,l),uE(e,t,o,l,n);case 15:return QP(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ma(o,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,so(o)?(e=!0,Dg(t)):e=!1,ch(t,n),SP(t,o,l),S1(t,o,l,n),I1(null,t,o,!0,e,n);case 19:return iI(e,t,n);case 22:return eI(e,t,n)}throw Error(qe(156,t.tag))};function _I(e,t){return WC(e,t)}function fR(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(e,t,n,o){return new fR(e,t,n,o)}function Eb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pR(e){if(typeof e=="function")return Eb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gx)return 11;if(e===Wx)return 14}return 2}function xl(e,t){var n=e.alternate;return n===null?(n=Yo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ig(e,t,n,o,l,h){var g=2;if(o=e,typeof e=="function")Eb(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Zc:return Su(n.children,l,h,t);case jx:g=8,l|=8;break;case Xv:return e=Yo(12,n,t,l|2),e.elementType=Xv,e.lanes=h,e;case Kv:return e=Yo(13,n,t,l),e.elementType=Kv,e.lanes=h,e;case Yv:return e=Yo(19,n,t,l),e.elementType=Yv,e.lanes=h,e;case PC:return qg(n,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case TC:g=10;break e;case CC:g=9;break e;case Gx:g=11;break e;case Wx:g=14;break e;case tl:g=16,o=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=Yo(g,n,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function Su(e,t,n,o){return e=Yo(7,e,o,t),e.lanes=n,e}function qg(e,t,n,o){return e=Yo(22,e,o,t),e.elementType=PC,e.lanes=n,e.stateNode={},e}function sv(e,t,n){return e=Yo(6,e,null,t),e.lanes=n,e}function lv(e,t,n){return t=Yo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mR(e,t,n,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j_(0),this.expirationTimes=j_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j_(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function kb(e,t,n,o,l,h,g,u,S){return e=new mR(e,t,n,u,S),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Yo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ob(h),e}function gR(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qc,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function vI(e){if(!e)return vl;e=e._reactInternals;e:{if(Ou(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(so(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(so(n))return vP(e,n,t)}return t}function xI(e,t,n,o,l,h,g,u,S){return e=kb(n,o,!0,e,l,h,g,u,S),e.context=vI(null),n=e.current,o=Ui(),l=ml(n),h=bs(o,l),h.callback=t!=null?t:null,fl(n,h),e.current.lanes=l,tp(e,l,o),lo(e,o),e}function Dy(e,t,n,o){var l=t.current,h=Ui(),g=ml(l);return n=vI(n),t.context===null?t.context=n:t.pendingContext=n,t=bs(h,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),fl(l,t),e=Qo(l,g,h),e!==null&&Qm(e,l,g),g}function Zg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function EE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tb(e,t){EE(e,t),(e=e.alternate)&&EE(e,t)}function yR(){return null}var bI=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cb(e){this._internalRoot=e}Ry.prototype.render=Cb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));Dy(e,t,null,null)};Ry.prototype.unmount=Cb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Du(function(){Dy(null,e,null,null)}),t[Es]=null}};function Ry(e){this._internalRoot=e}Ry.prototype.unstable_scheduleHydration=function(e){if(e){var t=JC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rl.length&&t!==0&&t<rl[n].priority;n++);rl.splice(n,0,e),n===0&&eP(e)}};function Pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ly(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kE(){}function _R(e,t,n,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var b=Zg(g);h.call(b)}}var g=xI(t,o,e,0,null,!1,!1,"",kE);return e._reactRootContainer=g,e[Es]=g.current,Df(e.nodeType===8?e.parentNode:e),Du(),g}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var u=o;o=function(){var b=Zg(S);u.call(b)}}var S=kb(e,0,!1,null,null,!1,!1,"",kE);return e._reactRootContainer=S,e[Es]=S.current,Df(e.nodeType===8?e.parentNode:e),Du(function(){Dy(t,S,n,o)}),S}function Fy(e,t,n,o,l){var h=n._reactRootContainer;if(h){var g=h;if(typeof l=="function"){var u=l;l=function(){var S=Zg(g);u.call(S)}}Dy(t,g,e,l)}else g=_R(n,t,e,l,o);return Zg(g)}KC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qd(t.pendingLanes);n!==0&&(Hx(t,n|1),lo(t,Sr()),(pn&6)===0&&(xh=Sr()+500,kl()))}break;case 13:var o=Ui();Du(function(){return Qo(e,1,o)}),Tb(e,1)}};Xx=function(e){if(e.tag===13){var t=Ui();Qo(e,134217728,t),Tb(e,134217728)}};YC=function(e){if(e.tag===13){var t=Ui(),n=ml(e);Qo(e,n,t),Tb(e,n)}};JC=function(){return kn};QC=function(e,t){var n=kn;try{return kn=e,t()}finally{kn=n}};s1=function(e,t,n){switch(t){case"input":if(e1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var l=Ty(o);if(!l)throw Error(qe(90));MC(o),e1(o,l)}}}break;case"textarea":zC(e,n);break;case"select":t=n.value,t!=null&&ah(e,!!n.multiple,t,!1)}};BC=bb;VC=Du;var vR={usingClientEntryPoint:!1,Events:[rp,Yc,Ty,OC,$C,bb]},Gd={findFiberByHostInstance:_u,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},xR={bundleType:Gd.bundleType,version:Gd.version,rendererPackageName:Gd.rendererPackageName,rendererConfig:Gd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jC(e),e===null?null:e.stateNode},findFiberByHostInstance:Gd.findFiberByHostInstance||yR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pm.isDisabled&&Pm.supportsFiber)try{wy=Pm.inject(xR),ja=Pm}catch{}}Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vR;Lo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pb(t))throw Error(qe(200));return gR(e,t,null,n)};Lo.createRoot=function(e,t){if(!Pb(e))throw Error(qe(299));var n=!1,o="",l=bI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=kb(e,1,!1,null,null,n,!1,o,l),e[Es]=t.current,Df(e.nodeType===8?e.parentNode:e),new Cb(t)};Lo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=jC(t),e=e===null?null:e.stateNode,e};Lo.flushSync=function(e){return Du(e)};Lo.hydrate=function(e,t,n){if(!Ly(t))throw Error(qe(200));return Fy(null,e,t,!0,n)};Lo.hydrateRoot=function(e,t,n){if(!Pb(e))throw Error(qe(405));var o=n!=null&&n.hydratedSources||null,l=!1,h="",g=bI;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),t=xI(t,null,e,1,n!=null?n:null,l,!1,h,g),e[Es]=t.current,Df(e),o)for(e=0;e<o.length;e++)n=o[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Ry(t)};Lo.render=function(e,t,n){if(!Ly(t))throw Error(qe(200));return Fy(null,e,t,!1,n)};Lo.unmountComponentAtNode=function(e){if(!Ly(e))throw Error(qe(40));return e._reactRootContainer?(Du(function(){Fy(null,null,e,!1,function(){e._reactRootContainer=null,e[Es]=null})}),!0):!1};Lo.unstable_batchedUpdates=bb;Lo.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Ly(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return Fy(e,t,n,!1,o)};Lo.version="18.1.0-next-22edb9f77-20220426";function wI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wI)}catch(e){console.error(e)}}wI(),by.exports=Lo;var bR=by.exports,TE=by.exports;Zv.createRoot=TE.createRoot,Zv.hydrateRoot=TE.hydrateRoot;function SI(...e){return t=>e.forEach(n=>function(o,l){typeof o=="function"?o(l):o!=null&&(o.current=l)}(n,t))}function Ts(...e){return W.exports.useCallback(SI(...e),e)}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ze.apply(this,arguments)}const Uf=W.exports.forwardRef((e,t)=>{const{children:n,...o}=e;return W.exports.Children.toArray(n).some(CE)?W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(n,l=>CE(l)?W.exports.createElement(B1,Ze({},o,{ref:t}),l.props.children):l)):W.exports.createElement(B1,Ze({},o,{ref:t}),n)});Uf.displayName="Slot";const B1=W.exports.forwardRef((e,t)=>{const{children:n,...o}=e;return W.exports.isValidElement(n)?W.exports.cloneElement(n,{...SR(o,n.props),ref:SI(t,n.ref)}):W.exports.Children.count(n)>1?W.exports.Children.only(null):null});B1.displayName="SlotClone";const wR=({children:e})=>W.exports.createElement(W.exports.Fragment,null,e);function CE(e){return W.exports.isValidElement(e)&&e.type===wR}function SR(e,t){const n={...t};for(const o in t){const l=e[o],h=t[o];/^on[A-Z]/.test(o)?n[o]=(...g)=>{h==null||h(...g),l==null||l(...g)}:o==="style"?n[o]={...l,...h}:o==="className"&&(n[o]=[l,h].filter(Boolean).join(" "))}return{...e,...n}}var ER=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Mc=new WeakMap,Im=new WeakMap,Mm={},uv=0,kR=function(e,t,n){t===void 0&&(t=ER(e)),n===void 0&&(n="data-aria-hidden");var o=Array.isArray(e)?e:[e];Mm[n]||(Mm[n]=new WeakMap);var l=Mm[n],h=[],g=new Set,u=function(b){!b||g.has(b)||(g.add(b),u(b.parentNode))};o.forEach(u);var S=function(b){!b||o.indexOf(b)>=0||Array.prototype.forEach.call(b.children,function(C){if(g.has(C))S(C);else{var A=C.getAttribute("aria-hidden"),z=A!==null&&A!=="false",j=(Mc.get(C)||0)+1,Z=(l.get(C)||0)+1;Mc.set(C,j),l.set(C,Z),h.push(C),j===1&&z&&Im.set(C,!0),Z===1&&C.setAttribute(n,"true"),z||C.setAttribute("aria-hidden","true")}})};return S(t),g.clear(),uv++,function(){h.forEach(function(b){var C=Mc.get(b)-1,A=l.get(b)-1;Mc.set(b,C),l.set(b,A),C||(Im.has(b)||b.removeAttribute("aria-hidden"),Im.delete(b)),A||b.removeAttribute(n)}),uv--,uv||(Mc=new WeakMap,Mc=new WeakMap,Im=new WeakMap,Mm={})}},ol=function(){return ol=Object.assign||function(t){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(t[h]=n[h])}return t},ol.apply(this,arguments)};function TR(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n}function CR(e,t,n){if(n||arguments.length===2)for(var o=0,l=t.length,h;o<l;o++)(h||!(o in t))&&(h||(h=Array.prototype.slice.call(t,0,o)),h[o]=t[o]);return e.concat(h||Array.prototype.slice.call(t))}var og="right-scroll-bar-position",ag="width-before-scroll-bar",PR="with-scroll-bars-hidden",IR="--removed-body-scroll-bar-size";function MR(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function AR(e,t){var n=W.exports.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(o){var l=n.value;l!==o&&(n.value=o,n.callback(o,l))}}}})[0];return n.callback=t,n.facade}function zR(e,t){return AR(t||null,function(n){return e.forEach(function(o){return MR(o,n)})})}var Hg=function(){return Hg=Object.assign||function(t){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(t[h]=n[h])}return t},Hg.apply(this,arguments)};function DR(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n}function RR(e){return e}function LR(e,t){t===void 0&&(t=RR);var n=[],o=!1,l={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(h){var g=t(h,o);return n.push(g),function(){n=n.filter(function(u){return u!==g})}},assignSyncMedium:function(h){for(o=!0;n.length;){var g=n;n=[],g.forEach(h)}n={push:function(u){return h(u)},filter:function(){return n}}},assignMedium:function(h){o=!0;var g=[];if(n.length){var u=n;n=[],u.forEach(h),g=n}var S=function(){var C=g;g=[],C.forEach(h)},b=function(){return Promise.resolve().then(S)};b(),n={push:function(C){g.push(C),b()},filter:function(C){return g=g.filter(C),n}}}};return l}function FR(e){e===void 0&&(e={});var t=LR(null);return t.options=Hg({async:!0,ssr:!1},e),t}var EI=function(e){var t=e.sideCar,n=DR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return W.exports.createElement(o,Hg({},n))};EI.isSideCarExport=!0;function OR(e,t){return e.useMedium(t),EI}var kI=FR(),cv=function(){},Oy=W.exports.forwardRef(function(e,t){var n=W.exports.useRef(null),o=W.exports.useState({onScrollCapture:cv,onWheelCapture:cv,onTouchMoveCapture:cv}),l=o[0],h=o[1],g=e.forwardProps,u=e.children,S=e.className,b=e.removeScrollBar,C=e.enabled,A=e.shards,z=e.sideCar,j=e.noIsolation,Z=e.inert,H=e.allowPinchZoom,de=e.as,B=de===void 0?"div":de,N=TR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),K=z,ce=zR([n,t]),ue=ol(ol({},N),l);return W.exports.createElement(W.exports.Fragment,null,C&&W.exports.createElement(K,{sideCar:kI,removeScrollBar:b,shards:A,noIsolation:j,inert:Z,setCallbacks:h,allowPinchZoom:!!H,lockRef:n}),g?W.exports.cloneElement(W.exports.Children.only(u),ol(ol({},ue),{ref:ce})):W.exports.createElement(B,ol({},ue,{className:S,ref:ce}),u))});Oy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Oy.classNames={fullWidth:ag,zeroRight:og};var $R=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function BR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$R();return t&&e.setAttribute("nonce",t),e}function VR(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function NR(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var UR=function(){var e=0,t=null;return{add:function(n){e==0&&(t=BR())&&(VR(t,n),NR(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jR=function(){var e=UR();return function(t){W.exports.useEffect(function(){return e.add(t),function(){e.remove()}},[t])}},TI=function(){var e=jR(),t=function(n){var o=n.styles;return e(o),null};return t},GR={left:0,top:0,right:0,gap:0},hv=function(e){return parseInt(e||"",10)||0},WR=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[hv(n),hv(o),hv(l)]},PE=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return GR;var t=WR(e),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-n+t[2]-t[0])}},qR=TI(),ZR=function(e,t,n,o){var l=e.left,h=e.top,g=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(PR,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(u,"px ").concat(o,`;
  }
  body {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(og,` {
    right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(ag,` {
    margin-right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(og," .").concat(og,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(ag," .").concat(ag,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body {
    `).concat(IR,": ").concat(u,`px;
  }
`)},HR=function(e){var t=W.exports.useState(PE(e.gapMode)),n=t[0],o=t[1];W.exports.useEffect(function(){o(PE(e.gapMode))},[e.gapMode]);var l=e.noRelative,h=e.noImportant,g=e.gapMode,u=g===void 0?"margin":g;return W.exports.createElement(qR,{styles:ZR(n,!l,u,h?"":"!important")})},V1=!1;if(typeof window!="undefined")try{var Am=Object.defineProperty({},"passive",{get:function(){return V1=!0,!0}});window.addEventListener("test",Am,Am),window.removeEventListener("test",Am,Am)}catch{V1=!1}var Ac=V1?{passive:!1}:!1,XR=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},KR=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},IE=function(e,t){var n=t;do{typeof ShadowRoot!="undefined"&&n instanceof ShadowRoot&&(n=n.host);var o=CI(e,n);if(o){var l=PI(e,n),h=l[1],g=l[2];if(h>g)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},YR=function(e){var t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;return[t,n,o]},JR=function(e){var t=e.scrollLeft,n=e.scrollWidth,o=e.clientWidth;return[t,n,o]},CI=function(e,t){return e==="v"?XR(t):KR(t)},PI=function(e,t){return e==="v"?YR(t):JR(t)},QR=function(e,t){return e==="h"&&t==="rtl"?-1:1},eL=function(e,t,n,o,l){var h=QR(e,window.getComputedStyle(t).direction),g=h*o,u=n.target,S=t.contains(u),b=!1,C=g>0,A=0,z=0;do{var j=PI(e,u),Z=j[0],H=j[1],de=j[2],B=H-de-h*Z;(Z||B)&&CI(e,u)&&(A+=B,z+=Z),u=u.parentNode}while(!S&&u!==document.body||S&&(t.contains(u)||t===u));return(C&&(l&&A===0||!l&&g>A)||!C&&(l&&z===0||!l&&-g>z))&&(b=!0),b},zm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ME=function(e){return[e.deltaX,e.deltaY]},AE=function(e){return e&&"current"in e?e.current:e},tL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rL=0,zc=[];function iL(e){var t=W.exports.useRef([]),n=W.exports.useRef([0,0]),o=W.exports.useRef(),l=W.exports.useState(rL++)[0],h=W.exports.useState(function(){return TI()})[0],g=W.exports.useRef(e);W.exports.useEffect(function(){g.current=e},[e]),W.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var H=CR([e.lockRef.current],(e.shards||[]).map(AE),!0).filter(Boolean);return H.forEach(function(de){return de.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),H.forEach(function(de){return de.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var u=W.exports.useCallback(function(H,de){if("touches"in H&&H.touches.length===2)return!g.current.allowPinchZoom;var B=zm(H),N=n.current,K="deltaX"in H?H.deltaX:N[0]-B[0],ce="deltaY"in H?H.deltaY:N[1]-B[1],ue,ye=H.target,me=Math.abs(K)>Math.abs(ce)?"h":"v";if("touches"in H&&me==="h"&&ye.type==="range")return!1;var Te=IE(me,ye);if(!Te)return!0;if(Te?ue=me:(ue=me==="v"?"h":"v",Te=IE(me,ye)),!Te)return!1;if(!o.current&&"changedTouches"in H&&(K||ce)&&(o.current=ue),!ue)return!0;var Ne=o.current||ue;return eL(Ne,de,H,Ne==="h"?K:ce,!0)},[]),S=W.exports.useCallback(function(H){var de=H;if(!(!zc.length||zc[zc.length-1]!==h)){var B="deltaY"in de?ME(de):zm(de),N=t.current.filter(function(ue){return ue.name===de.type&&ue.target===de.target&&tL(ue.delta,B)})[0];if(N&&N.should){de.preventDefault();return}if(!N){var K=(g.current.shards||[]).map(AE).filter(Boolean).filter(function(ue){return ue.contains(de.target)}),ce=K.length>0?u(de,K[0]):!g.current.noIsolation;ce&&de.preventDefault()}}},[]),b=W.exports.useCallback(function(H,de,B,N){var K={name:H,delta:de,target:B,should:N};t.current.push(K),setTimeout(function(){t.current=t.current.filter(function(ce){return ce!==K})},1)},[]),C=W.exports.useCallback(function(H){n.current=zm(H),o.current=void 0},[]),A=W.exports.useCallback(function(H){b(H.type,ME(H),H.target,u(H,e.lockRef.current))},[]),z=W.exports.useCallback(function(H){b(H.type,zm(H),H.target,u(H,e.lockRef.current))},[]);W.exports.useEffect(function(){return zc.push(h),e.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:z}),document.addEventListener("wheel",S,Ac),document.addEventListener("touchmove",S,Ac),document.addEventListener("touchstart",C,Ac),function(){zc=zc.filter(function(H){return H!==h}),document.removeEventListener("wheel",S,Ac),document.removeEventListener("touchmove",S,Ac),document.removeEventListener("touchstart",C,Ac)}},[]);var j=e.removeScrollBar,Z=e.inert;return W.exports.createElement(W.exports.Fragment,null,Z?W.exports.createElement(h,{styles:nL(l)}):null,j?W.exports.createElement(HR,{gapMode:"margin"}):null)}var oL=OR(kI,iL),II=W.exports.forwardRef(function(e,t){return W.exports.createElement(Oy,ol({},e,{ref:t,sideCar:oL}))});II.classNames=Oy.classNames;var aL=II;let dv=0;function sL(){W.exports.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:zE()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:zE()),dv++,()=>{dv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),dv--}},[])}function zE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const uo=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>({...e,[t]:W.exports.forwardRef((n,o)=>{const{asChild:l,...h}=n,g=l?Uf:t;return W.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),W.exports.createElement(g,Ze({},h,{ref:o}))})}),{}),Xg=Boolean(globalThis==null?void 0:globalThis.document)?W.exports.useLayoutEffect:()=>{},$y=e=>{const{present:t,children:n}=e,o=function(g){const[u,S]=W.exports.useState(),b=W.exports.useRef({}),C=W.exports.useRef(g),A=W.exports.useRef("none"),z=g?"mounted":"unmounted",[j,Z]=function(H,de){return W.exports.useReducer((B,N)=>{const K=de[B][N];return K!=null?K:B},H)}(z,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.exports.useEffect(()=>{const H=Dm(b.current);A.current=j==="mounted"?H:"none"},[j]),Xg(()=>{const H=b.current,de=C.current;if(de!==g){const B=A.current,N=Dm(H);g?Z("MOUNT"):N==="none"||(H==null?void 0:H.display)==="none"?Z("UNMOUNT"):Z(de&&B!==N?"ANIMATION_OUT":"UNMOUNT"),C.current=g}},[g,Z]),Xg(()=>{if(u){const H=B=>{const N=Dm(b.current).includes(B.animationName);B.target===u&&N&&Z("ANIMATION_END")},de=B=>{B.target===u&&(A.current=Dm(b.current))};return u.addEventListener("animationstart",de),u.addEventListener("animationcancel",H),u.addEventListener("animationend",H),()=>{u.removeEventListener("animationstart",de),u.removeEventListener("animationcancel",H),u.removeEventListener("animationend",H)}}Z("ANIMATION_END")},[u,Z]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:W.exports.useCallback(H=>{H&&(b.current=getComputedStyle(H)),S(H)},[])}}(t),l=typeof n=="function"?n({present:o.isPresent}):W.exports.Children.only(n),h=Ts(o.ref,l.ref);return typeof n=="function"||o.isPresent?W.exports.cloneElement(l,{ref:h}):null};function Dm(e){return(e==null?void 0:e.animationName)||"none"}$y.displayName="Presence";const lL=W.exports.forwardRef((e,t)=>{var n;const{container:o=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...l}=e;return o?bR.createPortal(W.exports.createElement(uo.div,Ze({},l,{ref:t})),o):null});function bl(e){const t=W.exports.useRef(e);return W.exports.useEffect(()=>{t.current=e}),W.exports.useMemo(()=>(...n)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...n)},[])}const DE={bubbles:!1,cancelable:!0},uL=W.exports.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:l,onUnmountAutoFocus:h,...g}=e,[u,S]=W.exports.useState(null),b=bl(l),C=bl(h),A=W.exports.useRef(null),z=Ts(t,H=>S(H)),j=W.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.exports.useEffect(()=>{if(o){let B=function(K){if(j.paused||!u)return;const ce=K.target;u.contains(ce)?A.current=ce:uu(A.current,{select:!0})},N=function(K){!j.paused&&u&&(u.contains(K.relatedTarget)||uu(A.current,{select:!0}))};var H=B,de=N;return document.addEventListener("focusin",B),document.addEventListener("focusout",N),()=>{document.removeEventListener("focusin",B),document.removeEventListener("focusout",N)}}},[o,u,j.paused]),W.exports.useEffect(()=>{if(u){FE.add(j);const de=document.activeElement;if(!u.contains(de)){const B=new Event("focusScope.autoFocusOnMount",DE);u.addEventListener("focusScope.autoFocusOnMount",b),u.dispatchEvent(B),B.defaultPrevented||(function(N,{select:K=!1}={}){const ce=document.activeElement;for(const ue of N)if(uu(ue,{select:K}),document.activeElement!==ce)return}((H=RE(u),H.filter(N=>N.tagName!=="A")),{select:!0}),document.activeElement===de&&uu(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",b),setTimeout(()=>{const B=new Event("focusScope.autoFocusOnUnmount",DE);u.addEventListener("focusScope.autoFocusOnUnmount",C),u.dispatchEvent(B),B.defaultPrevented||uu(de!=null?de:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",C),FE.remove(j)},0)}}var H},[u,b,C,j]);const Z=W.exports.useCallback(H=>{if(!n&&!o||j.paused)return;const de=H.key==="Tab"&&!H.altKey&&!H.ctrlKey&&!H.metaKey,B=document.activeElement;if(de&&B){const N=H.currentTarget,[K,ce]=function(ue){const ye=RE(ue),me=LE(ye,ue),Te=LE(ye.reverse(),ue);return[me,Te]}(N);K&&ce?H.shiftKey||B!==ce?H.shiftKey&&B===K&&(H.preventDefault(),n&&uu(ce,{select:!0})):(H.preventDefault(),n&&uu(K,{select:!0})):B===N&&H.preventDefault()}},[n,o,j.paused]);return W.exports.createElement(uo.div,Ze({tabIndex:-1},g,{ref:z,onKeyDown:Z}))});function RE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const l=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||l?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function LE(e,t){for(const n of e)if(!cL(n,{upTo:t}))return n}function cL(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(o){return o instanceof HTMLInputElement&&"select"in o}(e)&&t&&e.select()}}const FE=function(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=OE(e,t),e.unshift(t)},remove(t){var n;e=OE(e,t),(n=e[0])===null||n===void 0||n.resume()}}}();function OE(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function hL(e){const t=bl(e);W.exports.useEffect(()=>{const n=o=>{o.key==="Escape"&&t(o)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[t])}let $E,Rm=0;function dL({disabled:e}){const t=W.exports.useRef(!1);Xg(()=>{if(e){let l=function(){Rm--,Rm===0&&(document.body.style.pointerEvents=$E)},h=function(g){t.current=g.pointerType!=="mouse"};var n=l,o=h;return Rm===0&&($E=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Rm++,document.addEventListener("pointerup",h),()=>{t.current?document.addEventListener("click",l,{once:!0}):l(),document.removeEventListener("pointerup",h)}}},[e])}function ji(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e==null||e(o),n===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}const fL=W.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pL=W.exports.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:h,onInteractOutside:g,onDismiss:u,...S}=e,b=W.exports.useContext(fL),[C,A]=W.exports.useState(null),[,z]=W.exports.useState({}),j=Ts(t,ye=>A(ye)),Z=Array.from(b.layers),[H]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),de=Z.indexOf(H),B=C?Z.indexOf(C):-1,N=b.layersWithOutsidePointerEventsDisabled.size>0,K=B>=de,ce=function(ye){const me=bl(ye),Te=W.exports.useRef(!1);return W.exports.useEffect(()=>{const Ne=nt=>{nt.target&&!Te.current&&VE("dismissableLayer.pointerDownOutside",me,{originalEvent:nt}),Te.current=!1},we=window.setTimeout(()=>{document.addEventListener("pointerdown",Ne)},0);return()=>{window.clearTimeout(we),document.removeEventListener("pointerdown",Ne)}},[me]),{onPointerDownCapture:()=>Te.current=!0}}(ye=>{const me=ye.target,Te=[...b.branches].some(Ne=>Ne.contains(me));K&&!Te&&(l==null||l(ye),g==null||g(ye),ye.defaultPrevented||u==null||u())}),ue=function(ye){const me=bl(ye),Te=W.exports.useRef(!1);return W.exports.useEffect(()=>{const Ne=we=>{we.target&&!Te.current&&VE("dismissableLayer.focusOutside",me,{originalEvent:we})};return document.addEventListener("focusin",Ne),()=>document.removeEventListener("focusin",Ne)},[me]),{onFocusCapture:()=>Te.current=!0,onBlurCapture:()=>Te.current=!1}}(ye=>{const me=ye.target;[...b.branches].some(Te=>Te.contains(me))||(h==null||h(ye),g==null||g(ye),ye.defaultPrevented||u==null||u())});return hL(ye=>{B===b.layers.size-1&&(o==null||o(ye),ye.defaultPrevented||u==null||u())}),dL({disabled:n}),W.exports.useEffect(()=>{C&&(n&&b.layersWithOutsidePointerEventsDisabled.add(C),b.layers.add(C),BE())},[C,n,b]),W.exports.useEffect(()=>()=>{C&&(b.layers.delete(C),b.layersWithOutsidePointerEventsDisabled.delete(C),BE())},[C,b]),W.exports.useEffect(()=>{const ye=()=>z({});return document.addEventListener("dismissableLayer.update",ye),()=>document.removeEventListener("dismissableLayer.update",ye)},[]),W.exports.createElement(uo.div,Ze({},S,{ref:j,style:{pointerEvents:N?K?"auto":"none":void 0,...e.style},onFocusCapture:ji(e.onFocusCapture,ue.onFocusCapture),onBlurCapture:ji(e.onBlurCapture,ue.onBlurCapture),onPointerDownCapture:ji(e.onPointerDownCapture,ce.onPointerDownCapture)}))});function BE(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function VE(e,t,n){const o=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});return t&&o.addEventListener(e,t,{once:!0}),!o.dispatchEvent(l)}function op({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,l]=function({defaultProp:S,onChange:b}){const C=W.exports.useState(S),[A]=C,z=W.exports.useRef(A),j=bl(b);return W.exports.useEffect(()=>{z.current!==A&&(j(A),z.current=A)},[A,z,j]),C}({defaultProp:t,onChange:n}),h=e!==void 0,g=h?e:o,u=bl(n);return[g,W.exports.useCallback(S=>{if(h){const b=S,C=typeof S=="function"?b(e):S;C!==e&&u(C)}else l(S)},[h,e,l,u])]}const mL=qv["useId".toString()]||(()=>{});let gL=0;function _f(e){const[t,n]=W.exports.useState(mL());return Xg(()=>{e||n(o=>o!=null?o:String(gL++))},[e]),e||(t?`radix-${t}`:"")}function MI(e,t){const n=W.exports.createContext(t);function o(l){const{children:h,...g}=l,u=W.exports.useMemo(()=>g,Object.values(g));return W.exports.createElement(n.Provider,{value:u},h)}return o.displayName=e+"Provider",[o,function(l){const h=W.exports.useContext(n);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}]}function ap(e,t=[]){let n=[];const o=()=>{const l=n.map(h=>W.exports.createContext(h));return function(h){const g=(h==null?void 0:h[e])||l;return W.exports.useMemo(()=>({[`__scope${e}`]:{...h,[e]:g}}),[h,g])}};return o.scopeName=e,[function(l,h){const g=W.exports.createContext(h),u=n.length;function S(b){const{scope:C,children:A,...z}=b,j=(C==null?void 0:C[e][u])||g,Z=W.exports.useMemo(()=>z,Object.values(z));return W.exports.createElement(j.Provider,{value:Z},A)}return n=[...n,h],S.displayName=l+"Provider",[S,function(b,C){const A=(C==null?void 0:C[e][u])||g,z=W.exports.useContext(A);if(z)return z;if(h!==void 0)return h;throw new Error(`\`${b}\` must be used within \`${l}\``)}]},yL(o,...t)]}function yL(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(l){const h=o.reduce((g,{useScope:u,scopeName:S})=>({...g,...u(l)[`__scope${S}`]}),{});return W.exports.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return n.scopeName=t.scopeName,n}const[_L,sZ]=ap("Dialog"),[vL,Tl]=_L("Dialog"),xL=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:l,onOpenChange:h,modal:g=!0,allowPinchZoom:u}=e,S=W.exports.useRef(null),b=W.exports.useRef(null),[C=!1,A]=op({prop:o,defaultProp:l,onChange:h});return W.exports.createElement(vL,{scope:t,triggerRef:S,contentRef:b,contentId:_f(),titleId:_f(),descriptionId:_f(),open:C,onOpenChange:A,onOpenToggle:W.exports.useCallback(()=>A(z=>!z),[A]),modal:g,allowPinchZoom:u},n)},bL=e=>{const{__scopeDialog:t,forceMount:n,children:o,container:l}=e,h=Tl("DialogPortal",t);return W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(o,g=>W.exports.createElement($y,{present:n||h.open},W.exports.createElement(lL,{asChild:!0,container:l},g))))},wL=W.exports.forwardRef((e,t)=>{const{forceMount:n,...o}=e,l=Tl("DialogOverlay",e.__scopeDialog);return l.modal?W.exports.createElement($y,{present:n||l.open},W.exports.createElement(SL,Ze({},o,{ref:t}))):null}),SL=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,l=Tl("DialogOverlay",n);return W.exports.createElement(aL,{as:Uf,allowPinchZoom:l.allowPinchZoom,shards:[l.contentRef]},W.exports.createElement(uo.div,Ze({"data-state":zI(l.open)},o,{ref:t,style:{pointerEvents:"auto",...o.style}})))}),EL=W.exports.forwardRef((e,t)=>{const{forceMount:n,...o}=e,l=Tl("DialogContent",e.__scopeDialog);return W.exports.createElement($y,{present:n||l.open},l.modal?W.exports.createElement(kL,Ze({},o,{ref:t})):W.exports.createElement(TL,Ze({},o,{ref:t})))}),kL=W.exports.forwardRef((e,t)=>{const n=Tl("DialogContent",e.__scopeDialog),o=W.exports.useRef(null),l=Ts(t,n.contentRef,o);return W.exports.useEffect(()=>{const h=o.current;if(h)return kR(h)},[]),W.exports.createElement(AI,Ze({},e,{ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ji(e.onCloseAutoFocus,h=>{var g;h.preventDefault(),(g=n.triggerRef.current)===null||g===void 0||g.focus()}),onPointerDownOutside:ji(e.onPointerDownOutside,h=>{const g=h.detail.originalEvent,u=g.button===0&&g.ctrlKey===!0;(g.button===2||u)&&h.preventDefault()}),onFocusOutside:ji(e.onFocusOutside,h=>h.preventDefault())}))}),TL=W.exports.forwardRef((e,t)=>{const n=Tl("DialogContent",e.__scopeDialog),o=W.exports.useRef(!1);return W.exports.createElement(AI,Ze({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var h,g;(h=e.onCloseAutoFocus)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current||(g=n.triggerRef.current)===null||g===void 0||g.focus(),l.preventDefault()),o.current=!1},onInteractOutside:l=>{var h,g;(h=e.onInteractOutside)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current=!0);const u=l.target;!((g=n.triggerRef.current)===null||g===void 0)&&g.contains(u)&&l.preventDefault()}}))}),AI=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:h,...g}=e,u=Tl("DialogContent",n),S=W.exports.useRef(null),b=Ts(t,S);return sL(),W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(uL,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:h},W.exports.createElement(pL,Ze({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":zI(u.open)},g,{ref:b,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),CL=W.exports.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,l=Tl("DialogClose",n);return W.exports.createElement(uo.button,Ze({type:"button"},o,{ref:t,onClick:ji(e.onClick,()=>l.onOpenChange(!1))}))});function zI(e){return e?"open":"closed"}MI("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"});const PL=xL,IL=bL,ML=wL,AL=EL,zL=CL;function DI(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var DL=["color"],RL=W.exports.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,l=DI(e,DL);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),LL=["color"],FL=W.exports.forwardRef(function(e,t){var n=e.color,o=n===void 0?"currentColor":n,l=DI(e,LL);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),Po=Uint8Array,ih=Uint16Array,OL=Int32Array,RI=new Po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),LI=new Po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$L=new Po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FI=function(e,t){for(var n=new ih(31),o=0;o<31;++o)n[o]=t+=1<<e[o-1];for(var l=new OL(n[30]),o=1;o<30;++o)for(var h=n[o];h<n[o+1];++h)l[h]=h-n[o]<<5|o;return{b:n,r:l}},OI=FI(RI,2),$I=OI.b,BL=OI.r;$I[28]=258,BL[258]=28;var VL=FI(LI,0),NL=VL.b,N1=new ih(32768);for(var Wn=0;Wn<32768;++Wn){var Qs=(Wn&43690)>>1|(Wn&21845)<<1;Qs=(Qs&52428)>>2|(Qs&13107)<<2,Qs=(Qs&61680)>>4|(Qs&3855)<<4,N1[Wn]=((Qs&65280)>>8|(Qs&255)<<8)>>1}var vf=function(e,t,n){for(var o=e.length,l=0,h=new ih(t);l<o;++l)e[l]&&++h[e[l]-1];var g=new ih(t);for(l=1;l<t;++l)g[l]=g[l-1]+h[l-1]<<1;var u;if(n){u=new ih(1<<t);var S=15-t;for(l=0;l<o;++l)if(e[l])for(var b=l<<4|e[l],C=t-e[l],A=g[e[l]-1]++<<C,z=A|(1<<C)-1;A<=z;++A)u[N1[A]>>S]=b}else for(u=new ih(o),l=0;l<o;++l)e[l]&&(u[l]=N1[g[e[l]-1]++]>>15-e[l]);return u},sp=new Po(288);for(var Wn=0;Wn<144;++Wn)sp[Wn]=8;for(var Wn=144;Wn<256;++Wn)sp[Wn]=9;for(var Wn=256;Wn<280;++Wn)sp[Wn]=7;for(var Wn=280;Wn<288;++Wn)sp[Wn]=8;var BI=new Po(32);for(var Wn=0;Wn<32;++Wn)BI[Wn]=5;var UL=vf(sp,9,1),jL=vf(BI,5,1),fv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},fa=function(e,t,n){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&n},pv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},GL=function(e){return(e+7)/8|0},WL=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var o=new Po(n-t);return o.set(e.subarray(t,n)),o},qL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],xo=function(e,t,n){var o=new Error(t||qL[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,xo),!n)throw o;return o},Ib=function(e,t,n,o){var l=e.length,h=o?o.length:0;if(!l||t.f&&!t.l)return n||new Po(0);var g=!n||t.i!=2,u=t.i;n||(n=new Po(l*3));var S=function(Rn){var Xt=n.length;if(Rn>Xt){var fn=new Po(Math.max(Xt*2,Rn));fn.set(n),n=fn}},b=t.f||0,C=t.p||0,A=t.b||0,z=t.l,j=t.d,Z=t.m,H=t.n,de=l*8;do{if(!z){b=fa(e,C,1);var B=fa(e,C+1,3);if(C+=3,B)if(B==1)z=UL,j=jL,Z=9,H=5;else if(B==2){var ue=fa(e,C,31)+257,ye=fa(e,C+10,15)+4,me=ue+fa(e,C+5,31)+1;C+=14;for(var Te=new Po(me),Ne=new Po(19),we=0;we<ye;++we)Ne[$L[we]]=fa(e,C+we*3,7);C+=ye*3;for(var nt=fv(Ne),wt=(1<<nt)-1,It=vf(Ne,nt,1),we=0;we<me;){var Lt=It[fa(e,C,wt)];C+=Lt&15;var N=Lt>>4;if(N<16)Te[we++]=N;else{var Bt=0,cn=0;for(N==16?(cn=3+fa(e,C,3),C+=2,Bt=Te[we-1]):N==17?(cn=3+fa(e,C,7),C+=3):N==18&&(cn=11+fa(e,C,127),C+=7);cn--;)Te[we++]=Bt}}var bn=Te.subarray(0,ue),Ue=Te.subarray(ue);Z=fv(bn),H=fv(Ue),z=vf(bn,Z,1),j=vf(Ue,H,1)}else xo(1);else{var N=GL(C)+4,K=e[N-4]|e[N-3]<<8,ce=N+K;if(ce>l){u&&xo(0);break}g&&S(A+K),n.set(e.subarray(N,ce),A),t.b=A+=K,t.p=C=ce*8,t.f=b;continue}if(C>de){u&&xo(0);break}}g&&S(A+131072);for(var ot=(1<<Z)-1,Tt=(1<<H)-1,Ot=C;;Ot=C){var Bt=z[pv(e,C)&ot],at=Bt>>4;if(C+=Bt&15,C>de){u&&xo(0);break}if(Bt||xo(2),at<256)n[A++]=at;else if(at==256){Ot=C,z=null;break}else{var hn=at-254;if(at>264){var we=at-257,Dt=RI[we];hn=fa(e,C,(1<<Dt)-1)+$I[we],C+=Dt}var Zn=j[pv(e,C)&Tt],dn=Zn>>4;Zn||xo(3),C+=Zn&15;var Ue=NL[dn];if(dn>3){var Dt=LI[dn];Ue+=pv(e,C)&(1<<Dt)-1,C+=Dt}if(C>de){u&&xo(0);break}g&&S(A+131072);var Qn=A+hn;if(A<Ue){var ii=h-Ue,Er=Math.min(Ue,Qn);for(ii+A<0&&xo(3);A<Er;++A)n[A]=o[ii+A]}for(;A<Qn;A+=4)n[A]=n[A-Ue],n[A+1]=n[A+1-Ue],n[A+2]=n[A+2-Ue],n[A+3]=n[A+3-Ue];A=Qn}}t.l=z,t.p=Ot,t.b=A,t.f=b,z&&(b=1,t.m=Z,t.d=j,t.n=H)}while(!b);return A==n.length?n:WL(n,0,A)},ZL=new Po(0),HL=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&xo(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[n++]);return n+(t&2)},XL=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},KL=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&xo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&xo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function YL(e,t){return Ib(e,{i:2},t&&t.out,t&&t.dictionary)}function JL(e,t){var n=HL(e);return n+8>e.length&&xo(6,"invalid gzip data"),Ib(e.subarray(n,-8),{i:2},t&&t.out||new Po(XL(e)),t&&t.dictionary)}function QL(e,t){return Ib(e.subarray(KL(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function U1(e,t){return e[0]==31&&e[1]==139&&e[2]==8?JL(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?YL(e,t):QL(e,t)}var eF=typeof TextDecoder!="undefined"&&new TextDecoder,tF=0;try{eF.decode(ZL,{stream:!0}),tF=1}catch{}const VI=(e,t)=>e*2**t,Wd=(e,t)=>Math.floor(e/2**t),Kg=(e,t)=>VI(e.getUint16(t+1,!0),8)+e.getUint8(t),NI=(e,t)=>VI(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),nF=(e,t,n,o,l)=>{if(e!==o.getUint8(l))return e-o.getUint8(l);const h=Kg(o,l+1);if(t!==h)return t-h;const g=Kg(o,l+4);return n!==g?n-g:0},rF=(e,t,n,o)=>{const l=UI(e,t|128,n,o);return l?{z:t,x:n,y:o,offset:l[0],length:l[1],isDir:!0}:null},NE=(e,t,n,o)=>{const l=UI(e,t,n,o);return l?{z:t,x:n,y:o,offset:l[0],length:l[1],isDir:!1}:null},UI=(e,t,n,o)=>{let l=0,h=e.byteLength/17-1;for(;l<=h;){const g=h+l>>1,u=nF(t,n,o,e,g*17);if(u>0)l=g+1;else if(u<0)h=g-1;else return[NI(e,g*17+7),e.getUint32(g*17+13,!0)]}return null},iF=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,jI=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:Kg(e,t*17+1),y:Kg(e,t*17+4),offset:NI(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:n>>7===1}},UE=e=>{const t=[],n=new DataView(e);for(let o=0;o<n.byteLength/17;o++)t.push(jI(n,o));return oF(t)},oF=e=>{e.sort(iF);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let h=l.z;l.isDir&&(h=h|128),n[o*17]=h,n[o*17+1]=l.x&255,n[o*17+2]=l.x>>8&255,n[o*17+3]=l.x>>16&255,n[o*17+4]=l.y&255,n[o*17+5]=l.y>>8&255,n[o*17+6]=l.y>>16&255,n[o*17+7]=l.offset&255,n[o*17+8]=Wd(l.offset,8)&255,n[o*17+9]=Wd(l.offset,16)&255,n[o*17+10]=Wd(l.offset,24)&255,n[o*17+11]=Wd(l.offset,32)&255,n[o*17+12]=Wd(l.offset,48)&255,n[o*17+13]=l.length&255,n[o*17+14]=l.length>>8&255,n[o*17+15]=l.length>>16&255,n[o*17+16]=l.length>>24&255}return t},aF=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,o=jI(e,n-1);if(o.isDir){const l=o.z,h=t.z-l,g=Math.trunc(t.x/(1<<h)),u=Math.trunc(t.y/(1<<h));return{z:l,x:g,y:u}}return null};async function sF(e){const t=await e.getBytes(0,512e3),n=new DataView(t.data),o=n.getUint32(4,!0),l=n.getUint16(8,!0),h=new TextDecoder("utf-8"),g=JSON.parse(h.decode(new DataView(t.data,10,o)));let u=sg.Unknown;g.compression==="gzip"&&(u=sg.Gzip);let S=0;"minzoom"in g&&(S=+g.minzoom);let b=0;"maxzoom"in g&&(b=+g.maxzoom);let C=0,A=0,z=0,j=-180,Z=-85,H=180,de=85;if(g.bounds){const N=g.bounds.split(",");j=+N[0],Z=+N[1],H=+N[2],de=+N[3]}if(g.center){const N=g.center.split(",");C=+N[0],A=+N[1],z=+N[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:sg.None,tileCompression:u,tileType:Eu.Mvt,minZoom:S,maxZoom:b,minLon:j,minLat:Z,maxLon:H,maxLat:de,centerZoom:z,centerLon:C,centerLat:A,etag:t.etag}}async function lF(e,t,n,o,l,h,g){let u=await n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(u=UE(u));const S=NE(new DataView(u),o,l,h);if(S){let A=(await t.getBytes(S.offset,S.length,g)).data;const z=new DataView(A);return z.getUint8(0)===31&&z.getUint8(1)===139&&(A=U1(new Uint8Array(A))),{data:A}}const b=aF(new DataView(u),{z:o,x:l,y:h});if(b){const C=rF(new DataView(u),b.z,b.x,b.y);if(C){let A=await n.getArrayBuffer(t,C.offset,C.length,e);e.specVersion===1&&(A=UE(A));const z=NE(new DataView(A),o,l,h);if(z){let Z=(await t.getBytes(z.offset,z.length,g)).data;const H=new DataView(Z);return H.getUint8(0)===31&&H.getUint8(1)===139&&(Z=U1(new Uint8Array(Z))),{data:Z}}}}}var GI={getHeader:sF,getZxy:lF};const uF=e=>(t,n)=>{if(n instanceof AbortController)return e(t,n);const o=new AbortController;return e(t,o).then(l=>n(void 0,l.data,l.cacheControl||"",l.expires||""),l=>n(l)).catch(l=>n(l)),{cancel:()=>o.abort()}};class cF{constructor(){this.tilev4=async(t,n)=>{if(t.type==="json"){const z=t.url.substr(10);let j=this.tiles.get(z);j||(j=new dh(z),this.tiles.set(z,j));const Z=await j.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:Z.minZoom,maxzoom:Z.maxZoom,bounds:[Z.minLon,Z.minLat,Z.maxLon,Z.maxLat]}}}const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),l=t.url.match(o);if(!l)throw new Error("Invalid PMTiles protocol URL");const h=l[1];let g=this.tiles.get(h);g||(g=new dh(h),this.tiles.set(h,g));const u=l[2],S=l[3],b=l[4],C=await g.getHeader(),A=await(g==null?void 0:g.getZxy(+u,+S,+b,n.signal));return A?{data:new Uint8Array(A.data),cacheControl:A.cacheControl,expires:A.expires}:C.tileType===Eu.Mvt?{data:new Uint8Array}:{data:null}},this.tile=uF(this.tilev4),this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}}function Dc(e,t){return(t>>>0)*4294967296+(e>>>0)}function hF(e,t){const n=t.buf;let o=n[t.pos++],l=(o&112)>>4;if(o<128||(o=n[t.pos++],l|=(o&127)<<3,o<128)||(o=n[t.pos++],l|=(o&127)<<10,o<128)||(o=n[t.pos++],l|=(o&127)<<17,o<128)||(o=n[t.pos++],l|=(o&127)<<24,o<128)||(o=n[t.pos++],l|=(o&1)<<31,o<128))return Dc(e,l);throw new Error("Expected varint not more than 10 bytes")}function qd(e){const t=e.buf;let n=t[e.pos++],o=n&127;return n<128||(n=t[e.pos++],o|=(n&127)<<7,n<128)||(n=t[e.pos++],o|=(n&127)<<14,n<128)||(n=t[e.pos++],o|=(n&127)<<21,n<128)?o:(n=t[e.pos],o|=(n&15)<<28,hF(o,e))}function WI(e,t,n,o){if(o===0){n===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}function dF(e,t){const n=2**e;let o=t,l=t,h=t;const g=[0,0];let u=1;for(;u<n;)o=1&h/2,l=1&(h^o),WI(u,g,o,l),g[0]+=u*o,g[1]+=u*l,h=h/4,u*=2;return[e,g[0],g[1]]}const fF=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function pF(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>2**e-1||n>2**e-1)throw Error("tile x/y outside zoom level bounds");const o=fF[e],l=2**e;let h=0,g=0,u=0;const S=[t,n];let b=l/2;for(;b>0;)h=(S[0]&b)>0?1:0,g=(S[1]&b)>0?1:0,u+=b*b*(3*h^g),WI(b,S,h,g),b=b/2;return o+u}function By(e){let t=0;for(let n=0;n<27;n++){const o=(1<<n)*(1<<n);if(t+o>e)return dF(n,e-t);t+=o}throw Error("Tile zoom level exceeds max safe number limit (26)")}var sg=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(sg||{});async function qI(e,t){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream=="undefined")return U1(new Uint8Array(e));const n=new Response(e).body;if(!n)throw Error("Failed to read response stream");const o=n.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")}var Eu=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(Eu||{});const mF=127;function gF(e,t){let n=0,o=e.length-1;for(;n<=o;){const l=o+n>>1,h=t-e[l].tileId;if(h>0)n=l+1;else if(h<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}class yF{constructor(t){this.file=t}getKey(){return this.file.name}async getBytes(t,n){return{data:await this.file.slice(t,t+n).arrayBuffer()}}}class _F{constructor(t,n=new Headers){this.url=t,this.customHeaders=n,this.mustReload=!1}getKey(){return this.url}setHeaders(t){this.customHeaders=t}async getBytes(t,n,o,l){let h,g;o?g=o:(h=new AbortController,g=h.signal);const u=new Headers(this.customHeaders);u.set("range",`bytes=${t}-${t+n-1}`);let S;this.mustReload&&(S="reload");let b=await fetch(this.url,{signal:g,cache:S,headers:u});if(t===0&&b.status===416){const j=b.headers.get("Content-Range");if(!j||!j.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const Z=+j.substr(8);b=await fetch(this.url,{signal:g,cache:"reload",headers:{range:`bytes=0-${Z-1}`}})}let C=b.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),b.status===416||l&&C&&C!==l)throw this.mustReload=!0,new j1(l);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const A=b.headers.get("Content-Length");if(b.status===200&&(!A||+A>n))throw h&&h.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:await b.arrayBuffer(),etag:C||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}}}function pa(e,t){const n=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return n*2**32+o}function vF(e,t){const n=new DataView(e),o=n.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:pa(n,8),rootDirectoryLength:pa(n,16),jsonMetadataOffset:pa(n,24),jsonMetadataLength:pa(n,32),leafDirectoryOffset:pa(n,40),leafDirectoryLength:pa(n,48),tileDataOffset:pa(n,56),tileDataLength:pa(n,64),numAddressedTiles:pa(n,72),numTileEntries:pa(n,80),numTileContents:pa(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function ZI(e){const t={buf:new Uint8Array(e),pos:0},n=qd(t),o=[];let l=0;for(let h=0;h<n;h++){const g=qd(t);o.push({tileId:l+g,offset:0,length:0,runLength:1}),l+=g}for(let h=0;h<n;h++)o[h].runLength=qd(t);for(let h=0;h<n;h++)o[h].length=qd(t);for(let h=0;h<n;h++){const g=qd(t);g===0&&h>0?o[h].offset=o[h-1].offset+o[h-1].length:o[h].offset=g-1}return o}function xF(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}class j1 extends Error{}async function bF(e,t){const n=await e.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(xF(n.data)<3)return[await GI.getHeader(e)];const l=n.data.slice(0,mF),h=vF(l,n.etag),g=n.data.slice(h.rootDirectoryOffset,h.rootDirectoryOffset+h.rootDirectoryLength),u=`${e.getKey()}|${h.etag||""}|${h.rootDirectoryOffset}|${h.rootDirectoryLength}`,S=ZI(await t(g,h.internalCompression));return[h,[u,S.length,S]]}async function wF(e,t,n,o,l){const h=await e.getBytes(n,o,void 0,l.etag),g=await t(h.data,l.internalCompression),u=ZI(g);if(u.length===0)throw new Error("Empty directory is invalid");return u}class SF{constructor(t=100,n=!0,o=qI){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=o}async getHeader(t){const n=t.getKey(),o=this.cache.get(n);if(o)return o.lastUsed=this.counter++,await o.data;const l=new Promise((h,g)=>{bF(t,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),h(u[0]),this.prune()}).catch(u=>{g(u)})});return this.cache.set(n,{lastUsed:this.counter++,data:l}),l}async getDirectory(t,n,o,l){const h=`${t.getKey()}|${l.etag||""}|${n}|${o}`,g=this.cache.get(h);if(g)return g.lastUsed=this.counter++,await g.data;const u=new Promise((S,b)=>{wF(t,this.decompress,n,o,l).then(C=>{S(C),this.prune()}).catch(C=>{b(C)})});return this.cache.set(h,{lastUsed:this.counter++,data:u}),u}async getArrayBuffer(t,n,o,l){const h=`${t.getKey()}|${l.etag||""}|${n}|${o}`,g=this.cache.get(h);if(g)return g.lastUsed=this.counter++,await g.data;const u=new Promise((S,b)=>{t.getBytes(n,o,void 0,l.etag).then(C=>{S(C.data),this.cache.has(h),this.prune()}).catch(C=>{b(C)})});return this.cache.set(h,{lastUsed:this.counter++,data:u}),u}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,n;this.cache.forEach((o,l)=>{o.lastUsed<t&&(t=o.lastUsed,n=l)}),n&&this.cache.delete(n)}}async invalidate(t){const n=t.getKey();if(this.invalidations.get(n))return await this.invalidations.get(n);this.cache.delete(t.getKey());const o=new Promise((l,h)=>{this.getHeader(t).then(g=>{l(),this.invalidations.delete(n)}).catch(g=>{h(g)})});this.invalidations.set(n,o)}}class dh{constructor(t,n,o){typeof t=="string"?this.source=new _F(t):this.source=t,o?this.decompress=o:this.decompress=qI,n?this.cache=n:this.cache=new SF}async getHeader(){return await this.cache.getHeader(this.source)}async getZxyAttempt(t,n,o,l){const h=pF(t,n,o),g=await this.cache.getHeader(this.source);if(g.specVersion<3)return GI.getZxy(g,this.source,this.cache,t,n,o,l);if(t<g.minZoom||t>g.maxZoom)return;let u=g.rootDirectoryOffset,S=g.rootDirectoryLength;for(let b=0;b<=3;b++){const C=await this.cache.getDirectory(this.source,u,S,g),A=gF(C,h);if(A){if(A.runLength>0){const z=await this.source.getBytes(g.tileDataOffset+A.offset,A.length,l,g.etag);return{data:await this.decompress(z.data,g.tileCompression),cacheControl:z.cacheControl,expires:z.expires}}u=g.leafDirectoryOffset+A.offset,S=A.length}else return}throw Error("Maximum directory depth exceeded")}async getZxy(t,n,o,l){try{return await this.getZxyAttempt(t,n,o,l)}catch(h){if(h instanceof j1)return this.cache.invalidate(this.source),await this.getZxyAttempt(t,n,o,l);throw h}}async getMetadataAttempt(){const t=await this.cache.getHeader(this.source),n=await this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),o=await this.decompress(n.data,t.internalCompression),l=new TextDecoder("utf-8");return JSON.parse(l.decode(o))}async getMetadata(){try{return await this.getMetadataAttempt()}catch(t){if(t instanceof j1)return this.cache.invalidate(this.source),await this.getMetadataAttempt();throw t}}}var Mn="colors",$i="sizes",pt="space",EF={gap:pt,gridGap:pt,columnGap:pt,gridColumnGap:pt,rowGap:pt,gridRowGap:pt,inset:pt,insetBlock:pt,insetBlockEnd:pt,insetBlockStart:pt,insetInline:pt,insetInlineEnd:pt,insetInlineStart:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,marginBlock:pt,marginBlockEnd:pt,marginBlockStart:pt,marginInline:pt,marginInlineEnd:pt,marginInlineStart:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,paddingBlock:pt,paddingBlockEnd:pt,paddingBlockStart:pt,paddingInline:pt,paddingInlineEnd:pt,paddingInlineStart:pt,top:pt,right:pt,bottom:pt,left:pt,scrollMargin:pt,scrollMarginTop:pt,scrollMarginRight:pt,scrollMarginBottom:pt,scrollMarginLeft:pt,scrollMarginX:pt,scrollMarginY:pt,scrollMarginBlock:pt,scrollMarginBlockEnd:pt,scrollMarginBlockStart:pt,scrollMarginInline:pt,scrollMarginInlineEnd:pt,scrollMarginInlineStart:pt,scrollPadding:pt,scrollPaddingTop:pt,scrollPaddingRight:pt,scrollPaddingBottom:pt,scrollPaddingLeft:pt,scrollPaddingX:pt,scrollPaddingY:pt,scrollPaddingBlock:pt,scrollPaddingBlockEnd:pt,scrollPaddingBlockStart:pt,scrollPaddingInline:pt,scrollPaddingInlineEnd:pt,scrollPaddingInlineStart:pt,fontSize:"fontSizes",background:Mn,backgroundColor:Mn,backgroundImage:Mn,borderImage:Mn,border:Mn,borderBlock:Mn,borderBlockEnd:Mn,borderBlockStart:Mn,borderBottom:Mn,borderBottomColor:Mn,borderColor:Mn,borderInline:Mn,borderInlineEnd:Mn,borderInlineStart:Mn,borderLeft:Mn,borderLeftColor:Mn,borderRight:Mn,borderRightColor:Mn,borderTop:Mn,borderTopColor:Mn,caretColor:Mn,color:Mn,columnRuleColor:Mn,fill:Mn,outline:Mn,outlineColor:Mn,stroke:Mn,textDecorationColor:Mn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:$i,minBlockSize:$i,maxBlockSize:$i,inlineSize:$i,minInlineSize:$i,maxInlineSize:$i,width:$i,minWidth:$i,maxWidth:$i,height:$i,minHeight:$i,maxHeight:$i,flexBasis:$i,gridTemplateColumns:$i,gridTemplateRows:$i,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},kF=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,zh=()=>{const e=Object.create(null);return(t,n,...o)=>{const l=(h=>JSON.stringify(h,kF))(t);return l in e?e[l]:e[l]=n(t,...o)}},ku=Symbol.for("sxs.internal"),Mb=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),jE=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:TF}=Object.prototype,G1=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),CF=/\s+(?![^()]*\))/,Rc=e=>t=>e(...typeof t=="string"?String(t).split(CF):[t]),GE={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:Rc((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:Rc((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:Rc((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:Rc((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:Rc((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:Rc((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},mv=/([\d.]+)([^]*)/,PF=(e,t)=>e.length?e.reduce((n,o)=>(n.push(...t.map(l=>l.includes("&")?l.replace(/&/g,/[ +>|~]/.test(o)&&/&.*&/.test(l)?`:is(${o})`:o):o+" "+l)),n),[]):t,IF=(e,t)=>e in MF&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,o,l,h)=>o+(l==="stretch"?`-moz-available${h};${G1(e)}:${o}-webkit-fill-available`:`-moz-fit-content${h};${G1(e)}:${o}fit-content`)+h):String(t),MF={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Cs=e=>e?e+"-":"",HI=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(o,l,h,g,u)=>g=="$"==!!h?o:(l||g=="--"?"calc(":"")+"var(--"+(g==="$"?Cs(t)+(u.includes("$")?"":Cs(n))+u.replace(/\$/g,"-"):u)+")"+(l||g=="--"?"*"+(l||"")+(h||"1")+")":"")),AF=/\s*,\s*(?![^()]*\))/,zF=Object.prototype.toString,oh=(e,t,n,o,l)=>{let h,g,u;const S=(b,C,A)=>{let z,j;const Z=H=>{for(z in H){const N=z.charCodeAt(0)===64,K=N&&Array.isArray(H[z])?H[z]:[H[z]];for(j of K){const ce=/[A-Z]/.test(B=z)?B:B.replace(/-[^]/g,ye=>ye[1].toUpperCase()),ue=typeof j=="object"&&j&&j.toString===zF&&(!o.utils[ce]||!C.length);if(ce in o.utils&&!ue){const ye=o.utils[ce];if(ye!==g){g=ye,Z(ye(j)),g=null;continue}}else if(ce in GE){const ye=GE[ce];if(ye!==u){u=ye,Z(ye(j)),u=null;continue}}if(N&&(de=z.slice(1)in o.media?"@media "+o.media[z.slice(1)]:z,z=de.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(ye,me,Te,Ne,we,nt)=>{const wt=mv.test(me),It=.0625*(wt?-1:1),[Lt,Bt]=wt?[Ne,me]:[me,Ne];return"("+(Te[0]==="="?"":Te[0]===">"===wt?"max-":"min-")+Lt+":"+(Te[0]!=="="&&Te.length===1?Bt.replace(mv,(cn,bn,Ue)=>Number(bn)+It*(Te===">"?1:-1)+Ue):Bt)+(we?") and ("+(we[0]===">"?"min-":"max-")+Lt+":"+(we.length===1?nt.replace(mv,(cn,bn,Ue)=>Number(bn)+It*(we===">"?-1:1)+Ue):nt):"")+")"})),ue){const ye=N?A.concat(z):[...A],me=N?[...C]:PF(C,z.split(AF));h!==void 0&&l(WE(...h)),h=void 0,S(j,me,ye)}else h===void 0&&(h=[[],C,A]),z=N||z.charCodeAt(0)!==36?z:`--${Cs(o.prefix)}${z.slice(1).replace(/\$/g,"-")}`,j=ue?j:typeof j=="number"?j&&ce in DF?String(j)+"px":String(j):HI(IF(ce,j==null?"":j),o.prefix,o.themeMap[ce]),h[0].push(`${N?`${z} `:`${G1(z)}:`}${j}`)}}var de,B};Z(b),h!==void 0&&l(WE(...h)),h=void 0};S(e,t,n)},WE=(e,t,n)=>`${n.map(o=>`${o}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,DF={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},qE=e=>String.fromCharCode(e+(e>25?39:97)),Tu=e=>(t=>{let n,o="";for(n=Math.abs(t);n>52;n=n/52|0)o=qE(n%52)+o;return qE(n%52)+o})(((t,n)=>{let o=n.length;for(;o;)t=33*t^n.charCodeAt(--o);return t})(5381,JSON.stringify(e))>>>0),tf=["themed","global","styled","onevar","resonevar","allvar","inline"],RF=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},LF=e=>{let t;const n=()=>{const{cssRules:l}=t.sheet;return[].map.call(l,(h,g)=>{const{cssText:u}=h;let S="";if(u.startsWith("--sxs"))return"";if(l[g-1]&&(S=l[g-1].cssText).startsWith("--sxs")){if(!h.cssRules.length)return"";for(const b in t.rules)if(t.rules[b].group===h)return`--sxs{--sxs:${[...t.rules[b].cache].join(" ")}}${u}`;return h.cssRules.length?`${S}${u}`:""}return u}).join("")},o=()=>{if(t){const{rules:u,sheet:S}=t;if(!S.deleteRule){for(;Object(Object(S.cssRules)[0]).type===3;)S.cssRules.splice(0,1);S.cssRules=[]}for(const b in u)delete u[b]}const l=Object(e).styleSheets||[];for(const u of l)if(RF(u)){for(let S=0,b=u.cssRules;b[S];++S){const C=Object(b[S]);if(C.type!==1)continue;const A=Object(b[S+1]);if(A.type!==4)continue;++S;const{cssText:z}=C;if(!z.startsWith("--sxs"))continue;const j=z.slice(14,-3).trim().split(/\s+/),Z=tf[j[0]];Z&&(t||(t={sheet:u,reset:o,rules:{},toString:n}),t.rules[Z]={group:A,index:S,cache:new Set(j)})}if(t)break}if(!t){const u=(S,b)=>({type:b,cssRules:[],insertRule(C,A){this.cssRules.splice(A,0,u(C,{import:3,undefined:1}[(C.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return S==="@media{}"?`@media{${[].map.call(this.cssRules,C=>C.cssText).join("")}}`:S}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:o,toString:n}}const{sheet:h,rules:g}=t;for(let u=tf.length-1;u>=0;--u){const S=tf[u];if(!g[S]){const b=tf[u+1],C=g[b]?g[b].index:h.cssRules.length;h.insertRule("@media{}",C),h.insertRule(`--sxs{--sxs:${u}}`,C),g[S]={group:h.cssRules[C+1],index:C,cache:new Set([u])}}FF(g[S])}};return o(),t},FF=e=>{const t=e.group;let n=t.cssRules.length;e.apply=o=>{try{t.insertRule(o,n),++n}catch{}}},Zd=Symbol(),OF=zh(),ZE=(e,t)=>OF(e,()=>(...n)=>{let o={type:null,composers:new Set};for(const l of n)if(l!=null)if(l[ku]){o.type==null&&(o.type=l[ku].type);for(const h of l[ku].composers)o.composers.add(h)}else l.constructor!==Object||l.$$typeof?o.type==null&&(o.type=l):o.composers.add($F(l,e));return o.type==null&&(o.type="span"),o.composers.size||o.composers.add(["PJLV",{},[],[],{},[]]),BF(e,o,t)}),$F=({variants:e,compoundVariants:t,defaultVariants:n,...o},l)=>{const h=`${Cs(l.prefix)}c-${Tu(o)}`,g=[],u=[],S=Object.create(null),b=[];for(const z in n)S[z]=String(n[z]);if(typeof e=="object"&&e)for(const z in e){C=S,A=z,TF.call(C,A)||(S[z]="undefined");const j=e[z];for(const Z in j){const H={[z]:String(Z)};String(Z)==="undefined"&&b.push(z);const de=j[Z],B=[H,de,!jE(de)];g.push(B)}}var C,A;if(typeof t=="object"&&t)for(const z of t){let{css:j,...Z}=z;j=typeof j=="object"&&j||{};for(const de in Z)Z[de]=String(Z[de]);const H=[Z,j,!jE(j)];u.push(H)}return[h,o,g,u,S,b]},BF=(e,t,n)=>{const[o,l,h,g]=VF(t.composers),u=typeof t.type=="function"||t.type.$$typeof?(A=>{function z(){for(let j=0;j<z[Zd].length;j++){const[Z,H]=z[Zd][j];A.rules[Z].apply(H)}return z[Zd]=[],null}return z[Zd]=[],z.rules={},tf.forEach(j=>z.rules[j]={apply:Z=>z[Zd].push([j,Z])}),z})(n):null,S=(u||n).rules,b=`.${o}${l.length>1?`:where(.${l.slice(1).join(".")})`:""}`,C=A=>{A=typeof A=="object"&&A||NF;const{css:z,...j}=A,Z={};for(const B in h)if(delete j[B],B in A){let N=A[B];typeof N=="object"&&N?Z[B]={"@initial":h[B],...N}:(N=String(N),Z[B]=N!=="undefined"||g.has(B)?N:h[B])}else Z[B]=h[B];const H=new Set([...l]);for(const[B,N,K,ce]of t.composers){n.rules.styled.cache.has(B)||(n.rules.styled.cache.add(B),oh(N,[`.${B}`],[],e,me=>{S.styled.apply(me)}));const ue=HE(K,Z,e.media),ye=HE(ce,Z,e.media,!0);for(const me of ue)if(me!==void 0)for(const[Te,Ne,we]of me){const nt=`${B}-${Tu(Ne)}-${Te}`;H.add(nt);const wt=(we?n.rules.resonevar:n.rules.onevar).cache,It=we?S.resonevar:S.onevar;wt.has(nt)||(wt.add(nt),oh(Ne,[`.${nt}`],[],e,Lt=>{It.apply(Lt)}))}for(const me of ye)if(me!==void 0)for(const[Te,Ne]of me){const we=`${B}-${Tu(Ne)}-${Te}`;H.add(we),n.rules.allvar.cache.has(we)||(n.rules.allvar.cache.add(we),oh(Ne,[`.${we}`],[],e,nt=>{S.allvar.apply(nt)}))}}if(typeof z=="object"&&z){const B=`${o}-i${Tu(z)}-css`;H.add(B),n.rules.inline.cache.has(B)||(n.rules.inline.cache.add(B),oh(z,[`.${B}`],[],e,N=>{S.inline.apply(N)}))}for(const B of String(A.className||"").trim().split(/\s+/))B&&H.add(B);const de=j.className=[...H].join(" ");return{type:t.type,className:de,selector:b,props:j,toString:()=>de,deferredInjector:u}};return Mb(C,{className:o,selector:b,[ku]:t,toString:()=>(n.rules.styled.cache.has(o)||C(),o)})},VF=e=>{let t="";const n=[],o={},l=[];for(const[h,,,,g,u]of e){t===""&&(t=h),n.push(h),l.push(...u);for(const S in g){const b=g[S];(o[S]===void 0||b!=="undefined"||u.includes(b))&&(o[S]=b)}}return[t,n,o,new Set(l)]},HE=(e,t,n,o)=>{const l=[];e:for(let[h,g,u]of e){if(u)continue;let S,b=0,C=!1;for(S in h){const A=h[S];let z=t[S];if(z!==A){if(typeof z!="object"||!z)continue e;{let j,Z,H=0;for(const de in z){if(A===String(z[de])){if(de!=="@initial"){const B=de.slice(1);(Z=Z||[]).push(B in n?n[B]:de.replace(/^@media ?/,"")),C=!0}b+=H,j=!0}++H}if(Z&&Z.length&&(g={["@media "+Z.join(", ")]:g}),!j)continue e}}}(l[b]=l[b]||[]).push([o?"cv":`${S}-${h[S]}`,g,C])}return l},NF={},UF=zh(),jF=(e,t)=>UF(e,()=>(...n)=>{const o=()=>{for(let l of n){l=typeof l=="object"&&l||{};let h=Tu(l);if(!t.rules.global.cache.has(h)){if(t.rules.global.cache.add(h),"@import"in l){let g=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let u of[].concat(l["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,t.sheet.insertRule(`@import ${u};`,g++);delete l["@import"]}oh(l,[],[],e,g=>{t.rules.global.apply(g)})}}return""};return Mb(o,{toString:o})}),GF=zh(),WF=(e,t)=>GF(e,()=>n=>{const o=`${Cs(e.prefix)}k-${Tu(n)}`,l=()=>{if(!t.rules.global.cache.has(o)){t.rules.global.cache.add(o);const h=[];oh(n,[],[],e,u=>h.push(u));const g=`@keyframes ${o}{${h.join("")}}`;t.rules.global.apply(g)}return o};return Mb(l,{get name(){return l()},toString:l})}),qF=class{constructor(e,t,n,o){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=n==null?"":String(n),this.prefix=o==null?"":String(o)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Cs(this.prefix)+Cs(this.scale)+this.token}toString(){return this.computedValue}},ZF=zh(),HF=(e,t)=>ZF(e,()=>(n,o)=>{o=typeof n=="object"&&n||Object(o);const l=`.${n=(n=typeof n=="string"?n:"")||`${Cs(e.prefix)}t-${Tu(o)}`}`,h={},g=[];for(const S in o){h[S]={};for(const b in o[S]){const C=`--${Cs(e.prefix)}${S}-${b}`,A=HI(String(o[S][b]),e.prefix,S);h[S][b]=new qF(b,A,S,e.prefix),g.push(`${C}:${A}`)}}const u=()=>{if(g.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);const S=`${o===e.theme?":root,":""}.${n}{${g.join(";")}}`;t.rules.themed.apply(S)}return n};return{...h,get className(){return u()},selector:l,toString:u}}),XF=zh(),XE,KF=zh(),XI=e=>{const t=(n=>{let o=!1;const l=XF(n,h=>{o=!0;const g="prefix"in(h=typeof h=="object"&&h||{})?String(h.prefix):"",u=typeof h.media=="object"&&h.media||{},S=typeof h.root=="object"?h.root||null:globalThis.document||null,b=typeof h.theme=="object"&&h.theme||{},C={prefix:g,media:u,theme:b,themeMap:typeof h.themeMap=="object"&&h.themeMap||{...EF},utils:typeof h.utils=="object"&&h.utils||{}},A=LF(S),z={css:ZE(C,A),globalCss:jF(C,A),keyframes:WF(C,A),createTheme:HF(C,A),reset(){A.reset(),z.theme.toString()},theme:{},sheet:A,config:C,prefix:g,getCssText:A.toString,toString:A.toString};return String(z.theme=z.createTheme(b)),z});return o||l.reset(),l})(e);return t.styled=(({config:n,sheet:o})=>KF(n,()=>{const l=ZE(n,o);return(...h)=>{const g=l(...h),u=g[ku].type,S=Oe.forwardRef((b,C)=>{const A=b&&b.as||u,{props:z,deferredInjector:j}=g(b);return delete z.as,z.ref=C,j?Oe.createElement(Oe.Fragment,null,Oe.createElement(A,z),Oe.createElement(j,null)):Oe.createElement(A,z)});return S.className=g.className,S.displayName=`Styled.${u.displayName||u.name||u}`,S.selector=g.selector,S.toString=()=>g.selector,S[ku]=g[ku],S}}))(t),t},YF=()=>XE||(XE=XI()),JF=(...e)=>YF().globalCss(...e);const{styled:un}=XI({theme:{colors:{black:"rgba(0, 0, 0)",white:"rgba(236, 237, 238)",hover:"#7180B9",primary:"#3423A6",primaryText:"white"},fonts:{sans:"Inter, sans-serif"},fontSizes:{1:"12px",2:"14px",3:"16px",4:"20px",5:"24px",6:"32px"},space:{1:"10px",2:"20px",3:"40px"},sizes:{1:"4px",2:"8px",3:"16px",4:"32px",5:"64px",6:"128px"},radii:{1:"2px",2:"4px",3:"8px",round:"9999px"},fontWeights:{},lineHeights:{},letterSpacings:{},borderWidths:{},borderStyles:{},shadows:{},zIndices:{},transitions:{}}}),QF=JF({"*":{margin:0,padding:0,border:0},body:{backgroundColor:"$black",color:"$white",fontFamily:"sans-serif"}});var e6=fh;function fh(e,t){this.x=e,this.y=t}fh.prototype={clone:function(){return new fh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),o=t*this.x-n*this.y,l=n*this.x+t*this.y;return this.x=o,this.y=l,this},_rotateAround:function(e,t){var n=Math.cos(e),o=Math.sin(e),l=t.x+n*(this.x-t.x)-o*(this.y-t.y),h=t.y+o*(this.x-t.x)+n*(this.y-t.y);return this.x=l,this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};fh.convert=function(e){return e instanceof fh?e:Array.isArray(e)?new fh(e[0],e[1]):e};var t6=e6,n6=bh;function bh(e,t,n,o,l){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=l,e.readFields(r6,this,t)}function r6(e,t,n){e==1?t.id=n.readVarint():e==2?i6(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function i6(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var o=t._keys[e.readVarint()],l=t._values[e.readVarint()];t.properties[o]=l}}bh.types=["Unknown","Point","LineString","Polygon"];bh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,o=0,l=0,h=0,g=[],u;e.pos<t;){if(o<=0){var S=e.readVarint();n=S&7,o=S>>3}if(o--,n===1||n===2)l+=e.readSVarint(),h+=e.readSVarint(),n===1&&(u&&g.push(u),u=[]),u.push(new t6(l,h));else if(n===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+n)}return u&&g.push(u),g};bh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,o=0,l=0,h=0,g=1/0,u=-1/0,S=1/0,b=-1/0;e.pos<t;){if(o<=0){var C=e.readVarint();n=C&7,o=C>>3}if(o--,n===1||n===2)l+=e.readSVarint(),h+=e.readSVarint(),l<g&&(g=l),l>u&&(u=l),h<S&&(S=h),h>b&&(b=h);else if(n!==7)throw new Error("unknown command "+n)}return[g,S,u,b]};bh.prototype.toGeoJSON=function(e,t,n){var o=this.extent*Math.pow(2,n),l=this.extent*e,h=this.extent*t,g=this.loadGeometry(),u=bh.types[this.type],S,b;function C(j){for(var Z=0;Z<j.length;Z++){var H=j[Z],de=180-(H.y+h)*360/o;j[Z]=[(H.x+l)*360/o-180,360/Math.PI*Math.atan(Math.exp(de*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(S=0;S<g.length;S++)A[S]=g[S][0];g=A,C(g);break;case 2:for(S=0;S<g.length;S++)C(g[S]);break;case 3:for(g=o6(g),S=0;S<g.length;S++)for(b=0;b<g[S].length;b++)C(g[S][b]);break}g.length===1?g=g[0]:u="Multi"+u;var z={type:"Feature",geometry:{type:u,coordinates:g},properties:this.properties};return"id"in this&&(z.id=this.id),z};function o6(e){var t=e.length;if(t<=1)return[e];for(var n=[],o,l,h=0;h<t;h++){var g=a6(e[h]);g!==0&&(l===void 0&&(l=g<0),l===g<0?(o&&n.push(o),o=[e[h]]):o.push(e[h]))}return o&&n.push(o),n}function a6(e){for(var t=0,n=0,o=e.length,l=o-1,h,g;n<o;l=n++)h=e[n],g=e[l],t+=(g.x-h.x)*(h.y+g.y);return t}var s6=n6,l6=KI;function KI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(u6,this,t),this.length=this._features.length}function u6(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(c6(n))}function c6(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var o=e.readVarint()>>3;t=o===1?e.readString():o===2?e.readFloat():o===3?e.readDouble():o===4?e.readVarint64():o===5?e.readVarint():o===6?e.readSVarint():o===7?e.readBoolean():null}return t}KI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new s6(this._pbf,t,this.extent,this._keys,this._values)};var h6=l6,d6=f6;function f6(e,t){this.layers=e.readFields(p6,{},t)}function p6(e,t,n){if(e===3){var o=new h6(n,n.readVarint()+n.pos);o.length&&(t[o.name]=o)}}var m6=d6;const W1=Math.PI,q1=2*W1,du=1e-6,g6=q1-du;function Z1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function YI(){return new Z1}Z1.prototype=YI.prototype={constructor:Z1,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,o){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+o)},bezierCurveTo:function(e,t,n,o,l,h){this._+="C"+ +e+","+ +t+","+ +n+","+ +o+","+(this._x1=+l)+","+(this._y1=+h)},arcTo:function(e,t,n,o,l){e=+e,t=+t,n=+n,o=+o,l=+l;var h=this._x1,g=this._y1,u=n-e,S=o-t,b=h-e,C=g-t,A=b*b+C*C;if(l<0)throw new Error("negative radius: "+l);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(A>du)if(!(Math.abs(C*u-S*b)>du)||!l)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var z=n-h,j=o-g,Z=u*u+S*S,H=z*z+j*j,de=Math.sqrt(Z),B=Math.sqrt(A),N=l*Math.tan((W1-Math.acos((Z+A-H)/(2*de*B)))/2),K=N/B,ce=N/de;Math.abs(K-1)>du&&(this._+="L"+(e+K*b)+","+(t+K*C)),this._+="A"+l+","+l+",0,0,"+ +(C*z>b*j)+","+(this._x1=e+ce*u)+","+(this._y1=t+ce*S)}},arc:function(e,t,n,o,l,h){e=+e,t=+t,n=+n,h=!!h;var g=n*Math.cos(o),u=n*Math.sin(o),S=e+g,b=t+u,C=1^h,A=h?o-l:l-o;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+S+","+b:(Math.abs(this._x1-S)>du||Math.abs(this._y1-b)>du)&&(this._+="L"+S+","+b),n&&(A<0&&(A=A%q1+q1),A>g6?this._+="A"+n+","+n+",0,1,"+C+","+(e-g)+","+(t-u)+"A"+n+","+n+",0,1,"+C+","+(this._x1=S)+","+(this._y1=b):A>du&&(this._+="A"+n+","+n+",0,"+ +(A>=W1)+","+C+","+(this._x1=e+n*Math.cos(l))+","+(this._y1=t+n*Math.sin(l))))},rect:function(e,t,n,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +o+"h"+-n+"Z"},toString:function(){return this._}};function y6(e){for(var t=e.length/6|0,n=new Array(t),o=0;o<t;)n[o]="#"+e.slice(o*6,++o*6);return n}var xf=y6("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ab={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ab.read=function(e,t,n,o,l){var h,g,u=l*8-o-1,S=(1<<u)-1,b=S>>1,C=-7,A=n?l-1:0,z=n?-1:1,j=e[t+A];for(A+=z,h=j&(1<<-C)-1,j>>=-C,C+=u;C>0;h=h*256+e[t+A],A+=z,C-=8);for(g=h&(1<<-C)-1,h>>=-C,C+=o;C>0;g=g*256+e[t+A],A+=z,C-=8);if(h===0)h=1-b;else{if(h===S)return g?NaN:(j?-1:1)*(1/0);g=g+Math.pow(2,o),h=h-b}return(j?-1:1)*g*Math.pow(2,h-o)};Ab.write=function(e,t,n,o,l,h){var g,u,S,b=h*8-l-1,C=(1<<b)-1,A=C>>1,z=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=o?0:h-1,Z=o?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,g=C):(g=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-g))<1&&(g--,S*=2),g+A>=1?t+=z/S:t+=z*Math.pow(2,1-A),t*S>=2&&(g++,S/=2),g+A>=C?(u=0,g=C):g+A>=1?(u=(t*S-1)*Math.pow(2,l),g=g+A):(u=t*Math.pow(2,A-1)*Math.pow(2,l),g=0));l>=8;e[n+j]=u&255,j+=Z,u/=256,l-=8);for(g=g<<l|u,b+=l;b>0;e[n+j]=g&255,j+=Z,g/=256,b-=8);e[n+j-Z]|=H*128};var _6=xn,Lm=Ab;function xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}xn.Varint=0;xn.Fixed64=1;xn.Bytes=2;xn.Fixed32=5;var H1=(1<<16)*(1<<16),KE=1/H1,v6=12,JI=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var o=this.readVarint(),l=o>>3,h=this.pos;this.type=o&7,e(l,t,this),this.pos===h&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Fm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=JE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Fm(this.buf,this.pos)+Fm(this.buf,this.pos+4)*H1;return this.pos+=8,e},readSFixed64:function(){var e=Fm(this.buf,this.pos)+JE(this.buf,this.pos+4)*H1;return this.pos+=8,e},readFloat:function(){var e=Lm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Lm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,o;return o=t[this.pos++],n=o&127,o<128||(o=t[this.pos++],n|=(o&127)<<7,o<128)||(o=t[this.pos++],n|=(o&127)<<14,o<128)||(o=t[this.pos++],n|=(o&127)<<21,o<128)?n:(o=t[this.pos],n|=(o&15)<<28,x6(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=v6&&JI?R6(this.buf,t,e):D6(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==xn.Bytes)return e.push(this.readVarint(t));var n=hs(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==xn.Bytes)return e.push(this.readSVarint());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==xn.Bytes)return e.push(this.readBoolean());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==xn.Bytes)return e.push(this.readFloat());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==xn.Bytes)return e.push(this.readDouble());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==xn.Bytes)return e.push(this.readFixed32());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==xn.Bytes)return e.push(this.readSFixed32());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==xn.Bytes)return e.push(this.readFixed64());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==xn.Bytes)return e.push(this.readSFixed64());var t=hs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===xn.Fixed32)this.pos+=4;else if(t===xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Fc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Fc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Fc(this.buf,e&-1,this.pos),Fc(this.buf,Math.floor(e*KE),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Fc(this.buf,e&-1,this.pos),Fc(this.buf,Math.floor(e*KE),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){b6(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=L6(this.buf,e,this.pos);var n=this.pos-t;n>=128&&YE(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Lm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Lm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var o=this.pos-n;o>=128&&YE(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,n){this.writeTag(e,xn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,E6,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,k6,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,P6,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,T6,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,C6,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,I6,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,M6,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,A6,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,z6,t)},writeBytesField:function(e,t){this.writeTag(e,xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function x6(e,t,n){var o=n.buf,l,h;if(h=o[n.pos++],l=(h&112)>>4,h<128||(h=o[n.pos++],l|=(h&127)<<3,h<128)||(h=o[n.pos++],l|=(h&127)<<10,h<128)||(h=o[n.pos++],l|=(h&127)<<17,h<128)||(h=o[n.pos++],l|=(h&127)<<24,h<128)||(h=o[n.pos++],l|=(h&1)<<31,h<128))return Lc(e,l,t);throw new Error("Expected varint not more than 10 bytes")}function hs(e){return e.type===xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Lc(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function b6(e,t){var n,o;if(e>=0?(n=e%4294967296|0,o=e/4294967296|0):(n=~(-e%4294967296),o=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,o=o+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),w6(n,o,t),S6(o,t)}function w6(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function S6(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function YE(e,t,n){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(o);for(var l=n.pos-1;l>=e;l--)n.buf[l+o]=n.buf[l]}function E6(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function k6(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function T6(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function C6(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function P6(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function I6(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function M6(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function A6(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function z6(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Fm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Fc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function JE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function D6(e,t,n){for(var o="",l=t;l<n;){var h=e[l],g=null,u=h>239?4:h>223?3:h>191?2:1;if(l+u>n)break;var S,b,C;u===1?h<128&&(g=h):u===2?(S=e[l+1],(S&192)===128&&(g=(h&31)<<6|S&63,g<=127&&(g=null))):u===3?(S=e[l+1],b=e[l+2],(S&192)===128&&(b&192)===128&&(g=(h&15)<<12|(S&63)<<6|b&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):u===4&&(S=e[l+1],b=e[l+2],C=e[l+3],(S&192)===128&&(b&192)===128&&(C&192)===128&&(g=(h&15)<<18|(S&63)<<12|(b&63)<<6|C&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,u=1):g>65535&&(g-=65536,o+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),o+=String.fromCharCode(g),l+=u}return o}function R6(e,t,n){return JI.decode(e.subarray(t,n))}function L6(e,t,n){for(var o=0,l,h;o<t.length;o++){if(l=t.charCodeAt(o),l>55295&&l<57344)if(h)if(l<56320){e[n++]=239,e[n++]=191,e[n++]=189,h=l;continue}else l=h-55296<<10|l-56320|65536,h=null;else{l>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):h=l;continue}else h&&(e[n++]=239,e[n++]=191,e[n++]=189,h=null);l<128?e[n++]=l:(l<2048?e[n++]=l>>6|192:(l<65536?e[n++]=l>>12|224:(e[n++]=l>>18|240,e[n++]=l>>12&63|128),e[n++]=l>>6&63|128),e[n++]=l&63|128)}return n}var QI={exports:{}},F6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",O6=F6,$6=O6;function eM(){}function tM(){}tM.resetWarningCache=eM;var B6=function(){function e(o,l,h,g,u,S){if(S!==$6){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tM,resetWarningCache:eM};return n.PropTypes=n,n};QI.exports=B6();var Me=QI.exports;function nM(e,t){return Array.isArray(t)?[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]:{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}}function rM(e,t){return t.map(n=>nM(e,n))}function lp(e){return{a:parseFloat(e.a),b:parseFloat(e.b),c:parseFloat(e.c),d:parseFloat(e.d),e:parseFloat(e.e),f:parseFloat(e.f)}}function iM(){return{a:1,c:0,e:0,b:0,d:1,f:0}}function oM(e){const{a:t,b:n,c:o,d:l,e:h,f:g}=e,u=t*l-n*o;return{a:l/u,b:n/-u,c:o/-u,d:t/u,e:(l*h-o*g)/-u,f:(n*h-t*g)/u}}function gv(e){return typeof e=="undefined"}function Mo(e,t=0){return{a:1,c:0,e,b:0,d:1,f:t}}function Ps(...e){e=Array.isArray(e[0])?e[0]:e;const t=(n,o)=>({a:n.a*o.a+n.c*o.b,c:n.a*o.c+n.c*o.d,e:n.a*o.e+n.c*o.f+n.e,b:n.b*o.a+n.d*o.b,d:n.b*o.c+n.d*o.d,f:n.b*o.e+n.d*o.f+n.f});switch(e.length){case 0:throw new Error("no matrices provided");case 1:return e[0];case 2:return t(e[0],e[1]);default:{const[n,o,...l]=e,h=t(n,o);return Ps(h,...l)}}}function Cu(e,t=void 0,n=void 0,o=void 0){gv(t)&&(t=e);const l={a:e,c:0,e:0,b:0,d:t,f:0};return gv(n)||gv(o)?l:Ps([Mo(n,o),l,Mo(-n,-o)])}function V6(e){return N6(e)}function N6(e){return`matrix(${e.a},${e.b},${e.c},${e.d},${e.e},${e.f})`}function U6(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function Vy(e,t,n,o){var l=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(l,Vy.prototype),l.expected=t,l.found=n,l.location=o,l.name="SyntaxError",l}U6(Vy,Error);function yv(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}Vy.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,o;for(o=0;o<e.length;o++)if(e[o].source===this.location.source){n=e[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,h=this.location.source+":"+l.line+":"+l.column;if(n){var g=this.location.end,u=yv("",l.line.toString().length," "),S=n[l.line-1],b=l.line===g.line?g.column:S.length+1,C=b-l.column||1;t+=`
 --> `+h+`
`+u+` |
`+l.line+" | "+S+`
`+u+" | "+yv("",l.column-1," ")+yv("",C,"^")}else t+=`
 at `+h}return t};Vy.buildMessage=function(e,t){var n={literal:function(b){return'"'+l(b.text)+'"'},class:function(b){var C=b.parts.map(function(A){return Array.isArray(A)?h(A[0])+"-"+h(A[1]):h(A)});return"["+(b.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(b){return b.description}};function o(b){return b.charCodeAt(0).toString(16).toUpperCase()}function l(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+o(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+o(C)})}function h(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+o(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+o(C)})}function g(b){return n[b.type](b)}function u(b){var C=b.map(g),A,z;if(C.sort(),C.length>0){for(A=1,z=1;A<C.length;A++)C[A-1]!==C[A]&&(C[z]=C[A],z++);C.length=z}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function S(b){return b?'"'+l(b)+'"':"end of input"}return"Expected "+u(e)+" but "+S(t)+" found."};var Do="idle",wa="panning",Sa="zooming",va="auto",gl="none",Wa="pan",Is="zoom-in",wl="zoom-out",Yg="none",Na="top",Ro="right",Ua="bottom",Gi="left",Ny="zoom",up="pan",wh="center",Sh="left",zb="right",Eh="top",Db="bottom",QE="cover";function X1(e){return X1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X1(e)}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function Jg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(o){j6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function j6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aM=3,sM=Do;function tk(e,t,n,o,l,h){var g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;return Nn({},Jg(Jg({},iM()),{},{version:aM,mode:sM,focus:!1,pinchPointDistance:null,prePinchMode:null,viewerWidth:e,viewerHeight:t,SVGMinX:n,SVGMinY:o,SVGWidth:l,SVGHeight:h,scaleFactorMin:g,scaleFactorMax:u,startX:null,startY:null,endX:null,endY:null,miniatureOpen:!0,lastAction:null}))}function Nn(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return e=Object.assign({},e,t,{lastAction:n}),Object.freeze(e)}function G6(e){return e!==null&&X1(e)==="object"&&e.hasOwnProperty("version")&&e.version===aM}function ea(e,t,n){var o=lp(e),l=oM(o);return nM(l,{x:t,y:n})}function lg(e){var t=lp(e);return{scaleFactor:t.a,translationX:t.e,translationY:t.f}}function W6(e,t){return Nn(e,{focus:t})}function q6(e,t,n){return Nn(e,{viewerWidth:t,viewerHeight:n})}function nk(e,t,n,o,l){return Nn(e,{SVGMinX:t,SVGMinY:n,SVGWidth:o,SVGHeight:l})}function Z6(e,t,n){return Nn(e,{scaleFactorMin:t,scaleFactorMax:n})}function H6(e,t,n,o){var l=e.viewerWidth,h=e.viewerHeight,g=Ps(Mo(-t+l/2,-n+h/2),Mo(t,n),Cu(o,o),Mo(-t,-n));return Nn(e,Jg({mode:Do},g))}function X6(e){return Nn(e,Jg({mode:Do},iM()))}function lM(e){return Nn(e,{mode:sM,startX:null,startY:null,endX:null,endY:null})}function K6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y6(e,t,n){return t&&rk(e.prototype,t),n&&rk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var uM=function(){function e(t,n,o){K6(this,e),this.originalEvent=t,this.value=n,this.SVGViewer=o}return Y6(e,[{key:"scaleFactor",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||lg(this.value),this._cacheDecomposedValue.scaleFactor}},{key:"translationX",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||lg(this.value),this._cacheDecomposedValue.translationX}},{key:"translationY",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||lg(this.value),this._cacheDecomposedValue.translationY}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}}]),e}();function ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function J6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(n),!0).forEach(function(o){Q6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Q6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eO(e,t){return iO(e)||rO(e,t)||nO(e,t)||tO()}function tO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nO(e,t){if(!!e){if(typeof e=="string")return ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(e,t)}}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function rO(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,g,u;try{for(n=n.call(e);!(l=(g=n.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function iO(e){if(Array.isArray(e))return e}function Rb(e,t,n){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,l=Ps(lp(e),Mo(t,n));if(o){var h=rM(l,[{x:e.SVGMinX+o,y:e.SVGMinY+o},{x:e.SVGMinX+e.SVGWidth-o,y:e.SVGMinY+e.SVGHeight-o}]),g=eO(h,2),u=g[0],S=u.x,b=u.y,C=g[1],A=C.x,z=C.y,j=0;e.viewerWidth-S<0?j=e.viewerWidth-S:A<0&&(j=-A);var Z=0;e.viewerHeight-b<0?Z=e.viewerHeight-b:z<0&&(Z=-z),l=Ps(Mo(j,Z),l)}return Nn(e,J6({mode:Do},l),up)}function oO(e,t,n){return Nn(e,{mode:wa,startX:t,startY:n,endX:t,endY:n},up)}function aO(e,t,n,o){if(e.mode!==wa)throw new Error("update pan not allowed in this mode "+e.mode);var l=e.endX,h=e.endY,g=ea(e,l,h),u=ea(e,t,n),S=u.x-g.x,b=u.y-g.y,C=Rb(e,S,b,o);return Nn(C,{mode:wa,endX:t,endY:n},up)}function cM(e){return Nn(e,{mode:Do,startX:null,startY:null,endX:null,endY:null},up)}function sO(e,t,n){var o=0,l=0;return n<=20&&(l=2),e.viewerWidth-t<=20&&(o=-2),e.viewerHeight-n<=20&&(l=-2),t<=20&&(o=2),o=o/e.d,l=l/e.d,o===0&&l===0?e:Rb(e,o,l)}function hM(e,t){if(e.x<=t.x&&e.y<=t.y)return{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y};if(e.x>=t.x&&e.y<=t.y)return{x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y};if(e.x>=t.x&&e.y>=t.y)return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y};if(e.x<=t.x&&e.y>=t.y)return{x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}}function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(n),!0).forEach(function(o){lO(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function lO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uy(e,t){var n=lg(e),o=n.scaleFactor,l=e.scaleFactorMin&&o*t<e.scaleFactorMin,h=e.scaleFactorMax&&o*t>e.scaleFactorMax;return l&&t<1||h&&t>1}function Lb(e,t){var n=t.a;return e.scaleFactorMin!=null&&(n=Math.max(n,e.scaleFactorMin)),e.scaleFactorMax!=null&&(n=Math.min(n,e.scaleFactorMax)),Nn(t,{a:n,d:n})}function Dh(e,t,n,o){if(Uy(e,o))return e;var l=Ps(lp(e),Mo(t,n),Cu(o,o),Mo(-t,-n));return Nn(e,kh(kh({mode:Do},l),{},{startX:null,startY:null,endX:null,endY:null}),Ny)}function dM(e,t,n,o,l){var h=e.viewerWidth,g=e.viewerHeight,u=h/o,S=g/l,b=Math.min(u,S),C=Ps(Cu(b,b),Mo(-t,-n));return Uy(e,b/e.d)?Nn(e,{mode:Do,startX:null,startY:null,endX:null,endY:null}):Nn(e,kh(kh({mode:Do},Lb(e,C)),{},{startX:null,startY:null,endX:null,endY:null}),Ny)}function fM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sh,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Eh,o=e.viewerWidth,l=e.viewerHeight,h=e.SVGMinX,g=e.SVGMinY,u=e.SVGWidth,S=e.SVGHeight,b=o/u,C=l/S,A=Math.min(b,C),z=Cu(A,A),j=-h*b,Z=-g*C;if(b<C){var H=l-b*S;switch(n){case Eh:Z=-g*A;break;case wh:Z=Math.round(H/2)-g*A;break;case Db:Z=H-g*A;break;case QE:z=Cu(C,C);var de=o-C*u;j=h+Math.round(de/2);break}}else{var B=o-C*u;switch(t){case Sh:j=-h*A;break;case wh:j=Math.round(B/2)-h*A;break;case zb:j=B-h*A;break;case QE:z=Cu(b,b);var N=l-b*S;Z=g+Math.round(N/2);break}}var K=Mo(j,Z),ce=Ps(K,z);return Uy(e,A/e.d)?Nn(e,{mode:Do,startX:null,startY:null,endX:null,endY:null}):Nn(e,kh(kh({mode:Do},Lb(e,ce)),{},{startX:null,startY:null,endX:null,endY:null}),Ny)}function uO(e,t){var n=e.viewerWidth,o=e.viewerHeight,l=ea(e,n/2,o/2);return Dh(e,l.x,l.y,t)}function cO(e,t,n){return Nn(e,{mode:Sa,startX:t,startY:n,endX:t,endY:n})}function hO(e,t,n){if(e.mode!==Sa)throw new Error("update selection not allowed in this mode "+e.mode);return Nn(e,{endX:t,endY:n})}function K1(e,t,n,o){var l=7,h=e.startX,g=e.startY,u=ea(e,h,g),S=ea(e,t,n);if(Math.abs(h-t)>l&&Math.abs(g-n)>l){var b=hM(u,S);return dM(e,b.x,b.y,b.width,b.height)}else{var C=ea(e,t,n);return Dh(e,C.x,C.y,o)}}function dO(e,t,n,o,l){return o+(l-o)*(e-t)/(n-t)}function Rh(e,t){var n=t.getBoundingClientRect(),o=n.left,l=n.top,h=e.clientX-Math.round(o),g=e.clientY-Math.round(l);return{x:h,y:g}}function pM(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Rh(e,t),u=g.x,S=g.y,b=o;switch(n){case wl:var C=ea(o,u,S);b=Dh(o,C.x,C.y,1/l.scaleFactor);break;case Is:b=cO(o,u,S);break;case va:case Wa:b=oO(o,u,S);break;default:return o}return e.preventDefault(),b}function mM(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Rh(e,t),u=g.x,S=g.y,b=e.buttons===0,C=o;switch(n){case Is:o.mode===Sa&&(C=b?K1(o,u,S,l.scaleFactor):hO(o,u,S));break;case va:case Wa:o.mode===wa&&(C=b?cM(o):aO(o,u,S,l.preventPanOutside?20:void 0));break;default:return o}return e.preventDefault(),C}function gM(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Rh(e,t),u=g.x,S=g.y,b=o;switch(n){case wl:o.mode===Sa&&(b=K1(o,u,S,1/l.scaleFactor));break;case Is:o.mode===Sa&&(b=K1(o,u,S,l.scaleFactor));break;case va:case Wa:o.mode===wa&&(b=cM(o));break;default:return o}return e.preventDefault(),b}function fO(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Rh(e,t),u=g.x,S=g.y,b=o;if(n===va&&!l.disableDoubleClickZoomWithToolAuto){var C=l.modifierKeys,A=C===void 0?[]:C,z=ea(o,u,S),j=function(B,N){return B||e.getModifierState(N)},Z=A.reduce(j,!1),H=Z?1/l.scaleFactor:l.scaleFactor;b=Dh(o,z.x,z.y,H)}return e.preventDefault(),b}function pO(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Rh(e,t),u=g.x,S=g.y;if(!l.detectWheel)return o;var b=Math.max(-1,Math.min(1,e.deltaY)),C=dO(b,-1,1,l.scaleFactorOnWheel,1/l.scaleFactorOnWheel),A=ea(o,u,S),z=Dh(o,A.x,A.y,C);return e.preventDefault(),z}function sk(e,t,n,o,l){var h=W6(o,e.type==="mouseenter");return e.preventDefault(),h}function mO(e,t,n,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h.x,u=h.y;return!([gl,va].indexOf(n)>=0)||!l.detectAutoPan||!o.focus?o:sO(o,g,u)}function Y1(e){return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y1(e)}function gO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yO(e,t,n){return t&&lk(e.prototype,t),n&&lk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _O(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J1(e,t)}function J1(e,t){return J1=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},J1(e,t)}function vO(e){var t=wO();return function(){var o=Qg(e),l;if(t){var h=Qg(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return xO(this,l)}}function xO(e,t){if(t&&(Y1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bO(e)}function bO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(e)}var SO=function(e){_O(n,e);var t=vO(n);function n(){return gO(this,n),t.apply(this,arguments)}return yO(n,[{key:"point",get:function(){if(!this._cachePoint){var l=this.originalEvent,h=this.SVGViewer,g=this.value,u=Rh(l,h);this._cachePoint=ea(g,u.x,u.y)}return this._cachePoint}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}}]),n}(uM);function Q1(e){return Q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q1(e)}function uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function ck(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(n),!0).forEach(function(o){EO(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function EO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function TO(e,t,n){return t&&hk(e.prototype,t),n&&hk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}function ex(e,t){return ex=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},ex(e,t)}function PO(e){var t=AO();return function(){var o=ey(e),l;if(t){var h=ey(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return IO(this,l)}}function IO(e,t){if(t&&(Q1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MO(e)}function MO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(e)}var zO=function(e){CO(n,e);var t=PO(n);function n(){return kO(this,n),t.apply(this,arguments)}return TO(n,[{key:"points",get:function(){return this._cachePoints||(this._cachePoints=n.touchesToPoints(this.originalEvent.touches,this.SVGViewer,this.value)),this._cachePoints}},{key:"changedPoints",get:function(){return this._cacheChangedPoints||(this._cacheChangedPoints=n.touchesToPoints(this.originalEvent.changedTouches,this.SVGViewer,this.value)),this._cacheChangedPoints}}],[{key:"touchesToPoints",value:function(l,h,g){for(var u=[],S=0;S<l.length;S++){var b=l[S],C=h.getBoundingClientRect(),A=b.clientX-Math.round(C.left),z=b.clientY-Math.round(C.top),j=ea(g,A,z);u.push(ck(ck({},j),{},{identifier:b.identifier}))}return u}}]),n}(uM);function DO(e,t,n){var o=e.type;switch(o){case"mousemove":case"mouseup":case"mousedown":case"click":case"dblclick":return new SO(e,t,n);case"touchstart":case"touchmove":case"touchend":case"touchcancel":return new zO(e,t,n);default:throw new Error("".concat(o," not supported"))}}function dk(e){return e.split(/[ ,]/).filter(Boolean).map(Number)}function fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(n),!0).forEach(function(o){RO(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function RO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LO(e,t){var n=t.getBoundingClientRect(),o=n.left,l=n.top,h=e.clientX-Math.round(o),g=e.clientY-Math.round(l);return{x:h,y:g}}function FO(e,t,n,o,l){if(_M(e,l))return vM(e,t,n,o);if(e.touches.length!==1){if([wa,Sa].indexOf(o.mode)>=0)return lM(o);if([Do].indexOf(o.mode)>=0)return o}return Fb(e,t,n,o,l,pM)}function OO(e,t,n,o,l){return _M(e,l)?vM(e,t,n,o):[wa,Sa].indexOf(o.mode)>=0?Fb(e,t,n,o,l,mM):o}function $O(e,t,n,o,l){if(!([wa,Sa].indexOf(o.mode)>=0))return o;var h=VO(e,o,l)?Nn(o,{pinchPointDistance:null}):o;return e.touches.length>0?h:Fb(e,t,n,h,l,gM)}function BO(e,t,n,o,l){return e.stopPropagation(),e.preventDefault(),lM(o)}function yM(e){return typeof e.pinchPointDistance=="number"}function VO(e,t,n){return n.detectPinchGesture&&yM(t)&&e.touches.length<2}function _M(e,t){return t.detectPinchGesture&&e.touches.length>1}function Fb(e,t,n,o,l,h){var g=e.touches.length===0?Nn(o,{mode:o.prePinchMode?Do:o.mode,prePinchMode:null}):o,u=e.touches.length>0?e.touches[0]:e.changedTouches[0],S=LO(u,t);switch(n){case wl:case Is:case va:case Wa:return e.stopPropagation(),e.preventDefault(),h(e,t,n,g,l,S);default:return g}}function vM(e,t,n,o,l){var h=t.getBoundingClientRect(),g=h.left,u=h.top,S=e.touches[0].clientX-Math.round(g),b=e.touches[0].clientY-Math.round(u),C=e.touches[1].clientX-Math.round(g),A=e.touches[1].clientY-Math.round(u),z=Math.sqrt(Math.pow(C-S,2)+Math.pow(A-b,2)),j=yM(o)?o.pinchPointDistance:z,Z=ea(o,(S+C)/2,(b+A)/2),H=z/j;if(Uy(o,H))return o;e.cancelable&&e.preventDefault();var de=Ps(lp(o),Mo(Z.x,Z.y),Cu(H,H),Mo(-Z.x,-Z.y));return Nn(o,Nn(pk(pk({mode:Sa},Lb(o,de)),{},{startX:null,startY:null,endX:null,endY:null,prePinchMode:o.prePinchMode?o.prePinchMode:o.mode,pinchPointDistance:z})))}function xM(e){return Nn(e,{miniatureOpen:!0})}function bM(e){return Nn(e,{miniatureOpen:!1})}var NO=function(t){return["zoom-in","zoom-out","grab","grabbing"].indexOf(t)>-1},wM=function(){return navigator.userAgent.toLowerCase()},UO=function(){return wM().indexOf("firefox")>-1},jO=function(){return wM().indexOf("webkit")>-1};function Om(e){if(!NO(e))return e;if(UO())return"-moz-".concat(e);if(jO())return"-webkit-".concat(e)}function GO(e){return e.displayName||e.name||"Component"}function tx(e){return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(e)}function nx(){return nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},nx.apply(this,arguments)}function WO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qO(e,t,n){return t&&mk(e.prototype,t),n&&mk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rx(e,t)}function rx(e,t){return rx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},rx(e,t)}function HO(e){var t=YO();return function(){var o=ty(e),l;if(t){var h=ty(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return XO(this,l)}}function XO(e,t){if(t&&(tx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KO(e)}function KO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YO(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}var JO=1,QO=function(){return"uid".concat(JO++)};function SM(e){var t=function(n){ZO(l,n);var o=HO(l);function l(h){var g;return WO(this,l),g=o.call(this,h),g.state={uid:QO()},g}return qO(l,[{key:"render",value:function(){return Oe.createElement(e,nx({_uid:this.state.uid},this.props))}}]),l}(Oe.Component);return t.displayName="RandomUID(".concat(GO(e),")"),t}var gk="react-svg-pan-zoom_border_gradient";function EM(e){var t=e.direction,n=e.width,o=e.height,l=e._uid,h;switch(t){case Na:h="translate(".concat(n,", 0) rotate(90)");break;case Ro:h="translate(".concat(n,", ").concat(o,") rotate(180)");break;case Ua:h="translate(0, ".concat(o,") rotate(270)");break;case Gi:default:h=" ";break}var g="".concat(gk,"_gradient_").concat(l),u="".concat(gk,"_mask_").concat(l);return Oe.createElement("g",null,Oe.createElement("defs",null,Oe.createElement("linearGradient",{id:g,x1:"0%",y1:"0%",x2:"100%",y2:"0%",spreadMethod:"pad"},Oe.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"0.8"}),Oe.createElement("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.5"})),Oe.createElement("mask",{id:u,x:"0",y:"0",width:"20",height:Math.max(n,o)},Oe.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,o),style:{stroke:"none",fill:"url(#".concat(g,")")}}))),Oe.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,o),style:{stroke:"none",fill:"#000",mask:"url(#".concat(u,")")},transform:h}))}EM.propTypes={direction:Me.oneOf([Na,Ro,Ua,Gi]).isRequired,width:Me.number.isRequired,height:Me.number.isRequired};var $m=SM(EM);function kM(e){var t=e.startX,n=e.startY,o=e.endX,l=e.endY;if(!t||!n||!o||!l)return null;var h=hM({x:t,y:n},{x:o,y:l});return Oe.createElement("rect",{stroke:"#969FFF",strokeOpacity:.7,fill:"#F3F4FF",fillOpacity:.7,x:h.x,y:h.y,width:h.width,height:h.height,style:{pointerEvents:"none"}})}kM.propTypes={startX:Me.number,startY:Me.number,endX:Me.number,endY:Me.number};function e$(){return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"}))}function t$(){return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}function n$(){return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("g",null,Oe.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Oe.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}function r$(){return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}function i$(){return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}))}function ix(e){return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function o$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a$(e,t,n){return t&&yk(e.prototype,t),n&&yk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}function ox(e,t){return ox=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},ox(e,t)}function l$(e){var t=h$();return function(){var o=ny(e),l;if(t){var h=ny(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return u$(this,l)}}function u$(e,t){if(t&&(ix(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c$(e)}function c$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(e)}var jc=function(e){s$(n,e);var t=l$(n);function n(o){var l;return o$(this,n),l=t.call(this,o),l.state={hover:!1},l}return a$(n,[{key:"change",value:function(l){switch(l.preventDefault(),l.stopPropagation(),l.type){case"mouseenter":case"touchstart":this.setState({hover:!0});break;case"mouseleave":case"touchend":case"touchcancel":this.setState({hover:!1});break}}},{key:"render",value:function(){var l=this,h={display:"block",width:"24px",height:"24px",margin:[Na,Ua].indexOf(this.props.toolbarPosition)>=0?"2px 1px":"1px 2px",color:this.props.active||this.state.hover?this.props.activeColor:"#FFF",transition:"color 200ms ease",background:"none",padding:"0px",border:"0px",outline:"0px",cursor:"pointer"};return Oe.createElement("button",{onMouseEnter:function(u){return l.change(u)},onMouseLeave:function(u){return l.change(u)},onTouchStart:function(u){l.change(u),l.props.onClick(u)},onTouchEnd:function(u){return l.change(u)},onTouchCancel:function(u){return l.change(u)},onClick:this.props.onClick,style:h,title:this.props.title,name:this.props.name,type:"button"},this.props.children)}}]),n}(Oe.Component);jc.propTypes={title:Me.string.isRequired,name:Me.string.isRequired,toolbarPosition:Me.string.isRequired,activeColor:Me.string.isRequired,onClick:Me.func.isRequired,active:Me.bool.isRequired};function Ob(e){var t=e.tool,n=e.value,o=e.onChangeValue,l=e.onChangeTool,h=e.activeToolColor,g=e.position,u=e.SVGAlignX,S=e.SVGAlignY,b=function(Z,H){l(H),Z.stopPropagation(),Z.preventDefault()},C=function(Z){o(fM(n,u,S)),Z.stopPropagation(),Z.preventDefault()},A=[Na,Ua].indexOf(g)>=0,z={position:"absolute",transform:[Na,Ua].indexOf(g)>=0?"translate(-50%, 0px)":"none",top:[Gi,Ro,Na].indexOf(g)>=0?"5px":"unset",left:[Na,Ua].indexOf(g)>=0?"50%":Gi===g?"5px":"unset",right:[Ro].indexOf(g)>=0?"5px":"unset",bottom:[Ua].indexOf(g)>=0?"5px":"unset",backgroundColor:"rgba(19, 20, 22, 0.90)",borderRadius:"2px",display:"flex",flexDirection:A?"row":"column",padding:A?"1px 2px":"2px 1px"};return Oe.createElement("div",{style:z,role:"toolbar"},Oe.createElement(jc,{toolbarPosition:g,active:t===gl,activeColor:h,name:"unselect-tools",title:"Selection",onClick:function(Z){return b(Z,gl)}},Oe.createElement(e$,null)),Oe.createElement(jc,{toolbarPosition:g,active:t===Wa,activeColor:h,name:"select-tool-pan",title:"Pan",onClick:function(Z){return b(Z,Wa)}},Oe.createElement(t$,null)),Oe.createElement(jc,{toolbarPosition:g,active:t===Is,activeColor:h,name:"select-tool-zoom-in",title:"Zoom in",onClick:function(Z){return b(Z,Is)}},Oe.createElement(n$,null)),Oe.createElement(jc,{toolbarPosition:g,active:t===wl,activeColor:h,name:"select-tool-zoom-out",title:"Zoom out",onClick:function(Z){return b(Z,wl)}},Oe.createElement(r$,null)),Oe.createElement(jc,{toolbarPosition:g,active:!1,activeColor:h,name:"fit-to-viewer",title:"Fit to viewer",onClick:function(Z){return C(Z)}},Oe.createElement(i$,null)))}Ob.propTypes={tool:Me.string.isRequired,onChangeTool:Me.func.isRequired,value:Me.object.isRequired,onChangeValue:Me.func.isRequired,position:Me.oneOf([Na,Ro,Ua,Gi]),SVGAlignX:Me.oneOf([wh,Sh,zb]),SVGAlignY:Me.oneOf([wh,Eh,Db]),activeToolColor:Me.string};Ob.defaultProps={position:Ro,SVGAlignX:Sh,SVGAlignY:Eh,activeToolColor:"#1CA6FC"};function d$(){return"ontouchstart"in window||navigator.maxTouchPoints}function TM(e){var t=e.open,n=e.position,o=0;switch(n){case Gi:o=t?"rotate(225, 12, 13)":"rotate(45, 12, 13)";break;case Ro:o=o=t?"rotate(135, 12, 13)":"rotate(-45, 12, 13)";break}return Oe.createElement("svg",{width:24,height:24,stroke:"currentColor"},Oe.createElement("g",{transform:o},Oe.createElement("path",{fill:"#000000",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})))}TM.propTypes={open:Me.bool.isRequired,position:Me.oneOf([Ro,Gi]).isRequired};function Oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CM(e){var t,n=e.value,o=e.onChangeValue,l=e.position,h=(t={width:"24px",height:"24px",display:"block",position:"absolute",bottom:0},Oc(t,l===Gi?"left":"right","0px"),Oc(t,"background","rgba(19, 20, 22, 0.901961)"),Oc(t,"border",0),Oc(t,"padding",0),Oc(t,"outline",0),Oc(t,"color","#fff"),t),g=n.miniatureOpen?bM:xM;return Oe.createElement("button",{type:"button",style:h,onClick:function(){return o(g(n))}},Oe.createElement(TM,{open:n.miniatureOpen,position:l}))}CM.propTypes={value:Me.object.isRequired,onChangeValue:Me.func.isRequired,position:Me.oneOf([Ro,Gi]).isRequired};var f$="react-svg-pan-zoom_miniature";function PM(e){var t=e.SVGMinX,n=e.SVGMinY,o=e.SVGWidth,l=e.SVGHeight,h=e.x1,g=e.y1,u=e.x2,S=e.y2;e.zoomToFit;var b=e._uid,C="".concat(f$,"_mask_").concat(b);return Oe.createElement("g",null,Oe.createElement("defs",null,Oe.createElement("mask",{id:C},Oe.createElement("rect",{x:t,y:n,width:o,height:l,fill:"#ffffff"}),Oe.createElement("rect",{x:h,y:g,width:u-h,height:S-g}))),Oe.createElement("rect",{x:t,y:n,width:o,height:l,style:{stroke:"none",fill:"#000",mask:"url(#".concat(C,")"),opacity:.4}}))}PM.propTypes={SVGWidth:Me.number.isRequired,SVGHeight:Me.number.isRequired,SVGMinX:Me.number.isRequired,SVGMinY:Me.number.isRequired,x1:Me.number.isRequired,y1:Me.number.isRequired,x2:Me.number.isRequired,y2:Me.number.isRequired,zoomToFit:Me.number.isRequired};var p$=SM(PM);function _k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m$(e,t){return v$(e)||_$(e,t)||y$(e,t)||g$()}function g$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y$(e,t){if(!!e){if(typeof e=="string")return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _$(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,g,u;try{for(n=n.call(e);!(l=(g=n.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function v$(e){if(Array.isArray(e))return e}function $b(e){var t,n=e.value,o=e.onChangeValue,l=e.children,h=e.position,g=e.background,u=e.SVGBackground,S=e.width,b=e.height,C=n.SVGMinX,A=n.SVGMinY,z=n.SVGWidth,j=n.SVGHeight,Z=n.viewerWidth,H=n.viewerHeight,de=j/z,B=de>=1?b/j:S/z,N=rM(oM(n),[{x:0,y:0},{x:Z,y:H}]),K=m$(N,2),ce=K[0],ue=ce.x,ye=ce.y,me=K[1],Te=me.x,Ne=me.y,we,nt;n.miniatureOpen?(we=S,nt=b):(we=24,nt=24);var wt=(t={position:"absolute",overflow:"hidden",outline:"1px solid rgba(19, 20, 22, 0.90)",transition:"width 200ms ease, height 200ms ease, bottom 200ms ease",width:we+"px",height:nt+"px",bottom:"6px"},_k(t,h===Gi?"left":"right","6px"),_k(t,"background",g),t),It=de>=1?"translate(".concat((S-z*B)/2-C*B,", ").concat(-A*B,")"):"translate(".concat(-C*B,", ").concat((b-j*B)/2-A*B,")");return Oe.createElement("div",{role:"navigation",style:wt},Oe.createElement("svg",{width:S,height:b,style:{pointerEvents:"none"}},Oe.createElement("g",{transform:It},Oe.createElement("g",{transform:"scale(".concat(B,", ").concat(B,")")},Oe.createElement("rect",{fill:u,x:C,y:A,width:z,height:j}),l,Oe.createElement(p$,{SVGWidth:z,SVGHeight:j,SVGMinX:C,SVGMinY:A,x1:ue,y1:ye,x2:Te,y2:Ne,zoomToFit:B})))),Oe.createElement(CM,{value:n,onChangeValue:o,position:h}))}$b.propTypes={value:Me.object.isRequired,onChangeValue:Me.func.isRequired,SVGBackground:Me.string.isRequired,position:Me.oneOf([Ro,Gi]),background:Me.string.isRequired,width:Me.number.isRequired,height:Me.number.isRequired};$b.defaultProps={position:Gi,background:"#616264",width:100,height:80};function ax(e){return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(e)}function ry(){return ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ry.apply(this,arguments)}function xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function x$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(n),!0).forEach(function(o){b$(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function b$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bk(e,t){return k$(e)||E$(e,t)||S$(e,t)||w$()}function w$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(e,t){if(!!e){if(typeof e=="string")return wk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wk(e,t)}}function wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function E$(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,g,u;try{for(n=n.call(e);!(l=(g=n.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function k$(e){if(Array.isArray(e))return e}function T$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C$(e,t,n){return t&&Sk(e.prototype,t),n&&Sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sx(e,t)}function sx(e,t){return sx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},sx(e,t)}function I$(e){var t=A$();return function(){var o=iy(e),l;if(t){var h=iy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return M$(this,l)}}function M$(e,t){if(t&&(ax(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lx(e)}function lx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iy(e){return iy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},iy(e)}var Bb=function(e){P$(n,e);var t=I$(n);function n(o,l){var h;T$(this,n);var g=o.width,u=o.height,S=o.scaleFactorMin,b=o.scaleFactorMax,C=o.children,A=C.props.viewBox,z;if(A){var j=dk(A),Z=bk(j,4),H=Z[0],de=Z[1],B=Z[2],N=Z[3];z=tk(g,u,H,de,B,N,S,b)}else{var K=C.props,ce=K.width,ue=K.height;z=tk(g,u,0,0,ce,ue,S,b)}return h=t.call(this,o,l),h.ViewerDOM=null,h.state={pointerX:null,pointerY:null,defaultValue:z},h.autoPanLoop=h.autoPanLoop.bind(lx(h)),h.onWheel=h.onWheel.bind(lx(h)),h}return C$(n,[{key:"componentDidUpdate",value:function(l){var h=this.getValue(),g=this.props,u=h,S=!1,b=g.children.props.viewBox;if(b){var C=dk(b),A=bk(C,4),z=A[0],j=A[1],Z=A[2],H=A[3];(h.SVGMinX!==z||h.SVGMinY!==j||h.SVGWidth!==Z||h.SVGHeight!==H)&&(u=nk(u,z,j,Z,H),S=!0)}else{var de=g.children.props,B=de.width,N=de.height;(h.SVGWidth!==B||h.SVGHeight!==N)&&(u=nk(u,0,0,B,N),S=!0)}(l.width!==g.width||l.height!==g.height)&&(u=q6(u,g.width,g.height),S=!0),(l.scaleFactorMin!==g.scaleFactorMin||l.scaleFactorMax!==g.scaleFactorMax)&&(u=Z6(u,g.scaleFactorMin,g.scaleFactorMax),S=!0),S&&this.setValue(u)}},{key:"componentDidMount",value:function(){this.autoPanIsRunning=!0,requestAnimationFrame(this.autoPanLoop),this.ViewerDOM.addEventListener("wheel",this.onWheel,!1)}},{key:"componentWillUnmount",value:function(){this.autoPanIsRunning=!1,this.ViewerDOM.removeEventListener("wheel",this.onWheel)}},{key:"getValue",value:function(){return G6(this.props.value)?this.props.value:this.state.defaultValue}},{key:"getTool",value:function(){return this.props.tool?this.props.tool:gl}},{key:"setValue",value:function(l){var h=this.props,g=h.onChangeValue,u=h.onZoom,S=h.onPan;g&&g(l),l.lastAction&&(u&&l.lastAction===Ny&&u(l),S&&l.lastAction===up&&S(l))}},{key:"pan",value:function(l,h){var g=Rb(this.getValue(),l,h);this.setValue(g)}},{key:"zoom",value:function(l,h,g){var u=Dh(this.getValue(),l,h,g);this.setValue(u)}},{key:"fitSelection",value:function(l,h,g,u){var S=dM(this.getValue(),l,h,g,u);this.setValue(S)}},{key:"fitToViewer",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sh,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Eh,g=fM(this.getValue(),l,h);this.setValue(g)}},{key:"zoomOnViewerCenter",value:function(l){var h=uO(this.getValue(),l);this.setValue(h)}},{key:"setPointOnViewerCenter",value:function(l,h,g){var u=H6(this.getValue(),l,h,g);this.setValue(u)}},{key:"reset",value:function(){var l=X6(this.getValue());this.setValue(l)}},{key:"openMiniature",value:function(){var l=xM(this.getValue());this.setValue(l)}},{key:"closeMiniature",value:function(){var l=bM(this.getValue());this.setValue(l)}},{key:"handleViewerEvent",value:function(l){var h=this.props,g=this.ViewerDOM;if([gl,va].indexOf(this.getTool())>=0&&l.target!==g){var u={click:h.onClick,dblclick:h.onDoubleClick,mousemove:h.onMouseMove,mouseup:h.onMouseUp,mousedown:h.onMouseDown,touchstart:h.onTouchStart,touchmove:h.onTouchMove,touchend:h.onTouchEnd,touchcancel:h.onTouchCancel},S=u[l.type];!S||S(DO(l,h.value,g))}}},{key:"autoPanLoop",value:function(){var l={x:this.state.pointerX,y:this.state.pointerY},h=mO(null,this.ViewerDOM,this.getTool(),this.getValue(),this.props,l);this.getValue()!==h&&this.setValue(h),this.autoPanIsRunning&&requestAnimationFrame(this.autoPanLoop)}},{key:"onWheel",value:function(l){var h=pO(l,this.ViewerDOM,this.getTool(),this.getValue(),this.props);this.getValue()!==h&&this.setValue(h)}},{key:"render",value:function(){var l=this,h=this.props,g=this.state,u=g.pointerX,S=g.pointerY,b=this.getTool(),C=this.getValue(),A=h.customToolbar,z=A===void 0?Ob:A,j=h.customMiniature,Z=j===void 0?$b:j,H=b===va&&C.mode===wa&&C.startX!==C.endX&&C.startY!==C.endY,de;b===Wa&&(de=Om(C.mode===wa?"grabbing":"grab")),b===Is&&(de=Om("zoom-in")),b===wl&&(de=Om("zoom-out")),H&&(de=Om("grabbing"));var B=[Wa,Is,wl].indexOf(b)>=0;B=B||H;var N=this.props.detectPinchGesture||[Wa,va].indexOf(this.getTool())!==-1?"none":void 0,K={display:"block",cursor:de,touchAction:N};return Oe.createElement("div",{style:x$({position:"relative",width:C.viewerWidth,height:C.viewerHeight},h.style),className:this.props.className},Oe.createElement("svg",{ref:function(ue){return l.ViewerDOM=ue},width:C.viewerWidth,height:C.viewerHeight,style:K,onMouseDown:function(ue){var ye=pM(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onMouseMove:function(ue){var ye=l.ViewerDOM.getBoundingClientRect(),me=ye.left,Te=ye.top,Ne=ue.clientX-Math.round(me),we=ue.clientY-Math.round(Te),nt=mM(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props,{x:Ne,y:we});l.getValue()!==nt&&l.setValue(nt),l.setState({pointerX:Ne,pointerY:we}),l.handleViewerEvent(ue)},onMouseUp:function(ue){var ye=gM(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onClick:function(ue){l.handleViewerEvent(ue)},onDoubleClick:function(ue){var ye=fO(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onMouseEnter:function(ue){if(!d$()){var ye=sk(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye)}},onMouseLeave:function(ue){var ye=sk(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye)},onTouchStart:function(ue){var ye=FO(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onTouchMove:function(ue){var ye=OO(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onTouchEnd:function(ue){var ye=$O(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)},onTouchCancel:function(ue){var ye=BO(ue,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==ye&&l.setValue(ye),l.handleViewerEvent(ue)}},Oe.createElement("rect",{fill:h.background,x:0,y:0,width:C.viewerWidth,height:C.viewerHeight,style:{pointerEvents:"none"}}),Oe.createElement("g",{transform:V6(C),style:B?{pointerEvents:"none"}:{}},Oe.createElement("rect",{fill:this.props.SVGBackground,style:this.props.SVGStyle,x:C.SVGMinX||0,y:C.SVGMinY||0,width:C.SVGWidth,height:C.SVGHeight}),Oe.createElement("g",null,h.children.props.children)),[gl,va].indexOf(b)>=0&&h.detectAutoPan&&C.focus?Oe.createElement("g",{style:{pointerEvents:"none"}},S<=20?Oe.createElement($m,{direction:Na,width:C.viewerWidth,height:C.viewerHeight}):null,C.viewerWidth-u<=20?Oe.createElement($m,{direction:Ro,width:C.viewerWidth,height:C.viewerHeight}):null,C.viewerHeight-S<=20?Oe.createElement($m,{direction:Ua,width:C.viewerWidth,height:C.viewerHeight}):null,C.focus&&u<=20?Oe.createElement($m,{direction:Gi,width:C.viewerWidth,height:C.viewerHeight}):null):null,C.mode!==Sa?null:Oe.createElement(kM,{startX:C.startX,startY:C.startY,endX:C.endX,endY:C.endY})),h.toolbarProps.position===Yg?null:Oe.createElement(z,ry({},this.props.toolbarProps,{value:C,onChangeValue:function(ue){return l.setValue(ue)},tool:b,onChangeTool:function(ue){return l.props.onChangeTool(ue)}})),h.miniatureProps.position===Yg?null:Oe.createElement(Z,ry({},this.props.miniatureProps,{value:C,onChangeValue:function(ue){return l.setValue(ue)},SVGBackground:this.props.SVGBackground}),h.children.props.children))}}]),n}(Oe.Component);Bb.propTypes={width:Me.number.isRequired,height:Me.number.isRequired,value:Me.oneOfType([Me.object,Me.shape({version:Me.oneOf([2]).isRequired,mode:Me.oneOf([Do,wa,Sa]).isRequired,focus:Me.bool.isRequired,a:Me.number.isRequired,b:Me.number.isRequired,c:Me.number.isRequired,d:Me.number.isRequired,e:Me.number.isRequired,f:Me.number.isRequired,viewerWidth:Me.number.isRequired,viewerHeight:Me.number.isRequired,SVGMinX:Me.number.isRequired,SVGMinY:Me.number.isRequired,SVGWidth:Me.number.isRequired,SVGHeight:Me.number.isRequired,startX:Me.number,startY:Me.number,endX:Me.number,endY:Me.number,miniatureOpen:Me.bool.isRequired})]).isRequired,onChangeValue:Me.func.isRequired,tool:Me.oneOf([va,gl,Wa,Is,wl]).isRequired,onChangeTool:Me.func.isRequired,background:Me.string,SVGBackground:Me.string,SVGStyle:Me.object,style:Me.object,className:Me.string,detectWheel:Me.bool,detectAutoPan:Me.bool,detectPinchGesture:Me.bool,onZoom:Me.func,onPan:Me.func,onClick:Me.func,onDoubleClick:Me.func,onMouseUp:Me.func,onMouseMove:Me.func,onMouseDown:Me.func,preventPanOutside:Me.bool,scaleFactor:Me.number,scaleFactorOnWheel:Me.number,scaleFactorMax:Me.number,scaleFactorMin:Me.number,modifierKeys:Me.array,disableDoubleClickZoomWithToolAuto:Me.bool,customMiniature:Me.oneOfType([Me.element,Me.func]),miniatureProps:Me.shape({position:Me.oneOf([Yg,Ro,Gi]),background:Me.string,width:Me.number,height:Me.number}),customToolbar:Me.oneOfType([Me.element,Me.func]),toolbarProps:Me.shape({position:Me.oneOf([Yg,Na,Ro,Ua,Gi]),SVGAlignX:Me.oneOf([wh,Sh,zb]),SVGAlignY:Me.oneOf([wh,Eh,Db]),activeToolColor:Me.string}),children:function(t,n,o){var l=t[n],h=["svg"];if(Oe.Children.count(l)!==1||h.indexOf(l.type)===-1)return new Error("`"+o+"` should have a single child of the following types:  `"+h.join("`, `")+"`.");if((!l.props.hasOwnProperty("width")||!l.props.hasOwnProperty("height"))&&!l.props.hasOwnProperty("viewBox"))return new Error("SVG should have props `width` and `height` or `viewBox`")}};Bb.defaultProps={style:{},background:"#616264",SVGBackground:"#fff",SVGStyle:{},detectWheel:!0,detectAutoPan:!0,detectPinchGesture:!0,modifierKeys:["Alt","Shift","Control"],preventPanOutside:!0,scaleFactor:1.1,scaleFactorOnWheel:1.06,disableZoomWithToolAuto:!1,onZoom:null,onPan:null,toolbarProps:{},miniatureProps:{}};function ux(e){return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}var z$=["width","height","onChangeTool","onChangeValue"];function cx(){return cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},cx.apply(this,arguments)}function D$(e,t){if(e==null)return{};var n=R$(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function R$(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function L$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ek(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F$(e,t,n){return t&&Ek(e.prototype,t),n&&Ek(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function O$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hx(e,t)}function hx(e,t){return hx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},hx(e,t)}function $$(e){var t=V$();return function(){var o=oy(e),l;if(t){var h=oy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return B$(this,l)}}function B$(e,t){if(t&&(ux(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dx(e)}function dx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oy(e){return oy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},oy(e)}var IM=function(e){O$(n,e);var t=$$(n);function n(o){var l;return L$(this,n),l=t.call(this,o),l.state={value:o.defaultValue||{},tool:o.defaultTool||gl},l.Viewer=null,l.changeTool=l.changeTool.bind(dx(l)),l.changeValue=l.changeValue.bind(dx(l)),l}return F$(n,[{key:"changeTool",value:function(l){this.setState({tool:l})}},{key:"changeValue",value:function(l){this.setState({value:l})}},{key:"pan",value:function(l,h){this.Viewer.pan(l,h)}},{key:"zoom",value:function(l,h,g){this.Viewer.zoom(l,h,g)}},{key:"fitSelection",value:function(l,h,g,u){this.Viewer.fitSelection(l,h,g,u)}},{key:"fitToViewer",value:function(l,h){this.Viewer.fitToViewer(l,h)}},{key:"zoomOnViewerCenter",value:function(l){this.Viewer.zoomOnViewerCenter(l)}},{key:"setPointOnViewerCenter",value:function(l,h,g){this.Viewer.setPointOnViewerCenter(l,h,g)}},{key:"reset",value:function(){this.Viewer.reset()}},{key:"openMiniature",value:function(){this.Viewer.openMiniature()}},{key:"closeMiniature",value:function(){this.Viewer.closeMiniature()}},{key:"render",value:function(){var l=this,h=this.props,g=h.width,u=h.height;h.onChangeTool,h.onChangeValue;var S=D$(h,z$),b=this.state,C=b.tool,A=b.value;return Oe.createElement(Bb,cx({width:g,height:u,tool:C,onChangeTool:this.changeTool,value:A,onChangeValue:this.changeValue,ref:function(j){return l.Viewer=j}},S))}}]),n}(Oe.Component);IM.propTypes={width:Me.number.isRequired,height:Me.number.isRequired,defaultValue:Me.object,defaultTool:Me.string};var N$=function(){},MM=typeof window!="undefined",U$=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(l){e.addRange(l)}),t&&t.focus()}},j$=U$,kk={"text/plain":"Text","text/html":"Url",default:"Text"},G$="Copy to clipboard: #{key}, Enter";function W$(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function q$(e,t){var n,o,l,h,g,u,S=!1;t||(t={}),n=t.debug||!1;try{l=j$(),h=document.createRange(),g=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(C){if(C.stopPropagation(),t.format)if(C.preventDefault(),typeof C.clipboardData=="undefined"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var A=kk[t.format]||kk.default;window.clipboardData.setData(A,e)}else C.clipboardData.clearData(),C.clipboardData.setData(t.format,e);t.onCopy&&(C.preventDefault(),t.onCopy(C.clipboardData))}),document.body.appendChild(u),h.selectNodeContents(u),g.addRange(h);var b=document.execCommand("copy");if(!b)throw new Error("copy command was unsuccessful");S=!0}catch(C){n&&console.error("unable to copy using execCommand: ",C),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),S=!0}catch(A){n&&console.error("unable to copy using clipboardData: ",A),n&&console.error("falling back to prompt"),o=W$("message"in t?t.message:G$),window.prompt(o,e)}}finally{g&&(typeof g.removeRange=="function"?g.removeRange(h):g.removeAllRanges()),u&&document.body.removeChild(u),l()}return S}var Tk=q$,Z$=MM?W.exports.useLayoutEffect:W.exports.useEffect,H$=Z$,AM={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function X$(){var e=W.exports.useState(null),t=e[0],n=e[1],o=W.exports.useState(AM),l=o[0],h=o[1],g=W.exports.useMemo(function(){return new window.ResizeObserver(function(u){if(u[0]){var S=u[0].contentRect,b=S.x,C=S.y,A=S.width,z=S.height,j=S.top,Z=S.left,H=S.bottom,de=S.right;h({x:b,y:C,width:A,height:z,top:j,left:Z,bottom:H,right:de})}})},[]);return H$(function(){if(!!t)return g.observe(t),function(){g.disconnect()}},[t]),[n,l]}var K$=MM&&typeof window.ResizeObserver!="undefined"?X$:function(){return[N$,AM]},jy={exports:{}},Gy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y$=W.exports,J$=Symbol.for("react.element"),Q$=Symbol.for("react.fragment"),eB=Object.prototype.hasOwnProperty,tB=Y$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nB={key:!0,ref:!0,__self:!0,__source:!0};function zM(e,t,n){var o,l={},h=null,g=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)eB.call(t,o)&&!nB.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:J$,type:e,key:h,ref:g,props:l,_owner:tB.current}}Gy.Fragment=Q$;Gy.jsx=zM;Gy.jsxs=zM;jy.exports=Gy;const Be=jy.exports.jsx,Pt=jy.exports.jsxs,jf=jy.exports.Fragment,rB=un("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"calc(100%/3)"}),iB=un("div",{width:"100%",height:"calc(100vh - $4 - $4)"}),oB=un("table",{padding:"$2"}),aB=un("div",{width:"calc(100%/3*2)"}),sB=un("tr",{cursor:"pointer",fontFamily:"monospace"},{"&:hover":{color:"red"}}),lB=un("div",{display:"flex"}),uB=e=>{const[t,n,o]=By(e.entry.tileId);return Pt(sB,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[Be("td",{children:e.entry.tileId}),Be("td",{children:t}),Be("td",{children:n}),Be("td",{children:o}),Be("td",{children:e.entry.offset}),Be("td",{children:e.entry.length}),Be("td",{children:e.entry.runLength===0?"directory":`tile(${e.entry.runLength})`})]})},cB=(e,t)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0,hB=e=>{const[t,n]=W.exports.useState(!1);let o="none",l="";e.feature.type===3?o=t?"white":"currentColor":l=t?"white":"currentColor";const h=()=>{n(!0)},g=()=>{n(!1)},u=()=>{e.setSelectedFeature(e.feature)};return Be("path",{d:e.feature.path,stroke:l,strokeWidth:10,fill:o,fillOpacity:.5,onMouseOver:h,onMouseOut:g,onMouseDown:u})},dB=e=>{const t=e.layer.features.map((n,o)=>Be(hB,{feature:n,setSelectedFeature:e.setSelectedFeature},o));return Be("g",{color:e.color,children:t})},fB=un("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),pB=e=>{const t=[];for(const o in e.feature.properties)t.push([o,e.feature.properties[o]]);const n=t.map((o,l)=>Pt("tr",{children:[Be("td",{children:o[0]}),Be("td",{children:typeof o[1]=="boolean"?JSON.stringify(o[1]):o[1]})]},l));return Pt(fB,{children:[e.feature.layerName,Be("table",{children:Be("tbody",{children:n})})]})},mB=e=>{const[t,n]=W.exports.useState([]),[o,l]=W.exports.useState(0),[h,g]=W.exports.useState(null),u=W.exports.useRef(null),[S,{width:b,height:C}]=K$();W.exports.useEffect(()=>{var z;(z=u.current)==null||z.zoomOnViewerCenter(.1)},[]),W.exports.useEffect(()=>{const z=async j=>{const[Z,H,de]=By(j.tileId),B=await e.file.getZxy(Z,H,de),N=new m6(new _6(new Uint8Array(B.data))),K=[];let ce=0;for(const[ue,ye]of Object.entries(N.layers)){ye.extent>ce&&(ce=ye.extent);const me=[];for(let Te=0;Te<ye.length;Te++){const Ne=ye.feature(Te),we=YI(),nt=Ne.loadGeometry();if(Ne.type===1)for(const wt of nt)for(const It of wt)we.arc(It.x,It.y,20,0,2*Math.PI);else for(const wt of nt){we.moveTo(wt[0].x,wt[0].y);for(let It=1;It<wt.length;It++)we.lineTo(wt[It].x,wt[It].y);Ne.type===3&&we.closePath()}me.push({path:we.toString(),type:Ne.type,id:Ne.id,properties:Ne.properties,layerName:ue})}K.push({features:me,name:ue})}l(ce),K.sort(cB),n(K)};e.entry&&z(e.entry)},[e.entry]);const A=t.map((z,j)=>Be(dB,{layer:z,color:xf[j%12],setSelectedFeature:g},j));return Pt(iB,{ref:S,children:[Be(IM,{ref:u,width:b,height:C,detectAutoPan:!1,onClick:z=>console.log("click",z.x,z.y,z.originalEvent),children:Be("svg",{viewBox:"0 0 4096 4096",children:A})}),h?Be(pB,{feature:h}):null]})},gB=e=>{const[t,n]=W.exports.useState("");return W.exports.useEffect(()=>{const o=async l=>{const[h,g,u]=By(l.tileId),S=await e.file.getZxy(h,g,u),b=new Blob([S.data]),C=window.URL.createObjectURL(b);n(C)};e.entry&&o(e.entry)},[e.entry]),Be("img",{src:t,alt:"raster tile"})};function yB(e){const[t,n,o]=By(e.tileId),l=`${t}/${n}/${o}`,h="inspector";let g=!1;const u=window.location.hash.slice(1).split("&").map(S=>{const b=S.split("=")[0];return b===h?(g=!0,`${b}=${l}`):S}).filter(S=>S);return g||u.push(`${h}=${l}`),`#${u.join("&")}`}function _B(e){const[t,n]=W.exports.useState([]),[o,l]=W.exports.useState(null),[h,g]=W.exports.useState(null);function u(A){A&&A.runLength>0&&window.history.replaceState(window.history.state,"",yB(A)),l(A)}W.exports.useEffect(()=>{(async()=>{const z=await e.file.getHeader();if(g(z),z.specVersion<3)n([]);else if(o!==null&&o.runLength===0){const j=await e.file.cache.getDirectory(e.file.source,z.leafDirectoryOffset+o.offset,o.length,z);n(j)}else if(o===null){const j=await e.file.cache.getDirectory(e.file.source,z.rootDirectoryOffset,z.rootDirectoryLength,z);n(j)}})()},[e.file,o]);const S=t.map((A,z)=>Be(uB,{entry:A,setSelectedEntry:u},z));let b=Be("div",{});o&&(h==null?void 0:h.tileType)&&(o.runLength===0||(h.tileType===Eu.Mvt?b=Be(mB,{file:e.file,entry:o,tileType:h.tileType}):b=Be(gB,{file:e.file,entry:o})));let C="";return h&&h.specVersion<3&&(C="Directory listing supported only for PMTiles v3 archives."),Pt(lB,{children:[Pt(rB,{children:[C,Pt(oB,{children:[Be("thead",{children:Pt("tr",{children:[Be("th",{children:"tileid"}),Be("th",{children:"z"}),Be("th",{children:"x"}),Be("th",{children:"y"}),Be("th",{children:"offset"}),Be("th",{children:"length"}),Be("th",{children:"type"})]})}),Be("tbody",{children:S})]})]}),Be(aB,{children:b})]})}var DM={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(Ef,function(){var n,o,l;function h(u,S){if(!n)n=S;else if(!o)o=S;else{var b="var sharedChunk = {}; ("+n+")(sharedChunk); ("+o+")(sharedChunk);",C={};n(C),l=S(C),typeof window!="undefined"&&(l.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}h(["exports"],function(u){function S(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var b=C;function C(a,r){this.x=a,this.y=r}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,s=a.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),s=Math.sin(a),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(a,r){var s=Math.cos(a),d=Math.sin(a),p=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(a){return a instanceof C?a:Array.isArray(a)?new C(a[0],a[1]):a};var A=S(b),z=j;function j(a,r,s,d){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=s,this.p2y=d}j.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,d=0;d<8;d++){var p=this.sampleCurveX(s)-a;if(Math.abs(p)<r)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=p/_}var x=0,w=1;for(s=a,d=0;d<20&&(p=this.sampleCurveX(s),!(Math.abs(p-a)<r));d++)a>p?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var Z=S(z);function H(a,r,s,d){const p=new Z(a,r,s,d);return function(_){return p.solve(_)}}const de=H(.25,.1,.25,1);function B(a,r,s){return Math.min(s,Math.max(r,a))}function N(a,r,s){const d=s-r,p=((a-r)%d+d)%d+r;return p===r?s:p}function K(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}let ce=1;function ue(a,r,s){const d={};for(const p in a)d[p]=r.call(s||this,a[p],p,a);return d}function ye(a,r,s){const d={};for(const p in a)r.call(s||this,a[p],p,a)&&(d[p]=a[p]);return d}function me(a){return Array.isArray(a)?a.map(me):typeof a=="object"&&a?ue(a,me):a}const Te={};function Ne(a){Te[a]||(typeof console!="undefined"&&console.warn(a),Te[a]=!0)}function we(a,r,s){return(s.y-a.y)*(r.x-a.x)>(r.y-a.y)*(s.x-a.x)}function nt(a){let r=0;for(let s,d,p=0,_=a.length,x=_-1;p<_;x=p++)s=a[p],d=a[x],r+=(d.x-s.x)*(s.y+d.y);return r}function wt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}let It=null;function Lt(a){if(It==null){const r=a.navigator?a.navigator.userAgent:null;It=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return It}function Bt(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}const cn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let bn,Ue;const ot={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const r=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(a,r=0){return this.getImageCanvasContext(a).getImageData(-r,-r,a.width+2*r,a.height+2*r)},getImageCanvasContext(a){const r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=a.width,r.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(bn||(bn=document.createElement("a")),bn.href=a,bn.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ue==null&&(Ue=matchMedia("(prefers-reduced-motion: reduce)")),Ue.matches)}},Tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ot extends Error{constructor(r,s,d,p){super(`AJAXError: ${s} (${r}): ${d}`),this.status=r,this.statusText=s,this.url=d,this.body=p}}const at=wt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,hn=a=>Tt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function Dt(a,r){const s=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:at(),signal:s.signal});let p=!1,_=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),_||fetch(d).then(x=>x.ok?(w=>{(a.type==="arrayBuffer"||a.type==="image"?w.arrayBuffer():a.type==="json"?w.json():w.text()).then(T=>{_||(p=!0,r(null,T,w.headers.get("Cache-Control"),w.headers.get("Expires")))}).catch(T=>{_||r(new Error(T.message))})})(x):x.blob().then(w=>r(new Ot(x.status,x.statusText,a.url,w)))).catch(x=>{x.code!==20&&r(new Error(x.message))}),{cancel:()=>{_=!0,p||s.abort()}}}const Zn=function(a,r){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r);if(!wt())return(hn(a.url)||Dt)(a,r)}if(!(/^file:/.test(s=a.url)||/^file:/.test(at())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Dt(a,r);if(wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,r,void 0,!0)}var s;return function(d,p){const _=new XMLHttpRequest;_.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(_.responseType="arraybuffer");for(const x in d.headers)_.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=d.credentials==="include",_.onerror=()=>{p(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let x=_.response;if(d.type==="json")try{x=JSON.parse(_.response)}catch(w){return p(w)}p(null,x,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const x=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});p(new Ot(_.status,_.statusText,d.url,x))}},_.send(d.body),{cancel:()=>_.abort()}}(a,r)},dn=function(a,r){return Zn(K(a,{type:"arrayBuffer"}),r)};function Qn(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const r=new URL(a),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function ii(a,r,s){s[a]&&s[a].indexOf(r)!==-1||(s[a]=s[a]||[],s[a].push(r))}function Er(a,r,s){if(s&&s[a]){const d=s[a].indexOf(r);d!==-1&&s[a].splice(d,1)}}class Rn{constructor(r,s={}){K(this,s),this.type=r}}class Xt extends Rn{constructor(r,s={}){super("error",K({error:r},s))}}class fn{on(r,s){return this._listeners=this._listeners||{},ii(r,s,this._listeners),this}off(r,s){return Er(r,s,this._listeners),Er(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},ii(r,s,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,s){typeof r=="string"&&(r=new Rn(r,s||{}));const d=r.type;if(this.listens(d)){r.target=this;const p=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of p)w.call(this,r);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of _)Er(d,w,this._oneTimeListeners),w.call(this,r);const x=this._eventedParent;x&&(K(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Xt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Fr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Hr(a,r){const s={};for(const d in a)d!=="ref"&&(s[d]=a[d]);return Fr.forEach(d=>{d in r&&(s[d]=r[d])}),s}function tn(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let s=0;s<a.length;s++)if(!tn(a[s],r[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const s in a)if(!tn(a[s],r[s]))return!1;return!0}return a===r}const Nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ki(a,r,s){s.push({command:Nt.addSource,args:[a,r[a]]})}function oi(a,r,s){r.push({command:Nt.removeSource,args:[a]}),s[a]=!0}function Ti(a,r,s,d){oi(a,s,d),ki(a,r,s)}function Or(a,r,s){let d;for(d in a[s])if(Object.prototype.hasOwnProperty.call(a[s],d)&&d!=="data"&&!tn(a[s][d],r[s][d]))return!1;for(d in r[s])if(Object.prototype.hasOwnProperty.call(r[s],d)&&d!=="data"&&!tn(a[s][d],r[s][d]))return!1;return!0}function Sn(a,r,s,d,p,_){let x;for(x in r=r||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(tn(a[x],r[x])||s.push({command:_,args:[d,x,r[x],p]}));for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(tn(a[x],r[x])||s.push({command:_,args:[d,x,r[x],p]}))}function Xi(a){return a.id}function et(a,r){return a[r.id]=r,a}class Ie{constructor(r,s,d,p){this.message=(r?`${r}: `:"")+d,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Wt(a,...r){for(const s of r)for(const d in s)a[d]=s[d];return a}class Jt extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class $t{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[d,p]of s)this.bindings[d]=p}concat(r){return new $t(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Pr={kind:"null"},je={kind:"number"},At={kind:"string"},zt={kind:"boolean"},hr={kind:"color"},ai={kind:"object"},St={kind:"value"},si={kind:"collator"},li={kind:"formatted"},Ki={kind:"padding"},ui={kind:"resolvedImage"},Ea={kind:"variableAnchorOffsetCollection"};function Ir(a,r){return{kind:"array",itemType:a,N:r}}function En(a){if(a.kind==="array"){const r=En(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const Ml=[Pr,je,At,zt,hr,li,ai,Ir(St),Ki,ui,Ea];function $o(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!$o(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const s of Ml)if(!$o(s,r))return null}}return`Expected ${En(a)} but found ${En(r)} instead.`}function ne(a,r){return r.some(s=>s.kind===a.kind)}function O(a,r){return r.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function V(a,r){return a.kind==="array"&&r.kind==="array"?a.itemType.kind===r.itemType.kind&&typeof a.N=="number":a.kind===r.kind}const X=.96422,ie=.82521,se=4/29,_e=6/29,he=3*_e*_e,le=_e*_e*_e,xe=Math.PI/180,De=180/Math.PI;function Re(a){return(a%=360)<0&&(a+=360),a}function Le([a,r,s,d]){let p,_;const x=Rt((.2225045*(a=Et(a))+.7168786*(r=Et(r))+.0606169*(s=Et(s)))/1);a===r&&r===s?p=_=x:(p=Rt((.4360747*a+.3850649*r+.1430804*s)/X),_=Rt((.0139322*a+.0971045*r+.7141733*s)/ie));const w=116*x-16;return[w<0?0:w,500*(p-x),200*(x-_),d]}function Et(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Rt(a){return a>le?Math.pow(a,1/3):a/he+se}function lt([a,r,s,d]){let p=(a+16)/116,_=isNaN(r)?p:p+r/500,x=isNaN(s)?p:p-s/200;return p=1*Mt(p),_=X*Mt(_),x=ie*Mt(x),[yt(3.1338561*_-1.6168667*p-.4906146*x),yt(-.9787684*_+1.9161415*p+.033454*x),yt(.0719453*_-.2289914*p+1.4052427*x),d]}function yt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Mt(a){return a>_e?a*a*a:he*(a-se)}function Qt(a){return parseInt(a.padEnd(2,a),16)/255}function yn(a,r){return qt(r?a/100:a,0,1)}function qt(a,r,s){return Math.min(Math.max(r,a),s)}function Yt(a){return!a.some(Number.isNaN)}const ci={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ct{constructor(r,s,d,p=1,_=!0){this.r=r,this.g=s,this.b=d,this.a=p,_||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,s,d,p]))}static parse(r){if(r instanceof Ct)return r;if(typeof r!="string")return;const s=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=ci[d];if(p){const[x,w,T]=p;return[x/255,w/255,T/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let w=1;return[Qt(d.slice(w,w+=x)),Qt(d.slice(w,w+=x)),Qt(d.slice(w,w+=x)),Qt(d.slice(w,w+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,I,R,F,$,G,q,ee,re,ae,ve]=x,fe=[R||" ",G||" ",re].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const be=[I,$,ee].join(""),Ee=be==="%%%"?100:be===""?255:0;if(Ee){const ze=[qt(+T/Ee,0,1),qt(+F/Ee,0,1),qt(+q/Ee,0,1),ae?yn(+ae,ve):1];if(Yt(ze))return ze}}return}}const _=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,w,T,I,R,F,$,G,q]=_,ee=[T||" ",R||" ",$].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const re=[+w,qt(+I,0,100),qt(+F,0,100),G?yn(+G,q):1];if(Yt(re))return function([ae,ve,fe,be]){function Ee(ze){const Qe=(ze+ae/30)%12,ct=ve*Math.min(fe,1-fe);return fe-ct*Math.max(-1,Math.min(Qe-3,9-Qe,1))}return ae=Re(ae),ve/=100,fe/=100,[Ee(0),Ee(8),Ee(4),be]}(re)}}}(r);return s?new Ct(...s,!1):void 0}get rgb(){const{r,g:s,b:d,a:p}=this,_=p||1/0;return this.overwriteGetter("rgb",[r/_,s/_,d/_,p])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,d,p,_]=Le(r),x=Math.sqrt(d*d+p*p);return[Math.round(1e4*x)?Re(Math.atan2(p,d)*De):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Le(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,d,p]=this.rgb;return`rgba(${[r,s,d].map(_=>Math.round(255*_)).join(",")},${p})`}}Ct.black=new Ct(0,0,0,1),Ct.white=new Ct(1,1,1,1),Ct.transparent=new Ct(0,0,0,0),Ct.red=new Ct(1,0,0,1);class dr{constructor(r,s,d){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mr{constructor(r,s,d,p,_){this.text=r,this.image=s,this.scale=d,this.fontStack=p,this.textColor=_}}class er{constructor(r){this.sections=r}static fromString(r){return new er([new Mr(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof er?r:er.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Ci{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ci)return r;if(typeof r=="number")return new Ci([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Ci(r)}}toString(){return JSON.stringify(this.values)}}const T0=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $r{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof $r)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const d=r[s],p=r[s+1];if(typeof d!="string"||!T0.has(d)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new $r(r)}}toString(){return JSON.stringify(this.values)}}class Yi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Yi({name:r,available:!1}):null}}function mp(a,r,s,d){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,r,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,r,s,d]:[a,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $u(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ct||a instanceof dr||a instanceof er||a instanceof Ci||a instanceof $r||a instanceof Yi)return!0;if(Array.isArray(a)){for(const r of a)if(!$u(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!$u(a[r]))return!1;return!0}return!1}function tr(a){if(a===null)return Pr;if(typeof a=="string")return At;if(typeof a=="boolean")return zt;if(typeof a=="number")return je;if(a instanceof Ct)return hr;if(a instanceof dr)return si;if(a instanceof er)return li;if(a instanceof Ci)return Ki;if(a instanceof $r)return Ea;if(a instanceof Yi)return ui;if(Array.isArray(a)){const r=a.length;let s;for(const d of a){const p=tr(d);if(s){if(s===p)continue;s=St;break}s=p}return Ir(s||St,r)}return ai}function ka(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof Ct||a instanceof er||a instanceof Ci||a instanceof $r||a instanceof Yi?a.toString():JSON.stringify(a)}class Ha{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!$u(r[1]))return s.error("invalid value");const d=r[1];let p=tr(d);const _=s.expectedType;return p.kind!=="array"||p.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(p=_),new Ha(p,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class nr{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Bu={string:At,number:je,boolean:zt,object:ai};class Br{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d,p=1;const _=r[0];if(_==="array"){let w,T;if(r.length>2){const I=r[1];if(typeof I!="string"||!(I in Bu)||I==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=Bu[I],p++}else w=St;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=r[2],p++}d=Ir(w,T)}else{if(!Bu[_])throw new Error(`Types doesn't contain name = ${_}`);d=Bu[_]}const x=[];for(;p<r.length;p++){const w=s.parse(r[p],p,St);if(!w)return null;x.push(w)}return new Br(d,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(r);if(!$o(this.type,tr(d)))return d;if(s===this.args.length-1)throw new nr(`Expected value to be of type ${En(this.type)}, but found ${En(tr(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Vu={"to-boolean":zt,"to-color":hr,"to-number":je,"to-string":At};class Bo{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[0];if(!Vu[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return s.error("Expected one argument.");const p=Vu[d],_=[];for(let x=1;x<r.length;x++){const w=s.parse(r[x],x,St);if(!w)return null;_.push(w)}return new Bo(p,_)}evaluate(r){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(r));case"color":{let s,d;for(const p of this.args){if(s=p.evaluate(r),d=null,s instanceof Ct)return s;if(typeof s=="string"){const _=r.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:mp(s[0],s[1],s[2],s[3]),!d))return new Ct(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new nr(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const d of this.args){s=d.evaluate(r);const p=Ci.parse(s);if(p)return p}throw new nr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const d of this.args){s=d.evaluate(r);const p=$r.parse(s);if(p)return p}throw new nr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const d of this.args){if(s=d.evaluate(r),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new nr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return er.fromString(ka(this.args[0].evaluate(r)));case"resolvedImage":return Yi.fromString(ka(this.args[0].evaluate(r)));default:return ka(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Al=["Unknown","Point","LineString","Polygon"];class mn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Al[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Ct.parse(r)),s}}class Nu{constructor(r,s,d=[],p,_=new $t,x=[]){this.registry=r,this.path=d,this.key=d.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=x,this.expectedType=p,this._isConstant=s}parse(r,s,d,p,_={}){return s?this.concat(s,d,p)._parse(r,_):this._parse(r,_)}_parse(r,s){function d(p,_,x){return x==="assert"?new Br(_,[p]):x==="coerce"?new Bo(_,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[p];if(_){let x=_.parse(r,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,T=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||T.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(w.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(w,T))return null}else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"assert")}if(!(x instanceof Ha)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new mn;try{x=new Ha(x.type,x.evaluate(w))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,d){const p=typeof r=="number"?this.path.concat(r):this.path,_=d?this.scope.concat(d):this.scope;return new Nu(this.registry,this._isConstant,p,s||null,_,this.errors)}error(r,...s){const d=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Jt(d,r))}checkSubtype(r,s){const d=$o(r,s);return d&&this.error(d),d}}class Ds{constructor(r,s,d){this.type=si,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const p=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,zt);if(!p)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,zt);if(!_)return null;let x=null;return d.locale&&(x=s.parse(d.locale,1,At),!x)?null:new Ds(p,_,x)}evaluate(r){return new dr(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ta=8192;function Uu(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function zl(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function C0(a,r){const s=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(s*p*Ta),Math.round(d*p*Ta)]}function gp(a,r,s){const d=a[0]-r[0],p=a[1]-r[1],_=a[0]-s[0],x=a[1]-s[1];return d*x-_*p==0&&d*_<=0&&p*x<=0}function ju(a,r){let s=!1;for(let x=0,w=r.length;x<w;x++){const T=r[x];for(let I=0,R=T.length;I<R-1;I++){if(gp(a,T[I],T[I+1]))return!1;(p=T[I])[1]>(d=a)[1]!=(_=T[I+1])[1]>d[1]&&d[0]<(_[0]-p[0])*(d[1]-p[1])/(_[1]-p[1])+p[0]&&(s=!s)}}var d,p,_;return s}function P0(a,r){for(let s=0;s<r.length;s++)if(ju(a,r[s]))return!0;return!1}function yp(a,r,s,d){const p=d[0]-s[0],_=d[1]-s[1],x=(a[0]-s[0])*_-p*(a[1]-s[1]),w=(r[0]-s[0])*_-p*(r[1]-s[1]);return x>0&&w<0||x<0&&w>0}function I0(a,r,s){for(const I of s)for(let R=0;R<I.length-1;++R)if((w=[(x=I[R+1])[0]-(_=I[R])[0],x[1]-_[1]])[0]*(T=[(p=r)[0]-(d=a)[0],p[1]-d[1]])[1]-w[1]*T[0]!=0&&yp(d,p,_,x)&&yp(_,x,d,p))return!0;var d,p,_,x,w,T;return!1}function _p(a,r){for(let s=0;s<a.length;++s)if(!ju(a[s],r))return!1;for(let s=0;s<a.length-1;++s)if(I0(a[s],a[s+1],r))return!1;return!0}function vp(a,r){for(let s=0;s<r.length;s++)if(_p(a,r[s]))return!0;return!1}function Gu(a,r,s){const d=[];for(let p=0;p<a.length;p++){const _=[];for(let x=0;x<a[p].length;x++){const w=C0(a[p][x],s);Uu(r,w),_.push(w)}d.push(_)}return d}function xp(a,r,s){const d=[];for(let p=0;p<a.length;p++){const _=Gu(a[p],r,s);d.push(_)}return d}function bp(a,r,s,d){if(a[0]<s[0]||a[0]>s[2]){const p=.5*d;let _=a[0]-s[0]>p?-d:s[0]-a[0]>p?d:0;_===0&&(_=a[0]-s[2]>p?-d:s[2]-a[0]>p?d:0),a[0]+=_}Uu(r,a)}function Wu(a,r,s,d){const p=Math.pow(2,d.z)*Ta,_=[d.x*Ta,d.y*Ta],x=[];for(const w of a)for(const T of w){const I=[T.x+_[0],T.y+_[1]];bp(I,r,s,p),x.push(I)}return x}function wp(a,r,s,d){const p=Math.pow(2,d.z)*Ta,_=[d.x*Ta,d.y*Ta],x=[];for(const T of a){const I=[];for(const R of T){const F=[R.x+_[0],R.y+_[1]];Uu(r,F),I.push(F)}x.push(I)}if(r[2]-r[0]<=p/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const T of x)for(const I of T)bp(I,r,s,p)}var w;return x}class Xa{constructor(r,s){this.type=zt,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if($u(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let p=0;p<d.features.length;++p){const _=d.features[p].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Xa(d,d.features[p].geometry)}else if(d.type==="Feature"){const p=d.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Xa(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Xa(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const w=Gu(d.coordinates,_,x),T=Wu(s.geometry(),p,_,x);if(!zl(p,_))return!1;for(const I of T)if(!ju(I,w))return!1}if(d.type==="MultiPolygon"){const w=xp(d.coordinates,_,x),T=Wu(s.geometry(),p,_,x);if(!zl(p,_))return!1;for(const I of T)if(!P0(I,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const w=Gu(d.coordinates,_,x),T=wp(s.geometry(),p,_,x);if(!zl(p,_))return!1;for(const I of T)if(!_p(I,w))return!1}if(d.type==="MultiPolygon"){const w=xp(d.coordinates,_,x),T=wp(s.geometry(),p,_,x);if(!zl(p,_))return!1;for(const I of T)if(!vp(I,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class qu{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=r[1];return s.scope.has(d)?new qu(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Pi{constructor(r,s,d,p){this.name=r,this.type=s,this._evaluate=d,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const d=r[0],p=Pi.definitions[d];if(!p)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=x.filter(([I])=>!Array.isArray(I)||I.length===r.length-1);let T=null;for(const[I,R]of w){T=new Nu(s.registry,Dl,s.path,null,s.scope);const F=[];let $=!1;for(let G=1;G<r.length;G++){const q=r[G],ee=Array.isArray(I)?I[G-1]:I.type,re=T.parse(q,1+F.length,ee);if(!re){$=!0;break}F.push(re)}if(!$)if(Array.isArray(I)&&I.length!==F.length)T.error(`Expected ${I.length} arguments, but found ${F.length} instead.`);else{for(let G=0;G<F.length;G++){const q=Array.isArray(I)?I[G]:I.type,ee=F[G];T.concat(G+1).checkSubtype(q,ee.type)}if(T.errors.length===0)return new Pi(d,_,R,F)}}if(w.length===1)s.errors.push(...T.errors);else{const I=(w.length?w:x).map(([F])=>{return $=F,Array.isArray($)?`(${$.map(En).join(", ")})`:`(${En($.type)}...)`;var $}).join(" | "),R=[];for(let F=1;F<r.length;F++){const $=s.parse(r[F],1+R.length);if(!$)return null;R.push(En($.type))}s.error(`Expected arguments of type ${I}, but found (${R.join(", ")}) instead.`)}return null}static register(r,s){Pi.definitions=s;for(const d in s)r[d]=Pi}}function Dl(a){if(a instanceof qu)return Dl(a.boundExpression);if(a instanceof Pi&&a.name==="error"||a instanceof Ds||a instanceof Xa)return!1;const r=a instanceof Bo||a instanceof Br;let s=!0;return a.eachChild(d=>{s=r?s&&Dl(d):s&&d instanceof Ha}),!!s&&Zu(a)&&Ll(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Zu(a){if(a instanceof Pi&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Xa)return!1;let r=!0;return a.eachChild(s=>{r&&!Zu(s)&&(r=!1)}),r}function Rl(a){if(a instanceof Pi&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(s=>{r&&!Rl(s)&&(r=!1)}),r}function Ll(a,r){if(a instanceof Pi&&r.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(d=>{s&&!Ll(d,r)&&(s=!1)}),s}function Fl(a,r){const s=a.length-1;let d,p,_=0,x=s,w=0;for(;_<=x;)if(w=Math.floor((_+x)/2),d=a[w],p=a[w+1],d<=r){if(w===s||r<p)return w;_=w+1}else{if(!(d>r))throw new nr("Input is not a number.");x=w-1}return 0}class Ol{constructor(r,s,d){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[p,_]of d)this.labels.push(p),this.outputs.push(_)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(r[1],1,je);if(!d)return null;const p=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<r.length;x+=2){const w=x===1?-1/0:r[x],T=r[x+1],I=x,R=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(p.length&&p[p.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const F=s.parse(T,R,_);if(!F)return null;_=_||F.type,p.push([w,F])}return new Ol(_,d,p)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const p=this.input.evaluate(r);if(p<=s[0])return d[0].evaluate(r);const _=s.length;return p>=s[_-1]?d[_-1].evaluate(r):d[Fl(s,p)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ka(a,r,s){return a+s*(r-a)}function Hu(a,r,s){return a.map((d,p)=>Ka(d,r[p],s))}const Ii={number:Ka,color:function(a,r,s,d="rgb"){switch(d){case"rgb":{const[p,_,x,w]=Hu(a.rgb,r.rgb,s);return new Ct(p,_,x,w,!1)}case"hcl":{const[p,_,x,w]=a.hcl,[T,I,R,F]=r.hcl;let $,G;if(isNaN(p)||isNaN(T))isNaN(p)?isNaN(T)?$=NaN:($=T,x!==1&&x!==0||(G=I)):($=p,R!==1&&R!==0||(G=_));else{let ve=T-p;T>p&&ve>180?ve-=360:T<p&&p-T>180&&(ve+=360),$=p+s*ve}const[q,ee,re,ae]=function([ve,fe,be,Ee]){return ve=isNaN(ve)?0:ve*xe,lt([be,Math.cos(ve)*fe,Math.sin(ve)*fe,Ee])}([$,G!=null?G:Ka(_,I,s),Ka(x,R,s),Ka(w,F,s)]);return new Ct(q,ee,re,ae,!1)}case"lab":{const[p,_,x,w]=lt(Hu(a.lab,r.lab,s));return new Ct(p,_,x,w,!1)}}},array:Hu,padding:function(a,r,s){return new Ci(Hu(a.values,r.values,s))},variableAnchorOffsetCollection:function(a,r,s){const d=a.values,p=r.values;if(d.length!==p.length)throw new nr(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${r.toString()}`);const _=[];for(let x=0;x<d.length;x+=2){if(d[x]!==p[x])throw new nr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${p[x]}`);_.push(d[x]);const[w,T]=d[x+1],[I,R]=p[x+1];_.push([Ka(w,I,s),Ka(T,R,s)])}return new $r(_)}};class Mi{constructor(r,s,d,p,_){this.type=r,this.operator=s,this.interpolation=d,this.input=p,this.labels=[],this.outputs=[];for(const[x,w]of _)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(r,s,d,p){let _=0;if(r.name==="exponential")_=Uh(s,r.base,d,p);else if(r.name==="linear")_=Uh(s,1,d,p);else if(r.name==="cubic-bezier"){const x=r.controlPoints;_=new Z(x[0],x[1],x[2],x[3]).solve(Uh(s,1,d,p))}return _}static parse(r,s){let[d,p,_,...x]=r;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const I=p[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:I}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const I=p.slice(1);if(I.length!==4||I.some(R=>typeof R!="number"||R<0||R>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:I}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,je),!_)return null;const w=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=hr:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let I=0;I<x.length;I+=2){const R=x[I],F=x[I+1],$=I+3,G=I+4;if(typeof R!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(w.length&&w[w.length-1][0]>=R)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const q=s.parse(F,G,T);if(!q)return null;T=T||q.type,w.push([R,q])}return V(T,je)||V(T,hr)||V(T,Ki)||V(T,Ea)||V(T,Ir(je))?new Mi(T,d,p,_,w):s.error(`Type ${En(T)} is not interpolatable.`)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const p=this.input.evaluate(r);if(p<=s[0])return d[0].evaluate(r);const _=s.length;if(p>=s[_-1])return d[_-1].evaluate(r);const x=Fl(s,p),w=Mi.interpolationFactor(this.interpolation,p,s[x],s[x+1]),T=d[x].evaluate(r),I=d[x+1].evaluate(r);switch(this.operator){case"interpolate":return Ii[this.type.kind](T,I,w);case"interpolate-hcl":return Ii.color(T,I,w,"hcl");case"interpolate-lab":return Ii.color(T,I,w,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Uh(a,r,s,d){const p=d-s,_=a-s;return p===0?0:r===1?_/p:(Math.pow(r,_)-1)/(Math.pow(r,p)-1)}class Xu{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let d=null;const p=s.expectedType;p&&p.kind!=="value"&&(d=p);const _=[];for(const w of r.slice(1)){const T=s.parse(w,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,_.push(T)}if(!d)throw new Error("No output type");const x=p&&_.some(w=>$o(p,w.type));return new Xu(x?St:d,_)}evaluate(r){let s,d=null,p=0;for(const _ of this.args)if(p++,d=_.evaluate(r),d&&d instanceof Yi&&!d.available&&(s||(s=d.name),d=null,p===this.args.length&&(d=s)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Rs{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let _=1;_<r.length-1;_+=2){const x=r[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const w=s.parse(r[_+1],_+1);if(!w)return null;d.push([x,w])}const p=s.parse(r[r.length-1],r.length-1,s.expectedType,d);return p?new Rs(d,p):null}outputDefined(){return this.result.outputDefined()}}class Ls{constructor(r,s,d){this.type=r,this.index=s,this.input=d}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,je),p=s.parse(r[2],2,Ir(s.expectedType||St));return d&&p?new Ls(p.type.itemType,d,p):null}evaluate(r){const s=this.index.evaluate(r),d=this.input.evaluate(r);if(s<0)throw new nr(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new nr(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new nr(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class nn{constructor(r,s){this.type=zt,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,St),p=s.parse(r[2],2,St);return d&&p?ne(d.type,[zt,At,je,Pr,St])?new nn(d,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${En(d.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!O(s,["boolean","string","number","null"]))throw new nr(`Expected first argument to be of type boolean, string, number or null, but found ${En(tr(s))} instead.`);if(!O(d,["string","array"]))throw new nr(`Expected second argument to be of type array or string, but found ${En(tr(d))} instead.`);return d.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Ku{constructor(r,s,d){this.type=je,this.needle=r,this.haystack=s,this.fromIndex=d}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,St),p=s.parse(r[2],2,St);if(!d||!p)return null;if(!ne(d.type,[zt,At,je,Pr,St]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${En(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,je);return _?new Ku(d,p,_):null}return new Ku(d,p)}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!O(s,["boolean","string","number","null"]))throw new nr(`Expected first argument to be of type boolean, string, number or null, but found ${En(tr(s))} instead.`);if(!O(d,["string","array"]))throw new nr(`Expected second argument to be of type array or string, but found ${En(tr(d))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(r);return d.indexOf(s,p)}return d.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class jh{constructor(r,s,d,p,_,x){this.inputType=r,this.type=s,this.input=d,this.cases=p,this.outputs=_,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let d,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const _={},x=[];for(let I=2;I<r.length-1;I+=2){let R=r[I];const F=r[I+1];Array.isArray(R)||(R=[R]);const $=s.concat(I);if(R.length===0)return $.error("Expected at least one branch label.");for(const q of R){if(typeof q!="number"&&typeof q!="string")return $.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return $.error("Numeric branch labels must be integer values.");if(d){if($.checkSubtype(d,tr(q)))return null}else d=tr(q);if(_[String(q)]!==void 0)return $.error("Branch labels must be unique.");_[String(q)]=x.length}const G=s.parse(F,I,p);if(!G)return null;p=p||G.type,x.push(G)}const w=s.parse(r[1],1,St);if(!w)return null;const T=s.parse(r[r.length-1],r.length-1,p);return T?w.type.kind!=="value"&&s.concat(1).checkSubtype(d,w.type)?null:new jh(d,p,w,_,x,T):null}evaluate(r){const s=this.input.evaluate(r);return(tr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Gh{constructor(r,s,d){this.type=r,this.branches=s,this.otherwise=d}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const p=[];for(let x=1;x<r.length-1;x+=2){const w=s.parse(r[x],x,zt);if(!w)return null;const T=s.parse(r[x+1],x+1,d);if(!T)return null;p.push([w,T]),d=d||T.type}const _=s.parse(r[r.length-1],r.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new Gh(d,p,_)}evaluate(r){for(const[s,d]of this.branches)if(s.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,d]of this.branches)r(s),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Yu{constructor(r,s,d,p){this.type=r,this.input=s,this.beginIndex=d,this.endIndex=p}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,St),p=s.parse(r[2],2,je);if(!d||!p)return null;if(!ne(d.type,[Ir(St),At,St]))return s.error(`Expected first argument to be of type array or string, but found ${En(d.type)} instead`);if(r.length===4){const _=s.parse(r[3],3,je);return _?new Yu(d.type,d,p,_):null}return new Yu(d.type,d,p)}evaluate(r){const s=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!O(s,["string","array"]))throw new nr(`Expected first argument to be of type array or string, but found ${En(tr(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(r);return s.slice(d,p)}return s.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Sp(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Ep(a,r,s,d){return d.compare(r,s)===0}function Fs(a,r,s){const d=a!=="=="&&a!=="!=";return class RM{constructor(_,x,w){this.type=zt,this.lhs=_,this.rhs=x,this.collator=w,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const w=_[0];let T=x.parse(_[1],1,St);if(!T)return null;if(!Sp(w,T.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${En(T.type)}'.`);let I=x.parse(_[2],2,St);if(!I)return null;if(!Sp(w,I.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${En(I.type)}'.`);if(T.type.kind!==I.type.kind&&T.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${En(T.type)}' and '${En(I.type)}'.`);d&&(T.type.kind==="value"&&I.type.kind!=="value"?T=new Br(I.type,[T]):T.type.kind!=="value"&&I.type.kind==="value"&&(I=new Br(T.type,[I])));let R=null;if(_.length===4){if(T.type.kind!=="string"&&I.type.kind!=="string"&&T.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(_[3],3,si),!R)return null}return new RM(T,I,R)}evaluate(_){const x=this.lhs.evaluate(_),w=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const T=tr(x),I=tr(w);if(T.kind!==I.kind||T.kind!=="string"&&T.kind!=="number")throw new nr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${T.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=tr(x),I=tr(w);if(T.kind!=="string"||I.kind!=="string")return r(_,x,w)}return this.collator?s(_,x,w,this.collator.evaluate(_)):r(_,x,w)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const M0=Fs("==",function(a,r,s){return r===s},Ep),A0=Fs("!=",function(a,r,s){return r!==s},function(a,r,s,d){return!Ep(0,r,s,d)}),z0=Fs("<",function(a,r,s){return r<s},function(a,r,s,d){return d.compare(r,s)<0}),D0=Fs(">",function(a,r,s){return r>s},function(a,r,s,d){return d.compare(r,s)>0}),R0=Fs("<=",function(a,r,s){return r<=s},function(a,r,s,d){return d.compare(r,s)<=0}),L0=Fs(">=",function(a,r,s){return r>=s},function(a,r,s,d){return d.compare(r,s)>=0});class Wh{constructor(r,s,d,p,_){this.type=At,this.number=r,this.locale=s,this.currency=d,this.minFractionDigits=p,this.maxFractionDigits=_}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const d=s.parse(r[1],1,je);if(!d)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let _=null;if(p.locale&&(_=s.parse(p.locale,1,At),!_))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,At),!x))return null;let w=null;if(p["min-fraction-digits"]&&(w=s.parse(p["min-fraction-digits"],1,je),!w))return null;let T=null;return p["max-fraction-digits"]&&(T=s.parse(p["max-fraction-digits"],1,je),!T)?null:new Wh(d,_,x,w,T)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ju{constructor(r){this.type=li,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const p=[];let _=!1;for(let x=1;x<=r.length-1;++x){const w=r[x];if(_&&typeof w=="object"&&!Array.isArray(w)){_=!1;let T=null;if(w["font-scale"]&&(T=s.parse(w["font-scale"],1,je),!T))return null;let I=null;if(w["text-font"]&&(I=s.parse(w["text-font"],1,Ir(At)),!I))return null;let R=null;if(w["text-color"]&&(R=s.parse(w["text-color"],1,hr),!R))return null;const F=p[p.length-1];F.scale=T,F.font=I,F.textColor=R}else{const T=s.parse(r[x],1,St);if(!T)return null;const I=T.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new Ju(p)}evaluate(r){return new er(this.sections.map(s=>{const d=s.content.evaluate(r);return tr(d)===ui?new Mr("",d,null,null,null):new Mr(ka(d),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class qh{constructor(r){this.type=ui,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const d=s.parse(r[1],1,At);return d?new qh(d):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),d=Yi.fromString(s);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(s)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class Zh{constructor(r){this.type=je,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=s.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${En(d.type)} instead.`):new Zh(d):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new nr(`Expected value to be of type string or array, but found ${En(tr(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Os={"==":M0,"!=":A0,">":D0,"<":z0,">=":L0,"<=":R0,array:Br,at:Ls,boolean:Br,case:Gh,coalesce:Xu,collator:Ds,format:Ju,image:qh,in:nn,"index-of":Ku,interpolate:Mi,"interpolate-hcl":Mi,"interpolate-lab":Mi,length:Zh,let:Rs,literal:Ha,match:jh,number:Br,"number-format":Wh,object:Br,slice:Yu,step:Ol,string:Br,"to-boolean":Bo,"to-color":Bo,"to-number":Bo,"to-string":Bo,var:qu,within:Xa};function kp(a,[r,s,d,p]){r=r.evaluate(a),s=s.evaluate(a),d=d.evaluate(a);const _=p?p.evaluate(a):1,x=mp(r,s,d,_);if(x)throw new nr(x);return new Ct(r/255,s/255,d/255,_,!1)}function Tp(a,r){return a in r}function Hh(a,r){const s=r[a];return s===void 0?null:s}function Ya(a){return{type:a}}function Cp(a){return{result:"success",value:a}}function $s(a){return{result:"error",value:a}}function Bs(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Pp(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Xh(a){return!!a.expression&&a.expression.interpolated}function ln(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Qu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function F0(a){return a}function Ip(a,r){const s=r.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",p=d||!(d||a.property!==void 0),_=a.type||(Xh(r)?"exponential":"interval");if(s||r.type==="padding"){const R=s?Ct.parse:Ci.parse;(a=Wt({},a)).stops&&(a.stops=a.stops.map(F=>[F[0],R(F[1])])),a.default=R(a.default?a.default:r.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let w,T,I;if(_==="exponential")w=Mp;else if(_==="interval")w=$0;else if(_==="categorical"){w=O0,T=Object.create(null);for(const R of a.stops)T[R[0]]=R[1];I=typeof a.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);w=B0}if(d){const R={},F=[];for(let q=0;q<a.stops.length;q++){const ee=a.stops[q],re=ee[0].zoom;R[re]===void 0&&(R[re]={zoom:re,type:a.type,property:a.property,default:a.default,stops:[]},F.push(re)),R[re].stops.push([ee[0].value,ee[1]])}const $=[];for(const q of F)$.push([R[q].zoom,Ip(R[q],r)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Mi.interpolationFactor.bind(void 0,G),zoomStops:$.map(q=>q[0]),evaluate:({zoom:q},ee)=>Mp({stops:$,base:a.base},r,q).evaluate(q,ee)}}if(p){const R=_==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Mi.interpolationFactor.bind(void 0,R),zoomStops:a.stops.map(F=>F[0]),evaluate:({zoom:F})=>w(a,r,F,T,I)}}return{kind:"source",evaluate(R,F){const $=F&&F.properties?F.properties[a.property]:void 0;return $===void 0?Ja(a.default,r.default):w(a,r,$,T,I)}}}function Ja(a,r,s){return a!==void 0?a:r!==void 0?r:s!==void 0?s:void 0}function O0(a,r,s,d,p){return Ja(typeof s===p?d[s]:void 0,a.default,r.default)}function $0(a,r,s){if(ln(s)!=="number")return Ja(a.default,r.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const p=Fl(a.stops.map(_=>_[0]),s);return a.stops[p][1]}function Mp(a,r,s){const d=a.base!==void 0?a.base:1;if(ln(s)!=="number")return Ja(a.default,r.default);const p=a.stops.length;if(p===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[p-1][0])return a.stops[p-1][1];const _=Fl(a.stops.map(R=>R[0]),s),x=function(R,F,$,G){const q=G-$,ee=R-$;return q===0?0:F===1?ee/q:(Math.pow(F,ee)-1)/(Math.pow(F,q)-1)}(s,d,a.stops[_][0],a.stops[_+1][0]),w=a.stops[_][1],T=a.stops[_+1][1],I=Ii[r.type]||F0;return typeof w.evaluate=="function"?{evaluate(...R){const F=w.evaluate.apply(void 0,R),$=T.evaluate.apply(void 0,R);if(F!==void 0&&$!==void 0)return I(F,$,x,a.colorSpace)}}:I(w,T,x,a.colorSpace)}function B0(a,r,s){switch(r.type){case"color":s=Ct.parse(s);break;case"formatted":s=er.fromString(s.toString());break;case"resolvedImage":s=Yi.fromString(s.toString());break;case"padding":s=Ci.parse(s);break;default:ln(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return Ja(s,a.default,r.default)}Pi.register(Os,{error:[{kind:"error"},[At],(a,[r])=>{throw new nr(r.evaluate(a))}],typeof:[At,[St],(a,[r])=>En(tr(r.evaluate(a)))],"to-rgba":[Ir(je,4),[hr],(a,[r])=>{const[s,d,p,_]=r.evaluate(a).rgb;return[255*s,255*d,255*p,_]}],rgb:[hr,[je,je,je],kp],rgba:[hr,[je,je,je,je],kp],has:{type:zt,overloads:[[[At],(a,[r])=>Tp(r.evaluate(a),a.properties())],[[At,ai],(a,[r,s])=>Tp(r.evaluate(a),s.evaluate(a))]]},get:{type:St,overloads:[[[At],(a,[r])=>Hh(r.evaluate(a),a.properties())],[[At,ai],(a,[r,s])=>Hh(r.evaluate(a),s.evaluate(a))]]},"feature-state":[St,[At],(a,[r])=>Hh(r.evaluate(a),a.featureState||{})],properties:[ai,[],a=>a.properties()],"geometry-type":[At,[],a=>a.geometryType()],id:[St,[],a=>a.id()],zoom:[je,[],a=>a.globals.zoom],"heatmap-density":[je,[],a=>a.globals.heatmapDensity||0],"line-progress":[je,[],a=>a.globals.lineProgress||0],accumulated:[St,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[je,Ya(je),(a,r)=>{let s=0;for(const d of r)s+=d.evaluate(a);return s}],"*":[je,Ya(je),(a,r)=>{let s=1;for(const d of r)s*=d.evaluate(a);return s}],"-":{type:je,overloads:[[[je,je],(a,[r,s])=>r.evaluate(a)-s.evaluate(a)],[[je],(a,[r])=>-r.evaluate(a)]]},"/":[je,[je,je],(a,[r,s])=>r.evaluate(a)/s.evaluate(a)],"%":[je,[je,je],(a,[r,s])=>r.evaluate(a)%s.evaluate(a)],ln2:[je,[],()=>Math.LN2],pi:[je,[],()=>Math.PI],e:[je,[],()=>Math.E],"^":[je,[je,je],(a,[r,s])=>Math.pow(r.evaluate(a),s.evaluate(a))],sqrt:[je,[je],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[je,[je],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[je,[je],(a,[r])=>Math.log(r.evaluate(a))],log2:[je,[je],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[je,[je],(a,[r])=>Math.sin(r.evaluate(a))],cos:[je,[je],(a,[r])=>Math.cos(r.evaluate(a))],tan:[je,[je],(a,[r])=>Math.tan(r.evaluate(a))],asin:[je,[je],(a,[r])=>Math.asin(r.evaluate(a))],acos:[je,[je],(a,[r])=>Math.acos(r.evaluate(a))],atan:[je,[je],(a,[r])=>Math.atan(r.evaluate(a))],min:[je,Ya(je),(a,r)=>Math.min(...r.map(s=>s.evaluate(a)))],max:[je,Ya(je),(a,r)=>Math.max(...r.map(s=>s.evaluate(a)))],abs:[je,[je],(a,[r])=>Math.abs(r.evaluate(a))],round:[je,[je],(a,[r])=>{const s=r.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[je,[je],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[je,[je],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[zt,[At,St],(a,[r,s])=>a.properties()[r.value]===s.value],"filter-id-==":[zt,[St],(a,[r])=>a.id()===r.value],"filter-type-==":[zt,[At],(a,[r])=>a.geometryType()===r.value],"filter-<":[zt,[At,St],(a,[r,s])=>{const d=a.properties()[r.value],p=s.value;return typeof d==typeof p&&d<p}],"filter-id-<":[zt,[St],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<d}],"filter->":[zt,[At,St],(a,[r,s])=>{const d=a.properties()[r.value],p=s.value;return typeof d==typeof p&&d>p}],"filter-id->":[zt,[St],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>d}],"filter-<=":[zt,[At,St],(a,[r,s])=>{const d=a.properties()[r.value],p=s.value;return typeof d==typeof p&&d<=p}],"filter-id-<=":[zt,[St],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s<=d}],"filter->=":[zt,[At,St],(a,[r,s])=>{const d=a.properties()[r.value],p=s.value;return typeof d==typeof p&&d>=p}],"filter-id->=":[zt,[St],(a,[r])=>{const s=a.id(),d=r.value;return typeof s==typeof d&&s>=d}],"filter-has":[zt,[St],(a,[r])=>r.value in a.properties()],"filter-has-id":[zt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[zt,[Ir(At)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[zt,[Ir(St)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[zt,[At,Ir(St)],(a,[r,s])=>s.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[zt,[At,Ir(St)],(a,[r,s])=>function(d,p,_,x){for(;_<=x;){const w=_+x>>1;if(p[w]===d)return!0;p[w]>d?x=w-1:_=w+1}return!1}(a.properties()[r.value],s.value,0,s.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(a,[r,s])=>r.evaluate(a)&&s.evaluate(a)],[Ya(zt),(a,r)=>{for(const s of r)if(!s.evaluate(a))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(a,[r,s])=>r.evaluate(a)||s.evaluate(a)],[Ya(zt),(a,r)=>{for(const s of r)if(s.evaluate(a))return!0;return!1}]]},"!":[zt,[zt],(a,[r])=>!r.evaluate(a)],"is-supported-script":[zt,[At],(a,[r])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(r.evaluate(a))}],upcase:[At,[At],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[At,[At],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[At,Ya(St),(a,r)=>r.map(s=>ka(s.evaluate(a))).join("")],"resolved-locale":[At,[si],(a,[r])=>r.evaluate(a).resolvedLocale()]});class Un{constructor(r,s){var d;this.expression=r,this._warningHistory={},this._evaluator=new mn,this._defaultValue=s?(d=s).type==="color"&&Qu(d.default)?new Ct(0,0,0,0):d.type==="color"?Ct.parse(d.default)||null:d.type==="padding"?Ci.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?$r.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,d,p,_,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,d,p,_,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new nr(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}}}function ec(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Os}function Zt(a,r){const s=new Nu(Os,Dl,[],r?function(p){const _={color:hr,string:At,number:je,enum:At,boolean:zt,formatted:li,padding:Ki,resolvedImage:ui,variableAnchorOffsetCollection:Ea};return p.type==="array"?Ir(_[p.value]||St,p.length):_[p.type]}(r):void 0),d=s.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Cp(new Un(d,r)):$s(s.errors)}class $l{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!Rl(s.expression)}evaluateWithoutErrorHandling(r,s,d,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,p,_,x)}evaluate(r,s,d,p,_,x){return this._styleExpression.evaluate(r,s,d,p,_,x)}}class Cn{constructor(r,s,d,p){this.kind=r,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!Rl(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(r,s,d,p,_,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,p,_,x)}evaluate(r,s,d,p,_,x){return this._styleExpression.evaluate(r,s,d,p,_,x)}interpolationFactor(r,s,d){return this.interpolationType?Mi.interpolationFactor(this.interpolationType,r,s,d):0}}function Pn(a,r){const s=Zt(a,r);if(s.result==="error")return s;const d=s.value.expression,p=Zu(d);if(!p&&!Bs(r))return $s([new Jt("","data expressions not supported")]);const _=Ll(d,["zoom"]);if(!_&&!Pp(r))return $s([new Jt("","zoom expressions not supported")]);const x=Bl(d);return x||_?x instanceof Jt?$s([x]):x instanceof Mi&&!Xh(r)?$s([new Jt("",'"interpolate" expressions cannot be used with this property')]):Cp(x?new Cn(p?"camera":"composite",s.value,x.labels,x instanceof Mi?x.interpolation:void 0):new $l(p?"constant":"source",s.value)):$s([new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Qa{constructor(r,s){this._parameters=r,this._specification=s,Wt(this,Ip(this._parameters,this._specification))}static deserialize(r){return new Qa(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Bl(a){let r=null;if(a instanceof Rs)r=Bl(a.result);else if(a instanceof Xu){for(const s of a.args)if(r=Bl(s),r)break}else(a instanceof Ol||a instanceof Mi)&&a.input instanceof Pi&&a.input.name==="zoom"&&(r=a);return r instanceof Jt||a.eachChild(s=>{const d=Bl(s);d instanceof Jt?r=d:!r&&d?r=new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new Jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Kh(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!Kh(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const V0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Yh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Kh(a)||(a=Vl(a));const r=Zt(a,V0);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,p)=>r.value.evaluate(s,d,{},p),needGeometry:Jh(a)}}function N0(a,r){return a<r?-1:a>r?1:0}function Jh(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let r=1;r<a.length;r++)if(Jh(a[r]))return!0;return!1}function Vl(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?tc(a[1],a[2],"=="):r==="!="?rc(tc(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?tc(a[1],a[2],r):r==="any"?(s=a.slice(1),["any"].concat(s.map(Vl))):r==="all"?["all"].concat(a.slice(1).map(Vl)):r==="none"?["all"].concat(a.slice(1).map(Vl).map(rc)):r==="in"?Qh(a[1],a.slice(2)):r==="!in"?rc(Qh(a[1],a.slice(2))):r==="has"?nc(a[1]):r==="!has"?rc(nc(a[1])):r!=="within"||a;var s}function tc(a,r,s){switch(a){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,a,r]}}function Qh(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",a,["literal",r.sort(N0)]]:["filter-in-small",a,["literal",r]]}}function nc(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function rc(a){return["!",a]}function ed(a){const r=typeof a;if(r==="number"||r==="boolean"||r==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let p="[";for(const _ of a)p+=`${ed(_)},`;return`${p}]`}const s=Object.keys(a).sort();let d="{";for(let p=0;p<s.length;p++)d+=`${JSON.stringify(s[p])}:${ed(a[s[p]])},`;return`${d}}`}function U0(a){let r="";for(const s of Fr)r+=`/${ed(a[s])}`;return r}function Ap(a){const r=a.value;return r?[new Ie(a.key,r,"constants have been deprecated as of v8")]:[]}function rr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function es(a){if(Array.isArray(a))return a.map(es);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const s in a)r[s]=es(a[s]);return r}return rr(a)}function Ji(a){const r=a.key,s=a.value,d=a.valueSpec||{},p=a.objectElementValidators||{},_=a.style,x=a.styleSpec,w=a.validateSpec;let T=[];const I=ln(s);if(I!=="object")return[new Ie(r,s,`object expected, ${I} found`)];for(const R in s){const F=R.split(".")[0],$=d[F]||d["*"];let G;if(p[F])G=p[F];else if(d[F])G=w;else if(p["*"])G=p["*"];else{if(!d["*"]){T.push(new Ie(r,s[R],`unknown property "${R}"`));continue}G=w}T=T.concat(G({key:(r&&`${r}.`)+R,value:s[R],valueSpec:$,style:_,styleSpec:x,object:s,objectKey:R,validateSpec:w},s))}for(const R in d)p[R]||d[R].required&&d[R].default===void 0&&s[R]===void 0&&T.push(new Ie(r,s,`missing required property "${R}"`));return T}function td(a){const r=a.value,s=a.valueSpec,d=a.style,p=a.styleSpec,_=a.key,x=a.arrayElementValidator||a.validateSpec;if(ln(r)!=="array")return[new Ie(_,r,`array expected, ${ln(r)} found`)];if(s.length&&r.length!==s.length)return[new Ie(_,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new Ie(_,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let w={type:s.value,values:s.values};p.$version<7&&(w.function=s.function),ln(s.value)==="object"&&(w=s.value);let T=[];for(let I=0;I<r.length;I++)T=T.concat(x({array:r,arrayIndex:I,value:r[I],valueSpec:w,validateSpec:a.validateSpec,style:d,styleSpec:p,key:`${_}[${I}]`}));return T}function ic(a){const r=a.key,s=a.value,d=a.valueSpec;let p=ln(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Ie(r,s,`number expected, ${p} found`)]:"minimum"in d&&s<d.minimum?[new Ie(r,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Ie(r,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function nd(a){const r=a.valueSpec,s=rr(a.value.type);let d,p,_,x={};const w=s!=="categorical"&&a.value.property===void 0,T=!w,I=ln(a.value.stops)==="array"&&ln(a.value.stops[0])==="array"&&ln(a.value.stops[0][0])==="object",R=Ji({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(G){if(s==="identity")return[new Ie(G.key,G.value,'identity function may not have a "stops" property')];let q=[];const ee=G.value;return q=q.concat(td({key:G.key,value:ee,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:F})),ln(ee)==="array"&&ee.length===0&&q.push(new Ie(G.key,ee,"array must have at least one stop")),q},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:r,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return s==="identity"&&w&&R.push(new Ie(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||R.push(new Ie(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Xh(a.valueSpec)&&R.push(new Ie(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(T&&!Bs(a.valueSpec)?R.push(new Ie(a.key,a.value,"property functions not supported")):w&&!Pp(a.valueSpec)&&R.push(new Ie(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!I||a.value.property!==void 0||R.push(new Ie(a.key,a.value,'"property" property is required')),R;function F(G){let q=[];const ee=G.value,re=G.key;if(ln(ee)!=="array")return[new Ie(re,ee,`array expected, ${ln(ee)} found`)];if(ee.length!==2)return[new Ie(re,ee,`array length 2 expected, length ${ee.length} found`)];if(I){if(ln(ee[0])!=="object")return[new Ie(re,ee,`object expected, ${ln(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Ie(re,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Ie(re,ee,"object stop key must have value")];if(_&&_>rr(ee[0].zoom))return[new Ie(re,ee[0].zoom,"stop zoom values must appear in ascending order")];rr(ee[0].zoom)!==_&&(_=rr(ee[0].zoom),p=void 0,x={}),q=q.concat(Ji({key:`${re}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:ic,value:$}}))}else q=q.concat($({key:`${re}[0]`,value:ee[0],valueSpec:{},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},ee));return ec(es(ee[1]))?q.concat([new Ie(`${re}[1]`,ee[1],"expressions are not allowed in function stops.")]):q.concat(G.validateSpec({key:`${re}[1]`,value:ee[1],valueSpec:r,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function $(G,q){const ee=ln(G.value),re=rr(G.value),ae=G.value!==null?G.value:q;if(d){if(ee!==d)return[new Ie(G.key,ae,`${ee} stop domain type must match previous stop domain type ${d}`)]}else d=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Ie(G.key,ae,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&s!=="categorical"){let ve=`number expected, ${ee} found`;return Bs(r)&&s===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(G.key,ae,ve)]}return s!=="categorical"||ee!=="number"||isFinite(re)&&Math.floor(re)===re?s!=="categorical"&&ee==="number"&&p!==void 0&&re<p?[new Ie(G.key,ae,"stop domain values must appear in ascending order")]:(p=re,s==="categorical"&&re in x?[new Ie(G.key,ae,"stop domain values must be unique")]:(x[re]=!0,[])):[new Ie(G.key,ae,`integer expected, found ${re}`)]}}function ra(a){const r=(a.expressionContext==="property"?Pn:Zt)(es(a.value),a.valueSpec);if(r.result==="error")return r.value.map(d=>new Ie(`${a.key}${d.key}`,a.value,d.message));const s=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Ie(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Rl(s))return[new Ie(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Rl(s))return[new Ie(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Ll(s,["zoom","feature-state"]))return[new Ie(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Zu(s))return[new Ie(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nl(a){const r=a.key,s=a.value,d=a.valueSpec,p=[];return Array.isArray(d.values)?d.values.indexOf(rr(s))===-1&&p.push(new Ie(r,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(rr(s))===-1&&p.push(new Ie(r,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function oc(a){return Kh(es(a.value))?ra(Wt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zp(a)}function zp(a){const r=a.value,s=a.key;if(ln(r)!=="array")return[new Ie(s,r,`array expected, ${ln(r)} found`)];const d=a.styleSpec;let p,_=[];if(r.length<1)return[new Ie(s,r,"filter array must have at least 1 element")];switch(_=_.concat(Nl({key:`${s}[0]`,value:r[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),rr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&rr(r[1])==="$type"&&_.push(new Ie(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&_.push(new Ie(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=ln(r[1]),p!=="string"&&_.push(new Ie(`${s}[1]`,r[1],`string expected, ${p} found`)));for(let x=2;x<r.length;x++)p=ln(r[x]),rr(r[1])==="$type"?_=_.concat(Nl({key:`${s}[${x}]`,value:r[x],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&_.push(new Ie(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)_=_.concat(zp({key:`${s}[${x}]`,value:r[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=ln(r[1]),r.length!==2?_.push(new Ie(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&_.push(new Ie(`${s}[1]`,r[1],`string expected, ${p} found`));break;case"within":p=ln(r[1]),r.length!==2?_.push(new Ie(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="object"&&_.push(new Ie(`${s}[1]`,r[1],`object expected, ${p} found`))}return _}function ac(a,r){const s=a.key,d=a.validateSpec,p=a.style,_=a.styleSpec,x=a.value,w=a.objectKey,T=_[`${r}_${a.layerType}`];if(!T)return[];const I=w.match(/^(.*)-transition$/);if(r==="paint"&&I&&T[I[1]]&&T[I[1]].transition)return d({key:s,value:x,valueSpec:_.transition,style:p,styleSpec:_});const R=a.valueSpec||T[w];if(!R)return[new Ie(s,x,`unknown property "${w}"`)];let F;if(ln(x)==="string"&&Bs(R)&&!R.tokens&&(F=/^{([^}]+)}$/.exec(x)))return[new Ie(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const $=[];return a.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&$.push(new Ie(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Qu(es(x))&&rr(x.type)==="identity"&&$.push(new Ie(s,x,'"text-font" does not support identity functions'))),$.concat(d({key:a.key,value:x,valueSpec:R,style:p,styleSpec:_,expressionContext:"property",propertyType:r,propertyKey:w}))}function Ul(a){return ac(a,"paint")}function sc(a){return ac(a,"layout")}function lc(a){let r=[];const s=a.value,d=a.key,p=a.style,_=a.styleSpec;s.type||s.ref||r.push(new Ie(d,s,'either "type" or "ref" is required'));let x=rr(s.type);const w=rr(s.ref);if(s.id){const T=rr(s.id);for(let I=0;I<a.arrayIndex;I++){const R=p.layers[I];rr(R.id)===T&&r.push(new Ie(d,s.id,`duplicate layer id "${s.id}", previously used at line ${R.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(I=>{I in s&&r.push(new Ie(d,s[I],`"${I}" is prohibited for ref layers`))}),p.layers.forEach(I=>{rr(I.id)===w&&(T=I)}),T?T.ref?r.push(new Ie(d,s.ref,"ref cannot reference another ref layer")):x=rr(T.type):r.push(new Ie(d,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const T=p.sources&&p.sources[s.source],I=T&&rr(T.type);T?I==="vector"&&x==="raster"?r.push(new Ie(d,s.source,`layer "${s.id}" requires a raster source`)):I==="raster"&&x!=="raster"?r.push(new Ie(d,s.source,`layer "${s.id}" requires a vector source`)):I!=="vector"||s["source-layer"]?I==="raster-dem"&&x!=="hillshade"?r.push(new Ie(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||I==="geojson"&&T.lineMetrics||r.push(new Ie(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Ie(d,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new Ie(d,s.source,`source "${s.source}" not found`))}else r.push(new Ie(d,s,'missing required property "source"'));return r=r.concat(Ji({key:d,value:s,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:oc,layout:T=>Ji({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":I=>sc(Wt({layerType:x},I))}}),paint:T=>Ji({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":I=>Ul(Wt({layerType:x},I))}})}})),r}function Ca(a){const r=a.value,s=a.key,d=ln(r);return d!=="string"?[new Ie(s,r,`string expected, ${d} found`)]:[]}const Dp={promoteId:function({key:a,value:r}){if(ln(r)==="string")return Ca({key:a,value:r});{const s=[];for(const d in r)s.push(...Ca({key:`${a}.${d}`,value:r[d]}));return s}}};function jl(a){const r=a.value,s=a.key,d=a.styleSpec,p=a.style,_=a.validateSpec;if(!r.type)return[new Ie(s,r,'"type" is required')];const x=rr(r.type);let w;switch(x){case"vector":case"raster":case"raster-dem":return w=Ji({key:s,value:r,valueSpec:d[`source_${x.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Dp,validateSpec:_}),w;case"geojson":if(w=Ji({key:s,value:r,valueSpec:d.source_geojson,style:p,styleSpec:d,validateSpec:_,objectElementValidators:Dp}),r.cluster)for(const T in r.clusterProperties){const[I,R]=r.clusterProperties[T],F=typeof I=="string"?[I,["accumulated"],["get",T]]:I;w.push(...ra({key:`${s}.${T}.map`,value:R,validateSpec:_,expressionContext:"cluster-map"})),w.push(...ra({key:`${s}.${T}.reduce`,value:F,validateSpec:_,expressionContext:"cluster-reduce"}))}return w;case"video":return Ji({key:s,value:r,valueSpec:d.source_video,style:p,validateSpec:_,styleSpec:d});case"image":return Ji({key:s,value:r,valueSpec:d.source_image,style:p,validateSpec:_,styleSpec:d});case"canvas":return[new Ie(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Nl({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:_,styleSpec:d})}}function Rp(a){const r=a.value,s=a.styleSpec,d=s.light,p=a.style;let _=[];const x=ln(r);if(r===void 0)return _;if(x!=="object")return _=_.concat([new Ie("light",r,`object expected, ${x} found`)]),_;for(const w in r){const T=w.match(/^(.*)-transition$/);_=_.concat(T&&d[T[1]]&&d[T[1]].transition?a.validateSpec({key:w,value:r[w],valueSpec:s.transition,validateSpec:a.validateSpec,style:p,styleSpec:s}):d[w]?a.validateSpec({key:w,value:r[w],valueSpec:d[w],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Ie(w,r[w],`unknown property "${w}"`)])}return _}function Lp(a){const r=a.value,s=a.styleSpec,d=s.terrain,p=a.style;let _=[];const x=ln(r);if(r===void 0)return _;if(x!=="object")return _=_.concat([new Ie("terrain",r,`object expected, ${x} found`)]),_;for(const w in r)_=_.concat(d[w]?a.validateSpec({key:w,value:r[w],valueSpec:d[w],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Ie(w,r[w],`unknown property "${w}"`)]);return _}function Fp(a){let r=[];const s=a.value,d=a.key;if(Array.isArray(s)){const p=[],_=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&r.push(new Ie(d,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&_.includes(s[x].url)&&r.push(new Ie(d,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),r=r.concat(Ji({key:`${d}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return r}return Ca({key:d,value:s})}const Op={"*":()=>[],array:td,boolean:function(a){const r=a.value,s=a.key,d=ln(r);return d!=="boolean"?[new Ie(s,r,`boolean expected, ${d} found`)]:[]},number:ic,color:function(a){const r=a.key,s=a.value,d=ln(s);return d!=="string"?[new Ie(r,s,`color expected, ${d} found`)]:Ct.parse(String(s))?[]:[new Ie(r,s,`color expected, "${s}" found`)]},constants:Ap,enum:Nl,filter:oc,function:nd,layer:lc,object:Ji,source:jl,light:Rp,terrain:Lp,string:Ca,formatted:function(a){return Ca(a).length===0?[]:ra(a)},resolvedImage:function(a){return Ca(a).length===0?[]:ra(a)},padding:function(a){const r=a.key,s=a.value;if(ln(s)==="array"){if(s.length<1||s.length>4)return[new Ie(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let p=[];for(let _=0;_<s.length;_++)p=p.concat(a.validateSpec({key:`${r}[${_}]`,value:s[_],validateSpec:a.validateSpec,valueSpec:d}));return p}return ic({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const r=a.key,s=a.value,d=ln(s),p=a.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new Ie(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Nl({key:`${r}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),_=_.concat(td({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:p}));return _},sprite:Fp};function Gl(a){const r=a.value,s=a.valueSpec,d=a.styleSpec;return a.validateSpec=Gl,s.expression&&Qu(rr(r))?nd(a):s.expression&&ec(es(r))?ra(a):s.type&&Op[s.type]?Op[s.type](a):Ji(Wt({},a,{valueSpec:s.type?d[s.type]:s}))}function Wl(a){const r=a.value,s=a.key,d=Ca(a);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Ie(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Ie(s,r,'"glyphs" url must include a "{range}" token'))),d}function Ai(a,r=Pe){let s=[];return s=s.concat(Gl({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,validateSpec:Gl,objectElementValidators:{glyphs:Wl,"*":()=>[]}})),a.constants&&(s=s.concat(Ap({key:"constants",value:a.constants,style:a,styleSpec:r,validateSpec:Gl}))),ql(s)}function fr(a){return function(r){return a({...r,validateSpec:Gl})}}function ql(a){return[].concat(a).sort((r,s)=>r.line-s.line)}function ia(a){return function(...r){return ql(a.apply(this,r))}}Ai.source=ia(fr(jl)),Ai.sprite=ia(fr(Fp)),Ai.glyphs=ia(fr(Wl)),Ai.light=ia(fr(Rp)),Ai.terrain=ia(fr(Lp)),Ai.layer=ia(fr(lc)),Ai.filter=ia(fr(oc)),Ai.paintProperty=ia(fr(Ul)),Ai.layoutProperty=ia(fr(sc));const Zl=Ai,j0=Zl.light,Hl=Zl.paintProperty,G0=Zl.layoutProperty;function uc(a,r){let s=!1;if(r&&r.length)for(const d of r)a.fire(new Xt(new Error(d.message))),s=!0;return s}class Xl{constructor(r,s,d){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(d=x[2]);for(let T=0;T<this.d*this.d;T++){const I=x[3+T],R=x[3+T+1];p.push(I===R?null:x.subarray(I,R))}const w=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=d,this.scale=s/r,this.uid=0;const _=d/s*r;this.min=-_,this.max=r+_}insert(r,s,d,p,_){this._forEachCell(s,d,p,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,d,p,_,x){this.cells[_].push(x)}query(r,s,d,p,_){const x=this.min,w=this.max;if(r<=x&&s<=x&&w<=d&&w<=p&&!_)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(r,s,d,p,this._queryCell,T,{},_),T}}_queryCell(r,s,d,p,_,x,w,T){const I=this.cells[_];if(I!==null){const R=this.keys,F=this.bboxes;for(let $=0;$<I.length;$++){const G=I[$];if(w[G]===void 0){const q=4*G;(T?T(F[q+0],F[q+1],F[q+2],F[q+3]):r<=F[q+2]&&s<=F[q+3]&&d>=F[q+0]&&p>=F[q+1])?(w[G]=!0,x.push(R[G])):w[G]=!1}}}}_forEachCell(r,s,d,p,_,x,w,T){const I=this._convertToCellCoord(r),R=this._convertToCellCoord(s),F=this._convertToCellCoord(d),$=this._convertToCellCoord(p);for(let G=I;G<=F;G++)for(let q=R;q<=$;q++){const ee=this.d*q+G;if((!T||T(this._convertFromCellCoord(G),this._convertFromCellCoord(q),this._convertFromCellCoord(G+1),this._convertFromCellCoord(q+1)))&&_.call(this,r,s,d,p,ee,x,w,T))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const p=new Int32Array(s+d+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let _=s;for(let x=0;x<r.length;x++){const w=r[x];p[3+x]=_,p.set(w,_),_+=w.length}return p[3+r.length]=_,p.set(this.keys,_),_+=this.keys.length,p[3+r.length+1]=_,p.set(this.bboxes,_),_+=this.bboxes.length,p.buffer}static serialize(r,s){const d=r.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(r){return new Xl(r.buffer)}}const Vo={};function tt(a,r,s={}){if(Vo[a])throw new Error(`${a} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:a,writeable:!1}),Vo[a]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}tt("Object",Object),tt("TransferableGridIndex",Xl),tt("Color",Ct),tt("Error",Error),tt("AJAXError",Ot),tt("ResolvedImage",Yi),tt("StylePropertyFunction",Qa),tt("StyleExpression",Un,{omit:["_evaluator"]}),tt("ZoomDependentExpression",Cn),tt("ZoomConstantExpression",$l),tt("CompoundExpression",Pi,{omit:["_evaluate"]});for(const a in Os)Os[a]._classRegistryKey||tt(`Expression_${a}`,Os[a]);function Vs(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Kl(a,r){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Vs(a)||Bt(a))return r&&r.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return r&&r.push(s.buffer),s}if(a instanceof ImageData)return r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const d of a)s.push(Kl(d,r));return s}if(typeof a=="object"){const s=a.constructor,d=s._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!Vo[d])throw new Error(`${d} is not registered.`);const p=s.serialize?s.serialize(a,r):{};if(s.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||Vo[d].omit.indexOf(_)>=0)continue;const x=a[_];p[_]=Vo[d].shallow.indexOf(_)>=0?x:Kl(x,r)}a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(p.$name=d),p}throw new Error("can't serialize object of type "+typeof a)}function ts(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Vs(a)||Bt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(ts);if(typeof a=="object"){const r=a.$name||"Object";if(!Vo[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=Vo[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(a);const d=Object.create(s.prototype);for(const p of Object.keys(a)){if(p==="$name")continue;const _=a[p];d[p]=Vo[r].shallow.indexOf(p)>=0?_:ts(_)}return d}throw new Error("can't deserialize object of type "+typeof a)}class rd{constructor(){this.first=!0}update(r,s){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function cc(a){for(const r of a)if(Yl(r.charCodeAt(0)))return!0;return!1}function $p(a){for(const r of a)if(!W0(r.charCodeAt(0)))return!1;return!0}function W0(a){return!(Ye.Arabic(a)||Ye["Arabic Supplement"](a)||Ye["Arabic Extended-A"](a)||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a))}function Yl(a){return!(a!==746&&a!==747&&(a<4352||!(Ye["Bopomofo Extended"](a)||Ye.Bopomofo(a)||Ye["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ye["CJK Compatibility Ideographs"](a)||Ye["CJK Compatibility"](a)||Ye["CJK Radicals Supplement"](a)||Ye["CJK Strokes"](a)||!(!Ye["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ye["CJK Unified Ideographs Extension A"](a)||Ye["CJK Unified Ideographs"](a)||Ye["Enclosed CJK Letters and Months"](a)||Ye["Hangul Compatibility Jamo"](a)||Ye["Hangul Jamo Extended-A"](a)||Ye["Hangul Jamo Extended-B"](a)||Ye["Hangul Jamo"](a)||Ye["Hangul Syllables"](a)||Ye.Hiragana(a)||Ye["Ideographic Description Characters"](a)||Ye.Kanbun(a)||Ye["Kangxi Radicals"](a)||Ye["Katakana Phonetic Extensions"](a)||Ye.Katakana(a)&&a!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ye["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](a)||Ye["Unified Canadian Aboriginal Syllabics Extended"](a)||Ye["Vertical Forms"](a)||Ye["Yijing Hexagram Symbols"](a)||Ye["Yi Syllables"](a)||Ye["Yi Radicals"](a))))}function Jl(a){return!(Yl(a)||function(r){return!!(Ye["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ye["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ye["Letterlike Symbols"](r)||Ye["Number Forms"](r)||Ye["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ye["Control Pictures"](r)&&r!==9251||Ye["Optical Character Recognition"](r)||Ye["Enclosed Alphanumerics"](r)||Ye["Geometric Shapes"](r)||Ye["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ye["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ye["CJK Symbols and Punctuation"](r)||Ye.Katakana(r)||Ye["Private Use Area"](r)||Ye["CJK Compatibility Forms"](r)||Ye["Small Form Variants"](r)||Ye["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}function id(a){return a>=1424&&a<=2303||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a)}function q0(a,r){return!(!r&&id(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ye.Khmer(a))}function Bp(a){for(const r of a)if(id(r.charCodeAt(0)))return!0;return!1}const od="deferred",Ql="loading",ad="loaded";let sd=null,hi="unavailable",Pa=null;const ld=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(hi="error"),sd&&sd(a)};function ud(){cd.fire(new Rn("pluginStateChange",{pluginStatus:hi,pluginURL:Pa}))}const cd=new fn,hd=function(){return hi},Vp=function(){if(hi!==od||!Pa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");hi=Ql,ud(),Pa&&dn({url:Pa},a=>{a?ld(a):(hi=ad,ud())})},Qi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>hi===ad||Qi.applyArabicShaping!=null,isLoading:()=>hi===Ql,setState(a){if(!wt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");hi=a.pluginStatus,Pa=a.pluginURL},isParsed(){if(!wt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Qi.applyArabicShaping!=null&&Qi.processBidirectionalText!=null&&Qi.processStyledBidirectionalText!=null},getPluginURL(){if(!wt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Pa}};class An{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rd,this.transition={})}isSupportedScript(r){return function(s,d){for(const p of s)if(!q0(p.charCodeAt(0),d))return!1;return!0}(r,Qi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class hc{constructor(r,s){this.property=r,this.value=s,this.expression=function(d,p){if(Qu(d))return new Qa(d,p);if(ec(d)){const _=Pn(d,p);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=d;return p.type==="color"&&typeof d=="string"?_=Ct.parse(d):p.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(_=$r.parse(d)):_=Ci.parse(d),{kind:"constant",evaluate:()=>_}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,d){return this.property.possiblyEvaluate(this,r,s,d)}}class Ns{constructor(r){this.property=r,this.value=new hc(r,void 0)}transitioned(r,s){return new dc(this.property,this.value,s,K({},r.transition,this.transition),r.now)}untransitioned(){return new dc(this.property,this.value,null,{},0)}}class Np{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return me(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ns(this._values[r].property)),this._values[r].value=new hc(this._values[r].property,s===null?void 0:me(s))}getTransition(r){return me(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ns(this._values[r].property)),this._values[r].transition=me(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d);const p=this.getTransition(s);p!==void 0&&(r[`${s}-transition`]=p)}return r}transitioned(r,s){const d=new Up(this._properties);for(const p of Object.keys(this._values))d._values[p]=this._values[p].transitioned(r,s._values[p]);return d}untransitioned(){const r=new Up(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class dc{constructor(r,s,d,p,_){this.property=r,this.value=s,this.begin=_+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=d)}possiblyEvaluate(r,s,d){const p=r.now||0,_=this.value.possiblyEvaluate(r,s,d),x=this.prior;if(x){if(p>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(p<this.begin)return x.possiblyEvaluate(r,s,d);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,d),_,function(T){if(T<=0)return 0;if(T>=1)return 1;const I=T*T,R=I*T;return 4*(T<.5?R:3*(T-I)+R-.75)}(w))}}return _}}class Up{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,d){const p=new eu(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(r,s,d);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Z0{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return me(this._values[r].value)}setValue(r,s){this._values[r]=new hc(this._values[r].property,s===null?void 0:me(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d)}return r}possiblyEvaluate(r,s,d){const p=new eu(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(r,s,d);return p}}class ho{constructor(r,s,d){this.property=r,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,d,p){return this.property.evaluate(this.value,this.parameters,r,s,d,p)}}class eu{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class dt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,d){const p=Ii[this.specification.type];return p?p(r,s,d):r}}class kt{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,d,p){return new ho(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},d,p)}:r.expression,s)}interpolate(r,s,d){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new ho(this,{kind:"constant",value:void 0},r.parameters);const p=Ii[this.specification.type];if(p){const _=p(r.value.value,s.value.value,d);return new ho(this,{kind:"constant",value:_},r.parameters)}return r}evaluate(r,s,d,p,_,x){return r.kind==="constant"?r.value:r.evaluate(s,d,p,_,x)}}class fc extends kt{possiblyEvaluate(r,s,d,p){if(r.value===void 0)return new ho(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,p),x=r.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,w=this._calculate(x,x,x,s);return new ho(this,{kind:"constant",value:w},s)}if(r.expression.kind==="camera"){const _=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new ho(this,{kind:"constant",value:_},s)}return new ho(this,r.expression,s)}evaluate(r,s,d,p,_,x){if(r.kind==="source"){const w=r.evaluate(s,d,p,_,x);return this._calculate(w,w,w,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},d,p),r.evaluate({zoom:Math.floor(s.zoom)},d,p),r.evaluate({zoom:Math.floor(s.zoom)+1},d,p),s):r.value}_calculate(r,s,d,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class dd{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const _=r.expression.evaluate(s,null,{},d,p);return this._calculate(_,_,_,s)}return this._calculate(r.expression.evaluate(new An(Math.floor(s.zoom-1),s)),r.expression.evaluate(new An(Math.floor(s.zoom),s)),r.expression.evaluate(new An(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,d,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class fd{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,p){return!!r.expression.evaluate(s,null,{},d,p)}interpolate(){return!1}}class di{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const d=r[s];d.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new hc(d,void 0),_=this.defaultTransitionablePropertyValues[s]=new Ns(d);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}tt("DataDrivenProperty",kt),tt("DataConstantProperty",dt),tt("CrossFadedDataDrivenProperty",fc),tt("CrossFadedProperty",dd),tt("ColorRampProperty",fd);const ns="-transition";class No extends fn{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Z0(s.layout)),s.paint)){this._transitionablePaint=new Np(s.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,d={}){s!=null&&this._validate(G0,`layers.${this.id}.layout.${r}`,r,s,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(ns)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,d={}){if(s!=null&&this._validate(Hl,`layers.${this.id}.paint.${r}`,r,s,d))return!1;if(r.endsWith(ns))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[r],_=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const T=this._transitionablePaint._values[r].value;return T.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(r,w,T)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ye(r,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(r,s,d,p,_={}){return(!_||_.validate!==!1)&&uc(this,r.call(Zl,{key:s,layerType:this.type,objectKey:d,value:p,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof ho&&Bs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const H0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class tu{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ln{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ir(a,r=1){let s=0,d=0;return{members:a.map(p=>{const _=H0[p.type].BYTES_PER_ELEMENT,x=s=jp(s,Math.max(r,_)),w=p.components||1;return d=Math.max(d,_),s+=_*w,{name:p.name,type:p.type,components:w,offset:x}}),size:jp(s,Math.max(d,r)),alignment:r}}function jp(a,r){return Math.ceil(a/r)*r}class eo extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const p=2*r;return this.int16[p+0]=s,this.int16[p+1]=d,r}}eo.prototype.bytesPerElement=4,tt("StructArrayLayout2i4",eo);class nu extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,d)}emplace(r,s,d,p){const _=3*r;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=p,r}}nu.prototype.bytesPerElement=6,tt("StructArrayLayout3i6",nu);class ru extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,p)}emplace(r,s,d,p,_){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=d,this.int16[x+2]=p,this.int16[x+3]=_,r}}ru.prototype.bytesPerElement=8,tt("StructArrayLayout4i8",ru);class pc extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,p,_,x)}emplace(r,s,d,p,_,x,w){const T=6*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=w,r}}pc.prototype.bytesPerElement=12,tt("StructArrayLayout2i4i12",pc);class iu extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,p,_,x)}emplace(r,s,d,p,_,x,w){const T=4*r,I=8*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.uint8[I+4]=p,this.uint8[I+5]=_,this.uint8[I+6]=x,this.uint8[I+7]=w,r}}iu.prototype.bytesPerElement=8,tt("StructArrayLayout2i4ub8",iu);class ou extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const p=2*r;return this.float32[p+0]=s,this.float32[p+1]=d,r}}ou.prototype.bytesPerElement=8,tt("StructArrayLayout2f8",ou);class Us extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x,w,T,I,R){const F=this.length;return this.resize(F+1),this.emplace(F,r,s,d,p,_,x,w,T,I,R)}emplace(r,s,d,p,_,x,w,T,I,R,F){const $=10*r;return this.uint16[$+0]=s,this.uint16[$+1]=d,this.uint16[$+2]=p,this.uint16[$+3]=_,this.uint16[$+4]=x,this.uint16[$+5]=w,this.uint16[$+6]=T,this.uint16[$+7]=I,this.uint16[$+8]=R,this.uint16[$+9]=F,r}}Us.prototype.bytesPerElement=20,tt("StructArrayLayout10ui20",Us);class rs extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x,w,T,I,R,F,$){const G=this.length;return this.resize(G+1),this.emplace(G,r,s,d,p,_,x,w,T,I,R,F,$)}emplace(r,s,d,p,_,x,w,T,I,R,F,$,G){const q=12*r;return this.int16[q+0]=s,this.int16[q+1]=d,this.int16[q+2]=p,this.int16[q+3]=_,this.uint16[q+4]=x,this.uint16[q+5]=w,this.uint16[q+6]=T,this.uint16[q+7]=I,this.int16[q+8]=R,this.int16[q+9]=F,this.int16[q+10]=$,this.int16[q+11]=G,r}}rs.prototype.bytesPerElement=24,tt("StructArrayLayout4i4ui4i24",rs);class pd extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,d)}emplace(r,s,d,p){const _=3*r;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=p,r}}pd.prototype.bytesPerElement=12,tt("StructArrayLayout3f12",pd);class mc extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}mc.prototype.bytesPerElement=4,tt("StructArrayLayout1ul4",mc);class is extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x,w,T,I){const R=this.length;return this.resize(R+1),this.emplace(R,r,s,d,p,_,x,w,T,I)}emplace(r,s,d,p,_,x,w,T,I,R){const F=10*r,$=5*r;return this.int16[F+0]=s,this.int16[F+1]=d,this.int16[F+2]=p,this.int16[F+3]=_,this.int16[F+4]=x,this.int16[F+5]=w,this.uint32[$+3]=T,this.uint16[F+8]=I,this.uint16[F+9]=R,r}}is.prototype.bytesPerElement=20,tt("StructArrayLayout6i1ul2ui20",is);class md extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,p,_,x)}emplace(r,s,d,p,_,x,w){const T=6*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=w,r}}md.prototype.bytesPerElement=12,tt("StructArrayLayout2i2i2i12",md);class gd extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,d,p,_)}emplace(r,s,d,p,_,x){const w=4*r,T=8*r;return this.float32[w+0]=s,this.float32[w+1]=d,this.float32[w+2]=p,this.int16[T+6]=_,this.int16[T+7]=x,r}}gd.prototype.bytesPerElement=16,tt("StructArrayLayout2f1f2i16",gd);class gc extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,p)}emplace(r,s,d,p,_){const x=12*r,w=3*r;return this.uint8[x+0]=s,this.uint8[x+1]=d,this.float32[w+1]=p,this.float32[w+2]=_,r}}gc.prototype.bytesPerElement=12,tt("StructArrayLayout2ub2f12",gc);class yc extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,d)}emplace(r,s,d,p){const _=3*r;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=p,r}}yc.prototype.bytesPerElement=6,tt("StructArrayLayout3ui6",yc);class yd extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae){const ve=this.length;return this.resize(ve+1),this.emplace(ve,r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae)}emplace(r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae,ve){const fe=24*r,be=12*r,Ee=48*r;return this.int16[fe+0]=s,this.int16[fe+1]=d,this.uint16[fe+2]=p,this.uint16[fe+3]=_,this.uint32[be+2]=x,this.uint32[be+3]=w,this.uint32[be+4]=T,this.uint16[fe+10]=I,this.uint16[fe+11]=R,this.uint16[fe+12]=F,this.float32[be+7]=$,this.float32[be+8]=G,this.uint8[Ee+36]=q,this.uint8[Ee+37]=ee,this.uint8[Ee+38]=re,this.uint32[be+10]=ae,this.int16[fe+22]=ve,r}}yd.prototype.bytesPerElement=48,tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",yd);class on extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae,ve,fe,be,Ee,ze,Qe,ct,Je,Ke,We,rt){const He=this.length;return this.resize(He+1),this.emplace(He,r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae,ve,fe,be,Ee,ze,Qe,ct,Je,Ke,We,rt)}emplace(r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee,re,ae,ve,fe,be,Ee,ze,Qe,ct,Je,Ke,We,rt,He){const Ve=32*r,xt=16*r;return this.int16[Ve+0]=s,this.int16[Ve+1]=d,this.int16[Ve+2]=p,this.int16[Ve+3]=_,this.int16[Ve+4]=x,this.int16[Ve+5]=w,this.int16[Ve+6]=T,this.int16[Ve+7]=I,this.uint16[Ve+8]=R,this.uint16[Ve+9]=F,this.uint16[Ve+10]=$,this.uint16[Ve+11]=G,this.uint16[Ve+12]=q,this.uint16[Ve+13]=ee,this.uint16[Ve+14]=re,this.uint16[Ve+15]=ae,this.uint16[Ve+16]=ve,this.uint16[Ve+17]=fe,this.uint16[Ve+18]=be,this.uint16[Ve+19]=Ee,this.uint16[Ve+20]=ze,this.uint16[Ve+21]=Qe,this.uint16[Ve+22]=ct,this.uint32[xt+12]=Je,this.float32[xt+13]=Ke,this.float32[xt+14]=We,this.uint16[Ve+30]=rt,this.uint16[Ve+31]=He,r}}on.prototype.bytesPerElement=64,tt("StructArrayLayout8i15ui1ul2f2ui64",on);class y extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}y.prototype.bytesPerElement=4,tt("StructArrayLayout1f4",y);class i extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,d)}emplace(r,s,d,p){const _=3*r;return this.uint16[6*r+0]=s,this.float32[_+1]=d,this.float32[_+2]=p,r}}i.prototype.bytesPerElement=12,tt("StructArrayLayout1ui2f12",i);class c extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const p=this.length;return this.resize(p+1),this.emplace(p,r,s,d)}emplace(r,s,d,p){const _=4*r;return this.uint32[2*r+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=p,r}}c.prototype.bytesPerElement=8,tt("StructArrayLayout1ul2ui8",c);class f extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const p=2*r;return this.uint16[p+0]=s,this.uint16[p+1]=d,r}}f.prototype.bytesPerElement=4,tt("StructArrayLayout2ui4",f);class m extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}m.prototype.bytesPerElement=2,tt("StructArrayLayout1ui2",m);class v extends Ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,r,s,d,p)}emplace(r,s,d,p,_){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=d,this.float32[x+2]=p,this.float32[x+3]=_,r}}v.prototype.bytesPerElement=16,tt("StructArrayLayout4f16",v);class E extends tu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}E.prototype.size=20;class k extends is{get(r){return new E(this,r)}}tt("CollisionBoxArray",k);class P extends tu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}P.prototype.size=48;class M extends yd{get(r){return new P(this,r)}}tt("PlacedSymbolArray",M);class D extends tu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}D.prototype.size=64;class L extends on{get(r){return new D(this,r)}}tt("SymbolInstanceArray",L);class U extends y{getoffsetX(r){return this.float32[1*r+0]}}tt("GlyphOffsetArray",U);class Q extends nu{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}tt("SymbolLineVertexArray",Q);class J extends tu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}J.prototype.size=12;class te extends i{get(r){return new J(this,r)}}tt("TextAnchorOffsetArray",te);class Y extends tu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Y.prototype.size=8;class pe extends c{get(r){return new Y(this,r)}}tt("FeatureIndexArray",pe);class Se extends eo{}class oe extends eo{}class ge extends eo{}class ke extends pc{}class Ce extends iu{}class Ae extends ou{}class $e extends Us{}class Fe extends rs{}class Ge extends pd{}class ut extends mc{}class Ut extends md{}class Xe extends gc{}class _t extends yc{}class st extends f{}const zn=ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:jt}=zn;class vt{constructor(r=[]){this.segments=r}prepareSegment(r,s,d,p){let _=this.segments[this.segments.length-1];return r>vt.MAX_VERTEX_ARRAY_LENGTH&&Ne(`Max vertices per segment is ${vt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!_||_.vertexLength+r>vt.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==p)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},p!==void 0&&(_.sortKey=p),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,d,p){return new vt([{vertexOffset:r,primitiveOffset:s,vertexLength:d,primitiveLength:p,vaos:{},sortKey:0}])}}function Gt(a,r){return 256*(a=B(Math.floor(a),0,255))+B(Math.floor(r),0,255)}vt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tt("SegmentVector",vt);const Fn=ir([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var gn={exports:{}},zi={exports:{}};zi.exports=function(a,r){var s,d,p,_,x,w,T,I;for(d=a.length-(s=3&a.length),p=r,x=3432918353,w=461845907,I=0;I<d;)T=255&a.charCodeAt(I)|(255&a.charCodeAt(++I))<<8|(255&a.charCodeAt(++I))<<16|(255&a.charCodeAt(++I))<<24,++I,p=27492+(65535&(_=5*(65535&(p=(p^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&a.charCodeAt(I+2))<<16;case 2:T^=(255&a.charCodeAt(I+1))<<8;case 1:p^=T=(65535&(T=(T=(65535&(T^=255&a.charCodeAt(I)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Ar=zi.exports,Hn={exports:{}};Hn.exports=function(a,r){for(var s,d=a.length,p=r^d,_=0;d>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(_)|(255&a.charCodeAt(++_))<<8|(255&a.charCodeAt(++_))<<16|(255&a.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++_;switch(d){case 3:p^=(255&a.charCodeAt(_+2))<<16;case 2:p^=(255&a.charCodeAt(_+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(_)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var fi=Ar,Uo=Hn.exports;gn.exports=fi,gn.exports.murmur3=fi,gn.exports.murmur2=Uo;var fo=S(gn.exports);class jo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,d,p){this.ids.push(js(r)),this.positions.push(s,d,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=js(r);let d=0,p=this.ids.length-1;for(;d<p;){const x=d+p>>1;this.ids[x]>=s?p=x:d=x+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(r,s){const d=new Float64Array(r.ids),p=new Uint32Array(r.positions);return Ia(d,p,0,d.length-1),s&&s.push(d.buffer,p.buffer),{ids:d,positions:p}}static deserialize(r){const s=new jo;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function js(a){const r=+a;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:fo(String(a))}function Ia(a,r,s,d){for(;s<d;){const p=a[s+d>>1];let _=s-1,x=d+1;for(;;){do _++;while(a[_]<p);do x--;while(a[x]>p);if(_>=x)break;oa(a,_,x),oa(r,3*_,3*x),oa(r,3*_+1,3*x+1),oa(r,3*_+2,3*x+2)}x-s<d-x?(Ia(a,r,s,x),s=x+1):(Ia(a,r,x+1,d),d=x)}}function oa(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}tt("FeaturePositionMap",jo);class or{constructor(r,s){this.gl=r.gl,this.location=s}}class _r extends or{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Vr extends or{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Gs extends or{constructor(r,s){super(r,s),this.current=Ct.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const vr=new Float32Array(16);function pr(a){return[Gt(255*a.r,255*a.g),Gt(255*a.b,255*a.a)]}class Nr{constructor(r,s,d){this.value=r,this.uniformNames=s.map(p=>`u_${p}`),this.type=d}setUniform(r,s,d){r.set(d.constantOr(this.value))}getBinding(r,s,d){return this.type==="color"?new Gs(r,s):new _r(r,s)}}class On{constructor(r,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,d,p){const _=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&r.set(_)}getBinding(r,s,d){return d.substr(0,9)==="u_pattern"?new Vr(r,s):new _r(r,s)}}class aa{constructor(r,s,d,p){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(r,s,d,p,_){const x=this.paintVertexArray.length,w=this.expression.evaluate(new An(0),s,{},p,[],_);this.paintVertexArray.resize(r),this._setPaintValue(x,r,w)}updatePaintArray(r,s,d,p){const _=this.expression.evaluate({zoom:0},d,p);this._setPaintValue(r,s,_)}_setPaintValue(r,s,d){if(this.type==="color"){const p=pr(d);for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,p[0],p[1])}else{for(let p=r;p<s;p++)this.paintVertexArray.emplace(p,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class po{constructor(r,s,d,p,_,x){this.expression=r,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=p,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,d,p,_){const x=this.expression.evaluate(new An(this.zoom),s,{},p,[],_),w=this.expression.evaluate(new An(this.zoom+1),s,{},p,[],_),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,x,w)}updatePaintArray(r,s,d,p){const _=this.expression.evaluate({zoom:this.zoom},d,p),x=this.expression.evaluate({zoom:this.zoom+1},d,p);this._setPaintValue(r,s,_,x)}_setPaintValue(r,s,d,p){if(this.type==="color"){const _=pr(d),x=pr(p);for(let w=r;w<s;w++)this.paintVertexArray.emplace(w,_[0],_[1],x[0],x[1])}else{for(let _=r;_<s;_++)this.paintVertexArray.emplace(_,d,p);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=B(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,s,d){return new _r(r,s)}}class Ma{constructor(r,s,d,p,_,x){this.expression=r,this.type=s,this.useIntegerZoom=d,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(r,s,d){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(r,s,d,p,_){this._setPaintValues(r,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(r,s,d,p){if(!p||!d)return;const{min:_,mid:x,max:w}=d,T=p[_],I=p[x],R=p[w];if(T&&I&&R)for(let F=r;F<s;F++)this.zoomInPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],I.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,I.tl[0],I.tl[1],I.br[0],I.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],I.pixelRatio,R.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Fn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Fn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gp{constructor(r,s,d){this.binders={},this._buffers=[];const p=[];for(const _ in r.paint._values){if(!d(_))continue;const x=r.paint.get(_);if(!(x instanceof ho&&Bs(x.property.specification)))continue;const w=X0(_,r.type),T=x.value,I=x.property.specification.type,R=x.property.useIntegerZoom,F=x.property.specification["property-type"],$=F==="cross-faded"||F==="cross-faded-data-driven";if(T.kind==="constant")this.binders[_]=$?new On(T.value,w):new Nr(T.value,w,I),p.push(`/u_${_}`);else if(T.kind==="source"||$){const G=as(_,I,"source");this.binders[_]=$?new Ma(T,I,R,s,G,r.id):new aa(T,w,I,G),p.push(`/a_${_}`)}else{const G=as(_,I,"composite");this.binders[_]=new po(T,w,I,R,s,G),p.push(`/z_${_}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof aa||s instanceof po?s.maxValue:0}populatePaintArrays(r,s,d,p,_){for(const x in this.binders){const w=this.binders[x];(w instanceof aa||w instanceof po||w instanceof Ma)&&w.populatePaintArray(r,s,d,p,_)}}setConstantPatternPositions(r,s){for(const d in this.binders){const p=this.binders[d];p instanceof On&&p.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,d,p,_){let x=!1;for(const w in r){const T=s.getPositions(w);for(const I of T){const R=d.feature(I.index);for(const F in this.binders){const $=this.binders[F];if(($ instanceof aa||$ instanceof po||$ instanceof Ma)&&$.expression.isStateDependent===!0){const G=p.paint.get(F);$.expression=G.value,$.updatePaintArray(I.start,I.end,R,r[w],_),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const d=this.binders[s];(d instanceof Nr||d instanceof On)&&r.push(...d.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof aa||d instanceof po)for(let p=0;p<d.paintVertexAttributes.length;p++)r.push(d.paintVertexAttributes[p].name);else if(d instanceof Ma)for(let p=0;p<Fn.members.length;p++)r.push(Fn.members[p].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Nr||d instanceof On||d instanceof po)for(const p of d.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const d=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof Nr||_ instanceof On||_ instanceof po){for(const x of _.uniformNames)if(s[x]){const w=_.getBinding(r,s[x],x);d.push({name:x,property:p,binding:w})}}}return d}setUniforms(r,s,d,p){for(const{name:_,property:x,binding:w}of s)this.binders[x].setUniform(w,p,d.get(x),_)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(r&&d instanceof Ma){const p=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(d instanceof aa||d instanceof po)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const s in this.binders){const d=this.binders[s];(d instanceof aa||d instanceof po||d instanceof Ma)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof aa||s instanceof po||s instanceof Ma)&&s.destroy()}}}class os{constructor(r,s,d=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new Gp(p,s,d);this.needsUpload=!1,this._featureMap=new jo,this._bufferOffset=0}populatePaintArrays(r,s,d,p,_,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,s,p,_,x);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,d,p){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,s,_,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function X0(a,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}function as(a,r,s){const d={color:{source:ou,composite:v},number:{source:y,composite:ou}},p=function(_){return{"line-pattern":{source:$e,composite:$e},"fill-pattern":{source:$e,composite:$e},"fill-extrusion-pattern":{source:$e,composite:$e}}[_]}(a);return p&&p[s]||d[r][s]}tt("ConstantBinder",Nr),tt("CrossFadedConstantBinder",On),tt("SourceExpressionBinder",aa),tt("CrossFadedCompositeBinder",Ma),tt("CompositeExpressionBinder",po),tt("ProgramConfiguration",Gp,{omit:["_buffers"]}),tt("ProgramConfigurationSet",os);const jn=8192,_c=Math.pow(2,14)-1,_d=-_c-1;function sa(a){const r=jn/a.extent,s=a.loadGeometry();for(let d=0;d<s.length;d++){const p=s[d];for(let _=0;_<p.length;_++){const x=p[_],w=Math.round(x.x*r),T=Math.round(x.y*r);x.x=B(w,_d,_c),x.y=B(T,_d,_c),(w<x.x||w>x.x+1||T<x.y||T>x.y+1)&&Ne("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Aa(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?sa(a):[]}}function Ws(a,r,s,d,p){a.emplaceBack(2*r+(d+1)/2,2*s+(p+1)/2)}class K0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.indexArray=new _t,this.segments=new vt,this.programConfigurations=new os(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){const p=this.layers[0],_=[];let x=null,w=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:T,id:I,index:R,sourceLayerIndex:F}of r){const $=this.layers[0]._featureFilter.needGeometry,G=Aa(T,$);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),G,d))continue;const q=w?x.evaluate(G,{},d):void 0,ee={id:I,properties:T.properties,type:T.type,sourceLayerIndex:F,index:R,geometry:$?G.geometry:sa(T),patterns:{},sortKey:q};_.push(ee)}w&&_.sort((T,I)=>T.sortKey-I.sortKey);for(const T of _){const{geometry:I,index:R,sourceLayerIndex:F}=T,$=r[R].feature;this.addFeature(T,I,R,d),s.featureIndex.insert($,I,R,F,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,jt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,d,p){for(const _ of s)for(const x of _){const w=x.x,T=x.y;if(w<0||w>=jn||T<0||T>=jn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),R=I.vertexLength;Ws(this.layoutVertexArray,w,T,-1,-1),Ws(this.layoutVertexArray,w,T,1,-1),Ws(this.layoutVertexArray,w,T,1,1),Ws(this.layoutVertexArray,w,T,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},p)}}function $w(a,r){for(let s=0;s<a.length;s++)if(vc(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(vc(a,r[s]))return!0;return!!Y0(a,r)}function uz(a,r,s){return!!vc(a,r)||!!J0(r,a,s)}function Bw(a,r){if(a.length===1)return Nw(r,a[0]);for(let s=0;s<r.length;s++){const d=r[s];for(let p=0;p<d.length;p++)if(vc(a,d[p]))return!0}for(let s=0;s<a.length;s++)if(Nw(r,a[s]))return!0;for(let s=0;s<r.length;s++)if(Y0(a,r[s]))return!0;return!1}function cz(a,r,s){if(a.length>1){if(Y0(a,r))return!0;for(let d=0;d<r.length;d++)if(J0(r[d],a,s))return!0}for(let d=0;d<a.length;d++)if(J0(a[d],r,s))return!0;return!1}function Y0(a,r){if(a.length===0||r.length===0)return!1;for(let s=0;s<a.length-1;s++){const d=a[s],p=a[s+1];for(let _=0;_<r.length-1;_++)if(hz(d,p,r[_],r[_+1]))return!0}return!1}function hz(a,r,s,d){return we(a,s,d)!==we(r,s,d)&&we(a,r,s)!==we(a,r,d)}function J0(a,r,s){const d=s*s;if(r.length===1)return a.distSqr(r[0])<d;for(let p=1;p<r.length;p++)if(Vw(a,r[p-1],r[p])<d)return!0;return!1}function Vw(a,r,s){const d=r.distSqr(s);if(d===0)return a.distSqr(r);const p=((a.x-r.x)*(s.x-r.x)+(a.y-r.y)*(s.y-r.y))/d;return a.distSqr(p<0?r:p>1?s:s.sub(r)._mult(p)._add(r))}function Nw(a,r){let s,d,p,_=!1;for(let x=0;x<a.length;x++){s=a[x];for(let w=0,T=s.length-1;w<s.length;T=w++)d=s[w],p=s[T],d.y>r.y!=p.y>r.y&&r.x<(p.x-d.x)*(r.y-d.y)/(p.y-d.y)+d.x&&(_=!_)}return _}function vc(a,r){let s=!1;for(let d=0,p=a.length-1;d<a.length;p=d++){const _=a[d],x=a[p];_.y>r.y!=x.y>r.y&&r.x<(x.x-_.x)*(r.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function dz(a,r,s){const d=s[0],p=s[2];if(a.x<d.x&&r.x<d.x||a.x>p.x&&r.x>p.x||a.y<d.y&&r.y<d.y||a.y>p.y&&r.y>p.y)return!1;const _=we(a,r,s[0]);return _!==we(a,r,s[1])||_!==we(a,r,s[2])||_!==we(a,r,s[3])}function vd(a,r,s){const d=r.paint.get(a).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(a)}function Wp(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function qp(a,r,s,d,p){if(!r[0]&&!r[1])return a;const _=A.convert(r)._mult(p);s==="viewport"&&_._rotate(-d);const x=[];for(let w=0;w<a.length;w++)x.push(a[w].sub(_));return x}let Uw,jw;tt("CircleBucket",K0,{omit:["layers"]});var fz={get paint(){return jw=jw||new di({"circle-radius":new kt(Pe.paint_circle["circle-radius"]),"circle-color":new kt(Pe.paint_circle["circle-color"]),"circle-blur":new kt(Pe.paint_circle["circle-blur"]),"circle-opacity":new kt(Pe.paint_circle["circle-opacity"]),"circle-translate":new dt(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new dt(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dt(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dt(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(Pe.paint_circle["circle-stroke-opacity"])})},get layout(){return Uw=Uw||new di({"circle-sort-key":new kt(Pe.layout_circle["circle-sort-key"])})}},pi=1e-6,xc=typeof Float32Array!="undefined"?Float32Array:Array;function Q0(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Gw(a,r,s){var d=r[0],p=r[1],_=r[2],x=r[3],w=r[4],T=r[5],I=r[6],R=r[7],F=r[8],$=r[9],G=r[10],q=r[11],ee=r[12],re=r[13],ae=r[14],ve=r[15],fe=s[0],be=s[1],Ee=s[2],ze=s[3];return a[0]=fe*d+be*w+Ee*F+ze*ee,a[1]=fe*p+be*T+Ee*$+ze*re,a[2]=fe*_+be*I+Ee*G+ze*ae,a[3]=fe*x+be*R+Ee*q+ze*ve,a[4]=(fe=s[4])*d+(be=s[5])*w+(Ee=s[6])*F+(ze=s[7])*ee,a[5]=fe*p+be*T+Ee*$+ze*re,a[6]=fe*_+be*I+Ee*G+ze*ae,a[7]=fe*x+be*R+Ee*q+ze*ve,a[8]=(fe=s[8])*d+(be=s[9])*w+(Ee=s[10])*F+(ze=s[11])*ee,a[9]=fe*p+be*T+Ee*$+ze*re,a[10]=fe*_+be*I+Ee*G+ze*ae,a[11]=fe*x+be*R+Ee*q+ze*ve,a[12]=(fe=s[12])*d+(be=s[13])*w+(Ee=s[14])*F+(ze=s[15])*ee,a[13]=fe*p+be*T+Ee*$+ze*re,a[14]=fe*_+be*I+Ee*G+ze*ae,a[15]=fe*x+be*R+Ee*q+ze*ve,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var xd,pz=Gw;function Zp(a,r,s){var d=r[0],p=r[1],_=r[2],x=r[3];return a[0]=s[0]*d+s[4]*p+s[8]*_+s[12]*x,a[1]=s[1]*d+s[5]*p+s[9]*_+s[13]*x,a[2]=s[2]*d+s[6]*p+s[10]*_+s[14]*x,a[3]=s[3]*d+s[7]*p+s[11]*_+s[15]*x,a}xd=new xc(4),xc!=Float32Array&&(xd[0]=0,xd[1]=0,xd[2]=0,xd[3]=0);class mz extends No{constructor(r){super(r,fz)}createBucket(r){return new K0(r)}queryRadius(r){const s=r;return vd("circle-radius",this,s)+vd("circle-stroke-width",this,s)+Wp(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,d,p,_,x,w,T){const I=qp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),R=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),F=this.paint.get("circle-pitch-alignment")==="map",$=F?I:function(q,ee){return q.map(re=>Ww(re,ee))}(I,T),G=F?R*w:R;for(const q of p)for(const ee of q){const re=F?ee:Ww(ee,T);let ae=G;const ve=Zp([],[ee.x,ee.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ae*=ve[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ae*=x.cameraToCenterDistance/ve[3]),uz($,re,ae))return!0}return!1}}function Ww(a,r){const s=Zp([],[a.x,a.y,0,1],r);return new A(s[0]/s[3],s[1]/s[3])}class qw extends K0{}let Zw;tt("HeatmapBucket",qw,{omit:["layers"]});var gz={get paint(){return Zw=Zw||new di({"heatmap-radius":new kt(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dt(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fd(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dt(Pe.paint_heatmap["heatmap-opacity"])})}};function e_(a,{width:r,height:s},d,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*s*d)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*s*d}`)}else p=new Uint8Array(r*s*d);return a.width=r,a.height=s,a.data=p,a}function Hw(a,{width:r,height:s},d){if(r===a.width&&s===a.height)return;const p=e_({},{width:r,height:s},d);t_(a,p,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,r),height:Math.min(a.height,s)},d),a.width=r,a.height=s,a.data=p.data}function t_(a,r,s,d,p,_){if(p.width===0||p.height===0)return r;if(p.width>a.width||p.height>a.height||s.x>a.width-p.width||s.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||d.x>r.width-p.width||d.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,w=r.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<p.height;T++){const I=((s.y+T)*a.width+s.x)*_,R=((d.y+T)*r.width+d.x)*_;for(let F=0;F<p.width*_;F++)w[R+F]=x[I+F]}return r}class bd{constructor(r,s){e_(this,r,1,s)}resize(r){Hw(this,r,1)}clone(){return new bd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,p,_){t_(r,s,d,p,_,1)}}class mo{constructor(r,s){e_(this,r,4,s)}resize(r){Hw(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,p,_){t_(r,s,d,p,_,4)}}function Xw(a){const r={},s=a.resolution||256,d=a.clips?a.clips.length:1,p=a.image||new mo({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,w,T)=>{r[a.evaluationKey]=T;const I=a.expression.evaluate(r);p.data[x+w+0]=Math.floor(255*I.r/I.a),p.data[x+w+1]=Math.floor(255*I.g/I.a),p.data[x+w+2]=Math.floor(255*I.b/I.a),p.data[x+w+3]=Math.floor(255*I.a)};if(a.clips)for(let x=0,w=0;x<d;++x,w+=4*s)for(let T=0,I=0;T<s;T++,I+=4){const R=T/(s-1),{start:F,end:$}=a.clips[x];_(w,I,F*(1-R)+$*R)}else for(let x=0,w=0;x<s;x++,w+=4)_(0,w,x/(s-1));return p}tt("AlphaImage",bd),tt("RGBAImage",mo);class yz extends No{createBucket(r){return new qw(r)}constructor(r){super(r,gz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Xw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Kw;var _z={get paint(){return Kw=Kw||new di({"hillshade-illumination-direction":new dt(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dt(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dt(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dt(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dt(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dt(Pe.paint_hillshade["hillshade-accent-color"])})}};class vz extends No{constructor(r){super(r,_z)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const xz=ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:bz}=xz;var n_={exports:{}};function Hp(a,r,s){s=s||2;var d,p,_,x,w,T,I,R=r&&r.length,F=R?r[0]*s:a.length,$=Yw(a,0,F,s,!0),G=[];if(!$||$.next===$.prev)return G;if(R&&($=function(ee,re,ae,ve){var fe,be,Ee,ze=[];for(fe=0,be=re.length;fe<be;fe++)(Ee=Yw(ee,re[fe]*ve,fe<be-1?re[fe+1]*ve:ee.length,ve,!1))===Ee.next&&(Ee.steiner=!0),ze.push(Iz(Ee));for(ze.sort(Tz),fe=0;fe<ze.length;fe++)ae=Cz(ze[fe],ae);return ae}(a,r,$,s)),a.length>80*s){d=_=a[0],p=x=a[1];for(var q=s;q<F;q+=s)(w=a[q])<d&&(d=w),(T=a[q+1])<p&&(p=T),w>_&&(_=w),T>x&&(x=T);I=(I=Math.max(_-d,x-p))!==0?32767/I:0}return wd($,G,s,d,p,I,0),G}function Yw(a,r,s,d,p){var _,x;if(p===o_(a,r,s,d)>0)for(_=r;_<s;_+=d)x=e2(_,a[_],a[_+1],x);else for(_=s-d;_>=r;_-=d)x=e2(_,a[_],a[_+1],x);return x&&Xp(x,x.next)&&(Ed(x),x=x.next),x}function au(a,r){if(!a)return a;r||(r=a);var s,d=a;do if(s=!1,d.steiner||!Xp(d,d.next)&&ar(d.prev,d,d.next)!==0)d=d.next;else{if(Ed(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function wd(a,r,s,d,p,_,x){if(a){!x&&_&&function(R,F,$,G){var q=R;do q.z===0&&(q.z=r_(q.x,q.y,F,$,G)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==R);q.prevZ.nextZ=null,q.prevZ=null,function(ee){var re,ae,ve,fe,be,Ee,ze,Qe,ct=1;do{for(ae=ee,ee=null,be=null,Ee=0;ae;){for(Ee++,ve=ae,ze=0,re=0;re<ct&&(ze++,ve=ve.nextZ);re++);for(Qe=ct;ze>0||Qe>0&&ve;)ze!==0&&(Qe===0||!ve||ae.z<=ve.z)?(fe=ae,ae=ae.nextZ,ze--):(fe=ve,ve=ve.nextZ,Qe--),be?be.nextZ=fe:ee=fe,fe.prevZ=be,be=fe;ae=ve}be.nextZ=null,ct*=2}while(Ee>1)}(q)}(a,d,p,_);for(var w,T,I=a;a.prev!==a.next;)if(w=a.prev,T=a.next,_?Sz(a,d,p,_):wz(a))r.push(w.i/s|0),r.push(a.i/s|0),r.push(T.i/s|0),Ed(a),a=T.next,I=T.next;else if((a=T)===I){x?x===1?wd(a=Ez(au(a),r,s),r,s,d,p,_,2):x===2&&kz(a,r,s,d,p,_):wd(au(a),r,s,d,p,_,1);break}}}function wz(a){var r=a.prev,s=a,d=a.next;if(ar(r,s,d)>=0)return!1;for(var p=r.x,_=s.x,x=d.x,w=r.y,T=s.y,I=d.y,R=p<_?p<x?p:x:_<x?_:x,F=w<T?w<I?w:I:T<I?T:I,$=p>_?p>x?p:x:_>x?_:x,G=w>T?w>I?w:I:T>I?T:I,q=d.next;q!==r;){if(q.x>=R&&q.x<=$&&q.y>=F&&q.y<=G&&bc(p,w,_,T,x,I,q.x,q.y)&&ar(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function Sz(a,r,s,d){var p=a.prev,_=a,x=a.next;if(ar(p,_,x)>=0)return!1;for(var w=p.x,T=_.x,I=x.x,R=p.y,F=_.y,$=x.y,G=w<T?w<I?w:I:T<I?T:I,q=R<F?R<$?R:$:F<$?F:$,ee=w>T?w>I?w:I:T>I?T:I,re=R>F?R>$?R:$:F>$?F:$,ae=r_(G,q,r,s,d),ve=r_(ee,re,r,s,d),fe=a.prevZ,be=a.nextZ;fe&&fe.z>=ae&&be&&be.z<=ve;){if(fe.x>=G&&fe.x<=ee&&fe.y>=q&&fe.y<=re&&fe!==p&&fe!==x&&bc(w,R,T,F,I,$,fe.x,fe.y)&&ar(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,be.x>=G&&be.x<=ee&&be.y>=q&&be.y<=re&&be!==p&&be!==x&&bc(w,R,T,F,I,$,be.x,be.y)&&ar(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;fe&&fe.z>=ae;){if(fe.x>=G&&fe.x<=ee&&fe.y>=q&&fe.y<=re&&fe!==p&&fe!==x&&bc(w,R,T,F,I,$,fe.x,fe.y)&&ar(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;be&&be.z<=ve;){if(be.x>=G&&be.x<=ee&&be.y>=q&&be.y<=re&&be!==p&&be!==x&&bc(w,R,T,F,I,$,be.x,be.y)&&ar(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function Ez(a,r,s){var d=a;do{var p=d.prev,_=d.next.next;!Xp(p,_)&&Jw(p,d,d.next,_)&&Sd(p,_)&&Sd(_,p)&&(r.push(p.i/s|0),r.push(d.i/s|0),r.push(_.i/s|0),Ed(d),Ed(d.next),d=a=_),d=d.next}while(d!==a);return au(d)}function kz(a,r,s,d,p,_){var x=a;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&Mz(x,w)){var T=Qw(x,w);return x=au(x,x.next),T=au(T,T.next),wd(x,r,s,d,p,_,0),void wd(T,r,s,d,p,_,0)}w=w.next}x=x.next}while(x!==a)}function Tz(a,r){return a.x-r.x}function Cz(a,r){var s=function(p,_){var x,w=_,T=p.x,I=p.y,R=-1/0;do{if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){var F=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(F<=T&&F>R&&(R=F,x=w.x<w.next.x?w:w.next,F===T))return x}w=w.next}while(w!==_);if(!x)return null;var $,G=x,q=x.x,ee=x.y,re=1/0;w=x;do T>=w.x&&w.x>=q&&T!==w.x&&bc(I<ee?T:R,I,q,ee,I<ee?R:T,I,w.x,w.y)&&($=Math.abs(I-w.y)/(T-w.x),Sd(w,p)&&($<re||$===re&&(w.x>x.x||w.x===x.x&&Pz(x,w)))&&(x=w,re=$)),w=w.next;while(w!==G);return x}(a,r);if(!s)return r;var d=Qw(s,a);return au(d,d.next),au(s,s.next)}function Pz(a,r){return ar(a.prev,a,r.prev)<0&&ar(r.next,a,a.next)<0}function r_(a,r,s,d,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Iz(a){var r=a,s=a;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==a);return s}function bc(a,r,s,d,p,_,x,w){return(p-x)*(r-w)>=(a-x)*(_-w)&&(a-x)*(d-w)>=(s-x)*(r-w)&&(s-x)*(_-w)>=(p-x)*(d-w)}function Mz(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(s,d){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==d.i&&p.next.i!==d.i&&Jw(p,p.next,s,d))return!0;p=p.next}while(p!==s);return!1}(a,r)&&(Sd(a,r)&&Sd(r,a)&&function(s,d){var p=s,_=!1,x=(s.x+d.x)/2,w=(s.y+d.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&x<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(_=!_),p=p.next;while(p!==s);return _}(a,r)&&(ar(a.prev,a,r.prev)||ar(a,r.prev,r))||Xp(a,r)&&ar(a.prev,a,a.next)>0&&ar(r.prev,r,r.next)>0)}function ar(a,r,s){return(r.y-a.y)*(s.x-r.x)-(r.x-a.x)*(s.y-r.y)}function Xp(a,r){return a.x===r.x&&a.y===r.y}function Jw(a,r,s,d){var p=Yp(ar(a,r,s)),_=Yp(ar(a,r,d)),x=Yp(ar(s,d,a)),w=Yp(ar(s,d,r));return p!==_&&x!==w||!(p!==0||!Kp(a,s,r))||!(_!==0||!Kp(a,d,r))||!(x!==0||!Kp(s,a,d))||!(w!==0||!Kp(s,r,d))}function Kp(a,r,s){return r.x<=Math.max(a.x,s.x)&&r.x>=Math.min(a.x,s.x)&&r.y<=Math.max(a.y,s.y)&&r.y>=Math.min(a.y,s.y)}function Yp(a){return a>0?1:a<0?-1:0}function Sd(a,r){return ar(a.prev,a,a.next)<0?ar(a,r,a.next)>=0&&ar(a,a.prev,r)>=0:ar(a,r,a.prev)<0||ar(a,a.next,r)<0}function Qw(a,r){var s=new i_(a.i,a.x,a.y),d=new i_(r.i,r.x,r.y),p=a.next,_=r.prev;return a.next=r,r.prev=a,s.next=p,p.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function e2(a,r,s,d){var p=new i_(a,r,s);return d?(p.next=d.next,p.prev=d,d.next.prev=p,d.next=p):(p.prev=p,p.next=p),p}function Ed(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function i_(a,r,s){this.i=a,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function o_(a,r,s,d){for(var p=0,_=r,x=s-d;_<s;_+=d)p+=(a[x]-a[_])*(a[_+1]+a[x+1]),x=_;return p}n_.exports=Hp,n_.exports.default=Hp,Hp.deviation=function(a,r,s,d){var p=r&&r.length,_=Math.abs(o_(a,0,p?r[0]*s:a.length,s));if(p)for(var x=0,w=r.length;x<w;x++)_-=Math.abs(o_(a,r[x]*s,x<w-1?r[x+1]*s:a.length,s));var T=0;for(x=0;x<d.length;x+=3){var I=d[x]*s,R=d[x+1]*s,F=d[x+2]*s;T+=Math.abs((a[I]-a[F])*(a[R+1]-a[I+1])-(a[I]-a[R])*(a[F+1]-a[I+1]))}return _===0&&T===0?0:Math.abs((T-_)/_)},Hp.flatten=function(a){for(var r=a[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,p=0;p<a.length;p++){for(var _=0;_<a[p].length;_++)for(var x=0;x<r;x++)s.vertices.push(a[p][_][x]);p>0&&s.holes.push(d+=a[p-1].length)}return s};var t2=S(n_.exports);function Az(a,r,s,d,p){n2(a,r,s||0,d||a.length-1,p||zz)}function n2(a,r,s,d,p){for(;d>s;){if(d-s>600){var _=d-s+1,x=r-s+1,w=Math.log(_),T=.5*Math.exp(2*w/3),I=.5*Math.sqrt(w*T*(_-T)/_)*(x-_/2<0?-1:1);n2(a,r,Math.max(s,Math.floor(r-x*T/_+I)),Math.min(d,Math.floor(r+(_-x)*T/_+I)),p)}var R=a[r],F=s,$=d;for(kd(a,s,r),p(a[d],R)>0&&kd(a,s,d);F<$;){for(kd(a,F,$),F++,$--;p(a[F],R)<0;)F++;for(;p(a[$],R)>0;)$--}p(a[s],R)===0?kd(a,s,$):kd(a,++$,d),$<=r&&(s=$+1),r<=$&&(d=$-1)}}function kd(a,r,s){var d=a[r];a[r]=a[s],a[s]=d}function zz(a,r){return a<r?-1:a>r?1:0}function a_(a,r){const s=a.length;if(s<=1)return[a];const d=[];let p,_;for(let x=0;x<s;x++){const w=nt(a[x]);w!==0&&(a[x].area=Math.abs(w),_===void 0&&(_=w<0),_===w<0?(p&&d.push(p),p=[a[x]]):p.push(a[x]))}if(p&&d.push(p),r>1)for(let x=0;x<d.length;x++)d[x].length<=r||(Az(d[x],r,1,d[x].length-1,Dz),d[x]=d[x].slice(0,r));return d}function Dz(a,r){return r.area-a.area}function s_(a,r,s){const d=s.patternDependencies;let p=!1;for(const _ of r){const x=_.paint.get(`${a}-pattern`);x.isConstant()||(p=!0);const w=x.constantOr(null);w&&(p=!0,d[w.to]=!0,d[w.from]=!0)}return p}function l_(a,r,s,d,p){const _=p.patternDependencies;for(const x of r){const w=x.paint.get(`${a}-pattern`).value;if(w.kind!=="constant"){let T=w.evaluate({zoom:d-1},s,{},p.availableImages),I=w.evaluate({zoom:d},s,{},p.availableImages),R=w.evaluate({zoom:d+1},s,{},p.availableImages);T=T&&T.name?T.name:T,I=I&&I.name?I.name:I,R=R&&R.name?R.name:R,_[T]=!0,_[I]=!0,_[R]=!0,s.patterns[x.id]={min:T,mid:I,max:R}}}return s}class u_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ge,this.indexArray=new _t,this.indexArray2=new st,this.programConfigurations=new os(r.layers,r.zoom),this.segments=new vt,this.segments2=new vt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=s_("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),_=!p.isConstant(),x=[];for(const{feature:w,id:T,index:I,sourceLayerIndex:R}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Aa(w,F);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),$,d))continue;const G=_?p.evaluate($,{},d,s.availableImages):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:R,index:I,geometry:F?$.geometry:sa(w),patterns:{},sortKey:G};x.push(q)}_&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:I,sourceLayerIndex:R}=w;if(this.hasPattern){const F=l_("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(w,T,I,d,{});s.featureIndex.insert(r[I].feature,T,I,R,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,d,p,_){for(const x of a_(s,500)){let w=0;for(const G of x)w+=G.length;const T=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),I=T.vertexLength,R=[],F=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&F.push(R.length/2);const q=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ee=q.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ee+G.length-1,ee),R.push(G[0].x),R.push(G[0].y);for(let re=1;re<G.length;re++)this.layoutVertexArray.emplaceBack(G[re].x,G[re].y),this.indexArray2.emplaceBack(ee+re-1,ee+re),R.push(G[re].x),R.push(G[re].y);q.vertexLength+=G.length,q.primitiveLength+=G.length}const $=t2(R,F);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(I+$[G],I+$[G+1],I+$[G+2]);T.vertexLength+=w,T.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,p)}}let r2,i2;tt("FillBucket",u_,{omit:["layers","patternFeatures"]});var Rz={get paint(){return i2=i2||new di({"fill-antialias":new dt(Pe.paint_fill["fill-antialias"]),"fill-opacity":new kt(Pe.paint_fill["fill-opacity"]),"fill-color":new kt(Pe.paint_fill["fill-color"]),"fill-outline-color":new kt(Pe.paint_fill["fill-outline-color"]),"fill-translate":new dt(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new dt(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new fc(Pe.paint_fill["fill-pattern"])})},get layout(){return r2=r2||new di({"fill-sort-key":new kt(Pe.layout_fill["fill-sort-key"])})}};class Lz extends No{constructor(r){super(r,Rz)}recalculate(r,s){super.recalculate(r,s);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new u_(r)}queryRadius(){return Wp(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,d,p,_,x,w){return Bw(qp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),p)}isTileClipped(){return!0}}const Fz=ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Oz=ir([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$z}=Fz;var qs={},Bz=b,o2=wc;function wc(a,r,s,d,p){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=p,a.readFields(Vz,this,r)}function Vz(a,r,s){a==1?r.id=s.readVarint():a==2?function(d,p){for(var _=d.readVarint()+d.pos;d.pos<_;){var x=p._keys[d.readVarint()],w=p._values[d.readVarint()];p.properties[x]=w}}(s,r):a==3?r.type=s.readVarint():a==4&&(r._geometry=s.pos)}function Nz(a){for(var r,s,d=0,p=0,_=a.length,x=_-1;p<_;x=p++)d+=((s=a[x]).x-(r=a[p]).x)*(r.y+s.y);return d}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,s=a.readVarint()+a.pos,d=1,p=0,_=0,x=0,w=[];a.pos<s;){if(p<=0){var T=a.readVarint();d=7&T,p=T>>3}if(p--,d===1||d===2)_+=a.readSVarint(),x+=a.readSVarint(),d===1&&(r&&w.push(r),r=[]),r.push(new Bz(_,x));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&w.push(r),w},wc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,s=1,d=0,p=0,_=0,x=1/0,w=-1/0,T=1/0,I=-1/0;a.pos<r;){if(d<=0){var R=a.readVarint();s=7&R,d=R>>3}if(d--,s===1||s===2)(p+=a.readSVarint())<x&&(x=p),p>w&&(w=p),(_+=a.readSVarint())<T&&(T=_),_>I&&(I=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,T,w,I]},wc.prototype.toGeoJSON=function(a,r,s){var d,p,_=this.extent*Math.pow(2,s),x=this.extent*a,w=this.extent*r,T=this.loadGeometry(),I=wc.types[this.type];function R(G){for(var q=0;q<G.length;q++){var ee=G[q];G[q]=[360*(ee.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+w)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(d=0;d<T.length;d++)F[d]=T[d][0];R(T=F);break;case 2:for(d=0;d<T.length;d++)R(T[d]);break;case 3:for(T=function(G){var q=G.length;if(q<=1)return[G];for(var ee,re,ae=[],ve=0;ve<q;ve++){var fe=Nz(G[ve]);fe!==0&&(re===void 0&&(re=fe<0),re===fe<0?(ee&&ae.push(ee),ee=[G[ve]]):ee.push(G[ve]))}return ee&&ae.push(ee),ae}(T),d=0;d<T.length;d++)for(p=0;p<T[d].length;p++)R(T[d][p])}T.length===1?T=T[0]:I="Multi"+I;var $={type:"Feature",geometry:{type:I,coordinates:T},properties:this.properties};return"id"in this&&($.id=this.id),$};var Uz=o2,a2=s2;function s2(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(jz,this,r),this.length=this._features.length}function jz(a,r,s){a===15?r.version=s.readVarint():a===1?r.name=s.readString():a===5?r.extent=s.readVarint():a===2?r._features.push(s.pos):a===3?r._keys.push(s.readString()):a===4&&r._values.push(function(d){for(var p=null,_=d.readVarint()+d.pos;d.pos<_;){var x=d.readVarint()>>3;p=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return p}(s))}s2.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new Uz(this._pbf,r,this.extent,this._keys,this._values)};var Gz=a2;function Wz(a,r,s){if(a===3){var d=new Gz(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}qs.VectorTile=function(a,r){this.layers=a.readFields(Wz,{},r)},qs.VectorTileFeature=o2,qs.VectorTileLayer=a2;const qz=qs.VectorTileFeature.types,c_=Math.pow(2,13);function Td(a,r,s,d,p,_,x,w){a.emplaceBack(r,s,2*Math.floor(d*c_)+x,p*c_*2,_*c_*2,Math.round(w))}class h_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ke,this.centroidVertexArray=new Se,this.indexArray=new _t,this.programConfigurations=new os(r.layers,r.zoom),this.segments=new vt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.features=[],this.hasPattern=s_("fill-extrusion",this.layers,s);for(const{feature:p,id:_,index:x,sourceLayerIndex:w}of r){const T=this.layers[0]._featureFilter.needGeometry,I=Aa(p,T);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),I,d))continue;const R={id:_,sourceLayerIndex:w,index:x,geometry:T?I.geometry:sa(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(l_("fill-extrusion",this.layers,R,this.zoom,s)):this.addFeature(R,R.geometry,x,d,{}),s.featureIndex.insert(p,R.geometry,x,w,this.index,!0)}}addFeatures(r,s,d){for(const p of this.features){const{geometry:_}=p;this.addFeature(p,_,p.index,s,d)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,$z),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Oz.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,d,p,_){const x={x:0,y:0,vertexCount:0};for(const w of a_(s,500)){let T=0;for(const q of w)T+=q.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of w){if(q.length===0||Hz(q))continue;let ee=0;for(let re=0;re<q.length;re++){const ae=q[re];if(re>=1){const ve=q[re-1];if(!Zz(ae,ve)){I.vertexLength+4>vt.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=ae.sub(ve)._perp()._unit(),be=ve.dist(ae);ee+be>32768&&(ee=0),Td(this.layoutVertexArray,ae.x,ae.y,fe.x,fe.y,0,0,ee),Td(this.layoutVertexArray,ae.x,ae.y,fe.x,fe.y,0,1,ee),x.x+=2*ae.x,x.y+=2*ae.y,x.vertexCount+=2,ee+=be,Td(this.layoutVertexArray,ve.x,ve.y,fe.x,fe.y,0,0,ee),Td(this.layoutVertexArray,ve.x,ve.y,fe.x,fe.y,0,1,ee),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2;const Ee=I.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+T>vt.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),qz[r.type]!=="Polygon")continue;const R=[],F=[],$=I.vertexLength;for(const q of w)if(q.length!==0){q!==w[0]&&F.push(R.length/2);for(let ee=0;ee<q.length;ee++){const re=q[ee];Td(this.layoutVertexArray,re.x,re.y,0,0,1,1,0),x.x+=re.x,x.y+=re.y,x.vertexCount+=1,R.push(re.x),R.push(re.y)}}const G=t2(R,F);for(let q=0;q<G.length;q+=3)this.indexArray.emplaceBack($+G[q],$+G[q+2],$+G[q+1]);I.primitiveLength+=G.length/3,I.vertexLength+=T}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,p)}}function Zz(a,r){return a.x===r.x&&(a.x<0||a.x>jn)||a.y===r.y&&(a.y<0||a.y>jn)}function Hz(a){return a.every(r=>r.x<0)||a.every(r=>r.x>jn)||a.every(r=>r.y<0)||a.every(r=>r.y>jn)}let l2;tt("FillExtrusionBucket",h_,{omit:["layers","features"]});var Xz={get paint(){return l2=l2||new di({"fill-extrusion-opacity":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new fc(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kz extends No{constructor(r){super(r,Xz)}createBucket(r){return new h_(r)}queryRadius(){return Wp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,d,p,_,x,w,T){const I=qp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),R=this.paint.get("fill-extrusion-height").evaluate(s,d),F=this.paint.get("fill-extrusion-base").evaluate(s,d),$=function(q,ee,re,ae){const ve=[];for(const fe of q){const be=[fe.x,fe.y,0,1];Zp(be,be,ee),ve.push(new A(be[0]/be[3],be[1]/be[3]))}return ve}(I,T),G=function(q,ee,re,ae){const ve=[],fe=[],be=ae[8]*ee,Ee=ae[9]*ee,ze=ae[10]*ee,Qe=ae[11]*ee,ct=ae[8]*re,Je=ae[9]*re,Ke=ae[10]*re,We=ae[11]*re;for(const rt of q){const He=[],Ve=[];for(const xt of rt){const ht=xt.x,Vt=xt.y,In=ae[0]*ht+ae[4]*Vt+ae[12],Dn=ae[1]*ht+ae[5]*Vt+ae[13],br=ae[2]*ht+ae[6]*Vt+ae[14],to=ae[3]*ht+ae[7]*Vt+ae[15],mi=br+ze,mr=to+Qe,kr=In+ct,jr=Dn+Je,Ri=br+Ke,gi=to+We,gr=new A((In+be)/mr,(Dn+Ee)/mr);gr.z=mi/mr,He.push(gr);const wr=new A(kr/gi,jr/gi);wr.z=Ri/gi,Ve.push(wr)}ve.push(He),fe.push(Ve)}return[ve,fe]}(p,F,R,T);return function(q,ee,re){let ae=1/0;Bw(re,ee)&&(ae=u2(re,ee[0]));for(let ve=0;ve<ee.length;ve++){const fe=ee[ve],be=q[ve];for(let Ee=0;Ee<fe.length-1;Ee++){const ze=fe[Ee],Qe=[ze,fe[Ee+1],be[Ee+1],be[Ee],ze];$w(re,Qe)&&(ae=Math.min(ae,u2(re,Qe)))}}return ae!==1/0&&ae}(G[0],G[1],$)}}function Cd(a,r){return a.x*r.x+a.y*r.y}function u2(a,r){if(a.length===1){let s=0;const d=r[s++];let p;for(;!p||d.equals(p);)if(p=r[s++],!p)return 1/0;for(;s<r.length;s++){const _=r[s],x=a[0],w=p.sub(d),T=_.sub(d),I=x.sub(d),R=Cd(w,w),F=Cd(w,T),$=Cd(T,T),G=Cd(I,w),q=Cd(I,T),ee=R*$-F*F,re=($*G-F*q)/ee,ae=(R*q-F*G)/ee,ve=d.z*(1-re-ae)+p.z*re+_.z*ae;if(isFinite(ve))return ve}return 1/0}{let s=1/0;for(const d of r)s=Math.min(s,d.z);return s}}const Yz=ir([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Jz}=Yz,Qz=ir([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:e5}=Qz,t5=qs.VectorTileFeature.types,n5=Math.cos(Math.PI/180*37.5),c2=Math.pow(2,14)/.5;class d_{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ce,this.layoutVertexArray2=new Ae,this.indexArray=new _t,this.programConfigurations=new os(r.layers,r.zoom),this.segments=new vt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=s_("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),_=!p.isConstant(),x=[];for(const{feature:w,id:T,index:I,sourceLayerIndex:R}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Aa(w,F);if(!this.layers[0]._featureFilter.filter(new An(this.zoom),$,d))continue;const G=_?p.evaluate($,{},d):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:R,index:I,geometry:F?$.geometry:sa(w),patterns:{},sortKey:G};x.push(q)}_&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:I,sourceLayerIndex:R}=w;if(this.hasPattern){const F=l_("line",this.layers,w,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(w,T,I,d,{});s.featureIndex.insert(r[I].feature,T,I,R,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,e5)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Jz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,d,p,_){const x=this.layers[0].layout,w=x.get("line-join").evaluate(r,{}),T=x.get("line-cap"),I=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const F of s)this.addLine(F,r,w,T,I,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,_,p)}addLine(r,s,d,p,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<r.length-1;ae++)this.totalDistance+=r[ae].dist(r[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=t5[s.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let I=0;for(;I<T-1&&r[I].equals(r[I+1]);)I++;if(T<(w?3:2))return;d==="bevel"&&(_=1.05);const R=this.overscaling<=16?15*jn/(512*this.overscaling):0,F=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let $,G,q,ee,re;this.e1=this.e2=-1,w&&($=r[T-2],re=r[I].sub($)._unit()._perp());for(let ae=I;ae<T;ae++){if(q=ae===T-1?w?r[I+1]:void 0:r[ae+1],q&&r[ae].equals(q))continue;re&&(ee=re),$&&(G=$),$=r[ae],re=q?q.sub($)._unit()._perp():ee,ee=ee||re;let ve=ee.add(re);ve.x===0&&ve.y===0||ve._unit();const fe=ee.x*re.x+ee.y*re.y,be=ve.x*re.x+ve.y*re.y,Ee=be!==0?1/be:1/0,ze=2*Math.sqrt(2-2*be),Qe=be<n5&&G&&q,ct=ee.x*re.y-ee.y*re.x>0;if(Qe&&ae>I){const We=$.dist(G);if(We>2*R){const rt=$.sub($.sub(G)._mult(R/We)._round());this.updateDistance(G,rt),this.addCurrentVertex(rt,ee,0,0,F),G=rt}}const Je=G&&q;let Ke=Je?d:w?"butt":p;if(Je&&Ke==="round"&&(Ee<x?Ke="miter":Ee<=2&&(Ke="fakeround")),Ke==="miter"&&Ee>_&&(Ke="bevel"),Ke==="bevel"&&(Ee>2&&(Ke="flipbevel"),Ee<_&&(Ke="miter")),G&&this.updateDistance(G,$),Ke==="miter")ve._mult(Ee),this.addCurrentVertex($,ve,0,0,F);else if(Ke==="flipbevel"){if(Ee>100)ve=re.mult(-1);else{const We=Ee*ee.add(re).mag()/ee.sub(re).mag();ve._perp()._mult(We*(ct?-1:1))}this.addCurrentVertex($,ve,0,0,F),this.addCurrentVertex($,ve.mult(-1),0,0,F)}else if(Ke==="bevel"||Ke==="fakeround"){const We=-Math.sqrt(Ee*Ee-1),rt=ct?We:0,He=ct?0:We;if(G&&this.addCurrentVertex($,ee,rt,He,F),Ke==="fakeround"){const Ve=Math.round(180*ze/Math.PI/20);for(let xt=1;xt<Ve;xt++){let ht=xt/Ve;if(ht!==.5){const In=ht-.5;ht+=ht*In*(ht-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*In*In+(.848013+fe*(.215638*fe-1.06021)))}const Vt=re.sub(ee)._mult(ht)._add(ee)._unit()._mult(ct?-1:1);this.addHalfVertex($,Vt.x,Vt.y,!1,ct,0,F)}}q&&this.addCurrentVertex($,re,-rt,-He,F)}else if(Ke==="butt")this.addCurrentVertex($,ve,0,0,F);else if(Ke==="square"){const We=G?1:-1;this.addCurrentVertex($,ve,We,We,F)}else Ke==="round"&&(G&&(this.addCurrentVertex($,ee,0,0,F),this.addCurrentVertex($,ee,1,1,F,!0)),q&&(this.addCurrentVertex($,re,-1,-1,F,!0),this.addCurrentVertex($,re,0,0,F)));if(Qe&&ae<T-1){const We=$.dist(q);if(We>2*R){const rt=$.add(q.sub($)._mult(R/We)._round());this.updateDistance($,rt),this.addCurrentVertex(rt,re,0,0,F),$=rt}}}}addCurrentVertex(r,s,d,p,_,x=!1){const w=s.y*p-s.x,T=-s.y-s.x*p;this.addHalfVertex(r,s.x+s.y*d,s.y-s.x*d,x,!1,d,_),this.addHalfVertex(r,w,T,x,!0,-p,_),this.distance>c2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,d,p,_,x))}addHalfVertex({x:r,y:s},d,p,_,x,w,T){const I=.5*(this.lineClips?this.scaledDistance*(c2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),T.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let h2,d2;tt("LineBucket",d_,{omit:["layers","patternFeatures"]});var f2={get paint(){return d2=d2||new di({"line-opacity":new kt(Pe.paint_line["line-opacity"]),"line-color":new kt(Pe.paint_line["line-color"]),"line-translate":new dt(Pe.paint_line["line-translate"]),"line-translate-anchor":new dt(Pe.paint_line["line-translate-anchor"]),"line-width":new kt(Pe.paint_line["line-width"]),"line-gap-width":new kt(Pe.paint_line["line-gap-width"]),"line-offset":new kt(Pe.paint_line["line-offset"]),"line-blur":new kt(Pe.paint_line["line-blur"]),"line-dasharray":new dd(Pe.paint_line["line-dasharray"]),"line-pattern":new fc(Pe.paint_line["line-pattern"]),"line-gradient":new fd(Pe.paint_line["line-gradient"])})},get layout(){return h2=h2||new di({"line-cap":new dt(Pe.layout_line["line-cap"]),"line-join":new kt(Pe.layout_line["line-join"]),"line-miter-limit":new dt(Pe.layout_line["line-miter-limit"]),"line-round-limit":new dt(Pe.layout_line["line-round-limit"]),"line-sort-key":new kt(Pe.layout_line["line-sort-key"])})}};class r5 extends kt{possiblyEvaluate(r,s){return s=new An(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,d,p){return s=K({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,d,p)}}let Jp;class i5 extends No{constructor(r){super(r,f2),this.gradientVersion=0,Jp||(Jp=new r5(f2.paint.properties["line-width"].specification),Jp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ol,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Jp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new d_(r)}queryRadius(r){const s=r,d=p2(vd("line-width",this,s),vd("line-gap-width",this,s)),p=vd("line-offset",this,s);return d/2+Math.abs(p)+Wp(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,d,p,_,x,w){const T=qp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),I=w/2*p2(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),R=this.paint.get("line-offset").evaluate(s,d);return R&&(p=function(F,$){const G=[];for(let q=0;q<F.length;q++){const ee=F[q],re=[];for(let ae=0;ae<ee.length;ae++){const ve=ee[ae-1],fe=ee[ae],be=ee[ae+1],Ee=ae===0?new A(0,0):fe.sub(ve)._unit()._perp(),ze=ae===ee.length-1?new A(0,0):be.sub(fe)._unit()._perp(),Qe=Ee._add(ze)._unit(),ct=Qe.x*ze.x+Qe.y*ze.y;ct!==0&&Qe._mult(1/ct),re.push(Qe._mult($)._add(fe))}G.push(re)}return G}(p,R*w)),function(F,$,G){for(let q=0;q<$.length;q++){const ee=$[q];if(F.length>=3){for(let re=0;re<ee.length;re++)if(vc(F,ee[re]))return!0}if(cz(F,ee,G))return!0}return!1}(T,p,I)}isTileClipped(){return!0}}function p2(a,r){return r>0?r+2*a:a}const o5=ir([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),a5=ir([{name:"a_projected_pos",components:3,type:"Float32"}],4);ir([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const s5=ir([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ir([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const m2=ir([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),l5=ir([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function u5(a,r,s){return a.sections.forEach(d=>{d.text=function(p,_,x){const w=_.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Qi.applyArabicShaping&&(p=Qi.applyArabicShaping(p)),p}(d.text,r,s)}),a}ir([{name:"triangle",components:3,type:"Uint16"}]),ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ir([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ir([{type:"Float32",name:"offsetX"}]),ir([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ir([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Pd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var xr=24,g2=_n,y2=function(a,r,s,d,p){var _,x,w=8*p-d-1,T=(1<<w)-1,I=T>>1,R=-7,F=s?p-1:0,$=s?-1:1,G=a[r+F];for(F+=$,_=G&(1<<-R)-1,G>>=-R,R+=w;R>0;_=256*_+a[r+F],F+=$,R-=8);for(x=_&(1<<-R)-1,_>>=-R,R+=d;R>0;x=256*x+a[r+F],F+=$,R-=8);if(_===0)_=1-I;else{if(_===T)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,d),_-=I}return(G?-1:1)*x*Math.pow(2,_-d)},_2=function(a,r,s,d,p,_){var x,w,T,I=8*_-p-1,R=(1<<I)-1,F=R>>1,$=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=d?0:_-1,q=d?1:-1,ee=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,x=R):(x=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-x))<1&&(x--,T*=2),(r+=x+F>=1?$/T:$*Math.pow(2,1-F))*T>=2&&(x++,T/=2),x+F>=R?(w=0,x=R):x+F>=1?(w=(r*T-1)*Math.pow(2,p),x+=F):(w=r*Math.pow(2,F-1)*Math.pow(2,p),x=0));p>=8;a[s+G]=255&w,G+=q,w/=256,p-=8);for(x=x<<p|w,I+=p;I>0;a[s+G]=255&x,G+=q,x/=256,I-=8);a[s+G-q]|=128*ee};function _n(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}_n.Varint=0,_n.Fixed64=1,_n.Bytes=2,_n.Fixed32=5;var f_=4294967296,v2=1/f_,x2=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ss(a){return a.type===_n.Bytes?a.readVarint()+a.pos:a.pos+1}function Sc(a,r,s){return s?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function b2(a,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var p=s.pos-1;p>=a;p--)s.buf[p+d]=s.buf[p]}function c5(a,r){for(var s=0;s<a.length;s++)r.writeVarint(a[s])}function h5(a,r){for(var s=0;s<a.length;s++)r.writeSVarint(a[s])}function d5(a,r){for(var s=0;s<a.length;s++)r.writeFloat(a[s])}function f5(a,r){for(var s=0;s<a.length;s++)r.writeDouble(a[s])}function p5(a,r){for(var s=0;s<a.length;s++)r.writeBoolean(a[s])}function m5(a,r){for(var s=0;s<a.length;s++)r.writeFixed32(a[s])}function g5(a,r){for(var s=0;s<a.length;s++)r.writeSFixed32(a[s])}function y5(a,r){for(var s=0;s<a.length;s++)r.writeFixed64(a[s])}function _5(a,r){for(var s=0;s<a.length;s++)r.writeSFixed64(a[s])}function Qp(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function Ec(a,r,s){a[s]=r,a[s+1]=r>>>8,a[s+2]=r>>>16,a[s+3]=r>>>24}function w2(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}_n.prototype={destroy:function(){this.buf=null},readFields:function(a,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),p=d>>3,_=this.pos;this.type=7&d,a(p,r,this),this.pos===_&&this.skip(d)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=Qp(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=w2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Qp(this.buf,this.pos)+Qp(this.buf,this.pos+4)*f_;return this.pos+=8,a},readSFixed64:function(){var a=Qp(this.buf,this.pos)+w2(this.buf,this.pos+4)*f_;return this.pos+=8,a},readFloat:function(){var a=y2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=y2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(p,_,x){var w,T,I=x.buf;if(w=(112&(T=I[x.pos++]))>>4,T<128||(w|=(127&(T=I[x.pos++]))<<3,T<128)||(w|=(127&(T=I[x.pos++]))<<10,T<128)||(w|=(127&(T=I[x.pos++]))<<17,T<128)||(w|=(127&(T=I[x.pos++]))<<24,T<128)||(w|=(1&(T=I[x.pos++]))<<31,T<128))return Sc(p,w,_);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&x2?function(s,d,p){return x2.decode(s.subarray(d,p))}(this.buf,r,a):function(s,d,p){for(var _="",x=d;x<p;){var w,T,I,R=s[x],F=null,$=R>239?4:R>223?3:R>191?2:1;if(x+$>p)break;$===1?R<128&&(F=R):$===2?(192&(w=s[x+1]))==128&&(F=(31&R)<<6|63&w)<=127&&(F=null):$===3?(T=s[x+2],(192&(w=s[x+1]))==128&&(192&T)==128&&((F=(15&R)<<12|(63&w)<<6|63&T)<=2047||F>=55296&&F<=57343)&&(F=null)):$===4&&(T=s[x+2],I=s[x+3],(192&(w=s[x+1]))==128&&(192&T)==128&&(192&I)==128&&((F=(15&R)<<18|(63&w)<<12|(63&T)<<6|63&I)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,$=1):F>65535&&(F-=65536,_+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),_+=String.fromCharCode(F),x+=$}return _}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==_n.Bytes)return a.push(this.readVarint(r));var s=ss(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==_n.Bytes)return a.push(this.readSVarint());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==_n.Bytes)return a.push(this.readBoolean());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==_n.Bytes)return a.push(this.readFloat());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==_n.Bytes)return a.push(this.readDouble());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==_n.Bytes)return a.push(this.readFixed32());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==_n.Bytes)return a.push(this.readSFixed32());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==_n.Bytes)return a.push(this.readFixed64());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==_n.Bytes)return a.push(this.readSFixed64());var r=ss(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===_n.Varint)for(;this.buf[this.pos++]>127;);else if(r===_n.Bytes)this.pos=this.readVarint()+this.pos;else if(r===_n.Fixed32)this.pos+=4;else{if(r!==_n.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Ec(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Ec(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Ec(this.buf,-1&a,this.pos),Ec(this.buf,Math.floor(a*v2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Ec(this.buf,-1&a,this.pos),Ec(this.buf,Math.floor(a*v2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,s){var d,p;if(r>=0?(d=r%4294967296|0,p=r/4294967296|0):(p=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,p=p+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,w){w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,w.buf[w.pos]=127&(_>>>=7)}(d,0,s),function(_,x){var w=(7&_)<<4;x.buf[x.pos++]|=w|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(p,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(d,p,_){for(var x,w,T=0;T<p.length;T++){if((x=p.charCodeAt(T))>55295&&x<57344){if(!w){x>56319||T+1===p.length?(d[_++]=239,d[_++]=191,d[_++]=189):w=x;continue}if(x<56320){d[_++]=239,d[_++]=191,d[_++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(d[_++]=239,d[_++]=191,d[_++]=189,w=null);x<128?d[_++]=x:(x<2048?d[_++]=x>>6|192:(x<65536?d[_++]=x>>12|224:(d[_++]=x>>18|240,d[_++]=x>>12&63|128),d[_++]=x>>6&63|128),d[_++]=63&x|128)}return _}(this.buf,a,this.pos);var s=this.pos-r;s>=128&&b2(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),_2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),_2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,r){this.pos++;var s=this.pos;a(r,this);var d=this.pos-s;d>=128&&b2(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,r,s){this.writeTag(a,_n.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,c5,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,h5,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,p5,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,d5,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,f5,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,m5,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,g5,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,y5,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,_5,r)},writeBytesField:function(a,r){this.writeTag(a,_n.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,_n.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,_n.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,_n.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,_n.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,_n.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,_n.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,_n.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,_n.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,_n.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,Boolean(r))}};var p_=S(g2);const m_=3;function v5(a,r,s){a===1&&s.readMessage(x5,r)}function x5(a,r,s){if(a===3){const{id:d,bitmap:p,width:_,height:x,left:w,top:T,advance:I}=s.readMessage(b5,{});r.push({id:d,bitmap:new bd({width:_+2*m_,height:x+2*m_},p),metrics:{width:_,height:x,left:w,top:T,advance:I}})}}function b5(a,r,s){a===1?r.id=s.readVarint():a===2?r.bitmap=s.readBytes():a===3?r.width=s.readVarint():a===4?r.height=s.readVarint():a===5?r.left=s.readSVarint():a===6?r.top=s.readSVarint():a===7&&(r.advance=s.readVarint())}const S2=m_;function E2(a){let r=0,s=0;for(const x of a)r+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,w)=>w.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let p=0,_=0;for(const x of a)for(let w=d.length-1;w>=0;w--){const T=d[w];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,_=Math.max(_,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===T.w&&x.h===T.h){const I=d.pop();w<d.length&&(d[w]=I)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(d.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:p,h:_,fill:r/(p*_)||0}}const Di=1;class g_{constructor(r,{pixelRatio:s,version:d,stretchX:p,stretchY:_,content:x}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=p,this.stretchY=_,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+Di,this.paddedRect.y+Di]}get br(){return[this.paddedRect.x+this.paddedRect.w-Di,this.paddedRect.y+this.paddedRect.h-Di]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Di)/this.pixelRatio,(this.paddedRect.h-2*Di)/this.pixelRatio]}}class k2{constructor(r,s){const d={},p={};this.haveRenderCallbacks=[];const _=[];this.addImages(r,d,_),this.addImages(s,p,_);const{w:x,h:w}=E2(_),T=new mo({width:x||1,height:w||1});for(const I in r){const R=r[I],F=d[I].paddedRect;mo.copy(R.data,T,{x:0,y:0},{x:F.x+Di,y:F.y+Di},R.data)}for(const I in s){const R=s[I],F=p[I].paddedRect,$=F.x+Di,G=F.y+Di,q=R.data.width,ee=R.data.height;mo.copy(R.data,T,{x:0,y:0},{x:$,y:G},R.data),mo.copy(R.data,T,{x:0,y:ee-1},{x:$,y:G-1},{width:q,height:1}),mo.copy(R.data,T,{x:0,y:0},{x:$,y:G+ee},{width:q,height:1}),mo.copy(R.data,T,{x:q-1,y:0},{x:$-1,y:G},{width:1,height:ee}),mo.copy(R.data,T,{x:0,y:0},{x:$+q,y:G},{width:1,height:ee})}this.image=T,this.iconPositions=d,this.patternPositions=p}addImages(r,s,d){for(const p in r){const _=r[p],x={x:0,y:0,w:_.data.width+2*Di,h:_.data.height+2*Di};d.push(x),s[p]=new g_(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),s)}patchUpdatedImage(r,s,d){if(!r||!s||r.version===s.version)return;r.version=s.version;const[p,_]=r.tl;d.update(s.data,void 0,{x:p,y:_})}}var Zs;tt("ImagePosition",g_),tt("ImageAtlas",k2),u.WritingMode=void 0,(Zs=u.WritingMode||(u.WritingMode={}))[Zs.none=0]="none",Zs[Zs.horizontal=1]="horizontal",Zs[Zs.vertical=2]="vertical",Zs[Zs.horizontalOnly=3]="horizontalOnly";const Id=-17;class Md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const d=new Md;return d.scale=r||1,d.fontStack=s,d}static forImage(r){const s=new Md;return s.imageName=r,s}}class kc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const d=new kc;for(let p=0;p<r.sections.length;p++){const _=r.sections[p];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let d=0;d<r.length;d++){const p=r.charCodeAt(d+1)||null,_=r.charCodeAt(d-1)||null;s+=p&&Jl(p)&&!Pd[r[d+1]]||_&&Jl(_)&&!Pd[r[d-1]]||!Pd[r[d]]?r[d]:Pd[r[d]]}return s}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&tm[this.text.charCodeAt(d)];d++)r++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&tm[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const d=new kc;return d.text=this.text.substring(r,s),d.sectionIndex=this.sectionIndex.slice(r,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(Md.forText(r.scale,r.fontStack||s));const d=this.sections.length-1;for(let p=0;p<r.text.length;++p)this.sectionIndex.push(d)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void Ne("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Md.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ne("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function em(a,r,s,d,p,_,x,w,T,I,R,F,$,G,q,ee){const re=kc.fromFeature(a,p);let ae;F===u.WritingMode.vertical&&re.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:fe}=Qi;if(ve&&re.sections.length===1){ae=[];const ze=ve(re.toString(),y_(re,I,_,r,d,G,q));for(const Qe of ze){const ct=new kc;ct.text=Qe,ct.sections=re.sections;for(let Je=0;Je<Qe.length;Je++)ct.sectionIndex.push(0);ae.push(ct)}}else if(fe){ae=[];const ze=fe(re.text,re.sectionIndex,y_(re,I,_,r,d,G,q));for(const Qe of ze){const ct=new kc;ct.text=Qe[0],ct.sectionIndex=Qe[1],ct.sections=re.sections,ae.push(ct)}}else ae=function(ze,Qe){const ct=[],Je=ze.text;let Ke=0;for(const We of Qe)ct.push(ze.substring(Ke,We)),Ke=We;return Ke<Je.length&&ct.push(ze.substring(Ke,Je.length)),ct}(re,y_(re,I,_,r,d,G,q));const be=[],Ee={positionedLines:be,text:re.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(ze,Qe,ct,Je,Ke,We,rt,He,Ve,xt,ht,Vt){let In=0,Dn=Id,br=0,to=0;const mi=He==="right"?1:He==="left"?0:.5;let mr=0;for(const gr of Ke){gr.trim();const wr=gr.getMaxScale(),Xr=(wr-1)*xr,yi={positionedGlyphs:[],lineOffset:0};ze.positionedLines[mr]=yi;const Li=yi.positionedGlyphs;let Fi=0;if(!gr.length()){Dn+=We,++mr;continue}for(let Gr=0;Gr<gr.length();Gr++){const Ht=gr.getSection(Gr),no=gr.getSectionIndex(Gr),Wr=gr.getCharCode(Gr);let _i=0,Go=null,la=null,ua=null,ls=xr;const Wo=!(Ve===u.WritingMode.horizontal||!ht&&!Yl(Wr)||ht&&(tm[Wr]||(kr=Wr,Ye.Arabic(kr)||Ye["Arabic Supplement"](kr)||Ye["Arabic Extended-A"](kr)||Ye["Arabic Presentation Forms-A"](kr)||Ye["Arabic Presentation Forms-B"](kr))));if(Ht.imageName){const yo=Je[Ht.imageName];if(!yo)continue;ua=Ht.imageName,ze.iconsInText=ze.iconsInText||!0,la=yo.paddedRect;const Oi=yo.displaySize;Ht.scale=Ht.scale*xr/Vt,Go={width:Oi[0],height:Oi[1],left:Di,top:-S2,advance:Wo?Oi[1]:Oi[0]},_i=Xr+(xr-Oi[1]*Ht.scale),ls=Go.advance;const us=Wo?Oi[0]*Ht.scale-xr*wr:Oi[1]*Ht.scale-xr*wr;us>0&&us>Fi&&(Fi=us)}else{const yo=ct[Ht.fontStack],Oi=yo&&yo[Wr];if(Oi&&Oi.rect)la=Oi.rect,Go=Oi.metrics;else{const us=Qe[Ht.fontStack],Ld=us&&us[Wr];if(!Ld)continue;Go=Ld.metrics}_i=(wr-Ht.scale)*xr}Wo?(ze.verticalizable=!0,Li.push({glyph:Wr,imageName:ua,x:In,y:Dn+_i,vertical:Wo,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:no,metrics:Go,rect:la}),In+=ls*Ht.scale+xt):(Li.push({glyph:Wr,imageName:ua,x:In,y:Dn+_i,vertical:Wo,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:no,metrics:Go,rect:la}),In+=Go.advance*Ht.scale+xt)}Li.length!==0&&(br=Math.max(In-xt,br),E5(Li,0,Li.length-1,mi,Fi)),In=0;const Xn=We*wr+Fi;yi.lineOffset=Math.max(Fi,Xr),Dn+=Xn,to=Math.max(Xn,to),++mr}var kr;const jr=Dn-Id,{horizontalAlign:Ri,verticalAlign:gi}=__(rt);(function(gr,wr,Xr,yi,Li,Fi,Xn,Gr,Ht){const no=(wr-Xr)*Li;let Wr=0;Wr=Fi!==Xn?-Gr*yi-Id:(-yi*Ht+.5)*Xn;for(const _i of gr)for(const Go of _i.positionedGlyphs)Go.x+=no,Go.y+=Wr})(ze.positionedLines,mi,Ri,gi,br,to,We,jr,Ke.length),ze.top+=-gi*jr,ze.bottom=ze.top+jr,ze.left+=-Ri*br,ze.right=ze.left+br}(Ee,r,s,d,ae,x,w,T,F,I,$,ee),!function(ze){for(const Qe of ze)if(Qe.positionedGlyphs.length!==0)return!1;return!0}(be)&&Ee}const tm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},w5={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function T2(a,r,s,d,p,_){if(r.imageName){const x=d[r.imageName];return x?x.displaySize[0]*r.scale*xr/_+p:0}{const x=s[r.fontStack],w=x&&x[a];return w?w.metrics.advance*r.scale+p:0}}function C2(a,r,s,d){const p=Math.pow(a-r,2);return d?a<r?p/2:2*p:p+Math.abs(s)*s}function S5(a,r,s){let d=0;return a===10&&(d-=1e4),s&&(d+=150),a!==40&&a!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function P2(a,r,s,d,p,_){let x=null,w=C2(r,s,p,_);for(const T of d){const I=C2(r-T.x,s,p,_)+T.badness;I<=w&&(x=T,w=I)}return{index:a,x:r,priorBreak:x,badness:w}}function I2(a){return a?I2(a.priorBreak).concat(a.index):[]}function y_(a,r,s,d,p,_,x){if(_!=="point")return[];if(!a)return[];const w=[],T=function($,G,q,ee,re,ae){let ve=0;for(let fe=0;fe<$.length();fe++){const be=$.getSection(fe);ve+=T2($.getCharCode(fe),be,ee,re,G,ae)}return ve/Math.max(1,Math.ceil(ve/q))}(a,r,s,d,p,x),I=a.text.indexOf("\u200B")>=0;let R=0;for(let $=0;$<a.length();$++){const G=a.getSection($),q=a.getCharCode($);if(tm[q]||(R+=T2(q,G,d,p,r,x)),$<a.length()-1){const ee=!((F=q)<11904||!(Ye["Bopomofo Extended"](F)||Ye.Bopomofo(F)||Ye["CJK Compatibility Forms"](F)||Ye["CJK Compatibility Ideographs"](F)||Ye["CJK Compatibility"](F)||Ye["CJK Radicals Supplement"](F)||Ye["CJK Strokes"](F)||Ye["CJK Symbols and Punctuation"](F)||Ye["CJK Unified Ideographs Extension A"](F)||Ye["CJK Unified Ideographs"](F)||Ye["Enclosed CJK Letters and Months"](F)||Ye["Halfwidth and Fullwidth Forms"](F)||Ye.Hiragana(F)||Ye["Ideographic Description Characters"](F)||Ye["Kangxi Radicals"](F)||Ye["Katakana Phonetic Extensions"](F)||Ye.Katakana(F)||Ye["Vertical Forms"](F)||Ye["Yi Radicals"](F)||Ye["Yi Syllables"](F)));(w5[q]||ee||G.imageName)&&w.push(P2($+1,R,T,w,S5(q,a.getCharCode($+1),ee&&I),!1))}}var F;return I2(P2(a.length(),R,T,w,0,!0))}function __(a){let r=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function E5(a,r,s,d,p){if(!d&&!p)return;const _=a[s],x=(a[s].x+_.metrics.advance*_.scale)*d;for(let w=r;w<=s;w++)a[w].x-=x,a[w].y+=p}function k5(a,r,s){const{horizontalAlign:d,verticalAlign:p}=__(s),_=r[0]-a.displaySize[0]*d,x=r[1]-a.displaySize[1]*p;return{image:a,top:x,bottom:x+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function M2(a,r,s,d,p,_){const x=a.image;let w;if(x.content){const re=x.content,ae=x.pixelRatio||1;w=[re[0]/ae,re[1]/ae,x.displaySize[0]-re[2]/ae,x.displaySize[1]-re[3]/ae]}const T=r.left*_,I=r.right*_;let R,F,$,G;s==="width"||s==="both"?(G=p[0]+T-d[3],F=p[0]+I+d[1]):(G=p[0]+(T+I-x.displaySize[0])/2,F=G+x.displaySize[0]);const q=r.top*_,ee=r.bottom*_;return s==="height"||s==="both"?(R=p[1]+q-d[0],$=p[1]+ee+d[2]):(R=p[1]+(q+ee-x.displaySize[1])/2,$=R+x.displaySize[1]),{image:x,top:R,right:F,bottom:$,left:G,collisionPadding:w}}const Ad=255,za=128,Hs=Ad*za;function A2(a,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new An(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:p}=s;let _=0;for(;_<d.length&&d[_]<=a;)_++;_=Math.max(0,_-1);let x=_;for(;x<d.length&&d[x]<a+1;)x++;x=Math.min(d.length-1,x);const w=d[_],T=d[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:T,minSize:s.evaluate(new An(w)),maxSize:s.evaluate(new An(T)),interpolationType:p}}}function v_(a,r,s){let d="never";const p=a.get(r);return p?d=p:a.get(s)&&(d="always"),d}const T5=qs.VectorTileFeature.types,C5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nm(a,r,s,d,p,_,x,w,T,I,R,F,$){const G=w?Math.min(Hs,Math.round(w[0])):0,q=w?Math.min(Hs,Math.round(w[1])):0;a.emplaceBack(r,s,Math.round(32*d),Math.round(32*p),_,x,(G<<1)+(T?1:0),q,16*I,16*R,256*F,256*$)}function x_(a,r,s){a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s),a.emplaceBack(r.x,r.y,s)}function P5(a){for(const r of a.sections)if(Bp(r.text))return!0;return!1}class b_{constructor(r){this.layoutVertexArray=new Fe,this.indexArray=new _t,this.programConfigurations=r,this.segments=new vt,this.dynamicLayoutVertexArray=new Ge,this.opacityVertexArray=new ut,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,d,p){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,o5.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,a5.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,C5,!0),this.opacityVertexBuffer.itemSize=1),(d||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tt("SymbolBuffers",b_);class w_{constructor(r,s,d){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new d,this.segments=new vt,this.collisionVertexArray=new Xe}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,s5.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tt("CollisionBuffers",w_);class Tc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Q0([]),this.placementViewportMatrix=Q0([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=A2(this.zoom,s["text-size"]),this.iconSizeData=A2(this.zoom,s["icon-size"]);const d=this.layers[0].layout,p=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=v_(d,"text-overlap","text-allow-overlap")!=="never"||v_(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>u.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new b_(new os(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new b_(new os(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new U,this.lineVertexArray=new Q,this.symbolInstances=new L,this.textAnchorOffsets=new te}calculateGlyphDependencies(r,s,d,p,_){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(d||p)&&_){const w=Pd[r.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(r,s,d){const p=this.layers[0],_=p.layout,x=_.get("text-font"),w=_.get("text-field"),T=_.get("icon-image"),I=(w.value.kind!=="constant"||w.value.value instanceof er&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,F=_.get("symbol-sort-key");if(this.features=[],!I&&!R)return;const $=s.iconDependencies,G=s.glyphDependencies,q=s.availableImages,ee=new An(this.zoom);for(const{feature:re,id:ae,index:ve,sourceLayerIndex:fe}of r){const be=p._featureFilter.needGeometry,Ee=Aa(re,be);if(!p._featureFilter.filter(ee,Ee,d))continue;let ze,Qe;if(be||(Ee.geometry=sa(re)),I){const Je=p.getValueAndResolveTokens("text-field",Ee,d,q),Ke=er.factory(Je);P5(Ke)&&(this.hasRTLText=!0),(!this.hasRTLText||hd()==="unavailable"||this.hasRTLText&&Qi.isParsed())&&(ze=u5(Ke,p,Ee))}if(R){const Je=p.getValueAndResolveTokens("icon-image",Ee,d,q);Qe=Je instanceof Yi?Je:Yi.fromString(Je)}if(!ze&&!Qe)continue;const ct=this.sortFeaturesByKey?F.evaluate(Ee,{},d):void 0;if(this.features.push({id:ae,text:ze,icon:Qe,index:ve,sourceLayerIndex:fe,geometry:Ee.geometry,properties:re.properties,type:T5[re.type],sortKey:ct}),Qe&&($[Qe.name]=!0),ze){const Je=x.evaluate(Ee,{},d).join(","),Ke=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const We of ze.sections)if(We.image)$[We.image.name]=!0;else{const rt=cc(ze.toString()),He=We.fontStack||Je,Ve=G[He]=G[He]||{};this.calculateGlyphDependencies(We.text,Ve,Ke,this.allowVerticalPlacement,rt)}}}_.get("symbol-placement")==="line"&&(this.features=function(re){const ae={},ve={},fe=[];let be=0;function Ee(Je){fe.push(re[Je]),be++}function ze(Je,Ke,We){const rt=ve[Je];return delete ve[Je],ve[Ke]=rt,fe[rt].geometry[0].pop(),fe[rt].geometry[0]=fe[rt].geometry[0].concat(We[0]),rt}function Qe(Je,Ke,We){const rt=ae[Ke];return delete ae[Ke],ae[Je]=rt,fe[rt].geometry[0].shift(),fe[rt].geometry[0]=We[0].concat(fe[rt].geometry[0]),rt}function ct(Je,Ke,We){const rt=We?Ke[0][Ke[0].length-1]:Ke[0][0];return`${Je}:${rt.x}:${rt.y}`}for(let Je=0;Je<re.length;Je++){const Ke=re[Je],We=Ke.geometry,rt=Ke.text?Ke.text.toString():null;if(!rt){Ee(Je);continue}const He=ct(rt,We),Ve=ct(rt,We,!0);if(He in ve&&Ve in ae&&ve[He]!==ae[Ve]){const xt=Qe(He,Ve,We),ht=ze(He,Ve,fe[xt].geometry);delete ae[He],delete ve[Ve],ve[ct(rt,fe[ht].geometry,!0)]=ht,fe[xt].geometry=null}else He in ve?ze(He,Ve,We):Ve in ae?Qe(He,Ve,We):(Ee(Je),ae[He]=be-1,ve[Ve]=be-1)}return fe.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((re,ae)=>re.sortKey-ae.sortKey)}update(r,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const d=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(s[r.segment+1]),_=r.dist(s[r.segment]);const x={};for(let w=r.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:p},w<s.length-1&&(p+=s[w+1].dist(s[w]));for(let w=r.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const T=x[w];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,s,d,p,_,x,w,T,I,R,F,$){const G=r.indexArray,q=r.layoutVertexArray,ee=r.segments.prepareSegment(4*s.length,q,G,this.canOverlap?x.sortKey:void 0),re=this.glyphOffsetArray.length,ae=ee.vertexLength,ve=this.allowVerticalPlacement&&w===u.WritingMode.vertical?Math.PI/2:0,fe=x.text&&x.text.sections;for(let be=0;be<s.length;be++){const{tl:Ee,tr:ze,bl:Qe,br:ct,tex:Je,pixelOffsetTL:Ke,pixelOffsetBR:We,minFontScaleX:rt,minFontScaleY:He,glyphOffset:Ve,isSDF:xt,sectionIndex:ht}=s[be],Vt=ee.vertexLength,In=Ve[1];nm(q,T.x,T.y,Ee.x,In+Ee.y,Je.x,Je.y,d,xt,Ke.x,Ke.y,rt,He),nm(q,T.x,T.y,ze.x,In+ze.y,Je.x+Je.w,Je.y,d,xt,We.x,Ke.y,rt,He),nm(q,T.x,T.y,Qe.x,In+Qe.y,Je.x,Je.y+Je.h,d,xt,Ke.x,We.y,rt,He),nm(q,T.x,T.y,ct.x,In+ct.y,Je.x+Je.w,Je.y+Je.h,d,xt,We.x,We.y,rt,He),x_(r.dynamicLayoutVertexArray,T,ve),G.emplaceBack(Vt,Vt+1,Vt+2),G.emplaceBack(Vt+1,Vt+2,Vt+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),be!==s.length-1&&ht===s[be+1].sectionIndex||r.programConfigurations.populatePaintArrays(q.length,x,x.index,{},$,fe&&fe[ht])}r.placedSymbolArray.emplaceBack(T.x,T.y,re,this.glyphOffsetArray.length-re,ae,I,R,T.segment,d?d[0]:0,d?d[1]:0,p[0],p[1],w,0,!1,0,F)}_addCollisionDebugVertex(r,s,d,p,_,x){return s.emplaceBack(0,0),r.emplaceBack(d.x,d.y,p,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,d,p,_,x,w){const T=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),I=T.vertexLength,R=_.layoutVertexArray,F=_.collisionVertexArray,$=w.anchorX,G=w.anchorY;this._addCollisionDebugVertex(R,F,x,$,G,new A(r,s)),this._addCollisionDebugVertex(R,F,x,$,G,new A(d,s)),this._addCollisionDebugVertex(R,F,x,$,G,new A(d,p)),this._addCollisionDebugVertex(R,F,x,$,G,new A(r,p)),T.vertexLength+=4;const q=_.indexArray;q.emplaceBack(I,I+1),q.emplaceBack(I+1,I+2),q.emplaceBack(I+2,I+3),q.emplaceBack(I+3,I),T.primitiveLength+=4}addDebugCollisionBoxes(r,s,d,p){for(let _=r;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new w_(Ut,m2.members,st),this.iconCollisionBox=new w_(Ut,m2.members,st);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,d,p,_,x,w,T,I){const R={};for(let F=s;F<d;F++){const $=r.get(F);R.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},R.textFeatureIndex=$.featureIndex;break}for(let F=p;F<_;F++){const $=r.get(F);R.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},R.verticalTextFeatureIndex=$.featureIndex;break}for(let F=x;F<w;F++){const $=r.get(F);R.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},R.iconFeatureIndex=$.featureIndex;break}for(let F=T;F<I;F++){const $=r.get(F);R.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},R.verticalIconFeatureIndex=$.featureIndex;break}return R}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const d=r.placedSymbolArray.get(s),p=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<p;_+=4)r.indexArray.emplaceBack(_,_+1,_+2),r.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),d=Math.cos(r),p=[],_=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const T=this.symbolInstances.get(w);p.push(0|Math.round(s*T.anchorX+d*T.anchorY)),_.push(T.featureIndex)}return x.sort((w,T)=>p[w]-p[T]||_[T]-_[w]),x}addToSortKeyRanges(r,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((p,_,x)=>{p>=0&&x.indexOf(p)===_&&this.addIndicesForPlacedSymbol(this.text,p)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let z2,D2;tt("SymbolBucket",Tc,{omit:["layers","collisionBoxArray","features","compareText"]}),Tc.MAX_GLYPHS=65535,Tc.addDynamicAttributes=x_;var S_={get paint(){return D2=D2||new di({"icon-opacity":new kt(Pe.paint_symbol["icon-opacity"]),"icon-color":new kt(Pe.paint_symbol["icon-color"]),"icon-halo-color":new kt(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new dt(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new dt(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(Pe.paint_symbol["text-opacity"]),"text-color":new kt(Pe.paint_symbol["text-color"],{runtimeType:hr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new kt(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new kt(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(Pe.paint_symbol["text-halo-blur"]),"text-translate":new dt(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new dt(Pe.paint_symbol["text-translate-anchor"])})},get layout(){return z2=z2||new di({"symbol-placement":new dt(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new dt(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dt(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dt(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dt(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new dt(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new dt(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new dt(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dt(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(Pe.layout_symbol["icon-size"]),"icon-text-fit":new dt(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dt(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(Pe.layout_symbol["icon-image"]),"icon-rotate":new kt(Pe.layout_symbol["icon-rotate"]),"icon-padding":new kt(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new dt(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(Pe.layout_symbol["icon-offset"]),"icon-anchor":new kt(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dt(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dt(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dt(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new kt(Pe.layout_symbol["text-field"]),"text-font":new kt(Pe.layout_symbol["text-font"]),"text-size":new kt(Pe.layout_symbol["text-size"]),"text-max-width":new kt(Pe.layout_symbol["text-max-width"]),"text-line-height":new dt(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new kt(Pe.layout_symbol["text-justify"]),"text-radial-offset":new kt(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dt(Pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new kt(Pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new kt(Pe.layout_symbol["text-anchor"]),"text-max-angle":new dt(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new dt(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new kt(Pe.layout_symbol["text-rotate"]),"text-padding":new dt(Pe.layout_symbol["text-padding"]),"text-keep-upright":new dt(Pe.layout_symbol["text-keep-upright"]),"text-transform":new kt(Pe.layout_symbol["text-transform"]),"text-offset":new kt(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new dt(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new dt(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new dt(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new dt(Pe.layout_symbol["text-optional"])})}};class R2{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Pr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tt("FormatSectionOverride",R2,{omit:["defaultValue"]});class rm extends No{constructor(r){super(r,S_)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const p=[];for(const _ of d)p.indexOf(_)<0&&p.push(_);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,d,p){const _=this.layout.get(r).evaluate(s,{},d,p),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||ec(x.value)||!_?_:function(w,T){return T.replace(/{([^{}]+)}/g,(I,R)=>R in w?String(w[R]):"")}(s.properties,_)}createBucket(r){return new Tc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of S_.paint.overridableProperties){if(!rm.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),d=new R2(s),p=new Un(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new $l("source",p):new Cn("composite",p,s.value.zoomStops),this.paint._values[r]=new ho(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&rm.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const d=r.get("text-field"),p=S_.paint.properties[s];let _=!1;const x=w=>{for(const T of w)if(p.overrides&&p.overrides.hasOverride(T))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof er)x(d.value.value.sections);else if(d.value.kind==="source"){const w=I=>{_||(I instanceof Ha&&tr(I.value)===li?x(I.value.sections):I instanceof Ju?x(I.sections):I.eachChild(w))},T=d.value;T._styleExpression&&w(T._styleExpression.expression)}return _}}let L2;var I5={get paint(){return L2=L2||new di({"background-color":new dt(Pe.paint_background["background-color"]),"background-pattern":new dd(Pe.paint_background["background-pattern"]),"background-opacity":new dt(Pe.paint_background["background-opacity"])})}};class M5 extends No{constructor(r){super(r,I5)}}let F2;var A5={get paint(){return F2=F2||new di({"raster-opacity":new dt(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new dt(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dt(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dt(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new dt(Pe.paint_raster["raster-saturation"]),"raster-contrast":new dt(Pe.paint_raster["raster-contrast"]),"raster-resampling":new dt(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new dt(Pe.paint_raster["raster-fade-duration"])})}};class z5 extends No{constructor(r){super(r,A5)}}class D5 extends No{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class R5{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const E_=63710088e-1;class Xs{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xs(N(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,d=this.lat*s,p=r.lat*s,_=Math.sin(d)*Math.sin(p)+Math.cos(d)*Math.cos(p)*Math.cos((r.lng-this.lng)*s);return E_*Math.acos(Math.min(_,1))}static convert(r){if(r instanceof Xs)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Xs(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Xs(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const O2=2*Math.PI*E_;function $2(a){return O2*Math.cos(a*Math.PI/180)}function B2(a){return(180+a)/360}function V2(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function N2(a,r){return a/$2(r)}function k_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class im{constructor(r,s,d=0){this.x=+r,this.y=+s,this.z=+d}static fromLngLat(r,s=0){const d=Xs.convert(r);return new im(B2(d.lng),V2(d.lat),N2(s,d.lat))}toLngLat(){return new Xs(360*this.x-180,k_(this.y))}toAltitude(){return this.z*$2(k_(this.y))}meterInMercatorCoordinateUnits(){return 1/O2*(r=k_(this.y),1/Math.cos(r*Math.PI/180));var r}}function U2(a,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[a*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class T_{constructor(r,s,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=d,this.key=zd(0,r,r,s,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,d){const p=(x=this.y,w=this.z,T=U2(256*(_=this.x),256*(x=Math.pow(2,w)-x-1),w),I=U2(256*(_+1),256*(x+1),w),T[0]+","+T[1]+","+I[0]+","+I[1]);var _,x,w,T,I;const R=function(F,$,G){let q,ee="";for(let re=F;re>0;re--)q=1<<re-1,ee+=($&q?1:0)+(G&q?2:0);return ee}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new A((r.x*s-this.x)*jn,(r.y*s-this.y)*jn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class j2{constructor(r,s){this.wrap=r,this.canonical=s,this.key=zd(r,s.z,s.z,s.x,s.y)}}class go{constructor(r,s,d,p,_){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=s,this.canonical=new T_(d,+p,+_),this.key=zd(s,r,d,p,_)}clone(){return new go(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new go(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new go(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?zd(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):zd(this.wrap*+s,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new go(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,p=2*this.canonical.y;return[new go(s,this.wrap,s,d,p),new go(s,this.wrap,s,d+1,p),new go(s,this.wrap,s,d,p+1),new go(s,this.wrap,s,d+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new go(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new go(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new j2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new im(r.x-this.wrap,r.y))}}function zd(a,r,s,d,p){(a*=2)<0&&(a=-1*a-1);const _=1<<s;return(_*_*a+_*p+d).toString(36)+s.toString(36)+r.toString(36)}tt("CanonicalTileID",T_),tt("OverscaledTileID",go,{omit:["posMatrix"]});class G2{constructor(r,s,d){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void Ne(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const p=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=d||"mapbox";for(let _=0;_<p;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(p,_)]=this.data[this._idx(p-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,p)]=this.data[this._idx(_,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<p;_++)for(let x=0;x<p;x++){const w=this.get(_,x);w>this.max&&(this.max=w),w<this.min&&(this.min=w)}}get(r,s){const d=new Uint8Array(this.data.buffer),p=4*this._idx(r,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[p],d[p+1],d[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}_unpackMapbox(r,s,d){return(256*r*256+256*s+d)/10-1e4}_unpackTerrarium(r,s,d){return 256*r+s+d/256-32768}getPixels(){return new mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,_=s*this.dim+this.dim,x=d*this.dim,w=d*this.dim+this.dim;switch(s){case-1:p=_-1;break;case 1:_=p+1}switch(d){case-1:x=w-1;break;case 1:w=x+1}const T=-s*this.dim,I=-d*this.dim;for(let R=x;R<w;R++)for(let F=p;F<_;F++)this.data[this._idx(F,R)]=r.data[this._idx(F+T,R+I)]}}tt("DEMData",G2);class W2{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const d=r[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class q2{constructor(r,s,d,p,_){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=d,r._y=p,this.properties=r.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class Z2{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Xl(jn,16,0),this.grid3D=new Xl(jn,16,0),this.featureIndexArray=new pe,this.promoteId=s}insert(r,s,d,p,_,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,p,_);const T=x?this.grid3D:this.grid;for(let I=0;I<s.length;I++){const R=s[I],F=[1/0,1/0,-1/0,-1/0];for(let $=0;$<R.length;$++){const G=R[$];F[0]=Math.min(F[0],G.x),F[1]=Math.min(F[1],G.y),F[2]=Math.max(F[2],G.x),F[3]=Math.max(F[3],G.y)}F[0]<jn&&F[1]<jn&&F[2]>=0&&F[3]>=0&&T.insert(w,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new qs.VectorTile(new p_(this.rawTileData)).layers,this.sourceLayerCoder=new W2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,d,p){this.loadVTLayers();const _=r.params||{},x=jn/r.tileSize/r.scale,w=Yh(_.filter),T=r.queryGeometry,I=r.queryPadding*x,R=X2(T),F=this.grid.query(R.minX-I,R.minY-I,R.maxX+I,R.maxY+I),$=X2(r.cameraQueryGeometry),G=this.grid3D.query($.minX-I,$.minY-I,$.maxX+I,$.maxY+I,(re,ae,ve,fe)=>function(be,Ee,ze,Qe,ct){for(const Ke of be)if(Ee<=Ke.x&&ze<=Ke.y&&Qe>=Ke.x&&ct>=Ke.y)return!0;const Je=[new A(Ee,ze),new A(Ee,ct),new A(Qe,ct),new A(Qe,ze)];if(be.length>2){for(const Ke of Je)if(vc(be,Ke))return!0}for(let Ke=0;Ke<be.length-1;Ke++)if(dz(be[Ke],be[Ke+1],Je))return!0;return!1}(r.cameraQueryGeometry,re-I,ae-I,ve+I,fe+I));for(const re of G)F.push(re);F.sort(L5);const q={};let ee;for(let re=0;re<F.length;re++){const ae=F[re];if(ae===ee)continue;ee=ae;const ve=this.featureIndexArray.get(ae);let fe=null;this.loadMatchingFeature(q,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,w,_.layers,_.availableImages,s,d,p,(be,Ee,ze)=>(fe||(fe=sa(be)),Ee.queryIntersectsFeature(T,be,ze,fe,this.z,r.transform,x,r.pixelPosMatrix)))}return q}loadMatchingFeature(r,s,d,p,_,x,w,T,I,R,F){const $=this.bucketLayerIDs[s];if(x&&!function(re,ae){for(let ve=0;ve<re.length;ve++)if(ae.indexOf(re[ve])>=0)return!0;return!1}(x,$))return;const G=this.sourceLayerCoder.decode(d),q=this.vtLayers[G].feature(p);if(_.needGeometry){const re=Aa(q,!0);if(!_.filter(new An(this.tileID.overscaledZ),re,this.tileID.canonical))return}else if(!_.filter(new An(this.tileID.overscaledZ),q))return;const ee=this.getId(q,G);for(let re=0;re<$.length;re++){const ae=$[re];if(x&&x.indexOf(ae)<0)continue;const ve=T[ae];if(!ve)continue;let fe={};ee&&R&&(fe=R.getState(ve.sourceLayer||"_geojsonTileLayer",ee));const be=K({},I[ae]);be.paint=H2(be.paint,ve.paint,q,fe,w),be.layout=H2(be.layout,ve.layout,q,fe,w);const Ee=!F||F(q,ve,fe);if(!Ee)continue;const ze=new q2(q,this.z,this.x,this.y,ee);ze.layer=be;let Qe=r[ae];Qe===void 0&&(Qe=r[ae]=[]),Qe.push({featureIndex:p,feature:ze,intersectionZ:Ee})}}lookupSymbolFeatures(r,s,d,p,_,x,w,T){const I={};this.loadVTLayers();const R=Yh(_);for(const F of r)this.loadMatchingFeature(I,d,p,F,R,x,w,T,s);return I}hasLayer(r){for(const s of this.bucketLayerIDs)for(const d of s)if(r===d)return!0;return!1}getId(r,s){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function H2(a,r,s,d,p){return ue(a,(_,x)=>{const w=r instanceof eu?r.get(x):null;return w&&w.evaluate?w.evaluate(s,d,p):w})}function X2(a){let r=1/0,s=1/0,d=-1/0,p=-1/0;for(const _ of a)r=Math.min(r,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),p=Math.max(p,_.y);return{minX:r,minY:s,maxX:d,maxY:p}}function L5(a,r){return r-a}function K2(a,r,s,d,p){const _=[];for(let x=0;x<a.length;x++){const w=a[x];let T;for(let I=0;I<w.length-1;I++){let R=w[I],F=w[I+1];R.x<r&&F.x<r||(R.x<r?R=new A(r,R.y+(r-R.x)/(F.x-R.x)*(F.y-R.y))._round():F.x<r&&(F=new A(r,R.y+(r-R.x)/(F.x-R.x)*(F.y-R.y))._round()),R.y<s&&F.y<s||(R.y<s?R=new A(R.x+(s-R.y)/(F.y-R.y)*(F.x-R.x),s)._round():F.y<s&&(F=new A(R.x+(s-R.y)/(F.y-R.y)*(F.x-R.x),s)._round()),R.x>=d&&F.x>=d||(R.x>=d?R=new A(d,R.y+(d-R.x)/(F.x-R.x)*(F.y-R.y))._round():F.x>=d&&(F=new A(d,R.y+(d-R.x)/(F.x-R.x)*(F.y-R.y))._round()),R.y>=p&&F.y>=p||(R.y>=p?R=new A(R.x+(p-R.y)/(F.y-R.y)*(F.x-R.x),p)._round():F.y>=p&&(F=new A(R.x+(p-R.y)/(F.y-R.y)*(F.x-R.x),p)._round()),T&&R.equals(T[T.length-1])||(T=[R],_.push(T)),T.push(F)))))}}return _}tt("FeatureIndex",Z2,{omit:["rawTileData","sourceLayerCoder"]});class Ks extends A{constructor(r,s,d,p){super(r,s),this.angle=d,p!==void 0&&(this.segment=p)}clone(){return new Ks(this.x,this.y,this.angle,this.segment)}}function Y2(a,r,s,d,p){if(r.segment===void 0||s===0)return!0;let _=r,x=r.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=a[x].dist(_),_=a[x]}w+=a[x].dist(a[x+1]),x++;const T=[];let I=0;for(;w<s/2;){const R=a[x],F=a[x+1];if(!F)return!1;let $=a[x-1].angleTo(R)-R.angleTo(F);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:$}),I+=$;w-T[0].distance>d;)I-=T.shift().angleDelta;if(I>p)return!1;x++,w+=R.dist(F)}return!0}function J2(a){let r=0;for(let s=0;s<a.length-1;s++)r+=a[s].dist(a[s+1]);return r}function Q2(a,r,s){return a?.6*r*s:0}function eS(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function F5(a,r,s,d,p,_){const x=Q2(s,p,_),w=eS(s,d)*_;let T=0;const I=J2(a)/2;for(let R=0;R<a.length-1;R++){const F=a[R],$=a[R+1],G=F.dist($);if(T+G>I){const q=(I-T)/G,ee=Ii.number(F.x,$.x,q),re=Ii.number(F.y,$.y,q),ae=new Ks(ee,re,$.angleTo(F),R);return ae._round(),!x||Y2(a,ae,w,x,r)?ae:void 0}T+=G}}function O5(a,r,s,d,p,_,x,w,T){const I=Q2(d,_,x),R=eS(d,p),F=R*x,$=a[0].x===0||a[0].x===T||a[0].y===0||a[0].y===T;return r-F<r/4&&(r=F+r/4),tS(a,$?r/2*w%r:(R/2+2*_)*x*w%r,r,I,s,F,$,!1,T)}function tS(a,r,s,d,p,_,x,w,T){const I=_/2,R=J2(a);let F=0,$=r-s,G=[];for(let q=0;q<a.length-1;q++){const ee=a[q],re=a[q+1],ae=ee.dist(re),ve=re.angleTo(ee);for(;$+s<F+ae;){$+=s;const fe=($-F)/ae,be=Ii.number(ee.x,re.x,fe),Ee=Ii.number(ee.y,re.y,fe);if(be>=0&&be<T&&Ee>=0&&Ee<T&&$-I>=0&&$+I<=R){const ze=new Ks(be,Ee,ve,q);ze._round(),d&&!Y2(a,ze,_,d,p)||G.push(ze)}}F+=ae}return w||G.length||x||(G=tS(a,F/2,s,d,p,_,x,!0,T)),G}tt("Anchor",Ks);const Cc=Di;function nS(a,r,s,d){const p=[],_=a.image,x=_.pixelRatio,w=_.paddedRect.w-2*Cc,T=_.paddedRect.h-2*Cc,I=a.right-a.left,R=a.bottom-a.top,F=_.stretchX||[[0,w]],$=_.stretchY||[[0,T]],G=(We,rt)=>We+rt[1]-rt[0],q=F.reduce(G,0),ee=$.reduce(G,0),re=w-q,ae=T-ee;let ve=0,fe=q,be=0,Ee=ee,ze=0,Qe=re,ct=0,Je=ae;if(_.content&&d){const We=_.content;ve=om(F,0,We[0]),be=om($,0,We[1]),fe=om(F,We[0],We[2]),Ee=om($,We[1],We[3]),ze=We[0]-ve,ct=We[1]-be,Qe=We[2]-We[0]-fe,Je=We[3]-We[1]-Ee}const Ke=(We,rt,He,Ve)=>{const xt=am(We.stretch-ve,fe,I,a.left),ht=sm(We.fixed-ze,Qe,We.stretch,q),Vt=am(rt.stretch-be,Ee,R,a.top),In=sm(rt.fixed-ct,Je,rt.stretch,ee),Dn=am(He.stretch-ve,fe,I,a.left),br=sm(He.fixed-ze,Qe,He.stretch,q),to=am(Ve.stretch-be,Ee,R,a.top),mi=sm(Ve.fixed-ct,Je,Ve.stretch,ee),mr=new A(xt,Vt),kr=new A(Dn,Vt),jr=new A(Dn,to),Ri=new A(xt,to),gi=new A(ht/x,In/x),gr=new A(br/x,mi/x),wr=r*Math.PI/180;if(wr){const Li=Math.sin(wr),Fi=Math.cos(wr),Xn=[Fi,-Li,Li,Fi];mr._matMult(Xn),kr._matMult(Xn),Ri._matMult(Xn),jr._matMult(Xn)}const Xr=We.stretch+We.fixed,yi=rt.stretch+rt.fixed;return{tl:mr,tr:kr,bl:Ri,br:jr,tex:{x:_.paddedRect.x+Cc+Xr,y:_.paddedRect.y+Cc+yi,w:He.stretch+He.fixed-Xr,h:Ve.stretch+Ve.fixed-yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gi,pixelOffsetBR:gr,minFontScaleX:Qe/x/I,minFontScaleY:Je/x/R,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const We=rS(F,re,q),rt=rS($,ae,ee);for(let He=0;He<We.length-1;He++){const Ve=We[He],xt=We[He+1];for(let ht=0;ht<rt.length-1;ht++)p.push(Ke(Ve,rt[ht],xt,rt[ht+1]))}}else p.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return p}function om(a,r,s){let d=0;for(const p of a)d+=Math.max(r,Math.min(s,p[1]))-Math.max(r,Math.min(s,p[0]));return d}function rS(a,r,s){const d=[{fixed:-Cc,stretch:0}];for(const[p,_]of a){const x=d[d.length-1];d.push({fixed:p-x.stretch,stretch:x.stretch}),d.push({fixed:p-x.stretch,stretch:x.stretch+(_-p)})}return d.push({fixed:r+Cc,stretch:s}),d}function am(a,r,s,d){return a/r*s+d}function sm(a,r,s,d){return a-r*s/d}class lm{constructor(r,s,d,p,_,x,w,T,I,R){if(this.boxStartIndex=r.length,I){let F=x.top,$=x.bottom;const G=x.collisionPadding;G&&(F-=G[1],$+=G[3]);let q=$-F;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let F=x.top*w-T[0],$=x.bottom*w+T[2],G=x.left*w-T[3],q=x.right*w+T[1];const ee=x.collisionPadding;if(ee&&(G-=ee[0]*w,F-=ee[1]*w,q+=ee[2]*w,$+=ee[3]*w),R){const re=new A(G,F),ae=new A(q,F),ve=new A(G,$),fe=new A(q,$),be=R*Math.PI/180;re._rotate(be),ae._rotate(be),ve._rotate(be),fe._rotate(be),G=Math.min(re.x,ae.x,ve.x,fe.x),q=Math.max(re.x,ae.x,ve.x,fe.x),F=Math.min(re.y,ae.y,ve.y,fe.y),$=Math.max(re.y,ae.y,ve.y,fe.y)}r.emplaceBack(s.x,s.y,G,F,q,$,d,p,_)}this.boxEndIndex=r.length}}class $5{constructor(r=[],s=B5){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:d}=this,p=s[r];for(;r>0;){const _=r-1>>1,x=s[_];if(d(p,x)>=0)break;s[r]=x,r=_}s[r]=p}_down(r){const{data:s,compare:d}=this,p=this.length>>1,_=s[r];for(;r<p;){let x=1+(r<<1),w=s[x];const T=x+1;if(T<this.length&&d(s[T],w)<0&&(x=T,w=s[T]),d(w,_)>=0)break;s[r]=w,r=x}s[r]=_}}function B5(a,r){return a<r?-1:a>r?1:0}function V5(a,r=1,s=!1){let d=1/0,p=1/0,_=-1/0,x=-1/0;const w=a[0];for(let G=0;G<w.length;G++){const q=w[G];(!G||q.x<d)&&(d=q.x),(!G||q.y<p)&&(p=q.y),(!G||q.x>_)&&(_=q.x),(!G||q.y>x)&&(x=q.y)}const T=Math.min(_-d,x-p);let I=T/2;const R=new $5([],N5);if(T===0)return new A(d,p);for(let G=d;G<_;G+=T)for(let q=p;q<x;q+=T)R.push(new Pc(G+I,q+I,I,a));let F=function(G){let q=0,ee=0,re=0;const ae=G[0];for(let ve=0,fe=ae.length,be=fe-1;ve<fe;be=ve++){const Ee=ae[ve],ze=ae[be],Qe=Ee.x*ze.y-ze.x*Ee.y;ee+=(Ee.x+ze.x)*Qe,re+=(Ee.y+ze.y)*Qe,q+=3*Qe}return new Pc(ee/q,re/q,0,G)}(a),$=R.length;for(;R.length;){const G=R.pop();(G.d>F.d||!F.d)&&(F=G,s&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,$)),G.max-F.d<=r||(I=G.h/2,R.push(new Pc(G.p.x-I,G.p.y-I,I,a)),R.push(new Pc(G.p.x+I,G.p.y-I,I,a)),R.push(new Pc(G.p.x-I,G.p.y+I,I,a)),R.push(new Pc(G.p.x+I,G.p.y+I,I,a)),$+=4)}return s&&(console.log(`num probes: ${$}`),console.log(`best distance: ${F.d}`)),F.p}function N5(a,r){return r.max-a.max}function Pc(a,r,s,d){this.p=new A(a,r),this.h=s,this.d=function(p,_){let x=!1,w=1/0;for(let T=0;T<_.length;T++){const I=_[T];for(let R=0,F=I.length,$=F-1;R<F;$=R++){const G=I[R],q=I[$];G.y>p.y!=q.y>p.y&&p.x<(q.x-G.x)*(p.y-G.y)/(q.y-G.y)+G.x&&(x=!x),w=Math.min(w,Vw(p,G,q))}}return(x?1:-1)*Math.sqrt(w)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Ur;u.TextAnchorEnum=void 0,(Ur=u.TextAnchorEnum||(u.TextAnchorEnum={}))[Ur.center=1]="center",Ur[Ur.left=2]="left",Ur[Ur.right=3]="right",Ur[Ur.top=4]="top",Ur[Ur.bottom=5]="bottom",Ur[Ur["top-left"]=6]="top-left",Ur[Ur["top-right"]=7]="top-right",Ur[Ur["bottom-left"]=8]="bottom-left",Ur[Ur["bottom-right"]=9]="bottom-right";const Ys=7,C_=Number.POSITIVE_INFINITY;function iS(a,r){return r[1]!==C_?function(s,d,p){let _=0,x=0;switch(d=Math.abs(d),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Ys;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Ys}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,x]}(a,r[0],r[1]):function(s,d){let p=0,_=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Ys;break;case"bottom-right":case"bottom-left":_=-x+Ys;break;case"bottom":_=-d+Ys;break;case"top":_=d-Ys}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=d;break;case"right":p=-d}return[p,_]}(a,r[0])}function oS(a,r,s){var d;const p=a.layout,_=(d=p.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},s);if(_){const w=_.values,T=[];for(let I=0;I<w.length;I+=2){const R=T[I]=w[I],F=w[I+1].map($=>$*xr);R.startsWith("top")?F[1]-=Ys:R.startsWith("bottom")&&(F[1]+=Ys),T[I+1]=F}return new $r(T)}const x=p.get("text-variable-anchor");if(x){let w;w=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},s)*xr,C_]:p.get("text-offset").evaluate(r,{},s).map(I=>I*xr);const T=[];for(const I of x)T.push(I,iS(I,w));return new $r(T)}return null}function P_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function U5(a,r,s,d,p,_,x,w,T,I,R){let F=_.textMaxSize.evaluate(r,{});F===void 0&&(F=x);const $=a.layers[0].layout,G=$.get("icon-offset").evaluate(r,{},R),q=sS(s.horizontal),ee=x/24,re=a.tilePixelRatio*ee,ae=a.tilePixelRatio*F/24,ve=a.tilePixelRatio*w,fe=a.tilePixelRatio*$.get("symbol-spacing"),be=$.get("text-padding")*a.tilePixelRatio,Ee=function(Ve,xt,ht,Vt=1){const In=Ve.get("icon-padding").evaluate(xt,{},ht),Dn=In&&In.values;return[Dn[0]*Vt,Dn[1]*Vt,Dn[2]*Vt,Dn[3]*Vt]}($,r,R,a.tilePixelRatio),ze=$.get("text-max-angle")/180*Math.PI,Qe=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",ct=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",Je=$.get("symbol-placement"),Ke=fe/2,We=$.get("icon-text-fit");let rt;d&&We!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(rt=M2(d,s.vertical,We,$.get("icon-text-fit-padding"),G,ee)),q&&(d=M2(d,q,We,$.get("icon-text-fit-padding"),G,ee)));const He=(Ve,xt)=>{xt.x<0||xt.x>=jn||xt.y<0||xt.y>=jn||function(ht,Vt,In,Dn,br,to,mi,mr,kr,jr,Ri,gi,gr,wr,Xr,yi,Li,Fi,Xn,Gr,Ht,no,Wr,_i,Go){const la=ht.addToLineVertexArray(Vt,In);let ua,ls,Wo,yo,Oi=0,us=0,Ld=0,hS=0,F_=-1,O_=-1;const cs={};let dS=fo("");if(ht.allowVerticalPlacement&&Dn.vertical){const Kr=mr.layout.get("text-rotate").evaluate(Ht,{},_i)+90;Wo=new lm(kr,Vt,jr,Ri,gi,Dn.vertical,gr,wr,Xr,Kr),mi&&(yo=new lm(kr,Vt,jr,Ri,gi,mi,Li,Fi,Xr,Kr))}if(br){const Kr=mr.layout.get("icon-rotate").evaluate(Ht,{}),_o=mr.layout.get("icon-text-fit")!=="none",su=nS(br,Kr,Wr,_o),ha=mi?nS(mi,Kr,Wr,_o):void 0;ls=new lm(kr,Vt,jr,Ri,gi,br,Li,Fi,!1,Kr),Oi=4*su.length;const lu=ht.iconSizeData;let Da=null;lu.kind==="source"?(Da=[za*mr.layout.get("icon-size").evaluate(Ht,{})],Da[0]>Hs&&Ne(`${ht.layerIds[0]}: Value for "icon-size" is >= ${Ad}. Reduce your "icon-size".`)):lu.kind==="composite"&&(Da=[za*no.compositeIconSizes[0].evaluate(Ht,{},_i),za*no.compositeIconSizes[1].evaluate(Ht,{},_i)],(Da[0]>Hs||Da[1]>Hs)&&Ne(`${ht.layerIds[0]}: Value for "icon-size" is >= ${Ad}. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,su,Da,Gr,Xn,Ht,u.WritingMode.none,Vt,la.lineStartIndex,la.lineLength,-1,_i),F_=ht.icon.placedSymbolArray.length-1,ha&&(us=4*ha.length,ht.addSymbols(ht.icon,ha,Da,Gr,Xn,Ht,u.WritingMode.vertical,Vt,la.lineStartIndex,la.lineLength,-1,_i),O_=ht.icon.placedSymbolArray.length-1)}const fS=Object.keys(Dn.horizontal);for(const Kr of fS){const _o=Dn.horizontal[Kr];if(!ua){dS=fo(_o.text);const ha=mr.layout.get("text-rotate").evaluate(Ht,{},_i);ua=new lm(kr,Vt,jr,Ri,gi,_o,gr,wr,Xr,ha)}const su=_o.positionedLines.length===1;if(Ld+=aS(ht,Vt,_o,to,mr,Xr,Ht,yi,la,Dn.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,su?fS:[Kr],cs,F_,no,_i),su)break}Dn.vertical&&(hS+=aS(ht,Vt,Dn.vertical,to,mr,Xr,Ht,yi,la,u.WritingMode.vertical,["vertical"],cs,O_,no,_i));const W5=ua?ua.boxStartIndex:ht.collisionBoxArray.length,q5=ua?ua.boxEndIndex:ht.collisionBoxArray.length,Z5=Wo?Wo.boxStartIndex:ht.collisionBoxArray.length,H5=Wo?Wo.boxEndIndex:ht.collisionBoxArray.length,X5=ls?ls.boxStartIndex:ht.collisionBoxArray.length,K5=ls?ls.boxEndIndex:ht.collisionBoxArray.length,Y5=yo?yo.boxStartIndex:ht.collisionBoxArray.length,J5=yo?yo.boxEndIndex:ht.collisionBoxArray.length;let ca=-1;const cm=(Kr,_o)=>Kr&&Kr.circleDiameter?Math.max(Kr.circleDiameter,_o):_o;ca=cm(ua,ca),ca=cm(Wo,ca),ca=cm(ls,ca),ca=cm(yo,ca);const pS=ca>-1?1:0;pS&&(ca*=Go/xr),ht.glyphOffsetArray.length>=Tc.MAX_GLYPHS&&Ne("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ht.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,Ht.sortKey);const Q5=oS(mr,Ht,_i),[e4,t4]=function(Kr,_o){const su=Kr.length,ha=_o==null?void 0:_o.values;if((ha==null?void 0:ha.length)>0)for(let lu=0;lu<ha.length;lu+=2){const Da=ha[lu+1];Kr.emplaceBack(u.TextAnchorEnum[ha[lu]],Da[0],Da[1])}return[su,Kr.length]}(ht.textAnchorOffsets,Q5);ht.symbolInstances.emplaceBack(Vt.x,Vt.y,cs.right>=0?cs.right:-1,cs.center>=0?cs.center:-1,cs.left>=0?cs.left:-1,cs.vertical||-1,F_,O_,dS,W5,q5,Z5,H5,X5,K5,Y5,J5,jr,Ld,hS,Oi,us,pS,0,gr,ca,e4,t4)}(a,xt,Ve,s,d,p,rt,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,re,[be,be,be,be],Qe,T,ve,Ee,ct,G,r,_,I,R,x)};if(Je==="line")for(const Ve of K2(r.geometry,0,0,jn,jn)){const xt=O5(Ve,fe,ze,s.vertical||q,d,24,ae,a.overscaling,jn);for(const ht of xt)q&&j5(a,q.text,Ke,ht)||He(Ve,ht)}else if(Je==="line-center"){for(const Ve of r.geometry)if(Ve.length>1){const xt=F5(Ve,ze,s.vertical||q,d,24,ae);xt&&He(Ve,xt)}}else if(r.type==="Polygon")for(const Ve of a_(r.geometry,0)){const xt=V5(Ve,16);He(Ve[0],new Ks(xt.x,xt.y,0))}else if(r.type==="LineString")for(const Ve of r.geometry)He(Ve,new Ks(Ve[0].x,Ve[0].y,0));else if(r.type==="Point")for(const Ve of r.geometry)for(const xt of Ve)He([xt],new Ks(xt.x,xt.y,0))}function aS(a,r,s,d,p,_,x,w,T,I,R,F,$,G,q){const ee=function(ve,fe,be,Ee,ze,Qe,ct,Je){const Ke=Ee.layout.get("text-rotate").evaluate(Qe,{})*Math.PI/180,We=[];for(const rt of fe.positionedLines)for(const He of rt.positionedGlyphs){if(!He.rect)continue;const Ve=He.rect||{};let xt=S2+1,ht=!0,Vt=1,In=0;const Dn=(ze||Je)&&He.vertical,br=He.metrics.advance*He.scale/2;if(Je&&fe.verticalizable&&(In=rt.lineOffset/2-(He.imageName?-(xr-He.metrics.width*He.scale)/2:(He.scale-1)*xr)),He.imageName){const Xn=ct[He.imageName];ht=Xn.sdf,Vt=Xn.pixelRatio,xt=Di/Vt}const to=ze?[He.x+br,He.y]:[0,0];let mi=ze?[0,0]:[He.x+br+be[0],He.y+be[1]-In],mr=[0,0];Dn&&(mr=mi,mi=[0,0]);const kr=(He.metrics.left-xt)*He.scale-br+mi[0],jr=(-He.metrics.top-xt)*He.scale+mi[1],Ri=kr+Ve.w*He.scale/Vt,gi=jr+Ve.h*He.scale/Vt,gr=new A(kr,jr),wr=new A(Ri,jr),Xr=new A(kr,gi),yi=new A(Ri,gi);if(Dn){const Xn=new A(-br,br-Id),Gr=-Math.PI/2,Ht=xr/2-br,no=new A(5-Id-Ht,-(He.imageName?Ht:0)),Wr=new A(...mr);gr._rotateAround(Gr,Xn)._add(no)._add(Wr),wr._rotateAround(Gr,Xn)._add(no)._add(Wr),Xr._rotateAround(Gr,Xn)._add(no)._add(Wr),yi._rotateAround(Gr,Xn)._add(no)._add(Wr)}if(Ke){const Xn=Math.sin(Ke),Gr=Math.cos(Ke),Ht=[Gr,-Xn,Xn,Gr];gr._matMult(Ht),wr._matMult(Ht),Xr._matMult(Ht),yi._matMult(Ht)}const Li=new A(0,0),Fi=new A(0,0);We.push({tl:gr,tr:wr,bl:Xr,br:yi,tex:Ve,writingMode:fe.writingMode,glyphOffset:to,sectionIndex:He.sectionIndex,isSDF:ht,pixelOffsetTL:Li,pixelOffsetBR:Fi,minFontScaleX:0,minFontScaleY:0})}return We}(0,s,w,p,_,x,d,a.allowVerticalPlacement),re=a.textSizeData;let ae=null;re.kind==="source"?(ae=[za*p.layout.get("text-size").evaluate(x,{})],ae[0]>Hs&&Ne(`${a.layerIds[0]}: Value for "text-size" is >= ${Ad}. Reduce your "text-size".`)):re.kind==="composite"&&(ae=[za*G.compositeTextSizes[0].evaluate(x,{},q),za*G.compositeTextSizes[1].evaluate(x,{},q)],(ae[0]>Hs||ae[1]>Hs)&&Ne(`${a.layerIds[0]}: Value for "text-size" is >= ${Ad}. Reduce your "text-size".`)),a.addSymbols(a.text,ee,ae,w,_,x,I,r,T.lineStartIndex,T.lineLength,$,q);for(const ve of R)F[ve]=a.text.placedSymbolArray.length-1;return 4*ee.length}function sS(a){for(const r in a)return a[r];return null}function j5(a,r,s,d){const p=a.compareText;if(r in p){const _=p[r];for(let x=_.length-1;x>=0;x--)if(d.dist(_[x])<s)return!0}else p[r]=[];return p[r].push(d),!1}const lS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class I_{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=d>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const _=lS[15&d];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new I_(w,x,_,r)}constructor(r,s=64,d=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const _=lS.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-w%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=s,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return M_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:w}=this,T=[0,_.length-1,0],I=[];for(;T.length;){const R=T.pop()||0,F=T.pop()||0,$=T.pop()||0;if(F-$<=w){for(let re=$;re<=F;re++){const ae=x[2*re],ve=x[2*re+1];ae>=r&&ae<=d&&ve>=s&&ve<=p&&I.push(_[re])}continue}const G=$+F>>1,q=x[2*G],ee=x[2*G+1];q>=r&&q<=d&&ee>=s&&ee<=p&&I.push(_[G]),(R===0?r<=q:s<=ee)&&(T.push($),T.push(G-1),T.push(1-R)),(R===0?d>=q:p>=ee)&&(T.push(G+1),T.push(F),T.push(1-R))}return I}within(r,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:_,nodeSize:x}=this,w=[0,p.length-1,0],T=[],I=d*d;for(;w.length;){const R=w.pop()||0,F=w.pop()||0,$=w.pop()||0;if(F-$<=x){for(let re=$;re<=F;re++)cS(_[2*re],_[2*re+1],r,s)<=I&&T.push(p[re]);continue}const G=$+F>>1,q=_[2*G],ee=_[2*G+1];cS(q,ee,r,s)<=I&&T.push(p[G]),(R===0?r-d<=q:s-d<=ee)&&(w.push($),w.push(G-1),w.push(1-R)),(R===0?r+d>=q:s+d>=ee)&&(w.push(G+1),w.push(F),w.push(1-R))}return T}}function M_(a,r,s,d,p,_){if(p-d<=s)return;const x=d+p>>1;uS(a,r,x,d,p,_),M_(a,r,s,d,x-1,1-_),M_(a,r,s,x+1,p,1-_)}function uS(a,r,s,d,p,_){for(;p>d;){if(p-d>600){const I=p-d+1,R=s-d+1,F=Math.log(I),$=.5*Math.exp(2*F/3),G=.5*Math.sqrt(F*$*(I-$)/I)*(R-I/2<0?-1:1);uS(a,r,s,Math.max(d,Math.floor(s-R*$/I+G)),Math.min(p,Math.floor(s+(I-R)*$/I+G)),_)}const x=r[2*s+_];let w=d,T=p;for(Dd(a,r,d,s),r[2*p+_]>x&&Dd(a,r,d,p);w<T;){for(Dd(a,r,w,T),w++,T--;r[2*w+_]<x;)w++;for(;r[2*T+_]>x;)T--}r[2*d+_]===x?Dd(a,r,d,T):(T++,Dd(a,r,T,p)),T<=s&&(d=T+1),s<=T&&(p=T-1)}}function Dd(a,r,s,d){A_(a,s,d),A_(r,2*s,2*d),A_(r,2*s+1,2*d+1)}function A_(a,r,s){const d=a[r];a[r]=a[s],a[s]=d}function cS(a,r,s,d){const p=a-s,_=r-d;return p*p+_*_}var z_;u.PerformanceMarkers=void 0,(z_=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",z_.load="load",z_.fullLoad="fullLoad";let um=null,Rd=[];const D_=1e3/60,R_="loadTime",L_="fullLoadTime",G5={mark(a){performance.mark(a)},frame(a){const r=a;um!=null&&Rd.push(r-um),um=r},clearMetrics(){um=null,Rd=[],performance.clearMeasures(R_),performance.clearMeasures(L_);for(const a in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[a])},getPerformanceMetrics(){performance.measure(R_,u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure(L_,u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const a=performance.getEntriesByName(R_)[0].duration,r=performance.getEntriesByName(L_)[0].duration,s=Rd.length,d=1/(Rd.reduce((_,x)=>_+x,0)/s/1e3),p=Rd.filter(_=>_>D_).reduce((_,x)=>_+(x-D_)/D_,0);return{loadTime:a,fullLoadTime:r,fps:d,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};u.AJAXError=Ot,u.ARRAY_TYPE=xc,u.Actor=class{constructor(a,r,s){this.receive=d=>{const p=d.data,_=p.id;if(_&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[_];const x=this.cancelCallbacks[_];delete this.cancelCallbacks[_],x&&x()}else wt()||p.mustQueue?(this.tasks[_]=p,this.taskQueue.push(_),this.invoker.trigger()):this.processTask(_,p)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)},this.target=a,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new R5(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=wt()?a:window}send(a,r,s,d,p=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);const x=Lt(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:a,hasCallback:!!s,targetMapId:d,mustQueue:p,sourceMapId:this.mapId,data:Kl(r,x)},x),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(a,r){if(r.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(r.error?s(ts(r.error)):s(null,ts(r.data)))}else{let s=!1;const d=Lt(this.globalScope)?void 0:[],p=r.hasCallback?(w,T)=>{s=!0,delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:w?Kl(w):null,data:Kl(T,d)},d)}:w=>{s=!0};let _=null;const x=ts(r.data);if(this.parent[r.type])_=this.parent[r.type](r.sourceMapId,x,p);else if(this.parent.getWorkerSource){const w=r.type.split(".");_=this.parent.getWorkerSource(r.sourceMapId,w[0],x.source)[w[1]](x,p)}else p(new Error(`Could not find function ${r.type}`));!s&&_&&_.cancel&&(this.cancelCallbacks[a]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=bd,u.CanonicalTileID=T_,u.CollisionBoxArray=k,u.CollisionCircleLayoutArray=class extends gd{},u.Color=Ct,u.DEMData=G2,u.DataConstantProperty=dt,u.DictionaryCoder=W2,u.EXTENT=jn,u.ErrorEvent=Xt,u.EvaluationParameters=An,u.Event=Rn,u.Evented=fn,u.FeatureIndex=Z2,u.FillBucket=u_,u.FillExtrusionBucket=h_,u.GeoJSONFeature=q2,u.ImageAtlas=k2,u.ImagePosition=g_,u.KDBush=I_,u.LineBucket=d_,u.LineStripIndexArray=class extends m{},u.LngLat=Xs,u.MercatorCoordinate=im,u.ONE_EM=xr,u.OverscaledTileID=go,u.PerformanceUtils=G5,u.Point=A,u.Pos3dArray=class extends nu{},u.PosArray=Se,u.Properties=di,u.Protobuf=p_,u.QuadTriangleArray=class extends yc{},u.RGBAImage=mo,u.RasterBoundsArray=class extends ru{},u.RequestPerformance=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},u.SegmentVector=vt,u.SymbolBucket=Tc,u.Transitionable=Np,u.TriangleIndexArray=_t,u.Uniform1f=_r,u.Uniform1i=class extends or{constructor(a,r){super(a,r),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},u.Uniform2f=class extends or{constructor(a,r){super(a,r),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},u.Uniform3f=class extends or{constructor(a,r){super(a,r),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},u.Uniform4f=Vr,u.UniformColor=Gs,u.UniformMatrix4f=class extends or{constructor(a,r){super(a,r),this.current=vr}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let r=1;r<16;r++)if(a[r]!==this.current[r]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},u.UnwrappedTileID=j2,u.ValidationError=Ie,u.ZoomHistory=rd,u.addDynamicAttributes=x_,u.arrayBufferToImage=function(a,r){const s=new Image;s.onload=()=>{r(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=cn})},s.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(d):cn},u.arrayBufferToImageBitmap=function(a,r){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.asyncAll=function(a,r,s){if(!a.length)return s(null,[]);let d=a.length;const p=new Array(a.length);let _=null;a.forEach((x,w)=>{r(x,(T,I)=>{T&&(_=T),p[w]=I,--d==0&&s(_,p)})})},u.bezier=H,u.browser=ot,u.clamp=B,u.clipLine=K2,u.clone=function(a){var r=new xc(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},u.clone$1=me,u.collisionCircleLayout=l5,u.config=Tt,u.copy=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},u.create=function(){var a=new xc(16);return xc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},u.createExpression=Zt,u.createFilter=Yh,u.createLayout=ir,u.createStyleLayer=function(a){if(a.type==="custom")return new D5(a);switch(a.type){case"background":return new M5(a);case"circle":return new mz(a);case"fill":return new Lz(a);case"fill-extrusion":return new Kz(a);case"heatmap":return new yz(a);case"hillshade":return new vz(a);case"line":return new i5(a);case"raster":return new z5(a);case"symbol":return new rm(a)}},u.deepEqual=function a(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let d=0;d<r.length;d++)if(!a(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const d in r)if(!a(r[d],s[d]))return!1;return!0}return r===s},u.defaultEasing=de,u.derefLayers=function(a){a=a.slice();const r=Object.create(null);for(let s=0;s<a.length;s++)r[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=Hr(a[s],r[a[s].ref]));return a},u.diffStyles=function(a,r){if(!a)return[{command:Nt.setStyle,args:[r]}];let s=[];try{if(!tn(a.version,r.version))return[{command:Nt.setStyle,args:[r]}];tn(a.center,r.center)||s.push({command:Nt.setCenter,args:[r.center]}),tn(a.zoom,r.zoom)||s.push({command:Nt.setZoom,args:[r.zoom]}),tn(a.bearing,r.bearing)||s.push({command:Nt.setBearing,args:[r.bearing]}),tn(a.pitch,r.pitch)||s.push({command:Nt.setPitch,args:[r.pitch]}),tn(a.sprite,r.sprite)||s.push({command:Nt.setSprite,args:[r.sprite]}),tn(a.glyphs,r.glyphs)||s.push({command:Nt.setGlyphs,args:[r.glyphs]}),tn(a.transition,r.transition)||s.push({command:Nt.setTransition,args:[r.transition]}),tn(a.light,r.light)||s.push({command:Nt.setLight,args:[r.light]});const d={},p=[];(function(x,w,T,I){let R;for(R in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(w,R)||oi(R,T,I));for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&(Object.prototype.hasOwnProperty.call(x,R)?tn(x[R],w[R])||(x[R].type==="geojson"&&w[R].type==="geojson"&&Or(x,w,R)?T.push({command:Nt.setGeoJSONSourceData,args:[R,w[R].data]}):Ti(R,w,T,I)):ki(R,w,T))})(a.sources,r.sources,p,d);const _=[];a.layers&&a.layers.forEach(x=>{d[x.source]?s.push({command:Nt.removeLayer,args:[x.id]}):_.push(x)}),s=s.concat(p),function(x,w,T){w=w||[];const I=(x=x||[]).map(Xi),R=w.map(Xi),F=x.reduce(et,{}),$=w.reduce(et,{}),G=I.slice(),q=Object.create(null);let ee,re,ae,ve,fe,be,Ee;for(ee=0,re=0;ee<I.length;ee++)ae=I[ee],Object.prototype.hasOwnProperty.call($,ae)?re++:(T.push({command:Nt.removeLayer,args:[ae]}),G.splice(G.indexOf(ae,re),1));for(ee=0,re=0;ee<R.length;ee++)ae=R[R.length-1-ee],G[G.length-1-ee]!==ae&&(Object.prototype.hasOwnProperty.call(F,ae)?(T.push({command:Nt.removeLayer,args:[ae]}),G.splice(G.lastIndexOf(ae,G.length-re),1)):re++,be=G[G.length-ee],T.push({command:Nt.addLayer,args:[$[ae],be]}),G.splice(G.length-ee,0,ae),q[ae]=!0);for(ee=0;ee<R.length;ee++)if(ae=R[ee],ve=F[ae],fe=$[ae],!q[ae]&&!tn(ve,fe))if(tn(ve.source,fe.source)&&tn(ve["source-layer"],fe["source-layer"])&&tn(ve.type,fe.type)){for(Ee in Sn(ve.layout,fe.layout,T,ae,null,Nt.setLayoutProperty),Sn(ve.paint,fe.paint,T,ae,null,Nt.setPaintProperty),tn(ve.filter,fe.filter)||T.push({command:Nt.setFilter,args:[ae,fe.filter]}),tn(ve.minzoom,fe.minzoom)&&tn(ve.maxzoom,fe.maxzoom)||T.push({command:Nt.setLayerZoomRange,args:[ae,fe.minzoom,fe.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Sn(ve[Ee],fe[Ee],T,ae,Ee.slice(6),Nt.setPaintProperty):tn(ve[Ee],fe[Ee])||T.push({command:Nt.setLayerProperty,args:[ae,Ee,fe[Ee]]}));for(Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&!Object.prototype.hasOwnProperty.call(ve,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Sn(ve[Ee],fe[Ee],T,ae,Ee.slice(6),Nt.setPaintProperty):tn(ve[Ee],fe[Ee])||T.push({command:Nt.setLayerProperty,args:[ae,Ee,fe[Ee]]}))}else T.push({command:Nt.removeLayer,args:[ae]}),be=G[G.lastIndexOf(ae)+1],T.push({command:Nt.addLayer,args:[fe,be]})}(_,r.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:Nt.setStyle,args:[r]}]}return s},u.dot=function(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]+a[3]*r[3]},u.earthRadius=E_,u.emitValidationErrors=uc,u.emptyStyle=function(){const a={},r=Pe.$version;for(const s in Pe.$root){const d=Pe.$root[s];if(d.required){let p=null;p=s==="version"?r:d.type==="array"?[]:{},p!=null&&(a[s]=p)}}return a},u.equals=function(a,r){var s=a[0],d=a[1],p=a[2],_=a[3],x=a[4],w=a[5],T=a[6],I=a[7],R=a[8],F=a[9],$=a[10],G=a[11],q=a[12],ee=a[13],re=a[14],ae=a[15],ve=r[0],fe=r[1],be=r[2],Ee=r[3],ze=r[4],Qe=r[5],ct=r[6],Je=r[7],Ke=r[8],We=r[9],rt=r[10],He=r[11],Ve=r[12],xt=r[13],ht=r[14],Vt=r[15];return Math.abs(s-ve)<=pi*Math.max(1,Math.abs(s),Math.abs(ve))&&Math.abs(d-fe)<=pi*Math.max(1,Math.abs(d),Math.abs(fe))&&Math.abs(p-be)<=pi*Math.max(1,Math.abs(p),Math.abs(be))&&Math.abs(_-Ee)<=pi*Math.max(1,Math.abs(_),Math.abs(Ee))&&Math.abs(x-ze)<=pi*Math.max(1,Math.abs(x),Math.abs(ze))&&Math.abs(w-Qe)<=pi*Math.max(1,Math.abs(w),Math.abs(Qe))&&Math.abs(T-ct)<=pi*Math.max(1,Math.abs(T),Math.abs(ct))&&Math.abs(I-Je)<=pi*Math.max(1,Math.abs(I),Math.abs(Je))&&Math.abs(R-Ke)<=pi*Math.max(1,Math.abs(R),Math.abs(Ke))&&Math.abs(F-We)<=pi*Math.max(1,Math.abs(F),Math.abs(We))&&Math.abs($-rt)<=pi*Math.max(1,Math.abs($),Math.abs(rt))&&Math.abs(G-He)<=pi*Math.max(1,Math.abs(G),Math.abs(He))&&Math.abs(q-Ve)<=pi*Math.max(1,Math.abs(q),Math.abs(Ve))&&Math.abs(ee-xt)<=pi*Math.max(1,Math.abs(ee),Math.abs(xt))&&Math.abs(re-ht)<=pi*Math.max(1,Math.abs(re),Math.abs(ht))&&Math.abs(ae-Vt)<=pi*Math.max(1,Math.abs(ae),Math.abs(Vt))},u.evaluateSizeForFeature=function(a,{uSize:r,uSizeT:s},{lowerSize:d,upperSize:p}){return a.kind==="source"?d/za:a.kind==="composite"?Ii.number(d/za,p/za,s):r},u.evaluateSizeForZoom=function(a,r){let s=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:p,minZoom:_,maxZoom:x}=a,w=p?B(Mi.interpolationFactor(p,r,_,x),0,1):0;a.kind==="camera"?d=Ii.number(a.minSize,a.maxSize,w):s=w}return{uSizeT:s,uSize:d}},u.evented=cd,u.extend=K,u.filterObject=ye,u.findLineIntersection=function(a,r,s,d){const p=r.y-a.y,_=r.x-a.x,x=d.y-s.y,w=d.x-s.x,T=x*_-w*p;if(T===0)return null;const I=(w*(a.y-s.y)-x*(a.x-s.x))/T;return new A(a.x+I*_,a.y+I*p)},u.fromScaling=function(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},u.getAnchorAlignment=__,u.getAnchorJustification=P_,u.getArrayBuffer=dn,u.getDefaultExportFromCjs=S,u.getJSON=function(a,r){return Zn(K(a,{type:"json"}),r)},u.getOverlapMode=v_,u.getProtocolAction=hn,u.getRTLTextPluginStatus=hd,u.getReferrer=at,u.getVideo=function(a,r){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let d=0;d<a.length;d++){const p=window.document.createElement("source");Qn(a[d])||(s.crossOrigin="Anonymous"),p.src=a[d],s.appendChild(p)}return{cancel:()=>{}}},u.groupByLayout=function(a,r){const s={};for(let p=0;p<a.length;p++){const _=r&&r[a[p].id]||U0(a[p]);r&&(r[a[p].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(a[p])}const d=[];for(const p in s)d.push(s[p]);return d},u.identity=Q0,u.interpolate=Ii,u.invert=function(a,r){var s=r[0],d=r[1],p=r[2],_=r[3],x=r[4],w=r[5],T=r[6],I=r[7],R=r[8],F=r[9],$=r[10],G=r[11],q=r[12],ee=r[13],re=r[14],ae=r[15],ve=s*w-d*x,fe=s*T-p*x,be=s*I-_*x,Ee=d*T-p*w,ze=d*I-_*w,Qe=p*I-_*T,ct=R*ee-F*q,Je=R*re-$*q,Ke=R*ae-G*q,We=F*re-$*ee,rt=F*ae-G*ee,He=$*ae-G*re,Ve=ve*He-fe*rt+be*We+Ee*Ke-ze*Je+Qe*ct;return Ve?(a[0]=(w*He-T*rt+I*We)*(Ve=1/Ve),a[1]=(p*rt-d*He-_*We)*Ve,a[2]=(ee*Qe-re*ze+ae*Ee)*Ve,a[3]=($*ze-F*Qe-G*Ee)*Ve,a[4]=(T*Ke-x*He-I*Je)*Ve,a[5]=(s*He-p*Ke+_*Je)*Ve,a[6]=(re*be-q*Qe-ae*fe)*Ve,a[7]=(R*Qe-$*be+G*fe)*Ve,a[8]=(x*rt-w*Ke+I*ct)*Ve,a[9]=(d*Ke-s*rt-_*ct)*Ve,a[10]=(q*ze-ee*be+ae*ve)*Ve,a[11]=(F*be-R*ze-G*ve)*Ve,a[12]=(w*Je-x*We-T*ct)*Ve,a[13]=(s*We-d*Je+p*ct)*Ve,a[14]=(ee*fe-q*Ee-re*ve)*Ve,a[15]=(R*Ee-F*fe+$*ve)*Ve,a):null},u.isImageBitmap=Bt,u.isSafari=Lt,u.isWorker=wt,u.keysDifference=function(a,r){const s=[];for(const d in a)d in r||s.push(d);return s},u.lazyLoadRTLTextPlugin=function(){Qi.isLoading()||Qi.isLoaded()||hd()!=="deferred"||Vp()},u.makeRequest=Zn,u.mapObject=ue,u.mercatorXfromLng=B2,u.mercatorYfromLat=V2,u.mercatorZfromAltitude=N2,u.mul=pz,u.mul$1=function(a,r,s){return a[0]=r[0]*s[0],a[1]=r[1]*s[1],a[2]=r[2]*s[2],a[3]=r[3]*s[3],a},u.multiply=Gw,u.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},u.operations=Nt,u.ortho=function(a,r,s,d,p,_,x){var w=1/(r-s),T=1/(d-p),I=1/(_-x);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*T,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*I,a[11]=0,a[12]=(r+s)*w,a[13]=(p+d)*T,a[14]=(x+_)*I,a[15]=1,a},u.parseCacheControl=function(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,p,_)=>{const x=p||_;return r[d]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},u.parseGlyphPbf=function(a){return new p_(a).readFields(v5,[])},u.pbf=g2,u.performSymbolLayout=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=jn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0],s=r.layout,d=r._unevaluatedLayout._values,p={layoutIconSize:d["icon-size"].possiblyEvaluate(new An(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new An(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new An(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:R}=a.bucket.textSizeData;p.compositeTextSizes=[d["text-size"].possiblyEvaluate(new An(I),a.canonical),d["text-size"].possiblyEvaluate(new An(R),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:R}=a.bucket.iconSizeData;p.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new An(I),a.canonical),d["icon-size"].possiblyEvaluate(new An(R),a.canonical)]}const _=s.get("text-line-height")*xr,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),T=s.get("text-size");for(const I of a.bucket.features){const R=s.get("text-font").evaluate(I,{},a.canonical).join(","),F=T.evaluate(I,{},a.canonical),$=p.layoutTextSize.evaluate(I,{},a.canonical),G=p.layoutIconSize.evaluate(I,{},a.canonical),q={horizontal:{},vertical:void 0},ee=I.text;let re,ae=[0,0];if(ee){const be=ee.toString(),Ee=s.get("text-letter-spacing").evaluate(I,{},a.canonical)*xr,ze=$p(be)?Ee:0,Qe=s.get("text-anchor").evaluate(I,{},a.canonical),ct=oS(r,I,a.canonical);if(!ct){const He=s.get("text-radial-offset").evaluate(I,{},a.canonical);ae=He?iS(Qe,[He*xr,C_]):s.get("text-offset").evaluate(I,{},a.canonical).map(Ve=>Ve*xr)}let Je=x?"center":s.get("text-justify").evaluate(I,{},a.canonical);const Ke=s.get("symbol-placement"),We=Ke==="point"?s.get("text-max-width").evaluate(I,{},a.canonical)*xr:0,rt=()=>{a.bucket.allowVerticalPlacement&&cc(be)&&(q.vertical=em(ee,a.glyphMap,a.glyphPositions,a.imagePositions,R,We,_,Qe,"left",ze,ae,u.WritingMode.vertical,!0,Ke,$,F))};if(!x&&ct){const He=new Set;if(Je==="auto")for(let xt=0;xt<ct.values.length;xt+=2)He.add(P_(ct.values[xt]));else He.add(Je);let Ve=!1;for(const xt of He)if(!q.horizontal[xt])if(Ve)q.horizontal[xt]=q.horizontal[0];else{const ht=em(ee,a.glyphMap,a.glyphPositions,a.imagePositions,R,We,_,"center",xt,ze,ae,u.WritingMode.horizontal,!1,Ke,$,F);ht&&(q.horizontal[xt]=ht,Ve=ht.positionedLines.length===1)}rt()}else{Je==="auto"&&(Je=P_(Qe));const He=em(ee,a.glyphMap,a.glyphPositions,a.imagePositions,R,We,_,Qe,Je,ze,ae,u.WritingMode.horizontal,!1,Ke,$,F);He&&(q.horizontal[Je]=He),rt(),cc(be)&&x&&w&&(q.vertical=em(ee,a.glyphMap,a.glyphPositions,a.imagePositions,R,We,_,Qe,Je,ze,ae,u.WritingMode.vertical,!1,Ke,$,F))}}let ve=!1;if(I.icon&&I.icon.name){const be=a.imageMap[I.icon.name];be&&(re=k5(a.imagePositions[I.icon.name],s.get("icon-offset").evaluate(I,{},a.canonical),s.get("icon-anchor").evaluate(I,{},a.canonical)),ve=!!be.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=ve:a.bucket.sdfIcons!==ve&&Ne("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const fe=sS(q.horizontal)||q.vertical;a.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||re)&&U5(a.bucket,I,q,re,a.imageMap,p,$,G,ae,ve,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},u.perspective=function(a,r,s,d,p){var _,x=1/Math.tan(r/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0?(a[10]=(p+d)*(_=1/(d-p)),a[14]=2*p*d*_):(a[10]=-1,a[14]=-2*d),a},u.pick=function(a,r){const s={};for(let d=0;d<r.length;d++){const p=r[d];p in a&&(s[p]=a[p])}return s},u.plugin=Qi,u.pointGeometry=b,u.polygonIntersectsPolygon=$w,u.potpack=E2,u.register=tt,u.registerForPluginStateChange=function(a){return a({pluginStatus:hi,pluginURL:Pa}),cd.on("pluginStateChange",a),a},u.renderColorRamp=Xw,u.rotateX=function(a,r,s){var d=Math.sin(s),p=Math.cos(s),_=r[4],x=r[5],w=r[6],T=r[7],I=r[8],R=r[9],F=r[10],$=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=_*p+I*d,a[5]=x*p+R*d,a[6]=w*p+F*d,a[7]=T*p+$*d,a[8]=I*p-_*d,a[9]=R*p-x*d,a[10]=F*p-w*d,a[11]=$*p-T*d,a},u.rotateZ=function(a,r,s){var d=Math.sin(s),p=Math.cos(s),_=r[0],x=r[1],w=r[2],T=r[3],I=r[4],R=r[5],F=r[6],$=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=_*p+I*d,a[1]=x*p+R*d,a[2]=w*p+F*d,a[3]=T*p+$*d,a[4]=I*p-_*d,a[5]=R*p-x*d,a[6]=F*p-w*d,a[7]=$*p-T*d,a},u.sameOrigin=Qn,u.scale=function(a,r,s){var d=s[0],p=s[1],_=s[2];return a[0]=r[0]*d,a[1]=r[1]*d,a[2]=r[2]*d,a[3]=r[3]*d,a[4]=r[4]*p,a[5]=r[5]*p,a[6]=r[6]*p,a[7]=r[7]*p,a[8]=r[8]*_,a[9]=r[9]*_,a[10]=r[10]*_,a[11]=r[11]*_,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},u.setRTLTextPlugin=function(a,r,s=!1){if(hi===od||hi===Ql||hi===ad)throw new Error("setRTLTextPlugin cannot be called multiple times.");Pa=ot.resolveURL(a),hi=od,sd=r,ud(),s||Vp()},u.sphericalToCartesian=function([a,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(r)*Math.sin(s),y:a*Math.sin(r)*Math.sin(s),z:a*Math.cos(s)}},u.toEvaluationFeature=Aa,u.transformMat4=Zp,u.translate=function(a,r,s){var d,p,_,x,w,T,I,R,F,$,G,q,ee=s[0],re=s[1],ae=s[2];return r===a?(a[12]=r[0]*ee+r[4]*re+r[8]*ae+r[12],a[13]=r[1]*ee+r[5]*re+r[9]*ae+r[13],a[14]=r[2]*ee+r[6]*re+r[10]*ae+r[14],a[15]=r[3]*ee+r[7]*re+r[11]*ae+r[15]):(p=r[1],_=r[2],x=r[3],w=r[4],T=r[5],I=r[6],R=r[7],F=r[8],$=r[9],G=r[10],q=r[11],a[0]=d=r[0],a[1]=p,a[2]=_,a[3]=x,a[4]=w,a[5]=T,a[6]=I,a[7]=R,a[8]=F,a[9]=$,a[10]=G,a[11]=q,a[12]=d*ee+w*re+F*ae+r[12],a[13]=p*ee+T*re+$*ae+r[13],a[14]=_*ee+I*re+G*ae+r[14],a[15]=x*ee+R*re+q*ae+r[15]),a},u.triggerPluginCompletionEvent=ld,u.unicodeBlockLookup=Ye,u.uniqueId=function(){return ce++},u.v8Spec=Pe,u.validateCustomStyleLayer=function(a){const r=[],s=a.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},u.validateLight=j0,u.validateStyle=Zl,u.vectorTile=qs,u.warnOnce=Ne,u.wrap=N}),h(["./shared"],function(u){class S{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,V){for(const ie of O){this._layerConfigs[ie.id]=ie;const se=this._layers[ie.id]=u.createStyleLayer(ie);se._featureFilter=u.createFilter(se.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of V)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const X=u.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ie of X){const se=ie.map(Re=>this._layers[Re.id]),_e=se[0];if(_e.visibility==="none")continue;const he=_e.source||"";let le=this.familiesBySource[he];le||(le=this.familiesBySource[he]={});const xe=_e.sourceLayer||"_geojsonTileLayer";let De=le[xe];De||(De=le[xe]=[]),De.push(se)}}}class b{constructor(O){const V={},X=[];for(const he in O){const le=O[he],xe=V[he]={};for(const De in le){const Re=le[+De];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const Le={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};X.push(Le),xe[De]={rect:Le,metrics:Re.metrics}}}const{w:ie,h:se}=u.potpack(X),_e=new u.AlphaImage({width:ie||1,height:se||1});for(const he in O){const le=O[he];for(const xe in le){const De=le[+xe];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const Re=V[he][xe].rect;u.AlphaImage.copy(De.bitmap,_e,{x:0,y:0},{x:Re.x+1,y:Re.y+1},De.bitmap)}}this.image=_e,this.positions=V}}u.register("GlyphAtlas",b);class C{constructor(O){this.tileID=new u.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(O,V,X,ie,se){this.status="parsing",this.data=O,this.collisionBoxArray=new u.CollisionBoxArray;const _e=new u.DictionaryCoder(Object.keys(O.layers).sort()),he=new u.FeatureIndex(this.tileID,this.promoteId);he.bucketLayerIDs=[];const le={},xe={featureIndex:he,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X},De=V.familiesBySource[this.source];for(const qt in De){const Yt=O.layers[qt];if(!Yt)continue;Yt.version===1&&u.warnOnce(`Vector tile source "${this.source}" layer "${qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ci=_e.encode(qt),Ct=[];for(let dr=0;dr<Yt.length;dr++){const Mr=Yt.feature(dr),er=he.getId(Mr,qt);Ct.push({feature:Mr,id:er,index:dr,sourceLayerIndex:ci})}for(const dr of De[qt]){const Mr=dr[0];Mr.source!==this.source&&u.warnOnce(`layer.source = ${Mr.source} does not equal this.source = ${this.source}`),Mr.minzoom&&this.zoom<Math.floor(Mr.minzoom)||Mr.maxzoom&&this.zoom>=Mr.maxzoom||Mr.visibility!=="none"&&(A(dr,this.zoom,X),(le[Mr.id]=Mr.createBucket({index:he.bucketLayerIDs.length,layers:dr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ci,sourceID:this.source})).populate(Ct,xe,this.tileID.canonical),he.bucketLayerIDs.push(dr.map(er=>er.id)))}}let Re,Le,Et,Rt;const lt=u.mapObject(xe.glyphDependencies,qt=>Object.keys(qt).map(Number));this.inFlightDependencies.forEach(qt=>qt==null?void 0:qt.cancel()),this.inFlightDependencies=[];const yt=++this.dependencySentinel;Object.keys(lt).length?this.inFlightDependencies.push(ie.send("getGlyphs",{uid:this.uid,stacks:lt,source:this.source,tileID:this.tileID,type:"glyphs"},(qt,Yt)=>{yt===this.dependencySentinel&&(Re||(Re=qt,Le=Yt,yn.call(this)))})):Le={};const Mt=Object.keys(xe.iconDependencies);Mt.length?this.inFlightDependencies.push(ie.send("getImages",{icons:Mt,source:this.source,tileID:this.tileID,type:"icons"},(qt,Yt)=>{yt===this.dependencySentinel&&(Re||(Re=qt,Et=Yt,yn.call(this)))})):Et={};const Qt=Object.keys(xe.patternDependencies);function yn(){if(Re)return se(Re);if(Le&&Et&&Rt){const qt=new b(Le),Yt=new u.ImageAtlas(Et,Rt);for(const ci in le){const Ct=le[ci];Ct instanceof u.SymbolBucket?(A(Ct.layers,this.zoom,X),u.performSymbolLayout({bucket:Ct,glyphMap:Le,glyphPositions:qt.positions,imageMap:Et,imagePositions:Yt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ct.hasPattern&&(Ct instanceof u.LineBucket||Ct instanceof u.FillBucket||Ct instanceof u.FillExtrusionBucket)&&(A(Ct.layers,this.zoom,X),Ct.addFeatures(xe,this.tileID.canonical,Yt.patternPositions))}this.status="done",se(null,{buckets:Object.values(le).filter(ci=>!ci.isEmpty()),featureIndex:he,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qt.image,imageAtlas:Yt,glyphMap:this.returnDependencies?Le:null,iconMap:this.returnDependencies?Et:null,glyphPositions:this.returnDependencies?qt.positions:null})}}Qt.length?this.inFlightDependencies.push(ie.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"},(qt,Yt)=>{yt===this.dependencySentinel&&(Re||(Re=qt,Rt=Yt,yn.call(this)))})):Rt={},yn.call(this)}}function A(ne,O,V){const X=new u.EvaluationParameters(O);for(const ie of ne)ie.recalculate(X,V)}function z(ne,O){const V=u.getArrayBuffer(ne.request,(X,ie,se,_e)=>{X?O(X):ie&&O(null,{vectorTile:new u.vectorTile.VectorTile(new u.Protobuf(ie)),rawData:ie,cacheControl:se,expires:_e})});return()=>{V.cancel(),O()}}class j{constructor(O,V,X,ie){this.actor=O,this.layerIndex=V,this.availableImages=X,this.loadVectorData=ie||z,this.fetching={},this.loading={},this.loaded={}}loadTile(O,V){const X=O.uid;this.loading||(this.loading={});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request),se=this.loading[X]=new C(O);se.abort=this.loadVectorData(O,(_e,he)=>{if(delete this.loading[X],_e||!he)return se.status="done",this.loaded[X]=se,V(_e);const le=he.rawData,xe={};he.expires&&(xe.expires=he.expires),he.cacheControl&&(xe.cacheControl=he.cacheControl);const De={};if(ie){const Re=ie.finish();Re&&(De.resourceTiming=JSON.parse(JSON.stringify(Re)))}se.vectorTile=he.vectorTile,se.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(Re,Le)=>{if(delete this.fetching[X],Re||!Le)return V(Re);V(null,u.extend({rawTileData:le.slice(0)},Le,xe,De))}),this.loaded=this.loaded||{},this.loaded[X]=se,this.fetching[X]={rawTileData:le,cacheControl:xe,resourceTiming:De}})}reloadTile(O,V){const X=this.loaded,ie=O.uid;if(X&&X[ie]){const se=X[ie];se.showCollisionBoxes=O.showCollisionBoxes,se.status==="parsing"?se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,he)=>{if(_e||!he)return V(_e,he);let le;if(this.fetching[ie]){const{rawTileData:xe,cacheControl:De,resourceTiming:Re}=this.fetching[ie];delete this.fetching[ie],le=u.extend({rawTileData:xe.slice(0)},he,De,Re)}else le=he;V(null,le)}):se.status==="done"&&(se.vectorTile?se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,V):V())}}abortTile(O,V){const X=this.loading,ie=O.uid;X&&X[ie]&&X[ie].abort&&(X[ie].abort(),delete X[ie]),V()}removeTile(O,V){const X=this.loaded,ie=O.uid;X&&X[ie]&&delete X[ie],V()}}class Z{constructor(){this.loaded={}}loadTile(O,V){const{uid:X,encoding:ie,rawImageData:se}=O,_e=u.isImageBitmap(se)?this.getImageData(se):se,he=new u.DEMData(X,_e,ie);this.loaded=this.loaded||{},this.loaded[X]=he,V(null,he)}getImageData(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);const V=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:V.width,height:V.height},V.data)}removeTile(O){const V=this.loaded,X=O.uid;V&&V[X]&&delete V[X]}}function H(ne,O){if(ne.length!==0){de(ne[0],O);for(var V=1;V<ne.length;V++)de(ne[V],!O)}}function de(ne,O){for(var V=0,X=0,ie=0,se=ne.length,_e=se-1;ie<se;_e=ie++){var he=(ne[ie][0]-ne[_e][0])*(ne[_e][1]+ne[ie][1]),le=V+he;X+=Math.abs(V)>=Math.abs(he)?V-le+he:he-le+V,V=le}V+X>=0!=!!O&&ne.reverse()}var B=u.getDefaultExportFromCjs(function ne(O,V){var X,ie=O&&O.type;if(ie==="FeatureCollection")for(X=0;X<O.features.length;X++)ne(O.features[X],V);else if(ie==="GeometryCollection")for(X=0;X<O.geometries.length;X++)ne(O.geometries[X],V);else if(ie==="Feature")ne(O.geometry,V);else if(ie==="Polygon")H(O.coordinates,V);else if(ie==="MultiPolygon")for(X=0;X<O.coordinates.length;X++)H(O.coordinates[X],V);return O});const N=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},ce=u.pointGeometry,ue=u.vectorTile.VectorTileFeature,ye=me;function me(ne,O){this.options=O||{},this.features=ne,this.length=ne.length}function Te(ne,O){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=O||4096}me.prototype.feature=function(ne){return new Te(this.features[ne],this.options.extent)},Te.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var O=0;O<ne.length;O++){for(var V=ne[O],X=[],ie=0;ie<V.length;ie++)X.push(new ce(V[ie][0],V[ie][1]));this.geometry.push(X)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,O=1/0,V=-1/0,X=1/0,ie=-1/0,se=0;se<ne.length;se++)for(var _e=ne[se],he=0;he<_e.length;he++){var le=_e[he];O=Math.min(O,le.x),V=Math.max(V,le.x),X=Math.min(X,le.y),ie=Math.max(ie,le.y)}return[O,X,V,ie]},Te.prototype.toGeoJSON=ue.prototype.toGeoJSON;var Ne=u.pbf,we=ye;function nt(ne){var O=new Ne;return function(V,X){for(var ie in V.layers)X.writeMessage(3,wt,V.layers[ie])}(ne,O),O.finish()}function wt(ne,O){var V;O.writeVarintField(15,ne.version||1),O.writeStringField(1,ne.name||""),O.writeVarintField(5,ne.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<ne.length;V++)X.feature=ne.feature(V),O.writeMessage(2,It,X);var ie=X.keys;for(V=0;V<ie.length;V++)O.writeStringField(3,ie[V]);var se=X.values;for(V=0;V<se.length;V++)O.writeMessage(4,Ue,se[V])}function It(ne,O){var V=ne.feature;V.id!==void 0&&O.writeVarintField(1,V.id),O.writeMessage(2,Lt,ne),O.writeVarintField(3,V.type),O.writeMessage(4,bn,V)}function Lt(ne,O){var V=ne.feature,X=ne.keys,ie=ne.values,se=ne.keycache,_e=ne.valuecache;for(var he in V.properties){var le=V.properties[he],xe=se[he];if(le!==null){xe===void 0&&(X.push(he),se[he]=xe=X.length-1),O.writeVarint(xe);var De=typeof le;De!=="string"&&De!=="boolean"&&De!=="number"&&(le=JSON.stringify(le));var Re=De+":"+le,Le=_e[Re];Le===void 0&&(ie.push(le),_e[Re]=Le=ie.length-1),O.writeVarint(Le)}}}function Bt(ne,O){return(O<<3)+(7&ne)}function cn(ne){return ne<<1^ne>>31}function bn(ne,O){for(var V=ne.loadGeometry(),X=ne.type,ie=0,se=0,_e=V.length,he=0;he<_e;he++){var le=V[he],xe=1;X===1&&(xe=le.length),O.writeVarint(Bt(1,xe));for(var De=X===3?le.length-1:le.length,Re=0;Re<De;Re++){Re===1&&X!==1&&O.writeVarint(Bt(2,De-1));var Le=le[Re].x-ie,Et=le[Re].y-se;O.writeVarint(cn(Le)),O.writeVarint(cn(Et)),ie+=Le,se+=Et}X===3&&O.writeVarint(Bt(7,1))}}function Ue(ne,O){var V=typeof ne;V==="string"?O.writeStringField(1,ne):V==="boolean"?O.writeBooleanField(7,ne):V==="number"&&(ne%1!=0?O.writeDoubleField(3,ne):ne<0?O.writeSVarintField(6,ne):O.writeVarintField(5,ne))}K.exports=nt,K.exports.fromVectorTileJs=nt,K.exports.fromGeojsonVt=function(ne,O){O=O||{};var V={};for(var X in ne)V[X]=new we(ne[X].features,O),V[X].name=X,V[X].version=O.version,V[X].extent=O.extent;return nt({layers:V})},K.exports.GeoJSONWrapper=we;var ot=u.getDefaultExportFromCjs(K.exports);const Tt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},Ot=Math.fround||(at=new Float32Array(1),ne=>(at[0]=+ne,at[0]));var at;const hn=3,Dt=5,Zn=6;class dn{constructor(O){this.options=Object.assign(Object.create(Tt),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:V,minZoom:X,maxZoom:ie}=this.options;V&&console.time("total time");const se=`prepare ${O.length} points`;V&&console.time(se),this.points=O;const _e=[];for(let le=0;le<O.length;le++){const xe=O[le];if(!xe.geometry)continue;const[De,Re]=xe.geometry.coordinates,Le=Ot(Er(De)),Et=Ot(Rn(Re));_e.push(Le,Et,1/0,le,-1,1),this.options.reduce&&_e.push(0)}let he=this.trees[ie+1]=this._createTree(_e);V&&console.timeEnd(se);for(let le=ie;le>=X;le--){const xe=+Date.now();he=this.trees[le]=this._createTree(this._cluster(he,le)),V&&console.log("z%d: %d clusters in %dms",le,he.numItems,+Date.now()-xe)}return V&&console.timeEnd("total time"),this}getClusters(O,V){let X=((O[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,O[1]));let se=O[2]===180?180:((O[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)X=-180,se=180;else if(X>se){const Re=this.getClusters([X,ie,180,_e],V),Le=this.getClusters([-180,ie,se,_e],V);return Re.concat(Le)}const he=this.trees[this._limitZoom(V)],le=he.range(Er(X),Rn(_e),Er(se),Rn(ie)),xe=he.data,De=[];for(const Re of le){const Le=this.stride*Re;De.push(xe[Le+Dt]>1?Qn(xe,Le,this.clusterProps):this.points[xe[Le+hn]])}return De}getChildren(O){const V=this._getOriginId(O),X=this._getOriginZoom(O),ie="No cluster with the specified id.",se=this.trees[X];if(!se)throw new Error(ie);const _e=se.data;if(V*this.stride>=_e.length)throw new Error(ie);const he=this.options.radius/(this.options.extent*Math.pow(2,X-1)),le=se.within(_e[V*this.stride],_e[V*this.stride+1],he),xe=[];for(const De of le){const Re=De*this.stride;_e[Re+4]===O&&xe.push(_e[Re+Dt]>1?Qn(_e,Re,this.clusterProps):this.points[_e[Re+hn]])}if(xe.length===0)throw new Error(ie);return xe}getLeaves(O,V,X){const ie=[];return this._appendLeaves(ie,O,V=V||10,X=X||0,0),ie}getTile(O,V,X){const ie=this.trees[this._limitZoom(O)],se=Math.pow(2,O),{extent:_e,radius:he}=this.options,le=he/_e,xe=(X-le)/se,De=(X+1+le)/se,Re={features:[]};return this._addTileFeatures(ie.range((V-le)/se,xe,(V+1+le)/se,De),ie.data,V,X,se,Re),V===0&&this._addTileFeatures(ie.range(1-le/se,xe,1,De),ie.data,se,X,se,Re),V===se-1&&this._addTileFeatures(ie.range(0,xe,le/se,De),ie.data,-1,X,se,Re),Re.features.length?Re:null}getClusterExpansionZoom(O){let V=this._getOriginZoom(O)-1;for(;V<=this.options.maxZoom;){const X=this.getChildren(O);if(V++,X.length!==1)break;O=X[0].properties.cluster_id}return V}_appendLeaves(O,V,X,ie,se){const _e=this.getChildren(V);for(const he of _e){const le=he.properties;if(le&&le.cluster?se+le.point_count<=ie?se+=le.point_count:se=this._appendLeaves(O,le.cluster_id,X,ie,se):se<ie?se++:O.push(he),O.length===X)break}return se}_createTree(O){const V=new u.KDBush(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<O.length;X+=this.stride)V.add(O[X],O[X+1]);return V.finish(),V.data=O,V}_addTileFeatures(O,V,X,ie,se,_e){for(const he of O){const le=he*this.stride,xe=V[le+Dt]>1;let De,Re,Le;if(xe)De=ii(V,le,this.clusterProps),Re=V[le],Le=V[le+1];else{const lt=this.points[V[le+hn]];De=lt.properties;const[yt,Mt]=lt.geometry.coordinates;Re=Er(yt),Le=Rn(Mt)}const Et={type:1,geometry:[[Math.round(this.options.extent*(Re*se-X)),Math.round(this.options.extent*(Le*se-ie))]],tags:De};let Rt;Rt=xe||this.options.generateId?V[le+hn]:this.points[V[le+hn]].id,Rt!==void 0&&(Et.id=Rt),_e.features.push(Et)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,V){const{radius:X,extent:ie,reduce:se,minPoints:_e}=this.options,he=X/(ie*Math.pow(2,V)),le=O.data,xe=[],De=this.stride;for(let Re=0;Re<le.length;Re+=De){if(le[Re+2]<=V)continue;le[Re+2]=V;const Le=le[Re],Et=le[Re+1],Rt=O.within(le[Re],le[Re+1],he),lt=le[Re+Dt];let yt=lt;for(const Mt of Rt){const Qt=Mt*De;le[Qt+2]>V&&(yt+=le[Qt+Dt])}if(yt>lt&&yt>=_e){let Mt,Qt=Le*lt,yn=Et*lt,qt=-1;const Yt=((Re/De|0)<<5)+(V+1)+this.points.length;for(const ci of Rt){const Ct=ci*De;if(le[Ct+2]<=V)continue;le[Ct+2]=V;const dr=le[Ct+Dt];Qt+=le[Ct]*dr,yn+=le[Ct+1]*dr,le[Ct+4]=Yt,se&&(Mt||(Mt=this._map(le,Re,!0),qt=this.clusterProps.length,this.clusterProps.push(Mt)),se(Mt,this._map(le,Ct)))}le[Re+4]=Yt,xe.push(Qt/yt,yn/yt,1/0,Yt,-1,yt),se&&xe.push(qt)}else{for(let Mt=0;Mt<De;Mt++)xe.push(le[Re+Mt]);if(yt>1)for(const Mt of Rt){const Qt=Mt*De;if(!(le[Qt+2]<=V)){le[Qt+2]=V;for(let yn=0;yn<De;yn++)xe.push(le[Qt+yn])}}}}return xe}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,V,X){if(O[V+Dt]>1){const _e=this.clusterProps[O[V+Zn]];return X?Object.assign({},_e):_e}const ie=this.points[O[V+hn]].properties,se=this.options.map(ie);return X&&se===ie?Object.assign({},se):se}}function Qn(ne,O,V){return{type:"Feature",id:ne[O+hn],properties:ii(ne,O,V),geometry:{type:"Point",coordinates:[(X=ne[O],360*(X-.5)),Xt(ne[O+1])]}};var X}function ii(ne,O,V){const X=ne[O+Dt],ie=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,se=ne[O+Zn],_e=se===-1?{}:Object.assign({},V[se]);return Object.assign(_e,{cluster:!0,cluster_id:ne[O+hn],point_count:X,point_count_abbreviated:ie})}function Er(ne){return ne/360+.5}function Rn(ne){const O=Math.sin(ne*Math.PI/180),V=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return V<0?0:V>1?1:V}function Xt(ne){const O=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function fn(ne,O,V,X){for(var ie,se=X,_e=V-O>>1,he=V-O,le=ne[O],xe=ne[O+1],De=ne[V],Re=ne[V+1],Le=O+3;Le<V;Le+=3){var Et=Pe(ne[Le],ne[Le+1],le,xe,De,Re);if(Et>se)ie=Le,se=Et;else if(Et===se){var Rt=Math.abs(Le-_e);Rt<he&&(ie=Le,he=Rt)}}se>X&&(ie-O>3&&fn(ne,O,ie,X),ne[ie+2]=se,V-ie>3&&fn(ne,ie,V,X))}function Pe(ne,O,V,X,ie,se){var _e=ie-V,he=se-X;if(_e!==0||he!==0){var le=((ne-V)*_e+(O-X)*he)/(_e*_e+he*he);le>1?(V=ie,X=se):le>0&&(V+=_e*le,X+=he*le)}return(_e=ne-V)*_e+(he=O-X)*he}function Fr(ne,O,V,X){var ie={id:ne===void 0?null:ne,type:O,geometry:V,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(se){var _e=se.geometry,he=se.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")Hr(se,_e);else if(he==="Polygon"||he==="MultiLineString")for(var le=0;le<_e.length;le++)Hr(se,_e[le]);else if(he==="MultiPolygon")for(le=0;le<_e.length;le++)for(var xe=0;xe<_e[le].length;xe++)Hr(se,_e[le][xe])}(ie),ie}function Hr(ne,O){for(var V=0;V<O.length;V+=3)ne.minX=Math.min(ne.minX,O[V]),ne.minY=Math.min(ne.minY,O[V+1]),ne.maxX=Math.max(ne.maxX,O[V]),ne.maxY=Math.max(ne.maxY,O[V+1])}function tn(ne,O,V,X){if(O.geometry){var ie=O.geometry.coordinates,se=O.geometry.type,_e=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),he=[],le=O.id;if(V.promoteId?le=O.properties[V.promoteId]:V.generateId&&(le=X||0),se==="Point")Nt(ie,he);else if(se==="MultiPoint")for(var xe=0;xe<ie.length;xe++)Nt(ie[xe],he);else if(se==="LineString")ki(ie,he,_e,!1);else if(se==="MultiLineString"){if(V.lineMetrics){for(xe=0;xe<ie.length;xe++)ki(ie[xe],he=[],_e,!1),ne.push(Fr(le,"LineString",he,O.properties));return}oi(ie,he,_e,!1)}else if(se==="Polygon")oi(ie,he,_e,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(xe=0;xe<O.geometry.geometries.length;xe++)tn(ne,{id:le,geometry:O.geometry.geometries[xe],properties:O.properties},V,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xe=0;xe<ie.length;xe++){var De=[];oi(ie[xe],De,_e,!0),he.push(De)}}ne.push(Fr(le,se,he,O.properties))}}function Nt(ne,O){O.push(Ti(ne[0])),O.push(Or(ne[1])),O.push(0)}function ki(ne,O,V,X){for(var ie,se,_e=0,he=0;he<ne.length;he++){var le=Ti(ne[he][0]),xe=Or(ne[he][1]);O.push(le),O.push(xe),O.push(0),he>0&&(_e+=X?(ie*xe-le*se)/2:Math.sqrt(Math.pow(le-ie,2)+Math.pow(xe-se,2))),ie=le,se=xe}var De=O.length-3;O[2]=1,fn(O,0,De,V),O[De+2]=1,O.size=Math.abs(_e),O.start=0,O.end=O.size}function oi(ne,O,V,X){for(var ie=0;ie<ne.length;ie++){var se=[];ki(ne[ie],se,V,X),O.push(se)}}function Ti(ne){return ne/360+.5}function Or(ne){var O=Math.sin(ne*Math.PI/180),V=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return V<0?0:V>1?1:V}function Sn(ne,O,V,X,ie,se,_e,he){if(X/=O,se>=(V/=O)&&_e<X)return ne;if(_e<V||se>=X)return null;for(var le=[],xe=0;xe<ne.length;xe++){var De=ne[xe],Re=De.geometry,Le=De.type,Et=ie===0?De.minX:De.minY,Rt=ie===0?De.maxX:De.maxY;if(Et>=V&&Rt<X)le.push(De);else if(!(Rt<V||Et>=X)){var lt=[];if(Le==="Point"||Le==="MultiPoint")Xi(Re,lt,V,X,ie);else if(Le==="LineString")et(Re,lt,V,X,ie,!1,he.lineMetrics);else if(Le==="MultiLineString")Wt(Re,lt,V,X,ie,!1);else if(Le==="Polygon")Wt(Re,lt,V,X,ie,!0);else if(Le==="MultiPolygon")for(var yt=0;yt<Re.length;yt++){var Mt=[];Wt(Re[yt],Mt,V,X,ie,!0),Mt.length&&lt.push(Mt)}if(lt.length){if(he.lineMetrics&&Le==="LineString"){for(yt=0;yt<lt.length;yt++)le.push(Fr(De.id,Le,lt[yt],De.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(lt.length===1?(Le="LineString",lt=lt[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=lt.length===3?"Point":"MultiPoint"),le.push(Fr(De.id,Le,lt,De.tags))}}}return le.length?le:null}function Xi(ne,O,V,X,ie){for(var se=0;se<ne.length;se+=3){var _e=ne[se+ie];_e>=V&&_e<=X&&(O.push(ne[se]),O.push(ne[se+1]),O.push(ne[se+2]))}}function et(ne,O,V,X,ie,se,_e){for(var he,le,xe=Ie(ne),De=ie===0?$t:Pr,Re=ne.start,Le=0;Le<ne.length-3;Le+=3){var Et=ne[Le],Rt=ne[Le+1],lt=ne[Le+2],yt=ne[Le+3],Mt=ne[Le+4],Qt=ie===0?Et:Rt,yn=ie===0?yt:Mt,qt=!1;_e&&(he=Math.sqrt(Math.pow(Et-yt,2)+Math.pow(Rt-Mt,2))),Qt<V?yn>V&&(le=De(xe,Et,Rt,yt,Mt,V),_e&&(xe.start=Re+he*le)):Qt>X?yn<X&&(le=De(xe,Et,Rt,yt,Mt,X),_e&&(xe.start=Re+he*le)):Jt(xe,Et,Rt,lt),yn<V&&Qt>=V&&(le=De(xe,Et,Rt,yt,Mt,V),qt=!0),yn>X&&Qt<=X&&(le=De(xe,Et,Rt,yt,Mt,X),qt=!0),!se&&qt&&(_e&&(xe.end=Re+he*le),O.push(xe),xe=Ie(ne)),_e&&(Re+=he)}var Yt=ne.length-3;Et=ne[Yt],Rt=ne[Yt+1],lt=ne[Yt+2],(Qt=ie===0?Et:Rt)>=V&&Qt<=X&&Jt(xe,Et,Rt,lt),Yt=xe.length-3,se&&Yt>=3&&(xe[Yt]!==xe[0]||xe[Yt+1]!==xe[1])&&Jt(xe,xe[0],xe[1],xe[2]),xe.length&&O.push(xe)}function Ie(ne){var O=[];return O.size=ne.size,O.start=ne.start,O.end=ne.end,O}function Wt(ne,O,V,X,ie,se){for(var _e=0;_e<ne.length;_e++)et(ne[_e],O,V,X,ie,se,!1)}function Jt(ne,O,V,X){ne.push(O),ne.push(V),ne.push(X)}function $t(ne,O,V,X,ie,se){var _e=(se-O)/(X-O);return ne.push(se),ne.push(V+(ie-V)*_e),ne.push(1),_e}function Pr(ne,O,V,X,ie,se){var _e=(se-V)/(ie-V);return ne.push(O+(X-O)*_e),ne.push(se),ne.push(1),_e}function je(ne,O){for(var V=[],X=0;X<ne.length;X++){var ie,se=ne[X],_e=se.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")ie=At(se.geometry,O);else if(_e==="MultiLineString"||_e==="Polygon"){ie=[];for(var he=0;he<se.geometry.length;he++)ie.push(At(se.geometry[he],O))}else if(_e==="MultiPolygon")for(ie=[],he=0;he<se.geometry.length;he++){for(var le=[],xe=0;xe<se.geometry[he].length;xe++)le.push(At(se.geometry[he][xe],O));ie.push(le)}V.push(Fr(se.id,_e,ie,se.tags))}return V}function At(ne,O){var V=[];V.size=ne.size,ne.start!==void 0&&(V.start=ne.start,V.end=ne.end);for(var X=0;X<ne.length;X+=3)V.push(ne[X]+O,ne[X+1],ne[X+2]);return V}function zt(ne,O){if(ne.transformed)return ne;var V,X,ie,se=1<<ne.z,_e=ne.x,he=ne.y;for(V=0;V<ne.features.length;V++){var le=ne.features[V],xe=le.geometry,De=le.type;if(le.geometry=[],De===1)for(X=0;X<xe.length;X+=2)le.geometry.push(hr(xe[X],xe[X+1],O,se,_e,he));else for(X=0;X<xe.length;X++){var Re=[];for(ie=0;ie<xe[X].length;ie+=2)Re.push(hr(xe[X][ie],xe[X][ie+1],O,se,_e,he));le.geometry.push(Re)}}return ne.transformed=!0,ne}function hr(ne,O,V,X,ie,se){return[Math.round(V*(ne*X-ie)),Math.round(V*(O*X-se))]}function ai(ne,O,V,X,ie){for(var se=O===ie.maxZoom?0:ie.tolerance/((1<<O)*ie.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:X,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},he=0;he<ne.length;he++){_e.numFeatures++,St(_e,ne[he],se,ie);var le=ne[he].minX,xe=ne[he].minY,De=ne[he].maxX,Re=ne[he].maxY;le<_e.minX&&(_e.minX=le),xe<_e.minY&&(_e.minY=xe),De>_e.maxX&&(_e.maxX=De),Re>_e.maxY&&(_e.maxY=Re)}return _e}function St(ne,O,V,X){var ie=O.geometry,se=O.type,_e=[];if(se==="Point"||se==="MultiPoint")for(var he=0;he<ie.length;he+=3)_e.push(ie[he]),_e.push(ie[he+1]),ne.numPoints++,ne.numSimplified++;else if(se==="LineString")si(_e,ie,ne,V,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(he=0;he<ie.length;he++)si(_e,ie[he],ne,V,se==="Polygon",he===0);else if(se==="MultiPolygon")for(var le=0;le<ie.length;le++){var xe=ie[le];for(he=0;he<xe.length;he++)si(_e,xe[he],ne,V,!0,he===0)}if(_e.length){var De=O.tags||null;if(se==="LineString"&&X.lineMetrics){for(var Re in De={},O.tags)De[Re]=O.tags[Re];De.mapbox_clip_start=ie.start/ie.size,De.mapbox_clip_end=ie.end/ie.size}var Le={geometry:_e,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:De};O.id!==null&&(Le.id=O.id),ne.features.push(Le)}}function si(ne,O,V,X,ie,se){var _e=X*X;if(X>0&&O.size<(ie?_e:X))V.numPoints+=O.length/3;else{for(var he=[],le=0;le<O.length;le+=3)(X===0||O[le+2]>_e)&&(V.numSimplified++,he.push(O[le]),he.push(O[le+1])),V.numPoints++;ie&&function(xe,De){for(var Re=0,Le=0,Et=xe.length,Rt=Et-2;Le<Et;Rt=Le,Le+=2)Re+=(xe[Le]-xe[Rt])*(xe[Le+1]+xe[Rt+1]);if(Re>0===De)for(Le=0,Et=xe.length;Le<Et/2;Le+=2){var lt=xe[Le],yt=xe[Le+1];xe[Le]=xe[Et-2-Le],xe[Le+1]=xe[Et-1-Le],xe[Et-2-Le]=lt,xe[Et-1-Le]=yt}}(he,se),ne.push(he)}}function li(ne,O){var V=(O=this.options=function(ie,se){for(var _e in se)ie[_e]=se[_e];return ie}(Object.create(this.options),O)).debug;if(V&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(ie,se){var _e=[];if(ie.type==="FeatureCollection")for(var he=0;he<ie.features.length;he++)tn(_e,ie.features[he],se,he);else tn(_e,ie.type==="Feature"?ie:{geometry:ie},se);return _e}(ne,O);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(ie,se){var _e=se.buffer/se.extent,he=ie,le=Sn(ie,1,-1-_e,_e,0,-1,2,se),xe=Sn(ie,1,1-_e,2+_e,0,-1,2,se);return(le||xe)&&(he=Sn(ie,1,-_e,1+_e,0,-1,2,se)||[],le&&(he=je(le,1).concat(he)),xe&&(he=he.concat(je(xe,-1)))),he}(X,O),X.length&&this.splitTile(X,0,0,0),V&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ki(ne,O,V){return 32*((1<<ne)*V+O)+ne}function ui(ne,O){return O?ne.properties[O]:ne.id}function Ea(ne,O){if(ne==null)return!0;if(ne.type==="Feature")return ui(ne,O)!=null;if(ne.type==="FeatureCollection"){const V=new Set;for(const X of ne.features){const ie=ui(X,O);if(ie==null||V.has(ie))return!1;V.add(ie)}return!0}return!1}function Ir(ne,O){const V=new Map;if(ne!=null)if(ne.type==="Feature")V.set(ui(ne,O),ne);else for(const X of ne.features)V.set(ui(X,O),X);return V}function En(ne,O){const V=ne.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);const X=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!X)return O(null,null);const ie=new class{constructor(_e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=_e.length,this._features=_e}feature(_e){return new class{constructor(he){this._feature=he,this.extent=u.EXTENT,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const le of this._feature.geometry)he.push([new u.Point(le[0],le[1])]);return he}{const he=[];for(const le of this._feature.geometry){const xe=[];for(const De of le)xe.push(new u.Point(De[0],De[1]));he.push(xe)}return he}}toGeoJSON(he,le,xe){return N.call(this,he,le,xe)}}(this._features[_e])}}(X.features);let se=ot(ie);se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),O(null,{vectorTile:ie,rawData:se.buffer})}li.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},li.prototype.splitTile=function(ne,O,V,X,ie,se,_e){for(var he=[ne,O,V,X],le=this.options,xe=le.debug;he.length;){X=he.pop(),V=he.pop(),O=he.pop(),ne=he.pop();var De=1<<O,Re=Ki(O,V,X),Le=this.tiles[Re];if(!Le&&(xe>1&&console.time("creation"),Le=this.tiles[Re]=ai(ne,O,V,X,le),this.tileCoords.push({z:O,x:V,y:X}),xe)){xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,V,X,Le.numFeatures,Le.numPoints,Le.numSimplified),console.timeEnd("creation"));var Et="z"+O;this.stats[Et]=(this.stats[Et]||0)+1,this.total++}if(Le.source=ne,ie){if(O===le.maxZoom||O===ie)continue;var Rt=1<<ie-O;if(V!==Math.floor(se/Rt)||X!==Math.floor(_e/Rt))continue}else if(O===le.indexMaxZoom||Le.numPoints<=le.indexMaxPoints)continue;if(Le.source=null,ne.length!==0){xe>1&&console.time("clipping");var lt,yt,Mt,Qt,yn,qt,Yt=.5*le.buffer/le.extent,ci=.5-Yt,Ct=.5+Yt,dr=1+Yt;lt=yt=Mt=Qt=null,yn=Sn(ne,De,V-Yt,V+Ct,0,Le.minX,Le.maxX,le),qt=Sn(ne,De,V+ci,V+dr,0,Le.minX,Le.maxX,le),ne=null,yn&&(lt=Sn(yn,De,X-Yt,X+Ct,1,Le.minY,Le.maxY,le),yt=Sn(yn,De,X+ci,X+dr,1,Le.minY,Le.maxY,le),yn=null),qt&&(Mt=Sn(qt,De,X-Yt,X+Ct,1,Le.minY,Le.maxY,le),Qt=Sn(qt,De,X+ci,X+dr,1,Le.minY,Le.maxY,le),qt=null),xe>1&&console.timeEnd("clipping"),he.push(lt||[],O+1,2*V,2*X),he.push(yt||[],O+1,2*V,2*X+1),he.push(Mt||[],O+1,2*V+1,2*X),he.push(Qt||[],O+1,2*V+1,2*X+1)}}},li.prototype.getTile=function(ne,O,V){var X=this.options,ie=X.extent,se=X.debug;if(ne<0||ne>24)return null;var _e=1<<ne,he=Ki(ne,O=(O%_e+_e)%_e,V);if(this.tiles[he])return zt(this.tiles[he],ie);se>1&&console.log("drilling down to z%d-%d-%d",ne,O,V);for(var le,xe=ne,De=O,Re=V;!le&&xe>0;)xe--,De=Math.floor(De/2),Re=Math.floor(Re/2),le=this.tiles[Ki(xe,De,Re)];return le&&le.source?(se>1&&console.log("found parent tile z%d-%d-%d",xe,De,Re),se>1&&console.time("drilling down"),this.splitTile(le.source,xe,De,Re,ne,O,V),se>1&&console.timeEnd("drilling down"),this.tiles[he]?zt(this.tiles[he],ie):null):null};class Ml extends j{constructor(O,V,X,ie){super(O,V,X,En),this._dataUpdateable=new Map,this.loadGeoJSON=(se,_e)=>{const{promoteId:he}=se;if(se.request)return u.getJSON(se.request,(le,xe,De,Re)=>{this._dataUpdateable=Ea(xe,he)?Ir(xe,he):void 0,_e(le,xe,De,Re)});if(typeof se.data=="string")try{const le=JSON.parse(se.data);this._dataUpdateable=Ea(le,he)?Ir(le,he):void 0,_e(null,le)}catch{_e(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`))}else se.dataDiff?this._dataUpdateable?(function(le,xe,De){var Re,Le,Et,Rt;if(xe.removeAll&&le.clear(),xe.remove)for(const lt of xe.remove)le.delete(lt);if(xe.add)for(const lt of xe.add){const yt=ui(lt,De);yt!=null&&le.set(yt,lt)}if(xe.update)for(const lt of xe.update){let yt=le.get(lt.id);if(yt==null)continue;const Mt=!lt.removeAllProperties&&(((Re=lt.removeProperties)===null||Re===void 0?void 0:Re.length)>0||((Le=lt.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((lt.newGeometry||lt.removeAllProperties||Mt)&&(yt={...yt},le.set(lt.id,yt),Mt&&(yt.properties={...yt.properties})),lt.newGeometry&&(yt.geometry=lt.newGeometry),lt.removeAllProperties)yt.properties={};else if(((Et=lt.removeProperties)===null||Et===void 0?void 0:Et.length)>0)for(const Qt of lt.removeProperties)Object.prototype.hasOwnProperty.call(yt.properties,Qt)&&delete yt.properties[Qt];if(((Rt=lt.addOrUpdateProperties)===null||Rt===void 0?void 0:Rt.length)>0)for(const{key:Qt,value:yn}of lt.addOrUpdateProperties)yt.properties[Qt]=yn}}(this._dataUpdateable,se.dataDiff,he),_e(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):_e(new Error(`Cannot update existing geojson data in ${se.source}`)):_e(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ie&&(this.loadGeoJSON=ie)}loadData(O,V){var X;(X=this._pendingRequest)===null||X===void 0||X.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request);this._pendingCallback=V,this._pendingRequest=this.loadGeoJSON(O,(se,_e)=>{if(delete this._pendingCallback,delete this._pendingRequest,se||!_e)return V(se);if(typeof _e!="object")return V(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{B(_e,!0);try{if(O.filter){const le=u.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(De=>`${De.key}: ${De.message}`).join(", "));const xe=_e.features.filter(De=>le.value.evaluate({zoom:0},De));_e={type:"FeatureCollection",features:xe}}this._geoJSONIndex=O.cluster?new dn(function({superclusterOptions:le,clusterProperties:xe}){if(!xe||!le)return le;const De={},Re={},Le={accumulated:null,zoom:0},Et={properties:null},Rt=Object.keys(xe);for(const lt of Rt){const[yt,Mt]=xe[lt],Qt=u.createExpression(Mt),yn=u.createExpression(typeof yt=="string"?[yt,["accumulated"],["get",lt]]:yt);De[lt]=Qt.value,Re[lt]=yn.value}return le.map=lt=>{Et.properties=lt;const yt={};for(const Mt of Rt)yt[Mt]=De[Mt].evaluate(Le,Et);return yt},le.reduce=(lt,yt)=>{Et.properties=yt;for(const Mt of Rt)Le.accumulated=lt[Mt],lt[Mt]=Re[Mt].evaluate(Le,Et)},le}(O)).load(_e.features):function(le,xe){return new li(le,xe)}(_e,O.geojsonVtOptions)}catch(le){return V(le)}this.loaded={};const he={};if(ie){const le=ie.finish();le&&(he.resourceTiming={},he.resourceTiming[O.source]=JSON.parse(JSON.stringify(le)))}V(null,he)}})}reloadTile(O,V){const X=this.loaded;return X&&X[O.uid]?super.reloadTile(O,V):this.loadTile(O,V)}removeSource(O,V){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),V()}getClusterExpansionZoom(O,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(X){V(X)}}getClusterChildren(O,V){try{V(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(X){V(X)}}getClusterLeaves(O,V){try{V(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(X){V(X)}}}class $o{constructor(O){this.self=O,this.actor=new u.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:Ml},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(V,X)=>{if(this.workerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.workerSourceTypes[V]=X},this.self.registerRTLTextPlugin=V=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=V.applyArabicShaping,u.plugin.processBidirectionalText=V.processBidirectionalText,u.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}}setReferrer(O,V){this.referrer=V}setImages(O,V,X){this.availableImages[O]=V;for(const ie in this.workerSources[O]){const se=this.workerSources[O][ie];for(const _e in se)se[_e].availableImages=V}X()}setLayers(O,V,X){this.getLayerIndex(O).replace(V),X()}updateLayers(O,V,X){this.getLayerIndex(O).update(V.layers,V.removedIds),X()}loadTile(O,V,X){this.getWorkerSource(O,V.type,V.source).loadTile(V,X)}loadDEMTile(O,V,X){this.getDEMWorkerSource(O,V.source).loadTile(V,X)}reloadTile(O,V,X){this.getWorkerSource(O,V.type,V.source).reloadTile(V,X)}abortTile(O,V,X){this.getWorkerSource(O,V.type,V.source).abortTile(V,X)}removeTile(O,V,X){this.getWorkerSource(O,V.type,V.source).removeTile(V,X)}removeDEMTile(O,V){this.getDEMWorkerSource(O,V.source).removeTile(V)}removeSource(O,V,X){if(!this.workerSources[O]||!this.workerSources[O][V.type]||!this.workerSources[O][V.type][V.source])return;const ie=this.workerSources[O][V.type][V.source];delete this.workerSources[O][V.type][V.source],ie.removeSource!==void 0?ie.removeSource(V,X):X()}loadWorkerSource(O,V,X){try{this.self.importScripts(V.url),X()}catch(ie){X(ie.toString())}}syncRTLPluginState(O,V,X){try{u.plugin.setState(V);const ie=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&ie!=null){this.self.importScripts(ie);const se=u.plugin.isParsed();X(se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ie}`),se)}}catch(ie){X(ie.toString())}}getAvailableImages(O){let V=this.availableImages[O];return V||(V=[]),V}getLayerIndex(O){let V=this.layerIndexes[O];return V||(V=this.layerIndexes[O]=new S),V}getWorkerSource(O,V,X){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][V]||(this.workerSources[O][V]={}),!this.workerSources[O][V][X]){const ie={send:(se,_e,he)=>{this.actor.send(se,_e,he,O)}};this.workerSources[O][V][X]=new this.workerSourceTypes[V](ie,this.getLayerIndex(O),this.getAvailableImages(O))}return this.workerSources[O][V][X]}getDEMWorkerSource(O,V){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][V]||(this.demWorkerSources[O][V]=new Z),this.demWorkerSources[O][V]}}return u.isWorker()&&(self.worker=new $o(self)),$o}),h(["./shared"],function(u){var S="3.3.1";class b{static testProp(i){if(!b.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in b.docStyle)return i[c];return i[0]}static create(i,c,f){const m=window.document.createElement(i);return c!==void 0&&(m.className=c),f&&f.appendChild(m),m}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(i,c){i.style[b.transformProp]=c}static addEventListener(i,c,f,m={}){i.addEventListener(c,f,"passive"in m?m:m.capture)}static removeEventListener(i,c,f,m={}){i.removeEventListener(c,f,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(i,c){const f=i.getBoundingClientRect();return new u.Point(c.clientX-f.left-i.clientLeft,c.clientY-f.top-i.clientTop)}static touchPos(i,c){const f=i.getBoundingClientRect(),m=[];for(let v=0;v<c.length;v++)m.push(new u.Point(c[v].clientX-f.left-i.clientLeft,c[v].clientY-f.top-i.clientTop));return m}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}b.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(y){!j&&z&&(Z?H(y):A=y)}};let A,z,j=!1,Z=!1;function H(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,z),y.isContextLost())return;C.supported=!0}catch{}y.deleteTexture(i),j=!0}var de,B;typeof document!="undefined"&&(z=document.createElement("img"),z.onload=function(){A&&H(A),A=null,Z=!0},z.onerror=function(){j=!0,A=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,f,m;y.resetRequestQueue=()=>{i=[],c=0,f=0,m={}},y.addThrottleControl=M=>{const D=f++;return m[D]=M,D},y.removeThrottleControl=M=>{delete m[M],k()},y.getImage=(M,D,L=!0)=>{C.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*");const U={requestParameters:M,supportImageRefresh:L,callback:D,cancelled:!1,completed:!1,cancel:()=>{U.completed||U.cancelled||(U.cancelled=!0,U.innerRequest&&(U.innerRequest.cancel(),c--),k())}};return i.push(U),k(),U};const v=M=>{const{requestParameters:D,supportImageRefresh:L,callback:U}=M;return u.extend(D,{type:"image"}),(L!==!1||u.isWorker()||u.getProtocolAction(D.url)||D.headers&&!Object.keys(D.headers).reduce((Q,J)=>Q&&J==="accept",!0)?u.makeRequest:P)(D,(Q,J,te,Y)=>{E(M,U,Q,J,te,Y)})},E=(M,D,L,U,Q,J)=>{L?D(L):U instanceof HTMLImageElement||u.isImageBitmap(U)?D(null,U):U&&((te,Y)=>{typeof createImageBitmap=="function"?u.arrayBufferToImageBitmap(te,Y):u.arrayBufferToImage(te,Y)})(U,(te,Y)=>{te!=null?D(te):Y!=null&&D(null,Y,{cacheControl:Q,expires:J})}),M.cancelled||(M.completed=!0,c--,k())},k=()=>{const M=(()=>{const D=Object.keys(m);let L=!1;if(D.length>0){for(const U of D)if(L=m[U](),L)break}return L})()?u.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let D=c;D<M&&i.length>0;D++){const L=i.shift();if(L.cancelled){D--;continue}const U=v(L);c++,L.innerRequest=U}},P=(M,D)=>{const L=new Image,U=M.url;let Q=!1;const J=M.credentials;return J&&J==="include"?L.crossOrigin="use-credentials":(J&&J==="same-origin"||!u.sameOrigin(U))&&(L.crossOrigin="anonymous"),L.fetchPriority="high",L.onload=()=>{D(null,L),L.onerror=L.onload=null},L.onerror=()=>{Q||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),L.onerror=L.onload=null},L.src=U,{cancel:()=>{Q=!0,L.src=""}}}}(de||(de={})),de.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(B||(B={}));class N{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,f){const m=function(v){const E=v.match(K);if(!E)throw new Error(`Unable to parse URL "${v}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(i);return m.path+=`${c}${f}`,function(v){const E=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${E}`}(m)}setTransformRequest(i){this._transformRequestFn=i}}const K=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ce(y){var i=new u.ARRAY_TYPE(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var ue,ye=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};ue=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0);var me=function(y){var i=y[0],c=y[1];return i*i+c*c};function Te(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:f,url:m}of y){const v=`${f}${m}`;c.indexOf(v)===-1&&(c.push(v),i.push({id:f,url:m}))}}return i}function Ne(y,i,c,f,m){if(f)return void y(f);if(m!==Object.values(i).length||m!==Object.values(c).length)return;const v={};for(const E in i){v[E]={};const k=u.browser.getImageCanvasContext(c[E]),P=i[E];for(const M in P){const{width:D,height:L,x:U,y:Q,sdf:J,pixelRatio:te,stretchX:Y,stretchY:pe,content:Se}=P[M];v[E][M]={data:null,pixelRatio:te,sdf:J,stretchX:Y,stretchY:pe,content:Se,spriteData:{width:D,height:L,x:U,y:Q,context:k}}}}y(null,v)}(function(){var y=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(y[0]=0,y[1]=0)})();class we{constructor(i,c,f,m){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(c,m)}update(i,c,f){const{width:m,height:v}=i,E=!(this.size&&this.size[0]===m&&this.size[1]===v||f),{context:k}=this,{gl:P}=k;if(this.useMipmap=Boolean(c&&c.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!c||c.premultiply!==!1)),E)this.size=[m,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,i):P.texImage2D(P.TEXTURE_2D,0,this.format,m,v,0,this.format,P.UNSIGNED_BYTE,i.data);else{const{x:M,y:D}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?P.texSubImage2D(P.TEXTURE_2D,0,M,D,P.RGBA,P.UNSIGNED_BYTE,i):P.texSubImage2D(P.TEXTURE_2D,0,M,D,m,v,P.RGBA,P.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(i,c,f){const{context:m}=this,{gl:v}=m;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||i),this.filter=i),c!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function nt(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class wt extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:f}of this.requestors)this._notify(c,f);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new u.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let f=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(const m of i){if(m[0]<f||m[1]<m[0]||c<m[1])return!1;f=m[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const f=c.spriteData,m=f&&f.width||c.data.width,v=f&&f.height||c.data.height;return!(i[0]<0||m<i[0]||i[1]<0||v<i[1]||i[2]<0||m<i[2]||i[3]<0||v<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,f=!0){const m=this.getImage(i);if(f&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let f=!0;if(!this.isLoaded())for(const m of i)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const f={};for(const m of i){let v=this.getImage(m);v||(this.fire(new u.Event("styleimagemissing",{id:m})),v=this.getImage(m)),v?f[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:Boolean(v.userImage&&v.userImage.render)}:u.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,f)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],f=this.getImage(i);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new u.ImagePosition(m,f);this.patterns[i]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new we(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:c,h:f}=u.potpack(i),m=this.atlasImage;m.resize({width:c||1,height:f||1});for(const v in this.patterns){const{bin:E}=this.patterns[v],k=E.x+1,P=E.y+1,M=this.getImage(v).data,D=M.width,L=M.height;u.RGBAImage.copy(M,m,{x:0,y:0},{x:k,y:P},{width:D,height:L}),u.RGBAImage.copy(M,m,{x:0,y:L-1},{x:k,y:P-1},{width:D,height:1}),u.RGBAImage.copy(M,m,{x:0,y:0},{x:k,y:P+L},{width:D,height:1}),u.RGBAImage.copy(M,m,{x:D-1,y:0},{x:k-1,y:P},{width:1,height:L}),u.RGBAImage.copy(M,m,{x:0,y:0},{x:k+D,y:P},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||u.warnOnce(`Image with ID: "${c}" was not found`),nt(f)&&this.updateImage(c,f)}}}const It=1e20;function Lt(y,i,c,f,m,v,E,k,P){for(let M=i;M<i+f;M++)Bt(y,c*v+M,v,m,E,k,P);for(let M=c;M<c+m;M++)Bt(y,M*v+i,1,f,E,k,P)}function Bt(y,i,c,f,m,v,E){v[0]=0,E[0]=-It,E[1]=It,m[0]=y[i];for(let k=1,P=0,M=0;k<f;k++){m[k]=y[i+k*c];const D=k*k;do{const L=v[P];M=(m[k]-m[L]+D-L*L)/(k-L)/2}while(M<=E[P]&&--P>-1);P++,v[P]=k,E[P]=M,E[P+1]=It}for(let k=0,P=0;k<f;k++){for(;E[P+1]<k;)P++;const M=v[P],D=k-M;y[i+k*c]=m[M]+D*D}}class cn{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const f=[];for(const m in i)for(const v of i[m])f.push({stack:m,id:v});u.asyncAll(f,({stack:m,id:v},E)=>{let k=this.entries[m];k||(k=this.entries[m]={glyphs:{},requests:{},ranges:{}});let P=k.glyphs[v];if(P!==void 0)return void E(null,{stack:m,id:v,glyph:P});if(P=this._tinySDF(k,m,v),P)return k.glyphs[v]=P,void E(null,{stack:m,id:v,glyph:P});const M=Math.floor(v/256);if(256*M>65535)return void E(new Error("glyphs > 65535 not supported"));if(k.ranges[M])return void E(null,{stack:m,id:v,glyph:P});if(!this.url)return void E(new Error("glyphsUrl is not set"));let D=k.requests[M];D||(D=k.requests[M]=[],cn.loadGlyphRange(m,M,this.url,this.requestManager,(L,U)=>{if(U){for(const Q in U)this._doesCharSupportLocalGlyph(+Q)||(k.glyphs[+Q]=U[+Q]);k.ranges[M]=!0}for(const Q of D)Q(L,U);delete k.requests[M]})),D.push((L,U)=>{L?E(L):U&&E(null,{stack:m,id:v,glyph:U[v]||null})})},(m,v)=>{if(m)c(m);else if(v){const E={};for(const{stack:k,id:P,glyph:M}of v)(E[k]||(E[k]={}))[P]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};c(null,E)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](i)||u.unicodeBlockLookup["Hangul Syllables"](i)||u.unicodeBlockLookup.Hiragana(i)||u.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let v=i.tinySDF;if(!v){let k="400";/bold/i.test(c)?k="900":/medium/i.test(c)?k="500":/light/i.test(c)&&(k="200"),v=i.tinySDF=new cn.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:k})}const E=v.draw(String.fromCharCode(f));return{id:f,bitmap:new u.AlphaImage({width:E.width||30,height:E.height||30},E.data),metrics:{width:E.glyphWidth||24,height:E.glyphHeight||24,left:E.glyphLeft||0,top:E.glyphTop-27||-8,advance:E.glyphAdvance||24}}}}cn.loadGlyphRange=function(y,i,c,f,m){const v=256*i,E=v+255,k=f.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${v}-${E}`),B.Glyphs);u.getArrayBuffer(k,(P,M)=>{if(P)m(P);else if(M){const D={};for(const L of u.parseGlyphPbf(M))D[L.id]=L;m(null,D)}})},cn.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:E="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=c;const k=this.size=y+4*i,P=this._createCanvas(k),M=this.ctx=P.getContext("2d",{willReadFrequently:!0});M.font=`${E} ${v} ${y}px ${m}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(y),E=Math.ceil(c),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),P=Math.min(this.size-this.buffer,E+Math.ceil(f)),M=k+2*this.buffer,D=P+2*this.buffer,L=Math.max(M*D,0),U=new Uint8ClampedArray(L),Q={data:U,width:M,height:D,glyphWidth:k,glyphHeight:P,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(k===0||P===0)return Q;const{ctx:J,buffer:te,gridInner:Y,gridOuter:pe}=this;J.clearRect(te,te,k,P),J.fillText(y,te,te+E);const Se=J.getImageData(te,te,k,P);pe.fill(It,0,L),Y.fill(0,0,L);for(let oe=0;oe<P;oe++)for(let ge=0;ge<k;ge++){const ke=Se.data[4*(oe*k+ge)+3]/255;if(ke===0)continue;const Ce=(oe+te)*M+ge+te;if(ke===1)pe[Ce]=0,Y[Ce]=It;else{const Ae=.5-ke;pe[Ce]=Ae>0?Ae*Ae:0,Y[Ce]=Ae<0?Ae*Ae:0}}Lt(pe,0,0,M,D,M,this.f,this.v,this.z),Lt(Y,te,te,k,P,M,this.f,this.v,this.z);for(let oe=0;oe<L;oe++){const ge=Math.sqrt(pe[oe])-Math.sqrt(Y[oe]);U[oe]=Math.round(255-255*(ge/this.radius+this.cutoff))}return Q}};class bn{constructor(){this.specification=u.v8Spec.light.position}possiblyEvaluate(i,c){return u.sphericalToCartesian(i.expression.evaluate(c))}interpolate(i,c,f){return{x:u.interpolate.number(i.x,c.x,f),y:u.interpolate.number(i.y,c.y,f),z:u.interpolate.number(i.z,c.z,f)}}}let Ue,ot;class Tt extends u.Evented{constructor(i){super(),Ue=Ue||new u.Properties({anchor:new u.DataConstantProperty(u.v8Spec.light.anchor),position:new bn,color:new u.DataConstantProperty(u.v8Spec.light.color),intensity:new u.DataConstantProperty(u.v8Spec.light.intensity)}),this._transitionable=new u.Transitionable(Ue),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.validateLight,i,c))for(const f in i){const m=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&u.emitValidationErrors(this,i.call(u.validateStyle,u.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v8Spec})))}}class Ot{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const f=i.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,c)),this.dashEntry[f]}getDashRanges(i,c,f){const m=[];let v=i.length%2==1?-i[i.length-1]*f:0,E=i[0]*f,k=!0;m.push({left:v,right:E,isDash:k,zeroLength:i[0]===0});let P=i[0];for(let M=1;M<i.length;M++){k=!k;const D=i[M];v=P*f,P+=D,E=P*f,m.push({left:v,right:E,isDash:k,zeroLength:D===0})}return m}addRoundDash(i,c,f){const m=c/2;for(let v=-f;v<=f;v++){const E=this.width*(this.nextRow+f+v);let k=0,P=i[k];for(let M=0;M<this.width;M++){M/P.right>1&&(P=i[++k]);const D=Math.abs(M-P.left),L=Math.abs(M-P.right),U=Math.min(D,L);let Q;const J=v/f*(m+1);if(P.isDash){const te=m-Math.abs(J);Q=Math.sqrt(U*U+te*te)}else Q=m-Math.sqrt(U*U+J*J);this.data[E+M]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(i){for(let k=i.length-1;k>=0;--k){const P=i[k],M=i[k+1];P.zeroLength?i.splice(k,1):M&&M.isDash===P.isDash&&(M.left=P.left,i.splice(k,1))}const c=i[0],f=i[i.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const m=this.width*this.nextRow;let v=0,E=i[v];for(let k=0;k<this.width;k++){k/E.right>1&&(E=i[++v]);const P=Math.abs(k-E.left),M=Math.abs(k-E.right),D=Math.min(P,M);this.data[m+k]=Math.max(0,Math.min(255,(E.isDash?D:-D)+128))}}addDash(i,c){const f=c?7:0,m=2*f+1;if(this.nextRow+m>this.height)return u.warnOnce("LineAtlas out of space"),null;let v=0;for(let k=0;k<i.length;k++)v+=i[k];if(v!==0){const k=this.width/v,P=this.getDashRanges(i,this.width,k);c?this.addRoundDash(P,k,f):this.addRegularDash(P)}const E={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=m,this.dirty=!0,E}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class at{constructor(i,c,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let v=0;v<m.length;v++){const E=new at.Actor(m[v],c,f);E.name=`Worker ${v}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,f){u.asyncAll(this.actors,(m,v)=>{m.send(i,c,v)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function hn(y,i,c){const f=function(m,v){if(m)return c(m);if(v){const E=u.pick(u.extend(v,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(E.vectorLayers=v.vector_layers,E.vectorLayerIds=E.vectorLayers.map(k=>k.id)),c(null,E)}};return y.url?u.getJSON(i.transformRequest(y.url,B.Source),f):u.browser.frame(()=>f(null,y))}at.Actor=u.Actor;class Dt{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}extend(i){const c=this._sw,f=this._ne;let m,v;if(i instanceof u.LngLat)m=i,v=i;else{if(!(i instanceof Dt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dt.convert(i)):this.extend(u.LngLat.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.LngLat.convert(i)):this;if(m=i._sw,v=i._ne,!m||!v)return this}return c||f?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new u.LngLat(m.lng,m.lat),this._ne=new u.LngLat(v.lng,v.lat)),this}getCenter(){return new u.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new u.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:f}=u.LngLat.convert(i);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(i){return i instanceof Dt?i:i&&new Dt(i)}static fromLngLat(i,c=0){const f=360*c/40075017,m=f/Math.cos(Math.PI/180*i.lat);return new Dt(new u.LngLat(i.lng-m,i.lat-f),new u.LngLat(i.lng+m,i.lat+f))}}class Zn{constructor(i,c,f){this.bounds=Dt.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*c),m=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*c),v=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*c),E=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=f&&i.x<v&&i.y>=m&&i.y<E}}class dn extends u.Evented{constructor(i,c,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=hn(this._options,this.map._requestManager,(v,E)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),v?this.fire(new u.ErrorEvent(v)):E&&(u.extend(this,E),E.bounds&&(this.tileBounds=new Zn(E.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.extend({},this._options),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(c,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,B.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(E,k){return delete i.request,i.aborted?c(null):E&&E.status!==404?c(E):(k&&k.resourceTiming&&(i.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&i.setExpiryData(k),i.loadVectorData(k,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",m,v.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",m,v.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Qn extends u.Evented{constructor(i,c,f,m){super(),this.id=i,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},c),u.extend(this,u.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=hn(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new u.ErrorEvent(i)):c&&(u.extend(this,c),c.bounds&&(this.tileBounds=new Zn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=de.getImage(this.map._requestManager.transformRequest(f,B.Tile),(m,v,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(m)i.state="errored",c(m);else if(v){this.map._refreshExpiredTiles&&E&&i.setExpiryData(E);const k=this.map.painter.context,P=k.gl;i.texture=this.map.painter.getTileTexture(v.width),i.texture?i.texture.update(v,{useMipmap:!0}):(i.texture=new we(k,v,P.RGBA,{useMipmap:!0}),i.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class ii extends Qn{constructor(i,c,f,m){super(i,c,f,m),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(v,E){v&&(i.state="errored",c(v)),E&&(i.dem=E,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.request=de.getImage(this.map._requestManager.transformRequest(f,B.Tile),function(v,E){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(v)i.state="errored",c(v);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(E),delete E.cacheControl,delete E.expires;const k=u.isImageBitmap(E)&&(ot==null&&(ot=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ot)?E:u.browser.getImageData(E,1),P={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:k,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",P,m.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,f=Math.pow(2,c.z),m=(c.x-1+f)%f,v=c.x===0?i.wrap-1:i.wrap,E=(c.x+1+f)%f,k=c.x+1===f?i.wrap+1:i.wrap,P={};return P[new u.OverscaledTileID(i.overscaledZ,v,c.z,m,c.y).key]={backfilled:!1},P[new u.OverscaledTileID(i.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(P[new u.OverscaledTileID(i.overscaledZ,v,c.z,m,c.y-1).key]={backfilled:!1},P[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},P[new u.OverscaledTileID(i.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<f&&(P[new u.OverscaledTileID(i.overscaledZ,v,c.z,m,c.y+1).key]={backfilled:!1},P[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},P[new u.OverscaledTileID(i.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1}),P}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Er extends u.Evented{constructor(i,c,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.extend({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=c.data,this._options=u.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const v=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*v,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*v,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.EXTENT,radius:(c.clusterRadius||50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:f},m),this}_updateWorkerData(i){const c=u.extend({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(u.browser.resolveURL(this._data),B.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new u.Event("dataabort",{dataType:"source"}));let v=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new u.ErrorEvent(f));const E={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&u.extend(E,{resourceTiming:v}),this.fire(new u.Event("data",{...E,sourceDataType:"metadata"})),this.fire(new u.Event("data",{...E,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const m={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,m,(v,E)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):v?c(v):(i.loadVectorData(E,this.map.painter,f==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Rn=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Xt extends u.Evented{constructor(i,c,f,m){super(),this.load=(v,E)=>{this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=de.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(k,P)=>{this._request=null,this._loaded=!0,k?this.fire(new u.ErrorEvent(k)):P&&(this.image=P,v&&(this.coordinates=v),E&&E(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const v=this.map.painter.context,E=v.gl;this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Rn.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new we(v,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const M=this.tiles[P];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,k=!0)}k&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(m){let v=1/0,E=1/0,k=-1/0,P=-1/0;for(const U of m)v=Math.min(v,U.x),E=Math.min(E,U.y),k=Math.max(k,U.x),P=Math.max(P,U.y);const M=Math.max(k-v,P-E),D=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),L=Math.pow(2,D);return new u.CanonicalTileID(D,Math.floor((v+k)/2*L),Math.floor((E+P)/2*L))}(c),this.minzoom=this.maxzoom=this.tileID.z;const f=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class fn extends Xt{constructor(i,c,f,m){super(i,c,f,m),this.load=()=>{this._loaded=!1;const v=this.options;this.urls=[];for(const E of v.urls)this.urls.push(this.map._requestManager.transformRequest(E,B.Source).url);u.getVideo(this.urls,(E,k)=>{this._loaded=!0,E?this.fire(new u.ErrorEvent(E)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,E=v.gl;this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Rn.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new we(v,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const M=this.tiles[P];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,k=!0)}k&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Pe extends Xt{constructor(i,c,f,m){super(i,c,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const E=this.map.painter.context,k=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,Rn.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new we(E,this.canvas,k.RGBA,{premultiply:!0});let P=!1;for(const M in this.tiles){const D=this.tiles[M];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,P=!0)}P&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(E=>typeof E!="number"))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Fr={},Hr=y=>{switch(y){case"geojson":return Er;case"image":return Xt;case"raster":return Qn;case"raster-dem":return ii;case"vector":return dn;case"video":return fn;case"canvas":return Pe}return Fr[y]};function tn(y,i){const c=u.create();return u.translate(c,c,[1,1,0]),u.scale(c,c,[.5*y.width,.5*y.height,1]),u.multiply(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function Nt(y,i,c,f,m,v){const E=function(L,U,Q){if(L)for(const J of L){const te=U[J];if(te&&te.source===Q&&te.type==="fill-extrusion")return!0}else for(const J in U){const te=U[J];if(te.source===Q&&te.type==="fill-extrusion")return!0}return!1}(m&&m.layers,i,y.id),k=v.maxPitchScaleFactor(),P=y.tilesIn(f,k,E);P.sort(ki);const M=[];for(const L of P)M.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,c,y._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,m,v,k,tn(y.transform,L.tileID))});const D=function(L){const U={},Q={};for(const J of L){const te=J.queryResults,Y=J.wrappedTileID,pe=Q[Y]=Q[Y]||{};for(const Se in te){const oe=te[Se],ge=pe[Se]=pe[Se]||{},ke=U[Se]=U[Se]||[];for(const Ce of oe)ge[Ce.featureIndex]||(ge[Ce.featureIndex]=!0,ke.push(Ce))}}return U}(M);for(const L in D)D[L].forEach(U=>{const Q=U.feature,J=y.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=J});return D}function ki(y,i){const c=y.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}class oi{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,v){const E={};if(!v)return E;for(const k of m){const P=k.layerIds.map(M=>v.getLayer(M)).filter(Boolean);if(P.length!==0){k.layers=P,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(M=>P.filter(D=>D.id===M)[0]));for(const M of P)E[M.id]=k}}return E}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof u.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new we(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new we(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,f,m,v,E,k,P,M,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:E,tileSize:this.tileSize,pixelPosMatrix:D,transform:P,params:k,queryPadding:this.queryPadding*M},i,c,f):{}}querySourceFeatures(i,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),v=c&&c.sourceLayer?c.sourceLayer:"",E=m._geojsonTileLayer||m[v];if(!E)return;const k=u.createFilter(c&&c.filter),{z:P,x:M,y:D}=this.tileID.canonical,L={z:P,x:M,y:D};for(let U=0;U<E.length;U++){const Q=E.feature(U);if(k.needGeometry){const Y=u.toEvaluationFeature(Q,!0);if(!k.filter(new u.EvaluationParameters(this.tileID.overscaledZ),Y,this.tileID.canonical))continue}else if(!k.filter(new u.EvaluationParameters(this.tileID.overscaledZ),Q))continue;const J=f.getId(Q,v),te=new u.GeoJSONFeature(Q,P,M,D,J);te.tile=L,i.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const f=u.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const v=this.expirationTime-c;v?this.expirationTime=f+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const v=this.buckets[m],E=v.layers[0].sourceLayer||"_geojsonTileLayer",k=f[E],P=i[E];if(!k||!P||Object.keys(P).length===0)continue;v.update(P,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const M=c&&c.style&&c.style.getLayer(m);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=u.browser.now()+i}setDependencies(i,c){const f={};for(const m of c)f[m]=!0;this.dependencies[i]=f}hasDependency(i,c){for(const f of i){const m=this.dependencies[f];if(m){for(const v of c)if(m[v])return!0}}return!1}}class Ti{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:c,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},f)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const f=i.wrapped().key,m=c===void 0?0:this.data[f].indexOf(c),v=this.data[f][m];return this.data[f].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const f in this.data)for(const m of this.data[f])i(m.value)||c.push(m);for(const f of c)this.remove(f.value.tileID,f)}}class Or{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){const m=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},u.extend(this.stateChanges[i][m],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==m&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const v in this.state[i][m])f[v]||(this.deletedStates[i][m][v]=null)}else for(const v in f)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][v]===null&&delete this.deletedStates[i][m][v]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;const m=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][f]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(f in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][f]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,c){const f=String(c),m=u.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][c];if(v===null)return{};for(const E in v)delete m[E]}return m}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const E in this.stateChanges[m])this.state[m][E]||(this.state[m][E]={}),u.extend(this.state[m][E],this.stateChanges[m][E]),v[E]=this.state[m][E];f[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const E in this.state[m])v[E]={},this.state[m][E]={};else for(const E in this.deletedStates[m]){if(this.deletedStates[m][E]===null)this.state[m][E]={};else for(const k of Object.keys(this.deletedStates[m][E]))delete this.state[m][E][k];v[E]=this.state[m][E]}f[m]=f[m]||{},u.extend(f[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in i)i[m].setFeatureState(f,c)}}class Sn extends u.Evented{constructor(i,c,f){super(),this.id=i,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,E,k)=>{const P=new(Hr(v.type))(m,v,E,k);if(P.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${P.id}`);return P})(i,c,f,this),this._tiles={},this._cache=new Ti(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Or,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new u.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Xi).map(i=>i.key)}getRenderableIds(i){const c=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&c.push(this._tiles[f]);return i?c.sort((f,m)=>{const v=f.tileID,E=m.tileID,k=new u.Point(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),P=new u.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-E.overscaledZ||P.y-k.y||P.x-k.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(Xi).map(f=>f.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),this._loadTile(f,this._tileLoaded.bind(this,f,i,c)))}_tileLoaded(i,c,f,m){if(m)return i.state="errored",void(m.status!==404?this._source.fire(new u.ErrorEvent(m,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=u.browser.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const v=c[m];if(i.neighboringTiles&&i.neighboringTiles[v]){const E=this.getTileByID(v);f(i,E),f(E,i)}}function f(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let E=v.tileID.canonical.x-m.tileID.canonical.x;const k=v.tileID.canonical.y-m.tileID.canonical.y,P=Math.pow(2,m.tileID.canonical.z),M=v.tileID.key;E===0&&k===0||Math.abs(k)>1||(Math.abs(E)>1&&(Math.abs(E+P)===1?E+=P:Math.abs(E-P)===1&&(E-=P)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,E,k),m.neighboringTiles&&m.neighboringTiles[M]&&(m.neighboringTiles[M].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,m){for(const v in this._tiles){let E=this._tiles[v];if(m[v]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>f)continue;let k=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const M=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[M.key],E&&E.hasData()&&(k=M)}let P=k;for(;P.overscaledZ>c;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){m[k.key]=k;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){const m=i.scaledTo(f),v=this._getLoadedTile(m);if(v)return v}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?u.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const f={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+c),f[v.tileID.key]=v}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new u.OverscaledTileID(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(D=>this._source.hasTile(D)))):f=[];const m=i.coveringZoomLevel(this._source),v=Math.max(m-Sn.maxOverzooming,this._source.minzoom),E=Math.max(m+Sn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const D={};for(const L of f)if(L.canonical.z>this._source.minzoom){const U=L.scaledTo(L.canonical.z-1);D[U.key]=U;const Q=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));D[Q.key]=Q}f=f.concat(Object.values(D))}const k=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new u.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(f,m);if(et(this._source.type)){const D={},L={},U=Object.keys(P),Q=u.browser.now();for(const J of U){const te=P[J],Y=this._tiles[J];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=Q)continue;const pe=this.findLoadedParent(te,v);pe&&(this._addTile(pe.tileID),D[pe.tileID.key]=pe.tileID),L[J]=te}this._retainLoadedChildren(L,m,E,P);for(const J in D)P[J]||(this._coveredTiles[J]=!0,P[J]=D[J]);if(c){const J={},te={};for(const Y of f)this._tiles[Y.key].hasData()?J[Y.key]=Y:te[Y.key]=Y;for(const Y in te){const pe=te[Y].children(this._source.maxzoom);this._tiles[pe[0].key]&&this._tiles[pe[1].key]&&this._tiles[pe[2].key]&&this._tiles[pe[3].key]&&(J[pe[0].key]=P[pe[0].key]=pe[0],J[pe[1].key]=P[pe[1].key]=pe[1],J[pe[2].key]=P[pe[2].key]=pe[2],J[pe[3].key]=P[pe[3].key]=pe[3],delete te[Y])}for(const Y in te){const pe=this.findLoadedParent(te[Y],this._source.minzoom);if(pe){J[pe.tileID.key]=P[pe.tileID.key]=pe.tileID;for(const Se in J)J[Se].isChildOf(pe.tileID)&&delete J[Se]}}for(const Y in this._tiles)J[Y]||(this._coveredTiles[Y]=!0)}}for(const D in P)this._tiles[D].clearFadeHold();const M=u.keysDifference(this._tiles,P);for(const D of M){const L=this._tiles[D];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const f={},m={},v=Math.max(c-Sn.maxOverzooming,this._source.minzoom),E=Math.max(c+Sn.maxUnderzooming,this._source.minzoom),k={};for(const P of i){const M=this._addTile(P);f[P.key]=P,M.hasData()||c<this._source.maxzoom&&(k[P.key]=P)}this._retainLoadedChildren(k,c,E,f);for(const P of i){let M=this._tiles[P.key];if(M.hasData())continue;if(c+1>this._source.maxzoom){const L=P.children(this._source.maxzoom)[0],U=this.getTile(L);if(U&&U.hasData()){f[L.key]=L;continue}}else{const L=P.children(this._source.maxzoom);if(f[L[0].key]&&f[L[1].key]&&f[L[2].key]&&f[L[3].key])continue}let D=M.wasRequested();for(let L=P.overscaledZ-1;L>=v;--L){const U=P.scaledTo(L);if(m[U.key])break;if(m[U.key]=!0,M=this.getTile(U),!M&&D&&(M=this._addTile(U)),M){const Q=M.hasData();if((D||Q)&&(f[U.key]=U),D=M.wasRequested(),Q)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let f,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}c.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;m=v}for(const v of c)this._loadedParentTiles[v]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const f=c;return c||(c=new oi(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,f||this._source.fire(new u.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,f){const m=[],v=this.transform;if(!v)return m;const E=f?v.getCameraQueryGeometry(i):i,k=i.map(J=>v.pointCoordinate(J,this.terrain)),P=E.map(J=>v.pointCoordinate(J,this.terrain)),M=this.getIds();let D=1/0,L=1/0,U=-1/0,Q=-1/0;for(const J of P)D=Math.min(D,J.x),L=Math.min(L,J.y),U=Math.max(U,J.x),Q=Math.max(Q,J.y);for(let J=0;J<M.length;J++){const te=this._tiles[M[J]];if(te.holdingForFade())continue;const Y=te.tileID,pe=Math.pow(2,v.zoom-te.tileID.overscaledZ),Se=c*te.queryPadding*u.EXTENT/te.tileSize/pe,oe=[Y.getTilePoint(new u.MercatorCoordinate(D,L)),Y.getTilePoint(new u.MercatorCoordinate(U,Q))];if(oe[0].x-Se<u.EXTENT&&oe[0].y-Se<u.EXTENT&&oe[1].x+Se>=0&&oe[1].y+Se>=0){const ge=k.map(Ce=>Y.getTilePoint(Ce)),ke=P.map(Ce=>Y.getTilePoint(Ce));m.push({tile:te,tileID:Y,queryGeometry:ge,cameraQueryGeometry:ke,scale:pe})}}return m}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(et(this._source.type)){const i=u.browser.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){const m=this._tiles[i];m&&m.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(const f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}}function Xi(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||f-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function et(y){return y==="raster"||y==="image"||y==="video"}Sn.maxOverzooming=10,Sn.maxUnderzooming=3;const Ie="mapboxgl_preloaded_worker_pool";class Wt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Wt.workerCount;)this.workers.push(new Worker(u.config.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ie]}numActive(){return Object.keys(this.active).length}}const Jt=Math.floor(u.browser.hardwareConcurrency/2);let $t;function Pr(){return $t||($t=new Wt),$t}Wt.workerCount=u.isSafari(globalThis)?Math.max(Math.min(Jt,3),1):1;class je{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);let c=1,f=this._distances[c];const m=i*this.paddedLength+this.padding;for(;f<m&&c<this._distances.length;)f=this._distances[++c];const v=c-1,E=this._distances[v],k=f-E,P=k>0?(m-E)/k:0;return this.points[v].mult(1-P).add(this.points[c].mult(P))}}function At(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class zt{constructor(i,c,f){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let E=0;E<this.xCellCount*this.yCellCount;E++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,m,v){this._forEachCell(c,f,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(i,c,f,m){this._forEachCell(c-m,f-m,c+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(m)}_insertBoxCell(i,c,f,m,v,E){this.boxCells[v].push(E)}_insertCircleCell(i,c,f,m,v,E){this.circleCells[v].push(E)}_query(i,c,f,m,v,E,k){if(f<0||i>this.width||m<0||c>this.height)return[];const P=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=m){if(v)return[{key:null,x1:i,y1:c,x2:f,y2:m}];for(let M=0;M<this.boxKeys.length;M++)P.push({key:this.boxKeys[M],x1:this.bboxes[4*M],y1:this.bboxes[4*M+1],x2:this.bboxes[4*M+2],y2:this.bboxes[4*M+3]});for(let M=0;M<this.circleKeys.length;M++){const D=this.circles[3*M],L=this.circles[3*M+1],U=this.circles[3*M+2];P.push({key:this.circleKeys[M],x1:D-U,y1:L-U,x2:D+U,y2:L+U})}}else this._forEachCell(i,c,f,m,this._queryCell,P,{hitTest:v,overlapMode:E,seenUids:{box:{},circle:{}}},k);return P}query(i,c,f,m){return this._query(i,c,f,m,!1,null)}hitTest(i,c,f,m,v,E){return this._query(i,c,f,m,!0,v,E).length>0}hitTestCircle(i,c,f,m,v){const E=i-f,k=i+f,P=c-f,M=c+f;if(k<0||E>this.width||M<0||P>this.height)return!1;const D=[];return this._forEachCell(E,P,k,M,this._queryCellCircle,D,{hitTest:!0,overlapMode:m,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},v),D.length>0}_queryCell(i,c,f,m,v,E,k,P){const{seenUids:M,hitTest:D,overlapMode:L}=k,U=this.boxCells[v];if(U!==null){const J=this.bboxes;for(const te of U)if(!M.box[te]){M.box[te]=!0;const Y=4*te,pe=this.boxKeys[te];if(i<=J[Y+2]&&c<=J[Y+3]&&f>=J[Y+0]&&m>=J[Y+1]&&(!P||P(pe))&&(!D||!At(L,pe.overlapMode))&&(E.push({key:pe,x1:J[Y],y1:J[Y+1],x2:J[Y+2],y2:J[Y+3]}),D))return!0}}const Q=this.circleCells[v];if(Q!==null){const J=this.circles;for(const te of Q)if(!M.circle[te]){M.circle[te]=!0;const Y=3*te,pe=this.circleKeys[te];if(this._circleAndRectCollide(J[Y],J[Y+1],J[Y+2],i,c,f,m)&&(!P||P(pe))&&(!D||!At(L,pe.overlapMode))){const Se=J[Y],oe=J[Y+1],ge=J[Y+2];if(E.push({key:pe,x1:Se-ge,y1:oe-ge,x2:Se+ge,y2:oe+ge}),D)return!0}}}return!1}_queryCellCircle(i,c,f,m,v,E,k,P){const{circle:M,seenUids:D,overlapMode:L}=k,U=this.boxCells[v];if(U!==null){const J=this.bboxes;for(const te of U)if(!D.box[te]){D.box[te]=!0;const Y=4*te,pe=this.boxKeys[te];if(this._circleAndRectCollide(M.x,M.y,M.radius,J[Y+0],J[Y+1],J[Y+2],J[Y+3])&&(!P||P(pe))&&!At(L,pe.overlapMode))return E.push(!0),!0}}const Q=this.circleCells[v];if(Q!==null){const J=this.circles;for(const te of Q)if(!D.circle[te]){D.circle[te]=!0;const Y=3*te,pe=this.circleKeys[te];if(this._circlesCollide(J[Y],J[Y+1],J[Y+2],M.x,M.y,M.radius)&&(!P||P(pe))&&!At(L,pe.overlapMode))return E.push(!0),!0}}}_forEachCell(i,c,f,m,v,E,k,P){const M=this._convertToXCellCoord(i),D=this._convertToYCellCoord(c),L=this._convertToXCellCoord(f),U=this._convertToYCellCoord(m);for(let Q=M;Q<=L;Q++)for(let J=D;J<=U;J++)if(v.call(this,i,c,f,m,this.xCellCount*J+Q,E,k,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,m,v,E){const k=m-i,P=v-c,M=f+E;return M*M>k*k+P*P}_circleAndRectCollide(i,c,f,m,v,E,k){const P=(E-m)/2,M=Math.abs(i-(m+P));if(M>P+f)return!1;const D=(k-v)/2,L=Math.abs(c-(v+D));if(L>D+f)return!1;if(M<=P||L<=D)return!0;const U=M-P,Q=L-D;return U*U+Q*Q<=f*f}}function hr(y,i,c,f,m){const v=u.create();return i?(u.scale(v,v,[1/m,1/m,1]),c||u.rotateZ(v,v,f.angle)):u.multiply(v,f.labelPlaneMatrix,y),v}function ai(y,i,c,f,m){if(i){const v=u.clone(y);return u.scale(v,v,[m,m,1]),c||u.rotateZ(v,v,-f.angle),v}return f.glCoordMatrix}function St(y,i,c){let f;c?(f=[y.x,y.y,c(y.x,y.y),1],u.transformMat4(f,f,i)):(f=[y.x,y.y,0,1],ie(f,f,i));const m=f[3];return{point:new u.Point(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function si(y,i){return .5+y/i*.5}function li(y,i){const c=y[0]/y[3],f=y[1]/y[3];return c>=-i[0]&&c<=i[0]&&f>=-i[1]&&f<=i[1]}function Ki(y,i,c,f,m,v,E,k,P,M){const D=f?y.textSizeData:y.iconSizeData,L=u.evaluateSizeForZoom(D,c.transform.zoom),U=[256/c.width*2+1,256/c.height*2+1],Q=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Q.clear();const J=y.lineVertexArray,te=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,Y=c.transform.width/c.transform.height;let pe=!1;for(let Se=0;Se<te.length;Se++){const oe=te.get(Se);if(oe.hidden||oe.writingMode===u.WritingMode.vertical&&!pe){X(oe.numGlyphs,Q);continue}let ge;if(pe=!1,M?(ge=[oe.anchorX,oe.anchorY,M(oe.anchorX,oe.anchorY),1],u.transformMat4(ge,ge,i)):(ge=[oe.anchorX,oe.anchorY,0,1],ie(ge,ge,i)),!li(ge,U)){X(oe.numGlyphs,Q);continue}const ke=si(c.transform.cameraToCenterDistance,ge[3]),Ce=u.evaluateSizeForFeature(D,L,oe),Ae=E?Ce/ke:Ce*ke,$e=new u.Point(oe.anchorX,oe.anchorY),Fe=St($e,m,M).point,Ge={projections:{},offsets:{}},ut=Ir(oe,Ae,!1,k,i,m,v,y.glyphOffsetArray,J,Q,Fe,$e,Ge,Y,P,M);pe=ut.useVertical,(ut.notEnoughRoom||pe||ut.needsFlipping&&Ir(oe,Ae,!0,k,i,m,v,y.glyphOffsetArray,J,Q,Fe,$e,Ge,Y,P,M).notEnoughRoom)&&X(oe.numGlyphs,Q)}f?y.text.dynamicLayoutVertexBuffer.updateData(Q):y.icon.dynamicLayoutVertexBuffer.updateData(Q)}function ui(y,i,c,f,m,v,E,k,P,M,D,L,U){const Q=k.glyphStartIndex+k.numGlyphs,J=k.lineStartIndex,te=k.lineStartIndex+k.lineLength,Y=i.getoffsetX(k.glyphStartIndex),pe=i.getoffsetX(Q-1),Se=O(y*Y,c,f,m,v,E,k.segment,J,te,P,M,D,L,U);if(!Se)return null;const oe=O(y*pe,c,f,m,v,E,k.segment,J,te,P,M,D,L,U);return oe?{first:Se,last:oe}:null}function Ea(y,i,c,f){return y===u.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*f?{useVertical:!0}:(y===u.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Ir(y,i,c,f,m,v,E,k,P,M,D,L,U,Q,J,te){const Y=i/24,pe=y.lineOffsetX*Y,Se=y.lineOffsetY*Y;let oe;if(y.numGlyphs>1){const ge=y.glyphStartIndex+y.numGlyphs,ke=y.lineStartIndex,Ce=y.lineStartIndex+y.lineLength,Ae=ui(Y,k,pe,Se,c,D,L,y,P,v,U,J,te);if(!Ae)return{notEnoughRoom:!0};const $e=St(Ae.first.point,E,te).point,Fe=St(Ae.last.point,E,te).point;if(f&&!c){const Ge=Ea(y.writingMode,$e,Fe,Q);if(Ge)return Ge}oe=[Ae.first];for(let Ge=y.glyphStartIndex+1;Ge<ge-1;Ge++)oe.push(O(Y*k.getoffsetX(Ge),pe,Se,c,D,L,y.segment,ke,Ce,P,v,U,J,te));oe.push(Ae.last)}else{if(f&&!c){const ke=St(L,m,te).point,Ce=y.lineStartIndex+y.segment+1,Ae=new u.Point(P.getx(Ce),P.gety(Ce)),$e=St(Ae,m,te),Fe=$e.signedDistanceFromCamera>0?$e.point:En(L,Ae,ke,1,m,te),Ge=Ea(y.writingMode,ke,Fe,Q);if(Ge)return Ge}const ge=O(Y*k.getoffsetX(y.glyphStartIndex),pe,Se,c,D,L,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,P,v,U,J,te);if(!ge)return{notEnoughRoom:!0};oe=[ge]}for(const ge of oe)u.addDynamicAttributes(M,ge.point,ge.angle);return{}}function En(y,i,c,f,m,v){const E=St(y.add(y.sub(i)._unit()),m,v).point,k=c.sub(E);return c.add(k._mult(f/k.mag()))}function Ml(y,i){const{projectionCache:c,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:v,distanceFromAnchor:E,getElevation:k,previousVertex:P,direction:M,absOffsetX:D}=i;if(c.projections[y])return c.projections[y];const L=new u.Point(f.getx(y),f.gety(y)),U=St(L,m,k);if(U.signedDistanceFromCamera>0)return c.projections[y]=U.point,U.point;const Q=y-M;return En(E===0?v:new u.Point(f.getx(Q),f.gety(Q)),L,P,D-E+1,m,k)}function $o(y,i,c){return y._unit()._perp()._mult(i*c)}function ne(y,i,c,f,m,v,E,k){const{projectionCache:P,direction:M}=k;if(P.offsets[y])return P.offsets[y];const D=c.add(i);if(y+M<f||y+M>=m)return P.offsets[y]=D,D;const L=Ml(y+M,k),U=$o(L.sub(c),E,M),Q=c.add(U),J=L.add(U);return P.offsets[y]=u.findLineIntersection(v,D,Q,J)||D,P.offsets[y]}function O(y,i,c,f,m,v,E,k,P,M,D,L,U,Q){const J=f?y-i:y+i;let te=J>0?1:-1,Y=0;f&&(te*=-1,Y=Math.PI),te<0&&(Y+=Math.PI);let pe,Se,oe=te>0?k+E:k+E+1,ge=m,ke=m,Ce=0,Ae=0;const $e=Math.abs(J),Fe=[];let Ge;for(;Ce+Ae<=$e;){if(oe+=te,oe<k||oe>=P)return null;Ce+=Ae,ke=ge,Se=pe;const Xe={projectionCache:L,lineVertexArray:M,labelPlaneMatrix:D,tileAnchorPoint:v,distanceFromAnchor:Ce,getElevation:Q,previousVertex:ke,direction:te,absOffsetX:$e};if(ge=Ml(oe,Xe),c===0)Fe.push(ke),Ge=ge.sub(ke);else{let _t;const st=ge.sub(ke);_t=st.mag()===0?$o(Ml(oe+te,Xe).sub(ge),c,te):$o(st,c,te),Se||(Se=ke.add(_t)),pe=ne(oe,_t,ge,k,P,Se,c,Xe),Fe.push(Se),Ge=pe.sub(Se)}Ae=Ge.mag()}const ut=Ge._mult(($e-Ce)/Ae)._add(Se||ke),Ut=Y+Math.atan2(ge.y-ke.y,ge.x-ke.x);return Fe.push(ut),{point:ut,angle:U?Ut:0,path:Fe}}const V=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function X(y,i){for(let c=0;c<y;c++){const f=i.length;i.resize(f+4),i.float32.set(V,3*f)}}function ie(y,i,c){const f=i[0],m=i[1];return y[0]=c[0]*f+c[4]*m+c[12],y[1]=c[1]*f+c[5]*m+c[13],y[3]=c[3]*f+c[7]*m+c[15],y}const se=100;class _e{constructor(i,c=new zt(i.width+200,i.height+200,25),f=new zt(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+se,this.screenBottomBoundary=i.height+se,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,f,m,v,E){const k=this.projectAndGetPerspectiveRatio(m,i.anchorPointX,i.anchorPointY,E),P=f*k.perspectiveRatio,M=i.x1*P+k.point.x,D=i.y1*P+k.point.y,L=i.x2*P+k.point.x,U=i.y2*P+k.point.y;return!this.isInsideGrid(M,D,L,U)||c!=="always"&&this.grid.hitTest(M,D,L,U,c,v)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[M,D,L,U],offscreen:this.isOffscreen(M,D,L,U)}}placeCollisionCircles(i,c,f,m,v,E,k,P,M,D,L,U,Q,J){const te=[],Y=new u.Point(c.anchorX,c.anchorY),pe=St(Y,E,J),Se=si(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),oe=(D?v/Se:v*Se)/u.ONE_EM,ge=St(Y,k,J).point,ke=ui(oe,m,c.lineOffsetX*oe,c.lineOffsetY*oe,!1,ge,Y,c,f,k,{projections:{},offsets:{}},!1,J);let Ce=!1,Ae=!1,$e=!0;if(ke){const Fe=.5*U*Se+Q,Ge=new u.Point(-100,-100),ut=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),Ut=new je,Xe=ke.first,_t=ke.last;let st=[];for(let vt=Xe.path.length-1;vt>=1;vt--)st.push(Xe.path[vt]);for(let vt=1;vt<_t.path.length;vt++)st.push(_t.path[vt]);const zn=2.5*Fe;if(P){const vt=st.map(Gt=>St(Gt,P,J));st=vt.some(Gt=>Gt.signedDistanceFromCamera<=0)?[]:vt.map(Gt=>Gt.point)}let jt=[];if(st.length>0){const vt=st[0].clone(),Gt=st[0].clone();for(let Fn=1;Fn<st.length;Fn++)vt.x=Math.min(vt.x,st[Fn].x),vt.y=Math.min(vt.y,st[Fn].y),Gt.x=Math.max(Gt.x,st[Fn].x),Gt.y=Math.max(Gt.y,st[Fn].y);jt=vt.x>=Ge.x&&Gt.x<=ut.x&&vt.y>=Ge.y&&Gt.y<=ut.y?[st]:Gt.x<Ge.x||vt.x>ut.x||Gt.y<Ge.y||vt.y>ut.y?[]:u.clipLine([st],Ge.x,Ge.y,ut.x,ut.y)}for(const vt of jt){Ut.reset(vt,.25*Fe);let Gt=0;Gt=Ut.length<=.5*Fe?1:Math.ceil(Ut.paddedLength/zn)+1;for(let Fn=0;Fn<Gt;Fn++){const gn=Fn/Math.max(Gt-1,1),zi=Ut.lerp(gn),Ar=zi.x+se,Hn=zi.y+se;te.push(Ar,Hn,Fe,0);const fi=Ar-Fe,Uo=Hn-Fe,fo=Ar+Fe,jo=Hn+Fe;if($e=$e&&this.isOffscreen(fi,Uo,fo,jo),Ae=Ae||this.isInsideGrid(fi,Uo,fo,jo),i!=="always"&&this.grid.hitTestCircle(Ar,Hn,Fe,i,L)&&(Ce=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!M&&Ce||!Ae||Se<this.perspectiveRatioCutoff?[]:te,offscreen:$e,collisionDetected:Ce}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let f=1/0,m=1/0,v=-1/0,E=-1/0;for(const D of i){const L=new u.Point(D.x+se,D.y+se);f=Math.min(f,L.x),m=Math.min(m,L.y),v=Math.max(v,L.x),E=Math.max(E,L.y),c.push(L)}const k=this.grid.query(f,m,v,E).concat(this.ignoredGrid.query(f,m,v,E)),P={},M={};for(const D of k){const L=D.key;if(P[L.bucketInstanceId]===void 0&&(P[L.bucketInstanceId]={}),P[L.bucketInstanceId][L.featureIndex])continue;const U=[new u.Point(D.x1,D.y1),new u.Point(D.x2,D.y1),new u.Point(D.x2,D.y2),new u.Point(D.x1,D.y2)];u.polygonIntersectsPolygon(c,U)&&(P[L.bucketInstanceId][L.featureIndex]=!0,M[L.bucketInstanceId]===void 0&&(M[L.bucketInstanceId]=[]),M[L.bucketInstanceId].push(L.featureIndex))}return M}insertCollisionBox(i,c,f,m,v,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:E,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,m,v,E){const k=f?this.ignoredGrid:this.grid,P={bucketInstanceId:m,featureIndex:v,collisionGroupID:E,overlapMode:c};for(let M=0;M<i.length;M+=4)k.insertCircle(P,i[M],i[M+1],i[M+2])}projectAndGetPerspectiveRatio(i,c,f,m){let v;return m?(v=[c,f,m(c,f),1],u.transformMat4(v,v,i)):(v=[c,f,0,1],ie(v,v,i)),{point:new u.Point((v[0]/v[3]+1)/2*this.transform.width+se,(-v[1]/v[3]+1)/2*this.transform.height+se),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(i,c,f,m){return f<se||i>=this.screenRightBoundary||m<se||c>this.screenBottomBoundary}isInsideGrid(i,c,f,m){return f>=0&&i<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i}}function he(y,i,c){return i*(u.EXTENT/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class le{constructor(i,c,f,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class xe{constructor(i,c,f,m,v){this.text=new le(i?i.text:null,c,f,v),this.icon=new le(i?i.icon:null,c,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class De{constructor(i,c,f){this.text=i,this.icon=c,this.skipFade=f}}class Re{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class Le{constructor(i,c,f,m,v){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=v}}class Et{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function Rt(y,i,c,f,m){const{horizontalAlign:v,verticalAlign:E}=u.getAnchorAlignment(y);return new u.Point(-(v-.5)*i+f[0]*m,-(E-.5)*c+f[1]*m)}function lt(y,i,c,f,m,v){const{x1:E,x2:k,y1:P,y2:M,anchorPointX:D,anchorPointY:L}=y,U=new u.Point(i,c);return f&&U._rotate(m?v:-v),{x1:E+U.x,y1:P+U.y,x2:k+U.x,y2:M+U.y,anchorPointX:D,anchorPointY:L}}class yt{constructor(i,c,f,m,v){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new _e(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Et(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,f,m){const v=f.getBucket(c),E=f.latestFeatureIndex;if(!v||!E||c.id!==v.layerIds[0])return;const k=f.collisionBoxArray,P=v.layers[0].layout,M=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),D=f.tileSize/u.EXTENT,L=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),U=P.get("text-pitch-alignment")==="map",Q=P.get("text-rotation-alignment")==="map",J=he(f,1,this.transform.zoom),te=hr(L,U,Q,this.transform,J);let Y=null;if(U){const Se=ai(L,U,Q,this.transform,J);Y=u.multiply([],this.transform.labelPlaneMatrix,Se)}this.retainedQueryData[v.bucketInstanceId]=new Le(v.bucketInstanceId,E,v.sourceLayerIndex,v.index,f.tileID);const pe={bucket:v,layout:P,posMatrix:L,textLabelPlaneMatrix:te,labelToScreenMatrix:Y,scale:M,textPixelRatio:D,holdingForFade:f.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const Se of v.sortKeyRanges){const{sortKey:oe,symbolInstanceStart:ge,symbolInstanceEnd:ke}=Se;i.push({sortKey:oe,symbolInstanceStart:ge,symbolInstanceEnd:ke,parameters:pe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(i,c,f,m,v,E,k,P,M,D,L,U,Q,J,te,Y){const pe=u.TextAnchorEnum[i.textAnchor],Se=[i.textOffset0,i.textOffset1],oe=Rt(pe,f,m,Se,v),ge=this.collisionIndex.placeCollisionBox(lt(c,oe.x,oe.y,E,k,this.transform.angle),L,P,M,D.predicate,Y);if((!te||this.collisionIndex.placeCollisionBox(lt(te,oe.x,oe.y,E,k,this.transform.angle),L,P,M,D.predicate,Y).box.length!==0)&&ge.box.length>0){let ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(ke=this.prevPlacement.variableOffsets[U.crossTileID].anchor),U.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:Se,width:f,height:m,anchor:pe,textBoxScale:v,prevAnchor:ke},this.markUsedJustification(Q,pe,U,J),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,J,U),this.placedOrientations[U.crossTileID]=J),{shift:oe,placedGlyphBoxes:ge}}}placeLayerBucketPart(i,c,f){const{bucket:m,layout:v,posMatrix:E,textLabelPlaneMatrix:k,labelToScreenMatrix:P,textPixelRatio:M,holdingForFade:D,collisionBoxArray:L,partiallyEvaluatedTextSize:U,collisionGroup:Q}=i.parameters,J=v.get("text-optional"),te=v.get("icon-optional"),Y=u.getOverlapMode(v,"text-overlap","text-allow-overlap"),pe=Y==="always",Se=u.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),oe=Se==="always",ge=v.get("text-rotation-alignment")==="map",ke=v.get("text-pitch-alignment")==="map",Ce=v.get("icon-text-fit")!=="none",Ae=v.get("symbol-z-order")==="viewport-y",$e=pe&&(oe||!m.hasIconData()||te),Fe=oe&&(pe||!m.hasTextData()||J);!m.collisionArrays&&L&&m.deserializeCollisionBoxes(L);const Ge=this.retainedQueryData[m.bucketInstanceId].tileID,ut=this.terrain?(Xe,_t)=>this.terrain.getElevation(Ge,Xe,_t):null,Ut=(Xe,_t)=>{var st,zn;if(c[Xe.crossTileID])return;if(D)return void(this.placements[Xe.crossTileID]=new De(!1,!1,!1));let jt=!1,vt=!1,Gt=!0,Fn=null,gn={box:null,offscreen:null},zi={box:null,offscreen:null},Ar=null,Hn=null,fi=null,Uo=0,fo=0,jo=0;_t.textFeatureIndex?Uo=_t.textFeatureIndex:Xe.useRuntimeCollisionCircles&&(Uo=Xe.featureIndex),_t.verticalTextFeatureIndex&&(fo=_t.verticalTextFeatureIndex);const js=_t.textBox;if(js){const or=vr=>{let pr=u.WritingMode.horizontal;if(m.allowVerticalPlacement&&!vr&&this.prevPlacement){const Nr=this.prevPlacement.placedOrientations[Xe.crossTileID];Nr&&(this.placedOrientations[Xe.crossTileID]=Nr,pr=Nr,this.markUsedOrientation(m,pr,Xe))}return pr},_r=(vr,pr)=>{if(m.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const Nr of m.writingModes)if(Nr===u.WritingMode.vertical?(gn=pr(),zi=gn):gn=vr(),gn&&gn.box&&gn.box.length)break}else gn=vr()},Vr=Xe.textAnchorOffsetStartIndex,Gs=Xe.textAnchorOffsetEndIndex;if(Gs===Vr){const vr=(pr,Nr)=>{const On=this.collisionIndex.placeCollisionBox(pr,Y,M,E,Q.predicate,ut);return On&&On.box&&On.box.length&&(this.markUsedOrientation(m,Nr,Xe),this.placedOrientations[Xe.crossTileID]=Nr),On};_r(()=>vr(js,u.WritingMode.horizontal),()=>{const pr=_t.verticalTextBox;return m.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&pr?vr(pr,u.WritingMode.vertical):{box:null,offscreen:null}}),or(gn&&gn.box&&gn.box.length)}else{let vr=u.TextAnchorEnum[(zn=(st=this.prevPlacement)===null||st===void 0?void 0:st.variableOffsets[Xe.crossTileID])===null||zn===void 0?void 0:zn.anchor];const pr=(On,aa,po)=>{const Ma=On.x2-On.x1,Gp=On.y2-On.y1,os=Xe.textBoxScale,X0=Ce&&Se==="never"?aa:null;let as={box:[],offscreen:!1},jn=Y==="never"?1:2,_c="never";vr&&jn++;for(let _d=0;_d<jn;_d++){for(let sa=Vr;sa<Gs;sa++){const Aa=m.textAnchorOffsets.get(sa);if(vr&&Aa.textAnchor!==vr)continue;const Ws=this.attemptAnchorPlacement(Aa,On,Ma,Gp,os,ge,ke,M,E,Q,_c,Xe,m,po,X0,ut);if(Ws&&(as=Ws.placedGlyphBoxes,as&&as.box&&as.box.length))return jt=!0,Fn=Ws.shift,as}vr?vr=null:_c=Y}return as};_r(()=>pr(js,_t.iconBox,u.WritingMode.horizontal),()=>{const On=_t.verticalTextBox;return m.allowVerticalPlacement&&!(gn&&gn.box&&gn.box.length)&&Xe.numVerticalGlyphVertices>0&&On?pr(On,_t.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),gn&&(jt=gn.box,Gt=gn.offscreen);const Nr=or(gn&&gn.box);if(!jt&&this.prevPlacement){const On=this.prevPlacement.variableOffsets[Xe.crossTileID];On&&(this.variableOffsets[Xe.crossTileID]=On,this.markUsedJustification(m,On.anchor,Xe,Nr))}}}if(Ar=gn,jt=Ar&&Ar.box&&Ar.box.length>0,Gt=Ar&&Ar.offscreen,Xe.useRuntimeCollisionCircles){const or=m.text.placedSymbolArray.get(Xe.centerJustifiedTextSymbolIndex),_r=u.evaluateSizeForFeature(m.textSizeData,U,or),Vr=v.get("text-padding");Hn=this.collisionIndex.placeCollisionCircles(Y,or,m.lineVertexArray,m.glyphOffsetArray,_r,E,k,P,f,ke,Q.predicate,Xe.collisionCircleDiameter,Vr,ut),Hn.circles.length&&Hn.collisionDetected&&!f&&u.warnOnce("Collisions detected, but collision boxes are not shown"),jt=pe||Hn.circles.length>0&&!Hn.collisionDetected,Gt=Gt&&Hn.offscreen}if(_t.iconFeatureIndex&&(jo=_t.iconFeatureIndex),_t.iconBox){const or=_r=>{const Vr=Ce&&Fn?lt(_r,Fn.x,Fn.y,ge,ke,this.transform.angle):_r;return this.collisionIndex.placeCollisionBox(Vr,Se,M,E,Q.predicate,ut)};zi&&zi.box&&zi.box.length&&_t.verticalIconBox?(fi=or(_t.verticalIconBox),vt=fi.box.length>0):(fi=or(_t.iconBox),vt=fi.box.length>0),Gt=Gt&&fi.offscreen}const Ia=J||Xe.numHorizontalGlyphVertices===0&&Xe.numVerticalGlyphVertices===0,oa=te||Xe.numIconVertices===0;if(Ia||oa?oa?Ia||(vt=vt&&jt):jt=vt&&jt:vt=jt=vt&&jt,jt&&Ar&&Ar.box&&this.collisionIndex.insertCollisionBox(Ar.box,Y,v.get("text-ignore-placement"),m.bucketInstanceId,zi&&zi.box&&fo?fo:Uo,Q.ID),vt&&fi&&this.collisionIndex.insertCollisionBox(fi.box,Se,v.get("icon-ignore-placement"),m.bucketInstanceId,jo,Q.ID),Hn&&(jt&&this.collisionIndex.insertCollisionCircles(Hn.circles,Y,v.get("text-ignore-placement"),m.bucketInstanceId,Uo,Q.ID),f)){const or=m.bucketInstanceId;let _r=this.collisionCircleArrays[or];_r===void 0&&(_r=this.collisionCircleArrays[or]=new Re);for(let Vr=0;Vr<Hn.circles.length;Vr+=4)_r.circles.push(Hn.circles[Vr+0]),_r.circles.push(Hn.circles[Vr+1]),_r.circles.push(Hn.circles[Vr+2]),_r.circles.push(Hn.collisionDetected?1:0)}if(Xe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xe.crossTileID]=new De(jt||$e,vt||Fe,Gt||m.justReloaded),c[Xe.crossTileID]=!0};if(Ae){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xe=m.getSortedSymbolIndexes(this.transform.angle);for(let _t=Xe.length-1;_t>=0;--_t){const st=Xe[_t];Ut(m.symbolInstances.get(st),m.collisionArrays[st])}}else for(let Xe=i.symbolInstanceStart;Xe<i.symbolInstanceEnd;Xe++)Ut(m.symbolInstances.get(Xe),m.collisionArrays[Xe]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const Xe=this.collisionCircleArrays[m.bucketInstanceId];u.invert(Xe.invProjMatrix,E),Xe.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(i,c,f,m){let v;v=m===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(c)];const E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const k of E)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=v>=0&&k!==v?0:f.crossTileID)}markUsedOrientation(i,c,f){const m=c===u.WritingMode.horizontal||c===u.WritingMode.horizontalOnly?c:0,v=c===u.WritingMode.vertical?c:0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const k of E)i.text.placedSymbolArray.get(k).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(i):1,v=c?c.opacities:{},E=c?c.variableOffsets:{},k=c?c.placedOrientations:{};for(const P in this.placements){const M=this.placements[P],D=v[P];D?(this.opacities[P]=new xe(D,m,M.text,M.icon),f=f||M.text!==D.text.placed||M.icon!==D.icon.placed):(this.opacities[P]=new xe(null,m,M.text,M.icon,M.skipFade),f=f||M.text||M.icon)}for(const P in v){const M=v[P];if(!this.opacities[P]){const D=new xe(M,m,!1,!1);D.isHidden()||(this.opacities[P]=D,f=f||M.text.placed||M.icon.placed)}}for(const P in E)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=E[P]);for(const P in k)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=k[P]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const f={};for(const m of c){const v=m.getBucket(i);v&&m.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,m.collisionBoxArray)}}updateBucketOpacities(i,c,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const m=i.layers[0],v=m.layout,E=new xe(null,0,!1,!1,!0),k=v.get("text-allow-overlap"),P=v.get("icon-allow-overlap"),M=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=v.get("text-rotation-alignment")==="map",L=v.get("text-pitch-alignment")==="map",U=v.get("icon-text-fit")!=="none",Q=new xe(null,0,k&&(P||!i.hasIconData()||v.get("icon-optional")),P&&(k||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const J=(te,Y,pe)=>{for(let Se=0;Se<Y/4;Se++)te.opacityVertexArray.emplaceBack(pe);te.hasVisibleVertices=te.hasVisibleVertices||pe!==er};for(let te=0;te<i.symbolInstances.length;te++){const Y=i.symbolInstances.get(te),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:Se,crossTileID:oe}=Y;let ge=this.opacities[oe];c[oe]?ge=E:ge||(ge=Q,this.opacities[oe]=ge),c[oe]=!0;const ke=Y.numIconVertices>0,Ce=this.placedOrientations[Y.crossTileID],Ae=Ce===u.WritingMode.vertical,$e=Ce===u.WritingMode.horizontal||Ce===u.WritingMode.horizontalOnly;if(pe>0||Se>0){const Fe=Mr(ge.text);J(i.text,pe,Ae?er:Fe),J(i.text,Se,$e?er:Fe);const Ge=ge.text.isHidden();[Y.rightJustifiedTextSymbolIndex,Y.centerJustifiedTextSymbolIndex,Y.leftJustifiedTextSymbolIndex].forEach(Xe=>{Xe>=0&&(i.text.placedSymbolArray.get(Xe).hidden=Ge||Ae?1:0)}),Y.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Y.verticalPlacedTextSymbolIndex).hidden=Ge||$e?1:0);const ut=this.variableOffsets[Y.crossTileID];ut&&this.markUsedJustification(i,ut.anchor,Y,Ce);const Ut=this.placedOrientations[Y.crossTileID];Ut&&(this.markUsedJustification(i,"left",Y,Ut),this.markUsedOrientation(i,Ut,Y))}if(ke){const Fe=Mr(ge.icon),Ge=!(U&&Y.verticalPlacedIconSymbolIndex&&Ae);Y.placedIconSymbolIndex>=0&&(J(i.icon,Y.numIconVertices,Ge?Fe:er),i.icon.placedSymbolArray.get(Y.placedIconSymbolIndex).hidden=ge.icon.isHidden()),Y.verticalPlacedIconSymbolIndex>=0&&(J(i.icon,Y.numVerticalIconVertices,Ge?er:Fe),i.icon.placedSymbolArray.get(Y.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Fe=i.collisionArrays[te];if(Fe){let Ge=new u.Point(0,0);if(Fe.textBox||Fe.verticalTextBox){let Ut=!0;if(M){const Xe=this.variableOffsets[oe];Xe?(Ge=Rt(Xe.anchor,Xe.width,Xe.height,Xe.textOffset,Xe.textBoxScale),D&&Ge._rotate(L?this.transform.angle:-this.transform.angle)):Ut=!1}Fe.textBox&&Mt(i.textCollisionBox.collisionVertexArray,ge.text.placed,!Ut||Ae,Ge.x,Ge.y),Fe.verticalTextBox&&Mt(i.textCollisionBox.collisionVertexArray,ge.text.placed,!Ut||$e,Ge.x,Ge.y)}const ut=Boolean(!$e&&Fe.verticalIconBox);Fe.iconBox&&Mt(i.iconCollisionBox.collisionVertexArray,ge.icon.placed,ut,U?Ge.x:0,U?Ge.y:0),Fe.verticalIconBox&&Mt(i.iconCollisionBox.collisionVertexArray,ge.icon.placed,!ut,U?Ge.x:0,U?Ge.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const te=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=te.invProjMatrix,i.placementViewportMatrix=te.viewportMatrix,i.collisionCircleArray=te.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Mt(y,i,c,f,m){y.emplaceBack(i?1:0,c?1:0,f||0,m||0),y.emplaceBack(i?1:0,c?1:0,f||0,m||0),y.emplaceBack(i?1:0,c?1:0,f||0,m||0),y.emplaceBack(i?1:0,c?1:0,f||0,m||0)}const Qt=Math.pow(2,25),yn=Math.pow(2,24),qt=Math.pow(2,17),Yt=Math.pow(2,16),ci=Math.pow(2,9),Ct=Math.pow(2,8),dr=Math.pow(2,1);function Mr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*Qt+i*yn+c*qt+i*Yt+c*ci+i*Ct+c*dr+i}const er=0;class Ci{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,f,m,v){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((k,P)=>k.sortKey-P.sortKey));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class T0{constructor(i,c,f,m,v,E,k,P){this.placement=new yt(i,c,E,k,P),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f){const m=u.browser.now(),v=()=>!this._forceFullPlacement&&u.browser.now()-m>2;for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Ci(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const $r=512/u.EXTENT/2;class Yi{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let v=0;v<c.length;v++){const E=c.get(v),k=E.key,P=m.get(k);P?P.push(E):m.set(k,[E])}for(const[v,E]of m){const k={positions:E.map(P=>({x:Math.floor(P.anchorX*$r),y:Math.floor(P.anchorY*$r)})),crossTileIDs:E.map(P=>P.crossTileID)};if(k.positions.length>128){const P=new u.KDBush(k.positions.length,16,Uint16Array);for(const{x:M,y:D}of k.positions)P.add(M,D);P.finish(),delete k.positions,k.index=P}this._symbolsByKey[v]=k}}getScaledCoordinates(i,c){const{x:f,y:m,z:v}=this.tileID.canonical,{x:E,y:k,z:P}=c.canonical,M=$r/Math.pow(2,P-v),D=(k*u.EXTENT+i.anchorY)*M,L=m*u.EXTENT*$r;return{x:Math.floor((E*u.EXTENT+i.anchorX)*M-f*u.EXTENT*$r),y:Math.floor(D-L)}}findMatches(i,c,f){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let v=0;v<i.length;v++){const E=i.get(v);if(E.crossTileID)continue;const k=this._symbolsByKey[E.key];if(!k)continue;const P=this.getScaledCoordinates(E,c);if(k.index){const M=k.index.range(P.x-m,P.y-m,P.x+m,P.y+m).sort();for(const D of M){const L=k.crossTileIDs[D];if(!f[L]){f[L]=!0,E.crossTileID=L;break}}}else if(k.positions)for(let M=0;M<k.positions.length;M++){const D=k.positions[M],L=k.crossTileIDs[M];if(Math.abs(D.x-P.x)<=m&&Math.abs(D.y-P.y)<=m&&!f[L]){f[L]=!0,E.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class mp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $u{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const f in this.indexes){const m=this.indexes[f],v={};for(const E in m){const k=m[E];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),v[k.tileID.key]=k}this.indexes[f]=v}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<c.symbolInstances.length;v++)c.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const E=this.indexes[v];if(Number(v)>i.overscaledZ)for(const k in E){const P=E[k];P.tileID.isChildOf(i)&&P.findMatches(c.symbolInstances,i,m)}else{const k=E[i.scaledTo(Number(v)).key];k&&k.findMatches(c.symbolInstances,i,m)}}for(let v=0;v<c.symbolInstances.length;v++){const E=c.symbolInstances.get(v);E.crossTileID||(E.crossTileID=f.generate(),m[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Yi(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const f of c.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let c=!1;for(const f in this.indexes){const m=this.indexes[f];for(const v in m)i[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[v]),delete m[v],c=!0)}return c}}class tr{constructor(){this.layerIndexes={},this.crossTileIDs=new mp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new $u);let v=!1;const E={};m.handleWrapJump(f);for(const k of c){const P=k.getBucket(i);P&&i.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(k.tileID,P,this.crossTileIDs)&&(v=!0),E[P.bucketInstanceId]=!0)}return m.removeStaleBuckets(E)&&(v=!0),v}pruneUnusedLayers(i){const c={};i.forEach(f=>{c[f]=!0});for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}const ka=(y,i)=>u.emitValidationErrors(y,i&&i.filter(c=>c.identifier!=="source.canvas")),Ha=u.pick(u.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),nr=u.pick(u.operations,["setCenter","setZoom","setBearing","setPitch"]),Bu=u.emptyStyle();class Br extends u.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new at(Pr(),this,i._getMapId()),this.imageManager=new wt,this.imageManager.setEventedParent(this),this.glyphManager=new cn(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ot(256,512),this.crossTileSymbolIndex=new tr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const f=this;this._rtlTextPluginCallback=Br.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(v,E)=>{if(u.triggerPluginCompletionEvent(v),E&&E.every(k=>k))for(const k in f.sourceCaches){const P=f.sourceCaches[k].getSource().type;P!=="vector"&&P!=="geojson"||f.sourceCaches[k].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const v=this.sourceCaches[m.sourceId];if(!v)return;const E=v.getSource();if(E&&E.vectorLayerIds)for(const k in this._layers){const P=this._layers[k];P.source===E.id&&this._validateLayer(P)}})}loadURL(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(i,B.Style);this._request=u.getJSON(m,(v,E)=>{this._request=null,v?this.fire(new u.ErrorEvent(v)):E&&this._load(E,c,f)})}loadJSON(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,f)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(Bu,{validate:!1})}_load(i,c,f){var m;const v=c.transformStyle?c.transformStyle(f,i):i;if(!c.validate||!ka(this,u.validateStyle(v))){this._loaded=!0,this.stylesheet=v;for(const E in v.sources)this.addSource(E,v.sources[E],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Tt(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}}_createLayers(){const i=u.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const f=u.createStyleLayer(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(i,c=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,v,E,k){const P=Te(m),M=P.length,D=E>1?"@2x":"",L={},U={},Q={};for(const{id:J,url:te}of P){const Y=v.transformRequest(v.normalizeSpriteURL(te,D,".json"),B.SpriteJSON),pe=`${J}_${Y.url}`;L[pe]=u.getJSON(Y,(ge,ke)=>{delete L[pe],U[J]=ke,Ne(k,U,Q,ge,M)});const Se=v.transformRequest(v.normalizeSpriteURL(te,D,".png"),B.SpriteImage),oe=`${J}_${Se.url}`;L[oe]=de.getImage(Se,(ge,ke)=>{delete L[oe],Q[J]=ke,Ne(k,U,Q,ge,M)})}return{cancel(){for(const J of Object.values(L))J.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(m,v)=>{if(this._spriteRequest=null,m)this.fire(new u.ErrorEvent(m));else if(v)for(const E in v){this._spritesImagesIds[E]=[];const k=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(P=>!(P in v)):[];for(const P of k)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in v[E]){const M=E==="default"?P:`${E}:${P}`;this._spritesImagesIds[E].push(M),M in this.imageManager.images?this.imageManager.updateImage(M,v[E][P],!1):this.imageManager.addImage(M,v[E][P]),c&&(this._changedImages[M]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const f=i.sourceLayer;if(!f)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const f=[];for(const m of i)c[m]&&f.push(c[m]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const m=this._layers[f];m.type!=="custom"&&(i[f]=m.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const E in this._updatedSources){const k=this._updatedSources[E];if(k==="reload")this._reloadSource(E);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];f[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in f){const v=this.sourceCaches[m];f[m]!==v.used&&v.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const f=this.serialize();if(i=c.transformStyle?c.transformStyle(f,i):i,ka(this,u.validateStyle(i)))return!1;(i=u.clone$1(i)).layers=u.derefLayers(i.layers);const m=u.diffStyles(f,i).filter(E=>!(E.command in nr));if(m.length===0)return!1;const v=m.filter(E=>!(E.command in Ha));if(v.length>0)throw new Error(`Unimplemented: ${v.map(E=>E.command).join(", ")}.`);for(const E of m)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.validateStyle.source,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[i]=new Sn(i,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new u.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,f={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new u.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let v;if(i.type==="custom"){if(ka(this,u.validateCustomStyleLayer(i)))return;v=u.createStyleLayer(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=u.clone$1(i),i=u.extend(i,{source:m})),this._validate(u.validateStyle.layer,`layers.${m}`,i,{arrayIndex:-1},f))return;v=u.createStyleLayer(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const k=this._removedLayers[m];delete this._removedLayers[m],k.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const f=this._order.indexOf(i);this._order.splice(f,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,f){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===c&&m.maxzoom===f||(c!=null&&(m.minzoom=c),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,f={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!u.deepEqual(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.validateStyle.filter,`layers.${m.id}.filter`,c,null,f)||(m.filter=u.clone$1(c),this._updateLayer(m)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,f,m={}){this._checkLoaded();const v=this.getLayer(i);v?u.deepEqual(v.getLayoutProperty(c),f)||(v.setLayoutProperty(c,f,m),this._updateLayer(v)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const f=this.getLayer(i);if(f)return f.getLayoutProperty(c);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,f,m={}){this._checkLoaded();const v=this.getLayer(i);v?u.deepEqual(v.getPaintProperty(c),f)||(v.setPaintProperty(c,f,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const f=i.source,m=i.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const E=v.getSource().type;E==="geojson"&&m?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||m?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,i.id,c)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const f=i.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const v=m.getSource().type,E=v==="vector"?i.sourceLayer:void 0;v!=="vector"||E?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(E,i.id,c):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,f=i.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,i.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.mapObject(this.sourceCaches,m=>m.serialize()),c=this._serializeByIds(this._order),f=this.stylesheet;return u.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:i,layers:c},m=>m!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",f={},m=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(c(k)){f[k]=E;for(const P of i){const M=P[k];if(M)for(const D of M)m.push(D)}}}m.sort((E,k)=>k.intersectionZ-E.intersectionZ);const v=[];for(let E=this._order.length-1;E>=0;E--){const k=this._order[E];if(c(k))for(let P=m.length-1;P>=0;P--){const M=m[P].feature;if(f[M.layer.id]<E)break;v.push(M),m.pop()}else for(const P of i){const M=P[k];if(M)for(const D of M)v.push(D.feature)}}return v}queryRenderedFeatures(i,c,f){c&&c.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of c.layers){const P=this._layers[k];if(!P)return this.fire(new u.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];m[P.source]=!0}}const v=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const k in this.sourceCaches)c.layers&&!m[k]||v.push(Nt(this.sourceCaches[k],this._layers,E,i,c,f));return this.placement&&v.push(function(k,P,M,D,L,U,Q){const J={},te=U.queryRenderedSymbols(D),Y=[];for(const pe of Object.keys(te).map(Number))Y.push(Q[pe]);Y.sort(ki);for(const pe of Y){const Se=pe.featureIndex.lookupSymbolFeatures(te[pe.bucketInstanceId],P,pe.bucketIndex,pe.sourceLayerIndex,L.filter,L.layers,L.availableImages,k);for(const oe in Se){const ge=J[oe]=J[oe]||[],ke=Se[oe];ke.sort((Ce,Ae)=>{const $e=pe.featureSortOrder;if($e){const Fe=$e.indexOf(Ce.featureIndex);return $e.indexOf(Ae.featureIndex)-Fe}return Ae.featureIndex-Ce.featureIndex});for(const Ce of ke)ge.push(Ce)}}for(const pe in J)J[pe].forEach(Se=>{const oe=Se.feature,ge=M[k[pe].source].getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ge});return J}(this._layers,E,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.sourceCaches[i];return f?function(m,v){const E=m.getRenderableIds().map(M=>m.getTileByID(M)),k=[],P={};for(let M=0;M<E.length;M++){const D=E[M],L=D.tileID.canonical.key;P[L]||(P[L]=!0,D.querySourceFeatures(k,v))}return k}(f,c):[]}addSourceType(i,c,f){return Hr(i)?f(new Error(`A source type called "${i}" already exists.`)):(((m,v)=>{Fr[m]=v})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const E in i)if(!u.deepEqual(i[E],f[E])){m=!0;break}if(!m)return;const v={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(v)}_validate(i,c,f,m,v={}){return(!v||v.validate!==!1)&&ka(this,i.call(u.validateStyle,u.extend({key:c,style:this.serialize(),value:f,styleSpec:u.v8Spec},m)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,f,m,v=!1){let E=!1,k=!1;const P={};for(const M of this._order){const D=this._layers[M];if(D.type!=="symbol")continue;if(!P[D.source]){const U=this.sourceCaches[D.source];P[D.source]=U.getRenderableIds(!0).map(Q=>U.getTileByID(Q)).sort((Q,J)=>J.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(J.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(D,P[D.source],i.center.lng);E=E||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),i.zoom))&&(this.pauseablePlacement=new T0(i,this.map.terrain,this._order,v,c,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(const M of this._order){const D=this._layers[M];D.type==="symbol"&&this.placement.updateLayerOpacities(D,P[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,f){this.imageManager.getImages(c.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,f){this.glyphManager.getGlyphs(c.stacks,f);const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,f){return u.makeRequest(c,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.validateStyle.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,f={},m){this._checkLoaded();const v=[{id:i,url:c}],E=[...Te(this.stylesheet.sprite),...v];this._validate(u.validateStyle.sprite,"sprite",E,null,f)||(this.stylesheet.sprite=E,this._loadSprite(v,!0,m))}removeSprite(i){this._checkLoaded();const c=Te(this.stylesheet.sprite);if(c.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}else this.fire(new u.ErrorEvent(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(i,c={},f){this._checkLoaded(),i&&this._validate(u.validateStyle.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}Br.registerForPluginStateChange=u.registerForPluginStateChange;var Vu=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Bo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Al={prelude:mn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:mn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:mn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:mn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Bo),terrainDepth:mn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Bo),terrainCoords:mn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Bo)};function mn(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=v?v.concat(m):m,k={};return{fragmentSource:y=y.replace(c,(P,M,D,L,U)=>(k[U]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${D} ${L} ${U};
#else
uniform ${D} ${L} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${D} ${L} ${U} = u_${U};
#endif
`)),vertexSource:i=i.replace(c,(P,M,D,L,U)=>{const Q=L==="float"?"vec2":"vec4",J=U.match(/color/)?"color":Q;return k[U]?M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${D} ${Q} a_${U};
varying ${D} ${L} ${U};
#else
uniform ${D} ${L} u_${U};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${D} ${L} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${J}(a_${U}, u_${U}_t);
#else
    ${D} ${L} ${U} = u_${U};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${D} ${Q} a_${U};
#else
uniform ${D} ${L} u_${U};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${D} ${L} ${U} = a_${U};
#else
    ${D} ${L} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${D} ${L} ${U} = unpack_mix_${J}(a_${U}, u_${U}_t);
#else
    ${D} ${L} ${U} = u_${U};
#endif
`}),staticAttributes:f,staticUniforms:E}}class Nu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,f,m,v,E,k,P,M){this.context=i;let D=this.boundPaintVertexBuffers.length!==m.length;for(let L=0;!D&&L<m.length;L++)this.boundPaintVertexBuffers[L]!==m[L]&&(D=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||D||this.boundIndexBuffer!==v||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==M?this.freshBind(c,f,m,v,E,k,P,M):(i.bindVertexArray.set(this.vao),k&&k.bind(),v&&v.dynamicDraw&&v.bind(),P&&P.bind(),M&&M.bind())}freshBind(i,c,f,m,v,E,k,P){const M=i.numAttributes,D=this.context,L=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=P,c.enableAttributes(L,i);for(const U of f)U.enableAttributes(L,i);E&&E.enableAttributes(L,i),k&&k.enableAttributes(L,i),P&&P.enableAttributes(L,i),c.bind(),c.setVertexAttribPointers(L,i,v);for(const U of f)U.bind(),U.setVertexAttribPointers(L,i,v);E&&(E.bind(),E.setVertexAttribPointers(L,i,v)),m&&m.bind(),k&&(k.bind(),k.setVertexAttribPointers(L,i,v)),P&&(P.bind(),P.setVertexAttribPointers(L,i,v)),D.currentNumAttributes=M}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ds(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const f=y[c].split(" ");i.push(f.pop())}return i}class Ta{constructor(i,c,f,m,v,E){const k=i.gl;this.program=k.createProgram();const P=Ds(c.staticAttributes),M=f?f.getBinderAttributes():[],D=P.concat(M),L=Al.prelude.staticUniforms?Ds(Al.prelude.staticUniforms):[],U=c.staticUniforms?Ds(c.staticUniforms):[],Q=f?f.getBinderUniforms():[],J=L.concat(U).concat(Q),te=[];for(const Ce of J)te.indexOf(Ce)<0&&te.push(Ce);const Y=f?f.defines():[];v&&Y.push("#define OVERDRAW_INSPECTOR;"),E&&Y.push("#define TERRAIN3D;");const pe=Y.concat(Al.prelude.fragmentSource,c.fragmentSource).join(`
`),Se=Y.concat(Al.prelude.vertexSource,c.vertexSource).join(`
`),oe=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(oe,pe),k.compileShader(oe),!k.getShaderParameter(oe,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(oe)}`);k.attachShader(this.program,oe);const ge=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ge,Se),k.compileShader(ge),!k.getShaderParameter(ge,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(ge)}`);k.attachShader(this.program,ge),this.attributes={};const ke={};this.numAttributes=D.length;for(let Ce=0;Ce<this.numAttributes;Ce++)D[Ce]&&(k.bindAttribLocation(this.program,Ce,D[Ce]),this.attributes[D[Ce]]=Ce);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(ge),k.deleteShader(oe);for(let Ce=0;Ce<te.length;Ce++){const Ae=te[Ce];if(Ae&&!ke[Ae]){const $e=k.getUniformLocation(this.program,Ae);$e&&(ke[Ae]=$e)}}this.fixedUniforms=m(i,ke),this.terrainUniforms=((Ce,Ae)=>({u_depth:new u.Uniform1i(Ce,Ae.u_depth),u_terrain:new u.Uniform1i(Ce,Ae.u_terrain),u_terrain_dim:new u.Uniform1f(Ce,Ae.u_terrain_dim),u_terrain_matrix:new u.UniformMatrix4f(Ce,Ae.u_terrain_matrix),u_terrain_unpack:new u.Uniform4f(Ce,Ae.u_terrain_unpack),u_terrain_exaggeration:new u.Uniform1f(Ce,Ae.u_terrain_exaggeration)}))(i,ke),this.binderUniforms=f?f.getUniforms(i,ke):[]}draw(i,c,f,m,v,E,k,P,M,D,L,U,Q,J,te,Y,pe,Se){const oe=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(m),i.setColorMode(v),i.setCullFace(E),P){i.activeTexture.set(oe.TEXTURE2),oe.bindTexture(oe.TEXTURE_2D,P.depthTexture),i.activeTexture.set(oe.TEXTURE3),oe.bindTexture(oe.TEXTURE_2D,P.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(P[ke])}for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(k[ke]);te&&te.setUniforms(i,this.binderUniforms,Q,{zoom:J});let ge=0;switch(c){case oe.LINES:ge=2;break;case oe.TRIANGLES:ge=3;break;case oe.LINE_STRIP:ge=1}for(const ke of U.get()){const Ce=ke.vaos||(ke.vaos={});(Ce[M]||(Ce[M]=new Nu)).bind(i,this,D,te?te.getPaintVertexBuffers():[],L,ke.vertexOffset,Y,pe,Se),oe.drawElements(c,ke.primitiveLength*ge,oe.UNSIGNED_SHORT,ke.primitiveOffset*ge*2)}}}function Uu(y,i,c){const f=1/he(c,1,i.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),v=c.tileSize*Math.pow(2,i.transform.tileZoom)/m,E=v*(c.tileID.canonical.x+c.tileID.wrap*m),k=v*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[E>>16,k>>16],u_pixel_coord_lower:[65535&E,65535&k]}}const zl=(y,i,c,f)=>{const m=i.style.light,v=m.properties.get("position"),E=[v.x,v.y,v.z],k=function(){var M=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M}();m.properties.get("anchor")==="viewport"&&function(M,D){var L=Math.sin(D),U=Math.cos(D);M[0]=U,M[1]=L,M[2]=0,M[3]=-L,M[4]=U,M[5]=0,M[6]=0,M[7]=0,M[8]=1}(k,-i.transform.angle),function(M,D,L){var U=D[0],Q=D[1],J=D[2];M[0]=U*L[0]+Q*L[3]+J*L[6],M[1]=U*L[1]+Q*L[4]+J*L[7],M[2]=U*L[2]+Q*L[5]+J*L[8]}(E,E,k);const P=m.properties.get("color");return{u_matrix:y,u_lightpos:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+c,u_opacity:f}},C0=(y,i,c,f,m,v,E)=>u.extend(zl(y,i,c,f),Uu(v,i,E),{u_height_factor:-Math.pow(2,m.overscaledZ)/E.tileSize/8}),gp=y=>({u_matrix:y}),ju=(y,i,c,f)=>u.extend(gp(y),Uu(c,i,f)),P0=(y,i)=>({u_matrix:y,u_world:i}),yp=(y,i,c,f,m)=>u.extend(ju(y,i,c,f),{u_world:m}),I0=(y,i,c,f)=>{const m=y.transform;let v,E;if(f.paint.get("circle-pitch-alignment")==="map"){const k=he(c,1,m.zoom);v=!0,E=[k,k]}else v=!1,E=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:E}},_p=(y,i,c)=>{const f=he(c,1,i.zoom),m=Math.pow(2,i.zoom-c.tileID.overscaledZ),v=c.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*m),i.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:v}},vp=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),Gu=y=>({u_matrix:y}),xp=(y,i,c,f)=>({u_matrix:y,u_extrude_scale:he(i,1,c),u_intensity:f});function bp(y,i){const c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new u.MercatorCoordinate(0,f/c).toLngLat().lat,new u.MercatorCoordinate(0,(f+1)/c).toLngLat().lat]}const Wu=(y,i,c,f)=>{const m=y.transform;return{u_matrix:Dl(y,i,c,f),u_ratio:1/he(i,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},wp=(y,i,c,f,m)=>u.extend(Wu(y,i,c,m),{u_image:0,u_image_height:f}),Xa=(y,i,c,f,m)=>{const v=y.transform,E=Pi(i,v);return{u_matrix:Dl(y,i,c,m),u_texsize:i.imageAtlasTexture.size,u_ratio:1/he(i,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},qu=(y,i,c,f,m,v)=>{const E=y.lineAtlas,k=Pi(i,y.transform),P=c.layout.get("line-cap")==="round",M=E.getDash(f.from,P),D=E.getDash(f.to,P),L=M.width*m.fromScale,U=D.width*m.toScale;return u.extend(Wu(y,i,c,v),{u_patternscale_a:[k/L,-M.height/2],u_patternscale_b:[k/U,-D.height/2],u_sdfgamma:E.width/(256*Math.min(L,U)*y.pixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:D.y,u_mix:m.t})};function Pi(y,i){return 1/he(y,1,i.tileZoom)}function Dl(y,i,c,f){return y.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Zu=(y,i,c,f,m)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(E=m.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(v=m.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Rl(m.paint.get("raster-hue-rotate"))};var v,E};function Rl(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ll=(y,i,c,f,m,v,E,k,P,M)=>{const D=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:D.cameraToCenterDistance,u_pitch:D.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:D.width/D.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+P,u_pitch_with_map:+f,u_texsize:M,u_texture:0}},Fl=(y,i,c,f,m,v,E,k,P,M,D)=>{const L=m.transform;return u.extend(Ll(y,i,c,f,m,v,E,k,P,M),{u_gamma_scale:f?Math.cos(L._pitch)*L.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+D})},Ol=(y,i,c,f,m,v,E,k,P,M)=>u.extend(Fl(y,i,c,f,m,v,E,k,!0,P,!0),{u_texsize_icon:M,u_texture_icon:1}),Ka=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),Hu=(y,i,c,f,m,v)=>u.extend(function(E,k,P,M){const D=P.imageManager.getPattern(E.from.toString()),L=P.imageManager.getPattern(E.to.toString()),{width:U,height:Q}=P.imageManager.getPixelSize(),J=Math.pow(2,M.tileID.overscaledZ),te=M.tileSize*Math.pow(2,P.transform.tileZoom)/J,Y=te*(M.tileID.canonical.x+M.tileID.wrap*J),pe=te*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[U,Q],u_mix:k.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/he(M,1,P.transform.tileZoom),u_pixel_coord_upper:[Y>>16,pe>>16],u_pixel_coord_lower:[65535&Y,65535&pe]}}(f,v,c,m),{u_matrix:y,u_opacity:i}),Ii={fillExtrusion:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_lightpos:new u.Uniform3f(y,i.u_lightpos),u_lightintensity:new u.Uniform1f(y,i.u_lightintensity),u_lightcolor:new u.Uniform3f(y,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(y,i.u_vertical_gradient),u_opacity:new u.Uniform1f(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_lightpos:new u.Uniform3f(y,i.u_lightpos),u_lightintensity:new u.Uniform1f(y,i.u_lightintensity),u_lightcolor:new u.Uniform3f(y,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(y,i.u_vertical_gradient),u_height_factor:new u.Uniform1f(y,i.u_height_factor),u_image:new u.Uniform1i(y,i.u_image),u_texsize:new u.Uniform2f(y,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(y,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(y,i.u_scale),u_fade:new u.Uniform1f(y,i.u_fade),u_opacity:new u.Uniform1f(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_image:new u.Uniform1i(y,i.u_image),u_texsize:new u.Uniform2f(y,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(y,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(y,i.u_scale),u_fade:new u.Uniform1f(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_world:new u.Uniform2f(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_world:new u.Uniform2f(y,i.u_world),u_image:new u.Uniform1i(y,i.u_image),u_texsize:new u.Uniform2f(y,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(y,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(y,i.u_scale),u_fade:new u.Uniform1f(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(y,i.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(y,i.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(y,i.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(y,i.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(y,i.u_extrude_scale),u_overscale_factor:new u.Uniform1f(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_inv_matrix:new u.UniformMatrix4f(y,i.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new u.UniformColor(y,i.u_color),u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_overlay:new u.Uniform1i(y,i.u_overlay),u_overlay_scale:new u.Uniform1f(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new u.Uniform1f(y,i.u_extrude_scale),u_intensity:new u.Uniform1f(y,i.u_intensity),u_matrix:new u.UniformMatrix4f(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_world:new u.Uniform2f(y,i.u_world),u_image:new u.Uniform1i(y,i.u_image),u_color_ramp:new u.Uniform1i(y,i.u_color_ramp),u_opacity:new u.Uniform1f(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_image:new u.Uniform1i(y,i.u_image),u_latrange:new u.Uniform2f(y,i.u_latrange),u_light:new u.Uniform2f(y,i.u_light),u_shadow:new u.UniformColor(y,i.u_shadow),u_highlight:new u.UniformColor(y,i.u_highlight),u_accent:new u.UniformColor(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_image:new u.Uniform1i(y,i.u_image),u_dimension:new u.Uniform2f(y,i.u_dimension),u_zoom:new u.Uniform1f(y,i.u_zoom),u_unpack:new u.Uniform4f(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_ratio:new u.Uniform1f(y,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_ratio:new u.Uniform1f(y,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(y,i.u_units_to_pixels),u_image:new u.Uniform1i(y,i.u_image),u_image_height:new u.Uniform1f(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_texsize:new u.Uniform2f(y,i.u_texsize),u_ratio:new u.Uniform1f(y,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_image:new u.Uniform1i(y,i.u_image),u_units_to_pixels:new u.Uniform2f(y,i.u_units_to_pixels),u_scale:new u.Uniform3f(y,i.u_scale),u_fade:new u.Uniform1f(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_ratio:new u.Uniform1f(y,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(y,i.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(y,i.u_patternscale_a),u_patternscale_b:new u.Uniform2f(y,i.u_patternscale_b),u_sdfgamma:new u.Uniform1f(y,i.u_sdfgamma),u_image:new u.Uniform1i(y,i.u_image),u_tex_y_a:new u.Uniform1f(y,i.u_tex_y_a),u_tex_y_b:new u.Uniform1f(y,i.u_tex_y_b),u_mix:new u.Uniform1f(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_tl_parent:new u.Uniform2f(y,i.u_tl_parent),u_scale_parent:new u.Uniform1f(y,i.u_scale_parent),u_buffer_scale:new u.Uniform1f(y,i.u_buffer_scale),u_fade_t:new u.Uniform1f(y,i.u_fade_t),u_opacity:new u.Uniform1f(y,i.u_opacity),u_image0:new u.Uniform1i(y,i.u_image0),u_image1:new u.Uniform1i(y,i.u_image1),u_brightness_low:new u.Uniform1f(y,i.u_brightness_low),u_brightness_high:new u.Uniform1f(y,i.u_brightness_high),u_saturation_factor:new u.Uniform1f(y,i.u_saturation_factor),u_contrast_factor:new u.Uniform1f(y,i.u_contrast_factor),u_spin_weights:new u.Uniform3f(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new u.Uniform1i(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(y,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(y,i.u_size_t),u_size:new u.Uniform1f(y,i.u_size),u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(y,i.u_pitch),u_rotate_symbol:new u.Uniform1i(y,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(y,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(y,i.u_fade_change),u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(y,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(y,i.u_coord_matrix),u_is_text:new u.Uniform1i(y,i.u_is_text),u_pitch_with_map:new u.Uniform1i(y,i.u_pitch_with_map),u_texsize:new u.Uniform2f(y,i.u_texsize),u_texture:new u.Uniform1i(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new u.Uniform1i(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(y,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(y,i.u_size_t),u_size:new u.Uniform1f(y,i.u_size),u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(y,i.u_pitch),u_rotate_symbol:new u.Uniform1i(y,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(y,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(y,i.u_fade_change),u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(y,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(y,i.u_coord_matrix),u_is_text:new u.Uniform1i(y,i.u_is_text),u_pitch_with_map:new u.Uniform1i(y,i.u_pitch_with_map),u_texsize:new u.Uniform2f(y,i.u_texsize),u_texture:new u.Uniform1i(y,i.u_texture),u_gamma_scale:new u.Uniform1f(y,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new u.Uniform1i(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(y,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(y,i.u_size_t),u_size:new u.Uniform1f(y,i.u_size),u_camera_to_center_distance:new u.Uniform1f(y,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(y,i.u_pitch),u_rotate_symbol:new u.Uniform1i(y,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(y,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(y,i.u_fade_change),u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(y,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(y,i.u_coord_matrix),u_is_text:new u.Uniform1i(y,i.u_is_text),u_pitch_with_map:new u.Uniform1i(y,i.u_pitch_with_map),u_texsize:new u.Uniform2f(y,i.u_texsize),u_texsize_icon:new u.Uniform2f(y,i.u_texsize_icon),u_texture:new u.Uniform1i(y,i.u_texture),u_texture_icon:new u.Uniform1i(y,i.u_texture_icon),u_gamma_scale:new u.Uniform1f(y,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(y,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_opacity:new u.Uniform1f(y,i.u_opacity),u_color:new u.UniformColor(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_opacity:new u.Uniform1f(y,i.u_opacity),u_image:new u.Uniform1i(y,i.u_image),u_pattern_tl_a:new u.Uniform2f(y,i.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(y,i.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(y,i.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(y,i.u_pattern_br_b),u_texsize:new u.Uniform2f(y,i.u_texsize),u_mix:new u.Uniform1f(y,i.u_mix),u_pattern_size_a:new u.Uniform2f(y,i.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(y,i.u_pattern_size_b),u_scale_a:new u.Uniform1f(y,i.u_scale_a),u_scale_b:new u.Uniform1f(y,i.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_texture:new u.Uniform1i(y,i.u_texture),u_ele_delta:new u.Uniform1f(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_ele_delta:new u.Uniform1f(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new u.UniformMatrix4f(y,i.u_matrix),u_texture:new u.Uniform1i(y,i.u_texture),u_terrain_coords_id:new u.Uniform1f(y,i.u_terrain_coords_id),u_ele_delta:new u.Uniform1f(y,i.u_ele_delta)})};class Mi{constructor(i,c,f){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Uh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Xu{constructor(i,c,f,m){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){const m=c.attributes[this.attributes[f].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,c,f){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],E=c.attributes[v.name];E!==void 0&&i.vertexAttribPointer(E,v.components,i[Uh[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rs=new WeakMap;function Ls(y){if(Rs.has(y))return Rs.get(y);{const i=y.getParameter(y.VERSION).startsWith("WebGL 2.0");return Rs.set(y,i),i}}class nn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ku extends nn{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class jh extends nn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Gh extends nn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Yu extends nn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Sp extends nn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ep extends nn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Fs extends nn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class M0 extends nn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class A0 extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class z0 extends nn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class D0 extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class R0 extends nn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class L0 extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Wh extends nn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ju extends nn{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class qh extends nn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Zh extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Os extends nn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class kp extends nn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Tp extends nn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Hh extends nn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ya extends nn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Cp extends nn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class $s extends nn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Bs extends nn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Pp extends nn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Xh extends nn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ln extends nn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const f=this.gl;Ls(f)?f.bindVertexArray(i):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Qu extends nn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class F0 extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ip extends nn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ja extends nn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class O0 extends Ja{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class $0 extends Ja{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Mp extends Ja{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class B0{constructor(i,c,f,m,v){this.context=i,this.width=c,this.height=f;const E=i.gl,k=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new O0(i,k),m)this.depthAttachment=v?new Mp(i,k):new $0(i,k);else if(v)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Un{constructor(i,c,f){this.blendFunction=i,this.blendColor=c,this.mask=f}}Un.Replace=[1,0],Un.disabled=new Un(Un.Replace,u.Color.transparent,[!1,!1,!1,!1]),Un.unblended=new Un(Un.Replace,u.Color.transparent,[!0,!0,!0,!0]),Un.alphaBlended=new Un([1,771],u.Color.transparent,[!0,!0,!0,!0]);class ec{constructor(i){var c,f;if(this.gl=i,this.clearColor=new Ku(this),this.clearDepth=new jh(this),this.clearStencil=new Gh(this),this.colorMask=new Yu(this),this.depthMask=new Sp(this),this.stencilMask=new Ep(this),this.stencilFunc=new Fs(this),this.stencilOp=new M0(this),this.stencilTest=new A0(this),this.depthRange=new z0(this),this.depthTest=new D0(this),this.depthFunc=new R0(this),this.blend=new L0(this),this.blendFunc=new Wh(this),this.blendColor=new Ju(this),this.blendEquation=new qh(this),this.cullFace=new Zh(this),this.cullFaceSide=new Os(this),this.frontFace=new kp(this),this.program=new Tp(this),this.activeTexture=new Hh(this),this.viewport=new Ya(this),this.bindFramebuffer=new Cp(this),this.bindRenderbuffer=new $s(this),this.bindTexture=new Bs(this),this.bindVertexBuffer=new Pp(this),this.bindElementBuffer=new Xh(this),this.bindVertexArray=new ln(this),this.pixelStoreUnpack=new Qu(this),this.pixelStoreUnpackPremultiplyAlpha=new F0(this),this.pixelStoreUnpackFlipY=new Ip(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ls(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Mi(this,i,c)}createVertexBuffer(i,c,f){return new Xu(this,i,c,f)}createRenderbuffer(i,c,f){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,c,f,m){return new B0(this,i,c,f,m)}clear({color:i,depth:c,stencil:f}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.deepEqual(i.blendFunction,Un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ls(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return Ls(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Zt{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}Zt.ReadOnly=!1,Zt.ReadWrite=!0,Zt.disabled=new Zt(519,Zt.ReadOnly,[0,1]);const $l=7680;class Cn{constructor(i,c,f,m,v,E){this.test=i,this.ref=c,this.mask=f,this.fail=m,this.depthFail=v,this.pass=E}}Cn.disabled=new Cn({func:519,mask:0},0,0,$l,$l,$l);class Pn{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}let Qa;function Bl(y,i,c,f,m,v,E){const k=y.context,P=k.gl,M=y.useProgram("collisionBox"),D=[];let L=0,U=0;for(let oe=0;oe<f.length;oe++){const ge=f[oe],ke=i.getTile(ge),Ce=ke.getBucket(c);if(!Ce)continue;let Ae=ge.posMatrix;m[0]===0&&m[1]===0||(Ae=y.translatePosMatrix(ge.posMatrix,ke,m,v));const $e=E?Ce.textCollisionBox:Ce.iconCollisionBox,Fe=Ce.collisionCircleArray;if(Fe.length>0){const Ge=u.create(),ut=Ae;u.mul(Ge,Ce.placementInvProjMatrix,y.transform.glCoordMatrix),u.mul(Ge,Ge,Ce.placementViewportMatrix),D.push({circleArray:Fe,circleOffset:U,transform:ut,invTransform:Ge,coord:ge}),L+=Fe.length/4,U=L}$e&&M.draw(k,P.LINES,Zt.disabled,Cn.disabled,y.colorModeForRenderPass(),Pn.disabled,_p(Ae,y.transform,ke),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge),c.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,null,y.transform.zoom,null,null,$e.collisionVertexBuffer)}if(!E||!D.length)return;const Q=y.useProgram("collisionCircle"),J=new u.CollisionCircleLayoutArray;J.resize(4*L),J._trim();let te=0;for(const oe of D)for(let ge=0;ge<oe.circleArray.length/4;ge++){const ke=4*ge,Ce=oe.circleArray[ke+0],Ae=oe.circleArray[ke+1],$e=oe.circleArray[ke+2],Fe=oe.circleArray[ke+3];J.emplace(te++,Ce,Ae,$e,Fe,0),J.emplace(te++,Ce,Ae,$e,Fe,1),J.emplace(te++,Ce,Ae,$e,Fe,2),J.emplace(te++,Ce,Ae,$e,Fe,3)}(!Qa||Qa.length<2*L)&&(Qa=function(oe){const ge=2*oe,ke=new u.QuadTriangleArray;ke.resize(ge),ke._trim();for(let Ce=0;Ce<ge;Ce++){const Ae=6*Ce;ke.uint16[Ae+0]=4*Ce+0,ke.uint16[Ae+1]=4*Ce+1,ke.uint16[Ae+2]=4*Ce+2,ke.uint16[Ae+3]=4*Ce+2,ke.uint16[Ae+4]=4*Ce+3,ke.uint16[Ae+5]=4*Ce+0}return ke}(L));const Y=k.createIndexBuffer(Qa,!0),pe=k.createVertexBuffer(J,u.collisionCircleLayout.members,!0);for(const oe of D){const ge={u_matrix:oe.transform,u_inv_matrix:oe.invTransform,u_camera_to_center_distance:(Se=y.transform).cameraToCenterDistance,u_viewport_size:[Se.width,Se.height]};Q.draw(k,P.TRIANGLES,Zt.disabled,Cn.disabled,y.colorModeForRenderPass(),Pn.disabled,ge,y.style.map.terrain&&y.style.map.terrain.getTerrainData(oe.coord),c.id,pe,Y,u.SegmentVector.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Se;pe.destroy(),Y.destroy()}Pn.disabled=new Pn(!1,1029,2305),Pn.backCCW=new Pn(!0,1029,2305);const Kh=u.identity(new Float32Array(16));function V0(y,i,c,f,m,v){const{horizontalAlign:E,verticalAlign:k}=u.getAnchorAlignment(y);return new u.Point((-(E-.5)*i/m+f[0])*v,(-(k-.5)*c/m+f[1])*v)}function Yh(y,i,c,f,m,v,E,k,P,M,D){const L=y.text.placedSymbolArray,U=y.text.dynamicLayoutVertexArray,Q=y.icon.dynamicLayoutVertexArray,J={};U.clear();for(let te=0;te<L.length;te++){const Y=L.get(te),pe=Y.hidden||!Y.crossTileID||y.allowVerticalPlacement&&!Y.placedOrientation?null:f[Y.crossTileID];if(pe){const Se=new u.Point(Y.anchorX,Y.anchorY),oe=St(Se,c?E:v,D),ge=si(m.cameraToCenterDistance,oe.signedDistanceFromCamera);let ke=u.evaluateSizeForFeature(y.textSizeData,P,Y)*ge/u.ONE_EM;c&&(ke*=y.tilePixelRatio/k);const{width:Ce,height:Ae,anchor:$e,textOffset:Fe,textBoxScale:Ge}=pe,ut=V0($e,Ce,Ae,Fe,Ge,ke),Ut=c?St(Se.add(ut),v,D).point:oe.point.add(i?ut.rotate(-m.angle):ut),Xe=y.allowVerticalPlacement&&Y.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let _t=0;_t<Y.numGlyphs;_t++)u.addDynamicAttributes(U,Ut,Xe);M&&Y.associatedIconIndex>=0&&(J[Y.associatedIconIndex]={shiftedAnchor:Ut,angle:Xe})}else X(Y.numGlyphs,U)}if(M){Q.clear();const te=y.icon.placedSymbolArray;for(let Y=0;Y<te.length;Y++){const pe=te.get(Y);if(pe.hidden)X(pe.numGlyphs,Q);else{const Se=J[Y];if(Se)for(let oe=0;oe<pe.numGlyphs;oe++)u.addDynamicAttributes(Q,Se.shiftedAnchor,Se.angle);else X(pe.numGlyphs,Q)}}y.icon.dynamicLayoutVertexBuffer.updateData(Q)}y.text.dynamicLayoutVertexBuffer.updateData(U)}function N0(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Jh(y,i,c,f,m,v,E,k,P,M,D,L){const U=y.context,Q=U.gl,J=y.transform,te=k==="map",Y=P==="map",pe=k!=="viewport"&&c.layout.get("symbol-placement")!=="point",Se=te&&!Y&&!pe,oe=!c.layout.get("symbol-sort-key").isConstant();let ge=!1;const ke=y.depthModeForSublayer(0,Zt.ReadOnly),Ce=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ae=[];for(const $e of f){const Fe=i.getTile($e),Ge=Fe.getBucket(c);if(!Ge)continue;const ut=m?Ge.text:Ge.icon;if(!ut||!ut.segments.get().length||!ut.hasVisibleVertices)continue;const Ut=ut.programConfigurations.get(c.id),Xe=m||Ge.sdfIcons,_t=m?Ge.textSizeData:Ge.iconSizeData,st=Y||J.pitch!==0,zn=y.useProgram(N0(Xe,m,Ge),Ut),jt=u.evaluateSizeForZoom(_t,J.zoom),vt=y.style.map.terrain&&y.style.map.terrain.getTerrainData($e);let Gt,Fn,gn,zi,Ar=[0,0],Hn=null;if(m)Fn=Fe.glyphAtlasTexture,gn=Q.LINEAR,Gt=Fe.glyphAtlasTexture.size,Ge.iconsInText&&(Ar=Fe.imageAtlasTexture.size,Hn=Fe.imageAtlasTexture,zi=st||y.options.rotating||y.options.zooming||_t.kind==="composite"||_t.kind==="camera"?Q.LINEAR:Q.NEAREST);else{const vr=c.layout.get("icon-size").constantOr(0)!==1||Ge.iconsNeedLinear;Fn=Fe.imageAtlasTexture,gn=Xe||y.options.rotating||y.options.zooming||vr||st?Q.LINEAR:Q.NEAREST,Gt=Fe.imageAtlasTexture.size}const fi=he(Fe,1,y.transform.zoom),Uo=hr($e.posMatrix,Y,te,y.transform,fi),fo=ai($e.posMatrix,Y,te,y.transform,fi),jo=Ce&&Ge.hasTextData(),js=c.layout.get("icon-text-fit")!=="none"&&jo&&Ge.hasIconData();if(pe){const vr=y.style.map.terrain?(Nr,On)=>y.style.map.terrain.getElevation($e,Nr,On):null,pr=c.layout.get("text-rotation-alignment")==="map";Ki(Ge,$e.posMatrix,y,m,Uo,fo,Y,M,pr,vr)}const Ia=y.translatePosMatrix($e.posMatrix,Fe,v,E),oa=pe||m&&Ce||js?Kh:Uo,or=y.translatePosMatrix(fo,Fe,v,E,!0),_r=Xe&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Vr;Vr=Xe?Ge.iconsInText?Ol(_t.kind,jt,Se,Y,y,Ia,oa,or,Gt,Ar):Fl(_t.kind,jt,Se,Y,y,Ia,oa,or,m,Gt,!0):Ll(_t.kind,jt,Se,Y,y,Ia,oa,or,m,Gt);const Gs={program:zn,buffers:ut,uniformValues:Vr,atlasTexture:Fn,atlasTextureIcon:Hn,atlasInterpolation:gn,atlasInterpolationIcon:zi,isSDF:Xe,hasHalo:_r};if(oe&&Ge.canOverlap){ge=!0;const vr=ut.segments.get();for(const pr of vr)Ae.push({segments:new u.SegmentVector([pr]),sortKey:pr.sortKey,state:Gs,terrainData:vt})}else Ae.push({segments:ut.segments,sortKey:0,state:Gs,terrainData:vt})}ge&&Ae.sort(($e,Fe)=>$e.sortKey-Fe.sortKey);for(const $e of Ae){const Fe=$e.state;if(U.activeTexture.set(Q.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,Q.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(U.activeTexture.set(Q.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),Fe.isSDF){const Ge=Fe.uniformValues;Fe.hasHalo&&(Ge.u_is_halo=1,Vl(Fe.buffers,$e.segments,c,y,Fe.program,ke,D,L,Ge,$e.terrainData)),Ge.u_is_halo=0}Vl(Fe.buffers,$e.segments,c,y,Fe.program,ke,D,L,Fe.uniformValues,$e.terrainData)}}function Vl(y,i,c,f,m,v,E,k,P,M){const D=f.context;m.draw(D,D.gl.TRIANGLES,v,E,k,Pn.disabled,P,M,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,f.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function tc(y,i,c,f,m){if(!c||!f||!f.imageAtlas)return;const v=f.imageAtlas.patternPositions;let E=v[c.to.toString()],k=v[c.from.toString()];if(!E||!k){const P=m.getPaintProperty(i);E=v[P],k=v[P]}E&&k&&y.setConstantPatternPositions(E,k)}function Qh(y,i,c,f,m,v,E){const k=y.context.gl,P="fill-pattern",M=c.paint.get(P),D=M&&M.constantOr(1),L=c.getCrossfadeParameters();let U,Q,J,te,Y;E?(Q=D&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=k.LINES):(Q=D?"fillPattern":"fill",U=k.TRIANGLES);const pe=M.constantOr(null);for(const Se of f){const oe=i.getTile(Se);if(D&&!oe.patternsLoaded())continue;const ge=oe.getBucket(c);if(!ge)continue;const ke=ge.programConfigurations.get(c.id),Ce=y.useProgram(Q,ke),Ae=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Se);D&&(y.context.activeTexture.set(k.TEXTURE0),oe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),ke.updatePaintBuffers(L)),tc(ke,P,pe,oe,c);const $e=Ae?Se:null,Fe=y.translatePosMatrix($e?$e.posMatrix:Se.posMatrix,oe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){te=ge.indexBuffer2,Y=ge.segments2;const Ge=[k.drawingBufferWidth,k.drawingBufferHeight];J=Q==="fillOutlinePattern"&&D?yp(Fe,y,L,oe,Ge):P0(Fe,Ge)}else te=ge.indexBuffer,Y=ge.segments,J=D?ju(Fe,y,L,oe):gp(Fe);Ce.draw(y.context,U,m,y.stencilModeForClipping(Se),v,Pn.disabled,J,Ae,c.id,ge.layoutVertexBuffer,te,Y,c.paint,y.transform.zoom,ke)}}function nc(y,i,c,f,m,v,E){const k=y.context,P=k.gl,M="fill-extrusion-pattern",D=c.paint.get(M),L=D.constantOr(1),U=c.getCrossfadeParameters(),Q=c.paint.get("fill-extrusion-opacity"),J=D.constantOr(null);for(const te of f){const Y=i.getTile(te),pe=Y.getBucket(c);if(!pe)continue;const Se=y.style.map.terrain&&y.style.map.terrain.getTerrainData(te),oe=pe.programConfigurations.get(c.id),ge=y.useProgram(L?"fillExtrusionPattern":"fillExtrusion",oe);L&&(y.context.activeTexture.set(P.TEXTURE0),Y.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),oe.updatePaintBuffers(U)),tc(oe,M,J,Y,c);const ke=y.translatePosMatrix(te.posMatrix,Y,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ce=c.paint.get("fill-extrusion-vertical-gradient"),Ae=L?C0(ke,y,Ce,Q,te,U,Y):zl(ke,y,Ce,Q);ge.draw(k,k.gl.TRIANGLES,m,v,E,Pn.backCCW,Ae,Se,c.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,c.paint,y.transform.zoom,oe,y.style.map.terrain&&pe.centroidVertexBuffer)}}function rc(y,i,c,f,m,v,E){const k=y.context,P=k.gl,M=c.fbo;if(!M)return;const D=y.useProgram("hillshade"),L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,M.colorAttachment.get()),D.draw(k,P.TRIANGLES,m,v,E,Pn.disabled,((U,Q,J,te)=>{const Y=J.paint.get("hillshade-shadow-color"),pe=J.paint.get("hillshade-highlight-color"),Se=J.paint.get("hillshade-accent-color");let oe=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(oe-=U.transform.angle);const ge=!U.options.moving;return{u_matrix:te?te.posMatrix:U.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),ge),u_image:0,u_latrange:bp(0,Q.tileID),u_light:[J.paint.get("hillshade-exaggeration"),oe],u_shadow:Y,u_highlight:pe,u_accent:Se}})(y,c,f,L?i:null),L,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function ed(y,i,c,f,m,v){const E=y.context,k=E.gl,P=i.dem;if(P&&P.data){const M=P.dim,D=P.stride,L=P.getPixels();if(E.activeTexture.set(k.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(D),i.demTexture){const Q=i.demTexture;Q.update(L,{premultiply:!1}),Q.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else i.demTexture=new we(E,L,k.RGBA,{premultiply:!1}),i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);E.activeTexture.set(k.TEXTURE0);let U=i.fbo;if(!U){const Q=new we(E,{width:M,height:M,data:null},k.RGBA);Q.bind(k.LINEAR,k.CLAMP_TO_EDGE),U=i.fbo=E.createFramebuffer(M,M,!0,!1),U.colorAttachment.set(Q.texture)}E.bindFramebuffer.set(U.framebuffer),E.viewport.set([0,0,M,M]),y.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,f,m,v,Pn.disabled,((Q,J)=>{const te=J.stride,Y=u.create();return u.ortho(Y,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(Y,Y,[0,-u.EXTENT,0]),{u_matrix:Y,u_image:1,u_dimension:[te,te],u_zoom:Q.overscaledZ,u_unpack:J.getUnpackVector()}})(i.tileID,P),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function U0(y,i,c,f,m,v){const E=f.paint.get("raster-fade-duration");if(!v&&E>0){const k=u.browser.now(),P=(k-y.timeAdded)/E,M=i?(k-i.timeAdded)/E:-1,D=c.getSource(),L=m.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),U=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(y.tileID.overscaledZ-L),Q=U&&y.refreshedUponExpiration?1:u.clamp(U?P:1-M,0,1);return y.refreshedUponExpiration&&P>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const Ap=new u.Color(1,0,0,1),rr=new u.Color(0,1,0,1),es=new u.Color(0,0,1,1),Ji=new u.Color(1,0,1,1),td=new u.Color(0,1,1,1);function ic(y,i,c,f){ra(y,0,i+c/2,y.transform.width,c,f)}function nd(y,i,c,f){ra(y,i-c/2,0,c,y.transform.height,f)}function ra(y,i,c,f,m,v){const E=y.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*y.pixelRatio,c*y.pixelRatio,f*y.pixelRatio,m*y.pixelRatio),E.clear({color:v}),k.disable(k.SCISSOR_TEST)}function Nl(y,i,c){const f=y.context,m=f.gl,v=c.posMatrix,E=y.useProgram("debug"),k=Zt.disabled,P=Cn.disabled,M=y.colorModeForRenderPass(),D="$debug",L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);f.activeTexture.set(m.TEXTURE0);const U=i.getTileByID(c.key).latestRawTileData,Q=Math.floor((U&&U.byteLength||0)/1024),J=i.getTile(c).tileSize,te=512/Math.min(J,512)*(c.overscaledZ/y.transform.zoom)*.5;let Y=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Y+=` => ${c.overscaledZ}`),function(pe,Se){pe.initDebugOverlayCanvas();const oe=pe.debugOverlayCanvas,ge=pe.context.gl,ke=pe.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,oe.width,oe.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(Se,5,5),ke.strokeText(Se,5,5),pe.debugOverlayTexture.update(oe),pe.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(y,`${Y} ${Q}kB`),E.draw(f,m.TRIANGLES,k,P,Un.alphaBlended,Pn.disabled,vp(v,u.Color.transparent,te),null,D,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),E.draw(f,m.LINE_STRIP,k,P,M,Pn.disabled,vp(v,u.Color.red),L,D,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function oc(y,i,c){const f=y.context,m=f.gl,v=y.colorModeForRenderPass(),E=new Zt(m.LEQUAL,Zt.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),P=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const M of c){const D=y.renderToTexture.getTexture(M),L=i.getTerrainData(M.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,D.texture);const U={u_matrix:y.transform.calculatePosMatrix(M.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};k.draw(f,m.TRIANGLES,E,Cn.disabled,v,Pn.backCCW,U,L,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class zp{constructor(i,c){this.context=new ec(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.create(),renderTime:0},this.setup(),this.numSublayers=Sn.maxUnderzooming+Sn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tr}resize(i,c,f){if(this.width=Math.floor(i*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,c=new u.PosArray;c.emplaceBack(0,0),c.emplaceBack(u.EXTENT,0),c.emplaceBack(0,u.EXTENT),c.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,Vu.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const f=new u.PosArray;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(f,Vu.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const m=new u.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(u.EXTENT,0,u.EXTENT,0),m.emplaceBack(0,u.EXTENT,0,u.EXTENT),m.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(m,Rn.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const v=new u.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,Vu.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const E=new u.LineStripIndexArray;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const k=new u.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const P=this.context.gl;this.stencilClearMode=new Cn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Zt.disabled,this.stencilClearMode,Un.disabled,Pn.disabled,Gu(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const f=this.context,m=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Un.disabled),f.setDepthMode(Zt.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of c){const k=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);v.draw(f,m.TRIANGLES,Zt.disabled,new Cn({func:m.ALWAYS,mask:0},k,255,m.KEEP,m.KEEP,m.REPLACE),Un.disabled,Pn.disabled,Gu(E.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Cn({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Cn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,f=i.sort((E,k)=>k.overscaledZ-E.overscaledZ),m=f[f.length-1].overscaledZ,v=f[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const E={};for(let k=0;k<v;k++)E[k+m]=new Cn({func:c.GEQUAL,mask:255},k+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=v,[E,f]}return[{[m]:Cn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Un([i.CONSTANT_COLOR,i.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Un.unblended:Un.alphaBlended}depthModeForSublayer(i,c,f){if(!this.opaquePassEnabledForLayer())return Zt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Zt(f||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,v={},E={},k={};for(const P in m){const M=m[P];M.used&&M.prepare(this.context),v[P]=M.getVisibleCoordinates(),E[P]=v[P].slice().reverse(),k[P]=M.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<f.length;P++)if(this.style._layers[f[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(u.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(M,D){const L=M.context,U=L.gl,Q=Un.unblended,J=new Zt(U.LEQUAL,Zt.ReadWrite,[0,1]),te=D.getTerrainMesh(),Y=D.sourceCache.getRenderableTiles(),pe=M.useProgram("terrainDepth");L.bindFramebuffer.set(D.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),L.clear({color:u.Color.transparent,depth:1});for(const Se of Y){const oe=D.getTerrainData(Se.tileID),ge={u_matrix:M.transform.calculatePosMatrix(Se.tileID.toUnwrapped()),u_ele_delta:D.getMeshFrameDelta(M.transform.zoom)};pe.draw(L,U.TRIANGLES,J,Cn.disabled,Q,Pn.backCCW,ge,oe,"terrain",te.vertexBuffer,te.indexBuffer,te.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain),function(M,D){const L=M.context,U=L.gl,Q=Un.unblended,J=new Zt(U.LEQUAL,Zt.ReadWrite,[0,1]),te=D.getTerrainMesh(),Y=D.getCoordsTexture(),pe=D.sourceCache.getRenderableTiles(),Se=M.useProgram("terrainCoords");L.bindFramebuffer.set(D.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,M.width/devicePixelRatio,M.height/devicePixelRatio]),L.clear({color:u.Color.transparent,depth:1}),D.coordsIndex=[];for(const oe of pe){const ge=D.getTerrainData(oe.tileID);L.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Y.texture);const ke={u_matrix:M.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-D.coordsIndex.length)/255,u_texture:0,u_ele_delta:D.getMeshFrameDelta(M.transform.zoom)};Se.draw(L,U.TRIANGLES,J,Cn.disabled,Q,Pn.backCCW,ke,ge,"terrain",te.vertexBuffer,te.indexBuffer,te.segments),D.coordsIndex.push(oe.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,M.width,M.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of f){const M=this.style._layers[P];if(!M.hasOffscreenPass()||M.isHidden(this.transform.zoom))continue;const D=E[M.source];(M.type==="custom"||D.length)&&this.renderLayer(this,m[M.source],M,D)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[f[this.currentLayer]],M=m[P.source],D=v[P.source];this._renderTileClippingMasks(P,D),this.renderLayer(this,M,P,D)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const P=this.style._layers[f[this.currentLayer]],M=m[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const D=(P.type==="symbol"?k:E)[P.source];this._renderTileClippingMasks(P,v[P.source]),this.renderLayer(this,M,P,D)}if(this.options.showTileBoundaries){const P=function(M,D){let L=null;const U=Object.values(M._layers).flatMap(Y=>Y.source&&!Y.isHidden(D)?[M.sourceCaches[Y.source]]:[]),Q=U.filter(Y=>Y.getSource().type==="vector"),J=U.filter(Y=>Y.getSource().type!=="vector"),te=Y=>{(!L||L.getSource().maxzoom<Y.getSource().maxzoom)&&(L=Y)};return Q.forEach(Y=>te(Y)),L||J.forEach(Y=>te(Y)),L}(this.style,this.transform.zoom);P&&function(M,D,L){for(let U=0;U<L.length;U++)Nl(M,D,L[U])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const M=P.transform.padding;ic(P,P.transform.height-(M.top||0),3,Ap),ic(P,M.bottom||0,3,rr),nd(P,M.left||0,3,es),nd(P,P.transform.width-(M.right||0),3,Ji);const D=P.transform.centerPoint;(function(L,U,Q,J){ra(L,U-1,Q-10,2,20,J),ra(L,U-10,Q-1,20,2,J)})(P,D.x,P.transform.height-D.y,td)}(this),this.context.setDefault()}renderLayer(i,c,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(v,E,k,P,M){if(v.renderPass!=="translucent")return;const D=Cn.disabled,L=v.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(U,Q,J,te,Y,pe,Se){const oe=Q.transform,ge=Y==="map",ke=pe==="map";for(const Ce of U){const Ae=te.getTile(Ce),$e=Ae.getBucket(J);if(!$e||!$e.text||!$e.text.segments.get().length)continue;const Fe=u.evaluateSizeForZoom($e.textSizeData,oe.zoom),Ge=he(Ae,1,Q.transform.zoom),ut=hr(Ce.posMatrix,ke,ge,Q.transform,Ge),Ut=J.layout.get("icon-text-fit")!=="none"&&$e.hasIconData();if(Fe){const Xe=Math.pow(2,oe.zoom-Ae.tileID.overscaledZ);Yh($e,ge,ke,Se,oe,ut,Ce.posMatrix,Xe,Fe,Ut,Q.style.map.terrain?(_t,st)=>Q.style.map.terrain.getElevation(Ce,_t,st):null)}}}(P,v,k,E,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),M),k.paint.get("icon-opacity").constantOr(1)!==0&&Jh(v,E,k,P,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),D,L),k.paint.get("text-opacity").constantOr(1)!==0&&Jh(v,E,k,P,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),D,L),E.map.showCollisionBoxes&&(Bl(v,E,k,P,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),Bl(v,E,k,P,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(i,c,f,m,this.style.placement.variableOffsets);break;case"circle":(function(v,E,k,P){if(v.renderPass!=="translucent")return;const M=k.paint.get("circle-opacity"),D=k.paint.get("circle-stroke-width"),L=k.paint.get("circle-stroke-opacity"),U=!k.layout.get("circle-sort-key").isConstant();if(M.constantOr(1)===0&&(D.constantOr(1)===0||L.constantOr(1)===0))return;const Q=v.context,J=Q.gl,te=v.depthModeForSublayer(0,Zt.ReadOnly),Y=Cn.disabled,pe=v.colorModeForRenderPass(),Se=[];for(let oe=0;oe<P.length;oe++){const ge=P[oe],ke=E.getTile(ge),Ce=ke.getBucket(k);if(!Ce)continue;const Ae=Ce.programConfigurations.get(k.id),$e=v.useProgram("circle",Ae),Fe=Ce.layoutVertexBuffer,Ge=Ce.indexBuffer,ut=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ge),Ut={programConfiguration:Ae,program:$e,layoutVertexBuffer:Fe,indexBuffer:Ge,uniformValues:I0(v,ge,ke,k),terrainData:ut};if(U){const Xe=Ce.segments.get();for(const _t of Xe)Se.push({segments:new u.SegmentVector([_t]),sortKey:_t.sortKey,state:Ut})}else Se.push({segments:Ce.segments,sortKey:0,state:Ut})}U&&Se.sort((oe,ge)=>oe.sortKey-ge.sortKey);for(const oe of Se){const{programConfiguration:ge,program:ke,layoutVertexBuffer:Ce,indexBuffer:Ae,uniformValues:$e,terrainData:Fe}=oe.state;ke.draw(Q,J.TRIANGLES,te,Y,pe,Pn.disabled,$e,Fe,k.id,Ce,Ae,oe.segments,k.paint,v.transform.zoom,ge)}})(i,c,f,m);break;case"heatmap":(function(v,E,k,P){if(k.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const M=v.context,D=M.gl,L=Cn.disabled,U=new Un([D.ONE,D.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(Q,J,te){const Y=Q.gl;Q.activeTexture.set(Y.TEXTURE1),Q.viewport.set([0,0,J.width/4,J.height/4]);let pe=te.heatmapFbo;if(pe)Y.bindTexture(Y.TEXTURE_2D,pe.colorAttachment.get()),Q.bindFramebuffer.set(pe.framebuffer);else{const Se=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,Se),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),pe=te.heatmapFbo=Q.createFramebuffer(J.width/4,J.height/4,!1,!1),function(oe,ge,ke,Ce){var Ae,$e;const Fe=oe.gl,Ge=(Ae=oe.HALF_FLOAT)!==null&&Ae!==void 0?Ae:Fe.UNSIGNED_BYTE,ut=($e=oe.RGBA16F)!==null&&$e!==void 0?$e:Fe.RGBA;Fe.texImage2D(Fe.TEXTURE_2D,0,ut,ge.width/4,ge.height/4,0,Fe.RGBA,Ge,null),Ce.colorAttachment.set(ke)}(Q,J,Se,pe)}})(M,v,k),M.clear({color:u.Color.transparent});for(let Q=0;Q<P.length;Q++){const J=P[Q];if(E.hasRenderableParent(J))continue;const te=E.getTile(J),Y=te.getBucket(k);if(!Y)continue;const pe=Y.programConfigurations.get(k.id),Se=v.useProgram("heatmap",pe),{zoom:oe}=v.transform;Se.draw(M,D.TRIANGLES,Zt.disabled,L,U,Pn.disabled,xp(J.posMatrix,te,oe,k.paint.get("heatmap-intensity")),null,k.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,k.paint,v.transform.zoom,pe)}M.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(M,D){const L=M.context,U=L.gl,Q=D.heatmapFbo;if(!Q)return;L.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Q.colorAttachment.get()),L.activeTexture.set(U.TEXTURE1);let J=D.colorRampTexture;J||(J=D.colorRampTexture=new we(L,D.colorRamp,U.RGBA)),J.bind(U.LINEAR,U.CLAMP_TO_EDGE),M.useProgram("heatmapTexture").draw(L,U.TRIANGLES,Zt.disabled,Cn.disabled,M.colorModeForRenderPass(),Pn.disabled,((te,Y,pe,Se)=>{const oe=u.create();u.ortho(oe,0,te.width,te.height,0,0,1);const ge=te.context.gl;return{u_matrix:oe,u_world:[ge.drawingBufferWidth,ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}})(M,D),null,D.id,M.viewportBuffer,M.quadTriangleIndexBuffer,M.viewportSegments,D.paint,M.transform.zoom)}(v,k))})(i,c,f,m);break;case"line":(function(v,E,k,P){if(v.renderPass!=="translucent")return;const M=k.paint.get("line-opacity"),D=k.paint.get("line-width");if(M.constantOr(1)===0||D.constantOr(1)===0)return;const L=v.depthModeForSublayer(0,Zt.ReadOnly),U=v.colorModeForRenderPass(),Q=k.paint.get("line-dasharray"),J=k.paint.get("line-pattern"),te=J.constantOr(1),Y=k.paint.get("line-gradient"),pe=k.getCrossfadeParameters(),Se=te?"linePattern":Q?"lineSDF":Y?"lineGradient":"line",oe=v.context,ge=oe.gl;let ke=!0;for(const Ce of P){const Ae=E.getTile(Ce);if(te&&!Ae.patternsLoaded())continue;const $e=Ae.getBucket(k);if(!$e)continue;const Fe=$e.programConfigurations.get(k.id),Ge=v.context.program.get(),ut=v.useProgram(Se,Fe),Ut=ke||ut.program!==Ge,Xe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ce),_t=J.constantOr(null);if(_t&&Ae.imageAtlas){const jt=Ae.imageAtlas,vt=jt.patternPositions[_t.to.toString()],Gt=jt.patternPositions[_t.from.toString()];vt&&Gt&&Fe.setConstantPatternPositions(vt,Gt)}const st=Xe?Ce:null,zn=te?Xa(v,Ae,k,pe,st):Q?qu(v,Ae,k,Q,pe,st):Y?wp(v,Ae,k,$e.lineClipsArray.length,st):Wu(v,Ae,k,st);if(te)oe.activeTexture.set(ge.TEXTURE0),Ae.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fe.updatePaintBuffers(pe);else if(Q&&(Ut||v.lineAtlas.dirty))oe.activeTexture.set(ge.TEXTURE0),v.lineAtlas.bind(oe);else if(Y){const jt=$e.gradients[k.id];let vt=jt.texture;if(k.gradientVersion!==jt.version){let Gt=256;if(k.stepInterpolant){const Fn=E.getSource().maxzoom,gn=Ce.canonical.z===Fn?Math.ceil(1<<v.transform.maxZoom-Ce.canonical.z):1;Gt=u.clamp(u.nextPowerOfTwo($e.maxLineLength/u.EXTENT*1024*gn),256,oe.maxTextureSize)}jt.gradient=u.renderColorRamp({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:jt.gradient||void 0,clips:$e.lineClipsArray}),jt.texture?jt.texture.update(jt.gradient):jt.texture=new we(oe,jt.gradient,ge.RGBA),jt.version=k.gradientVersion,vt=jt.texture}oe.activeTexture.set(ge.TEXTURE0),vt.bind(k.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}ut.draw(oe,ge.TRIANGLES,L,v.stencilModeForClipping(Ce),U,Pn.disabled,zn,Xe,k.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,k.paint,v.transform.zoom,Fe,$e.layoutVertexBuffer2),ke=!1}})(i,c,f,m);break;case"fill":(function(v,E,k,P){const M=k.paint.get("fill-color"),D=k.paint.get("fill-opacity");if(D.constantOr(1)===0)return;const L=v.colorModeForRenderPass(),U=k.paint.get("fill-pattern"),Q=v.opaquePassEnabledForLayer()&&!U.constantOr(1)&&M.constantOr(u.Color.transparent).a===1&&D.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===Q){const J=v.depthModeForSublayer(1,v.renderPass==="opaque"?Zt.ReadWrite:Zt.ReadOnly);Qh(v,E,k,P,J,L,!1)}if(v.renderPass==="translucent"&&k.paint.get("fill-antialias")){const J=v.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Zt.ReadOnly);Qh(v,E,k,P,J,L,!0)}})(i,c,f,m);break;case"fill-extrusion":(function(v,E,k,P){const M=k.paint.get("fill-extrusion-opacity");if(M!==0&&v.renderPass==="translucent"){const D=new Zt(v.context.gl.LEQUAL,Zt.ReadWrite,v.depthRangeFor3D);if(M!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))nc(v,E,k,P,D,Cn.disabled,Un.disabled),nc(v,E,k,P,D,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const L=v.colorModeForRenderPass();nc(v,E,k,P,D,Cn.disabled,L)}}})(i,c,f,m);break;case"hillshade":(function(v,E,k,P){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const M=v.context,D=v.depthModeForSublayer(0,Zt.ReadOnly),L=v.colorModeForRenderPass(),[U,Q]=v.renderPass==="translucent"?v.stencilConfigForOverlap(P):[{},P];for(const J of Q){const te=E.getTile(J);te.needsHillshadePrepare!==void 0&&te.needsHillshadePrepare&&v.renderPass==="offscreen"?ed(v,te,k,D,Cn.disabled,L):v.renderPass==="translucent"&&rc(v,J,te,k,D,U[J.overscaledZ],L)}M.viewport.set([0,0,v.width,v.height])})(i,c,f,m);break;case"raster":(function(v,E,k,P){if(v.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!P.length)return;const M=v.context,D=M.gl,L=E.getSource(),U=v.useProgram("raster"),Q=v.colorModeForRenderPass(),[J,te]=L instanceof Xt?[{},P]:v.stencilConfigForOverlap(P),Y=te[te.length-1].overscaledZ,pe=!v.options.moving;for(const Se of te){const oe=v.depthModeForSublayer(Se.overscaledZ-Y,k.paint.get("raster-opacity")===1?Zt.ReadWrite:Zt.ReadOnly,D.LESS),ge=E.getTile(Se);ge.registerFadeDuration(k.paint.get("raster-fade-duration"));const ke=E.findLoadedParent(Se,0),Ce=U0(ge,ke,E,k,v.transform,v.style.map.terrain);let Ae,$e;const Fe=k.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;M.activeTexture.set(D.TEXTURE0),ge.texture.bind(Fe,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),M.activeTexture.set(D.TEXTURE1),ke?(ke.texture.bind(Fe,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,ke.tileID.overscaledZ-ge.tileID.overscaledZ),$e=[ge.tileID.canonical.x*Ae%1,ge.tileID.canonical.y*Ae%1]):ge.texture.bind(Fe,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST);const Ge=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Se),ut=Ge?Se:null,Ut=ut?ut.posMatrix:v.transform.calculatePosMatrix(Se.toUnwrapped(),pe),Xe=Zu(Ut,$e||[0,0],Ae||1,Ce,k);L instanceof Xt?U.draw(M,D.TRIANGLES,oe,Cn.disabled,Q,Pn.disabled,Xe,Ge,k.id,L.boundsBuffer,v.quadTriangleIndexBuffer,L.boundsSegments):U.draw(M,D.TRIANGLES,oe,J[Se.overscaledZ],Q,Pn.disabled,Xe,Ge,k.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(i,c,f,m);break;case"background":(function(v,E,k,P){const M=k.paint.get("background-color"),D=k.paint.get("background-opacity");if(D===0)return;const L=v.context,U=L.gl,Q=v.transform,J=Q.tileSize,te=k.paint.get("background-pattern");if(v.isPatternMissing(te))return;const Y=!te&&M.a===1&&D===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Y)return;const pe=Cn.disabled,Se=v.depthModeForSublayer(0,Y==="opaque"?Zt.ReadWrite:Zt.ReadOnly),oe=v.colorModeForRenderPass(),ge=v.useProgram(te?"backgroundPattern":"background"),ke=P||Q.coveringTiles({tileSize:J,terrain:v.style.map.terrain});te&&(L.activeTexture.set(U.TEXTURE0),v.imageManager.bind(v.context));const Ce=k.getCrossfadeParameters();for(const Ae of ke){const $e=P?Ae.posMatrix:v.transform.calculatePosMatrix(Ae.toUnwrapped()),Fe=te?Hu($e,D,v,te,{tileID:Ae,tileSize:J},Ce):Ka($e,D,M),Ge=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ae);ge.draw(L,U.TRIANGLES,Se,pe,oe,Pn.disabled,Fe,Ge,k.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(i,0,f,m);break;case"custom":(function(v,E,k){const P=v.context,M=k.implementation;if(v.renderPass==="offscreen"){const D=M.prerender;D&&(v.setCustomLayerDefaults(),P.setColorMode(v.colorModeForRenderPass()),D.call(M,P.gl,v.transform.customLayerMatrix()),P.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),P.setColorMode(v.colorModeForRenderPass()),P.setStencilMode(Cn.disabled);const D=M.renderingMode==="3d"?new Zt(v.context.gl.LEQUAL,Zt.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Zt.ReadOnly);P.setDepthMode(D),M.render(P.gl,v.transform.customLayerMatrix()),P.setDirty(),v.setBaseState(),P.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,c,f,m,v){if(!f[0]&&!f[1])return i;const E=v?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(E){const M=Math.sin(E),D=Math.cos(E);f=[f[0]*D-f[1]*M,f[0]*M+f[1]*D]}const k=[v?f[0]:he(c,f[0],this.transform.zoom),v?f[1]:he(c,f[1],this.transform.zoom),0],P=new Float32Array(16);return u.translate(P,i,k),P}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!c||!f}useProgram(i,c){this.cache=this.cache||{};const f=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Ta(this.context,Al[i],c,Ii[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new we(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class ac{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,f){const m=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const P=1/(k=u.transformMat4([],k,i))[3]/c*m;return u.mul$1(k,k,[P,P,1/k[3],P])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const P=function(U,Q){var J=Q[0],te=Q[1],Y=Q[2],pe=J*J+te*te+Y*Y;return pe>0&&(pe=1/Math.sqrt(pe)),U[0]=Q[0]*pe,U[1]=Q[1]*pe,U[2]=Q[2]*pe,U}([],function(U,Q,J){var te=Q[0],Y=Q[1],pe=Q[2],Se=J[0],oe=J[1],ge=J[2];return U[0]=Y*ge-pe*oe,U[1]=pe*Se-te*ge,U[2]=te*oe-Y*Se,U}([],ye([],v[k[0]],v[k[1]]),ye([],v[k[2]],v[k[1]]))),M=-((D=P)[0]*(L=v[k[1]])[0]+D[1]*L[1]+D[2]*L[2]);var D,L;return P.concat(M)});return new ac(v,E)}}class Ul{constructor(i,c){this.min=i,this.max=c,this.center=function(f,m,v){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,v){return f[0]=m[0]+v[0],f[1]=m[1]+v[1],f[2]=m[2]+v[2],f}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],f=ce(this.min),m=ce(this.max);for(let v=0;v<c.length;v++)f[v]=c[v]?this.min[v]:this.center[v],m[v]=c[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Ul(f,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<i.planes.length;m++){const v=i.planes[m];let E=0;for(let k=0;k<c.length;k++)u.dot(v,c[k])>=0&&E++;if(E===0)return 0;E!==c.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let v=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const P=i.points[k][m]-this.min[m];v=Math.min(v,P),E=Math.max(E,P)}if(E<0||v>this.max[m]-this.min[m])return 0}return 1}}class sc{constructor(i=0,c=0,f=0,m=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=m}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=u.interpolate.number(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.interpolate.number(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=u.interpolate.number(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=u.interpolate.number(i.right,c.right,f)),this}getCenter(i,c){const f=u.clamp((this.left+i-this.right)/2,0,i),m=u.clamp((this.top+c-this.bottom)/2,0,c);return new u.Point(f,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new sc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class lc{constructor(i,c,f,m,v){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=m==null?60:m,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new lc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,v){var E=m[0],k=m[1],P=m[2],M=m[3],D=Math.sin(v),L=Math.cos(v);f[0]=E*L+P*D,f[1]=k*L+M*D,f[2]=E*-D+P*L,f[3]=k*-D+M*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.Point(0,0)),m=this.pointCoordinate(new u.Point(this.width,0)),v=this.pointCoordinate(new u.Point(this.width,this.height)),E=this.pointCoordinate(new u.Point(0,this.height)),k=Math.floor(Math.min(f.x,m.x,v.x,E.x)),P=Math.floor(Math.max(f.x,m.x,v.x,E.x)),M=1;for(let D=k-M;D<=P+M;D++)D!==0&&c.push(new u.UnwrappedTileID(D,i))}return c}coveringTiles(i){var c,f;let m=this.coveringZoomLevel(i);const v=m;if(i.minzoom!==void 0&&m<i.minzoom)return[];i.maxzoom!==void 0&&m>i.maxzoom&&(m=i.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),k=u.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,m),M=[P*E.x,P*E.y,0],D=[P*k.x,P*k.y,0],L=ac.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let U=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(U=m);const Q=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,J=oe=>({aabb:new Ul([oe*P,0,0],[(oe+1)*P,P,0]),zoom:0,x:0,y:0,wrap:oe,fullyVisible:!1}),te=[],Y=[],pe=m,Se=i.reparseOverscaled?v:m;if(this._renderWorldCopies)for(let oe=1;oe<=3;oe++)te.push(J(-oe)),te.push(J(oe));for(te.push(J(0));te.length>0;){const oe=te.pop(),ge=oe.x,ke=oe.y;let Ce=oe.fullyVisible;if(!Ce){const ut=oe.aabb.intersects(L);if(ut===0)continue;Ce=ut===2}const Ae=i.terrain?M:D,$e=oe.aabb.distanceX(Ae),Fe=oe.aabb.distanceY(Ae),Ge=Math.max(Math.abs($e),Math.abs(Fe));if(oe.zoom===pe||Ge>Q+(1<<pe-oe.zoom)-2&&oe.zoom>=U){const ut=pe-oe.zoom,Ut=M[0]-.5-(ge<<ut),Xe=M[1]-.5-(ke<<ut);Y.push({tileID:new u.OverscaledTileID(oe.zoom===pe?Se:oe.zoom,oe.wrap,oe.zoom,ge,ke),distanceSq:me([D[0]-.5-ge,D[1]-.5-ke]),tileDistanceToCamera:Math.sqrt(Ut*Ut+Xe*Xe)})}else for(let ut=0;ut<4;ut++){const Ut=(ge<<1)+ut%2,Xe=(ke<<1)+(ut>>1),_t=oe.zoom+1;let st=oe.aabb.quadrant(ut);if(i.terrain){const zn=new u.OverscaledTileID(_t,oe.wrap,_t,Ut,Xe),jt=i.terrain.getMinMaxElevation(zn),vt=(c=jt.minElevation)!==null&&c!==void 0?c:this.elevation,Gt=(f=jt.maxElevation)!==null&&f!==void 0?f:this.elevation;st=new Ul([st.min[0],st.min[1],vt],[st.max[0],st.max[1],Gt])}te.push({aabb:st,zoom:_t,x:Ut,y:Xe,wrap:oe.wrap,fullyVisible:Ce})}}return Y.sort((oe,ge)=>oe.distanceSq-ge.distanceSq).map(oe=>oe.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),f=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),v=u.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),E=u.MercatorCoordinate.fromLngLat(c,f),k=v.x-E.x,P=v.y-E.y,M=v.z-E.z,D=Math.sqrt(k*k+P*P+M*M),L=this.scaleZoom(this.cameraToCenterDistance/D/this.tileSize);this._elevation=f,this._center=c,this.zoom=L}setLocationAtPoint(i,c){const f=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),E=new u.MercatorCoordinate(v.x-(f.x-m.x),v.y-(f.y-m.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const U=c.pointCoordinate(i);if(U!=null)return U}const f=[i.x,i.y,0,1],m=[i.x,i.y,1,1];u.transformMat4(f,f,this.pixelMatrixInverse),u.transformMat4(m,m,this.pixelMatrixInverse);const v=f[3],E=m[3],k=f[1]/v,P=m[1]/E,M=f[2]/v,D=m[2]/E,L=M===D?0:(0-M)/(D-M);return new u.MercatorCoordinate(u.interpolate.number(f[0]/v,m[0]/E,L)/this.worldSize,u.interpolate.number(k,P,L)/this.worldSize)}coordinatePoint(i,c=0,f=this.pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.transformMat4(m,m,f),new u.Point(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new u.Point(0,i))).extend(this.pointLocation(new u.Point(this.width,i))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const f=i.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const v=i.canonical,E=this.worldSize/this.zoomScale(v.z),k=v.x+Math.pow(2,v.z)*i.wrap,P=u.identity(new Float64Array(16));return u.translate(P,P,[k*E,v.y*E,0]),u.scale(P,P,[E/u.EXTENT,E/u.EXTENT,1]),u.multiply(P,c?this.alignedProjMatrix:this.projMatrix,P),m[f]=new Float32Array(P),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,f,m,v=-90,E=90,k=-180,P=180;const M=this.size,D=this._unmodified;if(this.latRange){const Q=this.latRange;v=u.mercatorYfromLat(Q[1])*this.worldSize,E=u.mercatorYfromLat(Q[0])*this.worldSize,i=E-v<M.y?M.y/(E-v):0}if(this.lngRange){const Q=this.lngRange;k=u.wrap(u.mercatorXfromLng(Q[0])*this.worldSize,0,this.worldSize),P=u.wrap(u.mercatorXfromLng(Q[1])*this.worldSize,0,this.worldSize),P<k&&(P+=this.worldSize),c=P-k<M.x?M.x/(P-k):0}const L=this.point,U=Math.max(c||0,i||0);if(U)return this.center=this.unproject(new u.Point(c?(P+k)/2:L.x,i?(E+v)/2:L.y)),this.zoom+=this.scaleZoom(U),this._unmodified=D,void(this._constraining=!1);if(this.latRange){const Q=L.y,J=M.y/2;Q-J<v&&(m=v+J),Q+J>E&&(m=E-J)}if(this.lngRange){const Q=(k+P)/2,J=u.wrap(L.x,Q-this.worldSize/2,Q+this.worldSize/2),te=M.x/2;J-te<k&&(f=k+te),J+te>P&&(f=P-te)}f===void 0&&m===void 0||(this.center=this.unproject(new u.Point(f!==void 0?f:L.x,m!==void 0?m:L.y)).wrap()),this._unmodified=D,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=u.identity(new Float64Array(16));u.scale(m,m,[this.width/2,-this.height/2,1]),u.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.identity(new Float64Array(16)),u.scale(m,m,[1,-1,1]),u.translate(m,m,[-1,-1,0]),u.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this._minEleveationForCurrentTile),k=v-E*this._pixelPerMeter/Math.cos(this._pitch),P=E<0?k:v,M=Math.PI/2+this._pitch,D=this._fov*(.5+i.y/this.height),L=Math.sin(D)*P/Math.sin(u.clamp(Math.PI-M-D,.01,Math.PI-.01)),U=this.getHorizon(),Q=2*Math.atan(U/this.cameraToCenterDistance)*(.5+i.y/(2*U)),J=Math.sin(Q)*P/Math.sin(u.clamp(Math.PI-M-Q,.01,Math.PI-.01)),te=Math.min(L,J),Y=1.01*(Math.cos(Math.PI/2-this._pitch)*te+P),pe=this.height/50;m=new Float64Array(16),u.perspective(m,this._fov,this.width/this.height,pe,Y),m[8]=2*-i.x/this.width,m[9]=2*i.y/this.height,u.scale(m,m,[1,-1,1]),u.translate(m,m,[0,0,-this.cameraToCenterDistance]),u.rotateX(m,m,this._pitch),u.rotateZ(m,m,this.angle),u.translate(m,m,[-c,-f,0]),this.mercatorMatrix=u.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),u.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,m),u.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=u.invert([],m),this.pixelMatrix3D=u.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const Se=this.width%2/2,oe=this.height%2/2,ge=Math.cos(this.angle),ke=Math.sin(this.angle),Ce=c-Math.round(c)+ge*Se+ke*oe,Ae=f-Math.round(f)+ge*oe+ke*Se,$e=new Float64Array(m);if(u.translate($e,$e,[Ce>.5?Ce-1:Ce,Ae>.5?Ae-1:Ae,0]),this.alignedProjMatrix=$e,m=u.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.Point(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let f=c.x,m=c.y,v=c.x,E=c.y;for(const k of i)f=Math.min(f,k.x),m=Math.min(m,k.y),v=Math.max(v,k.x),E=Math.max(E,k.y);return[new u.Point(f,m),new u.Point(v,m),new u.Point(v,E),new u.Point(f,E),new u.Point(f,m)]}}}function Ca(y,i){let c,f=!1,m=null,v=null;const E=()=>{m=null,f&&(y.apply(v,c),m=setTimeout(E,i),f=!1)};return(...k)=>(f=!0,v=this,c=k,m||E(),m)}class Dp{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Ca(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),E=Math.round(c.lng*v)/v,k=Math.round(c.lat*v)/v,P=this._map.getBearing(),M=this._map.getPitch();let D="";if(D+=i?`/${E}/${k}/${f}`:`${f}/${k}/${E}`,(P||M)&&(D+="/"+Math.round(10*P)/10),M&&(D+=`/${Math.round(M)}`),this._hashName){const L=this._hashName;let U=!1;const Q=window.location.hash.slice(1).split("&").map(J=>{const te=J.split("=")[0];return te===L?(U=!0,`${te}=${D}`):J}).filter(J=>J);return U||Q.push(`${L}=${D}`),`#${Q.join("&")}`}return`#${D}`}}const jl={linearity:.3,easing:u.bezier(0,0,.3,1)},Rp=u.extend({deceleration:2500,maxSpeed:1400},jl),Lp=u.extend({deceleration:20,maxSpeed:1400},jl),Fp=u.extend({deceleration:1e3,maxSpeed:360},jl),Op=u.extend({deceleration:1e3,maxSpeed:90},jl);class Gl{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=u.browser.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)c.zoom+=v.zoomDelta||0,c.bearing+=v.bearingDelta||0,c.pitch+=v.pitchDelta||0,v.panDelta&&c.pan._add(v.panDelta),v.around&&(c.around=v.around),v.pinchAround&&(c.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const v=Ai(c.pan.mag(),f,u.extend({},Rp,i||{}));m.offset=c.pan.mult(v.amount/c.pan.mag()),m.center=this._map.transform.center,Wl(m,v)}if(c.zoom){const v=Ai(c.zoom,f,Lp);m.zoom=this._map.transform.zoom+v.amount,Wl(m,v)}if(c.bearing){const v=Ai(c.bearing,f,Fp);m.bearing=this._map.transform.bearing+u.clamp(v.amount,-179,179),Wl(m,v)}if(c.pitch){const v=Ai(c.pitch,f,Op);m.pitch=this._map.transform.pitch+v.amount,Wl(m,v)}if(m.zoom||m.bearing){const v=c.pinchAround===void 0?c.around:c.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),u.extend(m,{noMoveStart:!0})}}function Wl(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Ai(y,i,c){const{maxSpeed:f,linearity:m,deceleration:v}=c,E=u.clamp(y*m/(i/1e3),-f,f),k=Math.abs(E)/(v*m);return{easing:c.easing,duration:1e3*k,amount:E*(k/2)}}class fr extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,m={}){const v=b.mousePos(c.getCanvasContainer(),f),E=c.unproject(v);super(i,u.extend({point:v,lngLat:E,originalEvent:f},m)),this._defaultPrevented=!1,this.target=c}}class ql extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){const m=i==="touchend"?f.changedTouches:f.touches,v=b.touchPos(c.getCanvasContainer(),m),E=v.map(P=>c.unproject(P)),k=v.reduce((P,M,D,L)=>P.add(M.div(L.length)),new u.Point(0,0));super(i,{points:v,point:k,lngLats:E,lngLat:c.unproject(k),originalEvent:f}),this._defaultPrevented=!1}}class ia extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class Zl{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new ia(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new fr(i.type,this._map,i))}mouseup(i){this._map.fire(new fr(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new fr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new fr(i.type,this._map,i))}mouseover(i){this._map.fire(new fr(i.type,this._map,i))}mouseout(i){this._map.fire(new fr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ql(i.type,this._map,i))}touchmove(i){this._map.fire(new ql(i.type,this._map,i))}touchend(i){this._map.fire(new ql(i.type,this._map,i))}touchcancel(i){this._map.fire(new ql(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class j0{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new fr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new fr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hl{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.Point.convert(i),this._map.terrain)}}class G0{constructor(i,c){this._map=i,this._tr=new Hl(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(b.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const v=Math.min(m.x,f.x),E=Math.max(m.x,f.x),k=Math.min(m.y,f.y),P=Math.max(m.y,f.y);b.setTransform(this._box,`translate(${v}px,${k}px)`),this._box.style.width=E-v+"px",this._box.style.height=P-k+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const f=this._startPos,m=c;if(this.reset(),b.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.Event(i,{originalEvent:c}))}}function uc(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let f=0;f<y.length;f++)c[y[f].identifier]=i[f];return c}class Xl{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const v=new u.Point(0,0);for(const E of m)v._add(E);return v.div(m.length)}(c),this.touches=uc(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;const m=uc(f,c);for(const v in this.touches){const E=m[v];(!E||E.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Vo{constructor(i){this.singleTap=new Xl(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){const m=this.singleTap.touchend(i,c,f);if(m){const v=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(m)<30;if(v&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class tt{constructor(i){this._tr=new Hl(i),this._zoomIn=new Vo({numTouches:1,numTaps:2}),this._zoomOut=new Vo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){const m=this._zoomIn.touchend(i,c,f),v=this._zoomOut.touchend(i,c,f),E=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(m)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vs{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=c.length?c[0]:c;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&b.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Kl={0:1,2:2};class ts{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=b.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,f){const m=Kl[f];return c.buttons===void 0||(c.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return b.mouseButton(i)===this._eventButton}}class rd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Ye=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},cc=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const f=new ts({checkCorrectEvent:m=>b.mouseButton(m)===0&&m.ctrlKey||b.mouseButton(m)===2});return new Vs({clickTolerance:i,move:(m,v)=>({bearingDelta:(v.x-m.x)*c}),moveStateManager:f,enable:y,assignEvents:Ye})},$p=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const f=new ts({checkCorrectEvent:m=>b.mouseButton(m)===0&&m.ctrlKey||b.mouseButton(m)===2});return new Vs({clickTolerance:i,move:(m,v)=>({pitchDelta:(v.y-m.y)*c}),moveStateManager:f,enable:y,assignEvents:Ye})};class W0{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,f)}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);const m=uc(f,c),v=new u.Point(0,0),E=new u.Point(0,0);let k=0;for(const M in m){const D=m[M],L=this._touches[M];L&&(v._add(D),E._add(D.sub(L)),k++,m[M]=D)}if(this._touches=m,k<this._minTouches||!E.mag())return;const P=E.div(k);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(k),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){if(!this._firstTwoTouches)return;i.preventDefault();const[m,v]=this._firstTwoTouches,E=Jl(f,c,m),k=Jl(f,c,v);if(!E||!k)return;const P=this._aroundCenter?null:E.add(k).div(2);return this._move([E,k],P,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,E=Jl(f,c,m),k=Jl(f,c,v);E&&k||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Jl(y,i,c){for(let f=0;f<y.length;f++)if(y[f].identifier===c)return i[f]}function id(y,i){return Math.log(y/i)/Math.LN2}class q0 extends Yl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(id(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:id(this._distance,f),pinchAround:c}}}function Bp(y,i){return 180*y.angleWith(i)/Math.PI}class od extends Yl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bp(this._vector,f),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,f=Bp(i,this._startVector);return Math.abs(f)<c}}function Ql(y){return Math.abs(y.y)>Math.abs(y.x)}class ad extends Yl{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,f){super.touchstart(i,c,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Ql(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,v=c.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return Ql(i)&&Ql(c)&&E}}const sd={panStep:100,bearingStep:15,pitchStep:10};class hi{constructor(i){this._tr=new Hl(i);const c=sd;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,m=0,v=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:k=>{const P=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Pa,zoom:c?Math.round(P.zoom)+c*(i.shiftKey?2:1):P.zoom,bearing:P.bearing+f*this._bearingStep,pitch:P.pitch+m*this._pitchStep,offset:[-v*this._panStep,-E*this._panStep],center:P.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pa(y){return y*(2-y)}const ld=4.000244140625;class ud{constructor(i,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new Hl(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=u.browser.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%ld==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=b.mousePos(this._el,i),f=this._tr;this._around=u.LngLat.convert(this._aroundCenter?f.center:f.unproject(c)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>ld?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&P!==0&&(P=1/P);const M=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(M*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,m=this._easing;let v,E=!1;if(this._type==="wheel"&&f&&m){const k=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),P=m(k);v=u.interpolate.number(f,c,P),k<1?this._frameId||(this._frameId=!0):E=!0}else v=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.defaultEasing;if(this._prevEase){const f=this._prevEase,m=(u.browser.now()-f.start)/f.duration,v=f.easing(m+.01)-f.easing(m),E=.27/Math.sqrt(v*v+1e-4)*.01,k=Math.sqrt(.0729-E*E);c=u.bezier(E,k,.25,1)}return this._prevEase={start:u.browser.now(),duration:i,easing:c},c}reset(){this._active=!1}}class cd{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hd{constructor(i){this._tr=new Hl(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vp{constructor(){this._tap=new Vo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,f){if(!this._swipePoint)if(this._tapTime){const m=c[0],v=i.timeStamp-this._tapTime<500,E=this._tapPoint.dist(m)<30;v&&E?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,c,f)}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=c[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(i,c,f);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qi{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class An{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hc{constructor(i,c,f,m){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ns=y=>y.zoom||y.drag||y.pitch||y.rotate;class Np extends u.Event{}function dc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Up{constructor(i,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=m.type==="renderFrame"?void 0:m,k={needsRenderFrame:!1},P={},M={},D=m.touches,L=D?this._getMapTouches(D):void 0,U=L?b.touchPos(this._el,L):b.mousePos(this._el,m);for(const{handlerName:te,handler:Y,allowed:pe}of this._handlers){if(!Y.isEnabled())continue;let Se;this._blockedByActive(M,pe,te)?Y.reset():Y[v||m.type]&&(Se=Y[v||m.type](m,U,L),this.mergeHandlerResult(k,P,Se,te,E),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()),(Se||Y.isActive())&&(M[te]=Y)}const Q={};for(const te in this._previousActiveHandlers)M[te]||(Q[te]=E);this._previousActiveHandlers=M,(Object.keys(Q).length||dc(k))&&(this._changes.push([k,P,Q]),this._triggerRenderFrame()),(Object.keys(M).length||dc(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=k;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gl(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,E]of this._listeners)b.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,f]of this._listeners)b.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Zl(c,i));const m=c.boxZoom=new G0(c,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const v=new tt(c),E=new hd(c);c.doubleClickZoom=new cd(E,v),this._add("tapZoom",v),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const k=new Vp;this._add("tapDragZoom",k);const P=c.touchPitch=new ad(c);this._add("touchPitch",P),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const M=cc(i),D=$p(i);c.dragRotate=new An(i,M,D),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const L=(({enable:pe,clickTolerance:Se})=>{const oe=new ts({checkCorrectEvent:ge=>b.mouseButton(ge)===0&&!ge.ctrlKey});return new Vs({clickTolerance:Se,move:(ge,ke)=>({around:ke,panDelta:ke.sub(ge)}),activateOnStart:!0,moveStateManager:oe,enable:pe,assignEvents:Ye})})(i),U=new W0(i,c);c.dragPan=new Qi(f,L,U),this._add("mousePan",L),this._add("touchPan",U,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const Q=new od,J=new q0;c.touchZoomRotate=new hc(f,J,Q,k),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const te=c.scrollZoom=new ud(c,()=>this._triggerRenderFrame());this._add("scrollZoom",te,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const Y=c.keyboard=new hi(c);this._add("keyboard",Y),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new j0(c))}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ns(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,f){for(const m in i)if(m!==f&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const f of i)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(i,c,f,m,v){if(!f)return;u.extend(i,f);const E={handlerName:m,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(c.zoom=E),f.panDelta!==void 0&&(c.drag=E),f.pitchDelta!==void 0&&(c.pitch=E),f.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},f={};for(const[m,v,E]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new u.Point(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),u.extend(c,v),u.extend(f,E);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){const m=this._map,v=m._getTransformForUpdate(),E=m.terrain;if(!(dc(i)||E&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:k,zoomDelta:P,bearingDelta:M,pitchDelta:D,around:L,pinchAround:U}=i;U!==void 0&&(L=U),m._stop(!0),L=L||m.transform.centerPoint;const Q=v.pointLocation(k?L.sub(k):L);M&&(v.bearing+=M),D&&(v.pitch+=D),P&&(v.zoom+=P),E?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(k)):v.setLocationAtPoint(Q,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(Q,L),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,v.recalculateZoom(m.terrain)})):v.setLocationAtPoint(Q,L),m._applyUpdatedTransform(v),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){const m=Ns(this._eventsInProgress),v=Ns(i),E={};for(const D in i){const{originalEvent:L}=i[D];this._eventsInProgress[D]||(E[`${D}start`]=L),this._eventsInProgress[D]=i[D]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const D in E)this._fireEvent(D,E[D]);v&&this._fireEvent("move",v.originalEvent);for(const D in i){const{originalEvent:L}=i[D];this._fireEvent(D,L)}const k={};let P;for(const D in this._eventsInProgress){const{handlerName:L,originalEvent:U}=this._eventsInProgress[D];this._handlersById[L].isActive()||(delete this._eventsInProgress[D],P=c[L]||U,k[`${D}end`]=P)}for(const D in k)this._fireEvent(D,k[D]);const M=Ns(this._eventsInProgress);if(f&&(m||v)&&!M){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=U=>U!==0&&-this._bearingSnap<U&&U<this._bearingSnap;D?(L(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:P})):(this._map.fire(new u.Event("moveend",{originalEvent:P})),L(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Np("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Z0 extends u.Evented{constructor(i,c){super(),this._renderFrameCallback=()=>{const f=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=u.Point.convert(i).mult(-1),this.panTo(this.transform.center,u.extend({offset:i},c),f)}panTo(i,c,f){return this.easeTo(u.extend({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(u.extend({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(u.extend({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,u.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Dt.convert(i);const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,c)}_cameraForBoxAndBearing(i,c,f,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=u.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ke=m.padding;m.padding={top:ke,bottom:ke,right:ke,left:ke}}m.padding=u.extend(v,m.padding);const E=this.transform,k=E.padding,P=E.project(u.LngLat.convert(i)),M=E.project(u.LngLat.convert(c)),D=P.rotate(-f*Math.PI/180),L=M.rotate(-f*Math.PI/180),U=new u.Point(Math.max(D.x,L.x),Math.max(D.y,L.y)),Q=new u.Point(Math.min(D.x,L.x),Math.min(D.y,L.y)),J=U.sub(Q),te=(E.width-(k.left+k.right+m.padding.left+m.padding.right))/J.x,Y=(E.height-(k.top+k.bottom+m.padding.top+m.padding.bottom))/J.y;if(Y<0||te<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const pe=Math.min(E.scaleZoom(E.scale*Math.min(te,Y)),m.maxZoom),Se=u.Point.convert(m.offset),oe=new u.Point((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),ge=Se.add(oe).mult(E.scale/E.zoomScale(pe));return{center:E.unproject(P.add(M).div(2).sub(ge)),zoom:pe,bearing:f}}fitBounds(i,c,f){return this._fitInternal(this.cameraForBounds(i,c),c,f)}fitScreenCoordinates(i,c,f,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(i)),this.transform.pointLocation(u.Point.convert(c)),f,m),m,v)}_fitInternal(i,c,f){return i?(delete(c=u.extend(i,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(i,c){this.stop();const f=this._getTransformForUpdate();let m=!1,v=!1,E=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(m=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=u.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(E=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new u.Event("movestart",c)).fire(new u.Event("move",c)),m&&this.fire(new u.Event("zoomstart",c)).fire(new u.Event("zoom",c)).fire(new u.Event("zoomend",c)),v&&this.fire(new u.Event("rotatestart",c)).fire(new u.Event("rotate",c)).fire(new u.Event("rotateend",c)),E&&this.fire(new u.Event("pitchstart",c)).fire(new u.Event("pitch",c)).fire(new u.Event("pitchend",c)),this.fire(new u.Event("moveend",c))}calculateCameraOptionsFromTo(i,c,f,m=0){const v=u.MercatorCoordinate.fromLngLat(i,c),E=u.MercatorCoordinate.fromLngLat(f,m),k=E.x-v.x,P=E.y-v.y,M=E.z-v.z,D=Math.hypot(k,P,M);if(D===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(k,P),U=this.transform.scaleZoom(this.transform.cameraToCenterDistance/D/this.transform.tileSize),Q=180*Math.atan2(k,-P)/Math.PI;let J=180*Math.acos(L/D)/Math.PI;return J=M<0?90-J:90+J,{center:E.toLngLat(),zoom:U,pitch:J,bearing:Q}}easeTo(i,c){this._stop(!1,i.easeId),((i=u.extend({offset:[0,0],duration:500,easing:u.defaultEasing},i)).animate===!1||!i.essential&&u.browser.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),v=this.getBearing(),E=this.getPitch(),k=this.getPadding(),P="zoom"in i?+i.zoom:m,M="bearing"in i?this._normalizeBearing(i.bearing,v):v,D="pitch"in i?+i.pitch:E,L="padding"in i?i.padding:f.padding,U=u.Point.convert(i.offset);let Q=f.centerPoint.add(U);const J=f.pointLocation(Q),te=u.LngLat.convert(i.center||J);this._normalizeCenter(te);const Y=f.project(J),pe=f.project(te).sub(Y),Se=f.zoomScale(P-m);let oe,ge;i.around&&(oe=u.LngLat.convert(i.around),ge=f.locationPoint(oe));const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==m,this._rotating=this._rotating||v!==M,this._pitching=this._pitching||D!==E,this._padding=!f.isPaddingEqual(L),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,ke),this.terrain&&this._prepareElevation(te),this._ease(Ce=>{if(this._zooming&&(f.zoom=u.interpolate.number(m,P,Ce)),this._rotating&&(f.bearing=u.interpolate.number(v,M,Ce)),this._pitching&&(f.pitch=u.interpolate.number(E,D,Ce)),this._padding&&(f.interpolatePadding(k,L,Ce),Q=f.centerPoint.add(U)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ce),oe)f.setLocationAtPoint(oe,ge);else{const Ae=f.zoomScale(f.zoom-m),$e=P>m?Math.min(2,Se):Math.max(.5,Se),Fe=Math.pow($e,1-Ce),Ge=f.unproject(Y.add(pe.mult(Ce*Fe)).mult(Ae));f.setLocationAtPoint(f.renderWorldCopies?Ge.wrap():Ge,Q)}this._applyUpdatedTransform(f),this._fireMoveEvents(c)},Ce=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Ce)},i),this}_prepareEase(i,c,f={}){this._moving=!0,c||f.moving||this.fire(new u.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new u.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new u.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new u.Event("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(c-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.interpolate.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:f,zoom:m,pitch:v,bearing:E,elevation:k}=this.transformCameraUpdate(c);f&&(c.center=f),m!==void 0&&(c.zoom=m),v!==void 0&&(c.pitch=v),E!==void 0&&(c.bearing=E),k!==void 0&&(c.elevation=k),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.Event("move",i)),this._zooming&&this.fire(new u.Event("zoom",i)),this._rotating&&this.fire(new u.Event("rotate",i)),this._pitching&&this.fire(new u.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,m=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.Event("zoomend",i)),m&&this.fire(new u.Event("rotateend",i)),v&&this.fire(new u.Event("pitchend",i)),this.fire(new u.Event("moveend",i))}flyTo(i,c){if(!i.essential&&u.browser.prefersReducedMotion){const st=u.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(st,c)}this.stop(),i=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.defaultEasing},i);const f=this._getTransformForUpdate(),m=this.getZoom(),v=this.getBearing(),E=this.getPitch(),k=this.getPadding(),P="zoom"in i?u.clamp(+i.zoom,f.minZoom,f.maxZoom):m,M="bearing"in i?this._normalizeBearing(i.bearing,v):v,D="pitch"in i?+i.pitch:E,L="padding"in i?i.padding:f.padding,U=f.zoomScale(P-m),Q=u.Point.convert(i.offset);let J=f.centerPoint.add(Q);const te=f.pointLocation(J),Y=u.LngLat.convert(i.center||te);this._normalizeCenter(Y);const pe=f.project(te),Se=f.project(Y).sub(pe);let oe=i.curve;const ge=Math.max(f.width,f.height),ke=ge/U,Ce=Se.mag();if("minZoom"in i){const st=u.clamp(Math.min(i.minZoom,m,P),f.minZoom,f.maxZoom),zn=ge/f.zoomScale(st-m);oe=Math.sqrt(zn/Ce*2)}const Ae=oe*oe;function $e(st){const zn=(ke*ke-ge*ge+(st?-1:1)*Ae*Ae*Ce*Ce)/(2*(st?ke:ge)*Ae*Ce);return Math.log(Math.sqrt(zn*zn+1)-zn)}function Fe(st){return(Math.exp(st)-Math.exp(-st))/2}function Ge(st){return(Math.exp(st)+Math.exp(-st))/2}const ut=$e(!1);let Ut=function(st){return Ge(ut)/Ge(ut+oe*st)},Xe=function(st){return ge*((Ge(ut)*(Fe(zn=ut+oe*st)/Ge(zn))-Fe(ut))/Ae)/Ce;var zn},_t=($e(!0)-ut)/oe;if(Math.abs(Ce)<1e-6||!isFinite(_t)){if(Math.abs(ge-ke)<1e-6)return this.easeTo(i,c);const st=ke<ge?-1:1;_t=Math.abs(Math.log(ke/ge))/oe,Xe=function(){return 0},Ut=function(zn){return Math.exp(st*oe*zn)}}return i.duration="duration"in i?+i.duration:1e3*_t/("screenSpeed"in i?+i.screenSpeed/oe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=v!==M,this._pitching=D!==E,this._padding=!f.isPaddingEqual(L),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Y),this._ease(st=>{const zn=st*_t,jt=1/Ut(zn);f.zoom=st===1?P:m+f.scaleZoom(jt),this._rotating&&(f.bearing=u.interpolate.number(v,M,st)),this._pitching&&(f.pitch=u.interpolate.number(E,D,st)),this._padding&&(f.interpolatePadding(k,L,st),J=f.centerPoint.add(Q)),this.terrain&&!i.freezeElevation&&this._updateElevation(st);const vt=st===1?Y:f.unproject(pe.add(Se.mult(Xe(zn))).mult(jt));f.setLocationAtPoint(f.renderWorldCopies?vt.wrap():vt,J),this._applyUpdatedTransform(f),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,c)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=u.browser.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=u.wrap(i,-180,180);const f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.LngLat.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class ho{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const f=this._map._getUIString(`AttributionControl.${c}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const v=c[m];if(v.used||v.usedForTerrain){const E=v.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,v)=>m.length-v.length),i=i.filter((m,v)=>{for(let E=v+1;E<i.length;E++)if(i[E].indexOf(m)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class eu{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const c=b.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class dt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const m of f)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const kt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var fc=u.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class dd extends u.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const f={};for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.ortho(m.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),this._tiles[m.key]=new oi(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(i){for(const c in this._tiles){const f=this._tiles[c];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16),u.ortho(v.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),c[f]=v}else if(m.canonical.isChildOf(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const E=m.canonical.z-i.canonical.z,k=m.canonical.x-(m.canonical.x>>E<<E),P=m.canonical.y-(m.canonical.y>>E<<E),M=u.EXTENT>>E;u.ortho(v.posMatrix,0,M,0,M,0,1),u.translate(v.posMatrix,v.posMatrix,[-k*M,-P*M,0]),c[f]=v}else if(i.canonical.isChildOf(m.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const E=i.canonical.z-m.canonical.z,k=i.canonical.x-(i.canonical.x>>E<<E),P=i.canonical.y-(i.canonical.y>>E<<E),M=u.EXTENT>>E;u.ortho(v.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),u.translate(v.posMatrix,v.posMatrix,[k*M,P*M,0]),u.scale(v.posMatrix,v.posMatrix,[1/2**E,1/2**E,0]),c[f]=v}}return c}getSourceTile(i,c){const f=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&c)for(;m>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(m--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class fd{constructor(i,c,f){this.painter=i,this.sourceCache=new dd(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,f,m=u.EXTENT){var v;if(!(c>=0&&c<m&&f>=0&&f<m))return 0;const E=this.getTerrainData(i),k=(v=E.tile)===null||v===void 0?void 0:v.dem;if(!k)return 0;const P=function(J,te,Y){var pe=te[0],Se=te[1];return J[0]=Y[0]*pe+Y[4]*Se+Y[12],J[1]=Y[1]*pe+Y[5]*Se+Y[13],J}([],[c/m*u.EXTENT,f/m*u.EXTENT],E.u_terrain_matrix),M=[P[0]*k.dim,P[1]*k.dim],D=Math.floor(M[0]),L=Math.floor(M[1]),U=M[0]-D,Q=M[1]-L;return k.get(D,L)*(1-U)*(1-Q)+k.get(D+1,L)*U*(1-Q)+k.get(D,L+1)*(1-U)*Q+k.get(D+1,L+1)*U*Q}getElevationForLngLatZoom(i,c){const{tileID:f,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(f,m%u.EXTENT,v%u.EXTENT,u.EXTENT)}getElevation(i,c,f,m=u.EXTENT){return this.getDEMElevation(i,c,f,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,v=new u.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new we(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new we(m,new u.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.identity([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new we(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?v=i.canonical.z-m:u.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=i.canonical.x-(i.canonical.x>>v<<v),k=i.canonical.y-(i.canonical.y>>v<<v),P=u.fromScaling(new Float64Array(16),[1/(u.EXTENT<<v),1/(u.EXTENT<<v),0]);u.translate(P,P,[E*u.EXTENT,k*u.EXTENT,0]),this._demMatrixCache[i.key]={matrix:P,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,f=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new we(c.context,{width:f,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new we(c.context,{width:f,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,E=0;v<this._coordsTextureSize;v++)for(let k=0;k<this._coordsTextureSize;k++,E+=4)c[E+0]=255&k,c[E+1]=255&v,c[E+2]=k>>8<<4|v>>8,c[E+3]=0;const f=new u.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new we(i,f,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){const c=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const v=c[0]+(c[2]>>4<<8),E=c[1]+((15&c[2])<<8),k=this.coordsIndex[255-c[3]],P=k&&this.sourceCache.getTileByID(k);if(!P)return null;const M=this._coordsTextureSize,D=(1<<P.tileID.canonical.z)*M;return new u.MercatorCoordinate((P.tileID.canonical.x*M+v)/D,(P.tileID.canonical.y*M+E)/D,this.getElevation(P.tileID,v,E,M))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.Pos3dArray,f=new u.TriangleIndexArray,m=this.meshSize,v=u.EXTENT/m,E=m*m;for(let L=0;L<=m;L++)for(let U=0;U<=m;U++)c.emplaceBack(U*v,L*v,0);for(let L=0;L<E;L+=m+1)for(let U=0;U<m;U++)f.emplaceBack(U+L,m+U+L+1,m+U+L+2),f.emplaceBack(U+L,m+U+L+2,U+L+1);const k=c.length,P=k+2*(m+1);for(const L of[0,1])for(let U=0;U<=m;U++)for(const Q of[0,1])c.emplaceBack(U*v,L*u.EXTENT,Q);for(let L=0;L<2*m;L+=2)f.emplaceBack(P+L,P+L+1,P+L+3),f.emplaceBack(P+L,P+L+3,P+L+2),f.emplaceBack(k+L,k+L+3,k+L+1),f.emplaceBack(k+L,k+L+2,k+L+3);const M=c.length,D=M+2*(m+1);for(const L of[0,1])for(let U=0;U<=m;U++)for(const Q of[0,1])c.emplaceBack(L*u.EXTENT,U*v,Q);for(let L=0;L<2*m;L+=2)f.emplaceBack(M+L,M+L+1,M+L+3),f.emplaceBack(M+L,M+L+3,M+L+2),f.emplaceBack(D+L,D+L+3,D+L+1),f.emplaceBack(D+L,D+L+2,D+L+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(c,fc.members),segments:u.SegmentVector.simpleSegment(0,0,c.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.earthRadius/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,c){const f=u.MercatorCoordinate.fromLngLat(i.wrap()),m=(1<<c)*u.EXTENT,v=f.x*m,E=f.y*m,k=Math.floor(v/u.EXTENT),P=Math.floor(E/u.EXTENT);return{tileID:new u.OverscaledTileID(c,0,c,k,P),mercatorX:v,mercatorY:E}}}class di{constructor(i,c,f){this._context=i,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new we(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:i,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ns={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class No{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new di(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(c)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const m=i.sourceCaches[f].getVisibleCoordinates();for(const v of m){const E=this.terrain.sourceCache.getTerrainCoords(v);for(const k in E)this._coordsDescendingInv[f][k]||(this._coordsDescendingInv[f][k]=[]),this._coordsDescendingInv[f][k].push(E[k])}}this._coordsDescendingInvStr={};for(const f of i._order){const m=i._layers[f],v=m.source;if(ns[m.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const E in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][E]=this._coordsDescendingInv[v][E].map(k=>k.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[m][f.tileID.key];v&&v!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ns[c]&&(this._prevType&&ns[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!m))return!0;if(ns[this._prevType]||ns[c]&&m){this._prevType=c;const v=this._stacks.length-1,E=this._stacks[v]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(oc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[v]){const M=this.pool.getObjectForId(k.rtt[v].id);if(M.stamp===k.rtt[v].stamp){this.pool.useObject(M);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),k.rtt[v]={id:P.id,stamp:P.stamp},f.context.bindFramebuffer.set(P.fbo.framebuffer),f.context.clear({color:u.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let M=0;M<E.length;M++){const D=f.style._layers[E[M]],L=D.source?this._coordsDescendingInv[D.source][k.tileID.key]:[k.tileID];f.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),f._renderTileClippingMasks(D,L),f.renderLayer(f,f.style.sourceCaches[D.source],D,L),D.source&&(k.rttCoords[D.source]=this._coordsDescendingInvStr[D.source][k.tileID.key])}}return oc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ns[c]}return!1}}const H0=S,tu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ln=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},ir={showCompass:!0,showZoom:!0,visualizePitch:!1};class jp{constructor(i,c,f=!1){this.mousedown=E=>{this.startMouse(u.extend({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,b.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=i.dragRotate._mouseRotate.getClickTolerance(),v=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=cc({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:k,bearingDegreesPerPixelMoved:P=.8})=>{const M=new rd;return new Vs({clickTolerance:k,move:(D,L)=>({bearingDelta:(L.x-D.x)*P}),moveStateManager:M,enable:E,assignEvents:Ln})})({clickTolerance:m,enable:!0}),this.map=i,f&&(this.mousePitch=$p({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:k,pitchDegreesPerPixelMoved:P=-.5})=>{const M=new rd;return new Vs({clickTolerance:k,move:(D,L)=>({pitchDelta:(L.y-D.y)*P}),moveStateManager:M,enable:E,assignEvents:Ln})})({clickTolerance:v,enable:!0})),b.addEventListener(c,"mousedown",this.mousedown),b.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),b.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),b.disableDrag()}moveMouse(i,c){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(i,c)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}moveTouch(i,c){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(i,c)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(i,c)||{};v&&f.setPitch(f.getPitch()+v)}}off(){const i=this.element;b.removeEventListener(i,"mousedown",this.mousedown),b.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let eo;function nu(y,i,c){if(y=new u.LngLat(y.lng,y.lat),i){const f=new u.LngLat(y.lng-360,y.lat),m=new u.LngLat(y.lng+360,y.lat),v=c.locationPoint(y).distSqr(i);c.locationPoint(f).distSqr(i)<v?y=f:c.locationPoint(m).distSqr(i)<v&&(y=m)}for(;Math.abs(y.lng-c.center.lng)>180;){const f=c.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=c.width&&f.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y}const ru={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function pc(y,i,c){const f=y.classList;for(const m in ru)f.remove(`maplibregl-${c}-anchor-${m}`);f.add(`maplibregl-${c}-anchor-${i}`)}class iu extends u.Evented{constructor(i){if(super(),this._onKeyPress=c=>{const f=c.code,m=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const f=c.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=c=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=nu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(f=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${ru[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${f}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const v=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=v.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=u.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const c=b.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const v=b.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const k=b.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of P){const Se=b.createNS("http://www.w3.org/2000/svg","ellipse");Se.setAttributeNS(null,"opacity","0.04"),Se.setAttributeNS(null,"cx","10.5"),Se.setAttributeNS(null,"cy","5.80029008"),Se.setAttributeNS(null,"rx",pe.rx),Se.setAttributeNS(null,"ry",pe.ry),k.appendChild(Se)}const M=b.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill",this._color);const D=b.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),M.appendChild(D);const L=b.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const U=b.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(U);const Q=b.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");const J=b.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const te=b.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#000000"),te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962");const Y=b.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#FFFFFF"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962"),J.appendChild(te),J.appendChild(Y),E.appendChild(k),E.appendChild(M),E.appendChild(L),E.appendChild(Q),E.appendChild(J),c.appendChild(E),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=u.Point.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),pc(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=u.Point.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ou={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Us=0,rs=!1;const pd={maxWidth:100,unit:"metric"};function mc(y,i,c){const f=c&&c.maxWidth||100,m=y._container.clientHeight/2,v=y.unproject([0,m]),E=y.unproject([f,m]),k=v.distanceTo(E);if(c&&c.unit==="imperial"){const P=3.2808*k;P>5280?is(i,f,P/5280,y._getUIString("ScaleControl.Miles")):is(i,f,P,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?is(i,f,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?is(i,f,k/1e3,y._getUIString("ScaleControl.Kilometers")):is(i,f,k,y._getUIString("ScaleControl.Meters"))}function is(y,i,c,f){const m=function(v){const E=Math.pow(10,`${Math.floor(v)}`.length-1);let k=v/E;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(P){const M=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*M)/M}(k),E*k}(c);y.style.width=i*(m/c)+"px",y.innerHTML=`${m}&nbsp;${f}`}const md={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},gd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function gc(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.Point(0,0),top:new u.Point(0,y),"top-left":new u.Point(i,i),"top-right":new u.Point(-i,i),bottom:new u.Point(0,-y),"bottom-left":new u.Point(i,-i),"bottom-right":new u.Point(-i,-i),left:new u.Point(y,0),right:new u.Point(-y,0)}}if(y instanceof u.Point||Array.isArray(y)){const i=u.Point.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.Point.convert(y.center||[0,0]),top:u.Point.convert(y.top||[0,0]),"top-left":u.Point.convert(y["top-left"]||[0,0]),"top-right":u.Point.convert(y["top-right"]||[0,0]),bottom:u.Point.convert(y.bottom||[0,0]),"bottom-left":u.Point.convert(y["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(y["bottom-right"]||[0,0]),left:u.Point.convert(y.left||[0,0]),right:u.Point.convert(y.right||[0,0])}}return gc(new u.Point(0,0))}const yc={extend:(y,...i)=>u.extend(y,...i),run(y){y()},logToElement(y,i=!1,c="log"){const f=window.document.getElementById(c);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},yd=S;class on{static get version(){return yd}static get workerCount(){return Wt.workerCount}static set workerCount(i){Wt.workerCount=i}static get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){u.config.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return u.config.WORKER_URL}static set workerUrl(i){u.config.WORKER_URL=i}static addProtocol(i,c){u.config.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete u.config.REGISTERED_PROTOCOLS[i]}}return on.Map=class extends Z0{constructor(y){if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),(y=u.extend({},tu,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new lc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new dt,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},kt,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new N(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Ca(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{i?c(f):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Up(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Dp(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ho({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new eu,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new u.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new u.Event(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new u.Event("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,f)}resize(y){var i;const c=this._containerDimensions(),f=c[0],m=c[1],v=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,v),this.painter.resize(f,m,v),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const P=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,P),this.painter.resize(f,m,P)}this.transform.resize(f,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,m);const E=!this._moving;return E&&(this.stop(),this.fire(new u.Event("movestart",y)).fire(new u.Event("move",y))),this.fire(new u.Event("resize",y)),E&&this.fire(new u.Event("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),v=y*m,E=i*m;return Math.min(v>c?c/v:1,E>f?f/E:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Dt.convert(y)),this._update()}setMinZoom(y){if((y=y==null?-2:y)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y==null?22:y)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y==null?0:y)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y==null?60:y)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(u.LngLat.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.Point.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:v=>{const E=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];E.length?f||(f=!0,c.call(this,new fr(y,this,v.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{(this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,c.call(this,new fr(y,this,E.originalEvent)))},mouseout:E=>{f&&(f=!1,c.call(this,new fr(y,this,E.originalEvent)))}}}}{const f=m=>{const v=this.getLayer(i)?this.queryRenderedFeatures(m.point,{layers:[i]}):[];v.length&&(m.features=v,c.call(this,m),delete m.features)};return{layer:i,listener:c,delegates:{[y]:f}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const f=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const f=this._createDelegatedListener(y,i,c);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const m=this._delegatedListeners[y];for(let v=0;v<m.length;v++){const E=m[v];if(E.layer===i&&E.listener===c){for(const k in E.delegates)this.off(k,E.delegates[k]);return m.splice(v,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const f=y instanceof u.Point||Array.isArray(y),m=f?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:y)||{},m instanceof u.Point||typeof m[0]=="number")c=[u.Point.convert(m)];else{const v=u.Point.convert(m[0]),E=u.Point.convert(m[1]);c=[v,new u.Point(E.x,v.y),E,new u.Point(v.x,E.y),v]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Br(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,B.Style);u.getJSON(c,(f,m)=>{f?this.fire(new u.ErrorEvent(f)):m&&this._updateDiff(m,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){u.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===y.source&&u.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new fd(this.painter,i,y),this.painter.renderToTexture=new No(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.Event("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const f in c){const m=c[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(y,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,c)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:v,stretchY:E,content:k}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.isImageBitmap(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:M,data:D}=i,L=i;return this.style.addImage(y,{data:new u.RGBAImage({width:P,height:M},new Uint8Array(D)),pixelRatio:f,stretchX:v,stretchY:E,content:k,sdf:m,version:0,userImage:L}),L.onAdd&&L.onAdd(this,y),this}}{const{width:P,height:M,data:D}=u.browser.getImageData(i);this.style.addImage(y,{data:new u.RGBAImage({width:P,height:M},D),pixelRatio:f,stretchX:v,stretchY:E,content:k,sdf:m,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||u.isImageBitmap(i)?u.browser.getImageData(i):i,{width:m,height:v,data:E}=f;if(m===void 0||v===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||v!==c.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(i instanceof HTMLImageElement||u.isImageBitmap(i));return c.data.replace(E,k),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){de.getImage(this._requestManager.transformRequest(y,B.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,f={}){return this.style.setPaintProperty(y,i,c,f),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,f={}){return this.style.setLayoutProperty(y,i,c,f),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=b.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);const m=this._controlContainer=b.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{v[E]=b.create("div",`maplibregl-ctrl-${E} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:y},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new zp(c,this.transform),C.testSupport(c)}_onCooperativeGesture(y,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,v=u.browser.now();this.style.zoomHistory.update(m,v);const E=new u.EvaluationParameters(m,{now:v,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=E.crossFadingFactor();k===1&&k===this._crossFadingFactor||(c=!0,this._crossFadingFactor=k),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.browser.frame(y=>{u.PerformanceUtils.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return H0}getCameraTargetElevation(){return this.transform.elevation}},on.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const f=this._map._getUIString(`NavigationControl.${c}`);i.title=f,i.setAttribute("aria-label",f)},this.options=u.extend({},ir,y),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=b.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},on.GeolocateControl=class extends u.Evented{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.Event("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new u.LngLat(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,m=this._map.getBearing(),v=u.extend({bearing:m},this.options.fitBoundsOptions),E=Dt.fromLngLat(c,f);this._map.fitBounds(E,v,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new u.LngLat(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&rs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.Event("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new iu({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new iu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}},this.options=u.extend({},ou,y)}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){eo===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{eo=f.state!=="denied",i(eo)}).catch(()=>{eo=!!window.navigator.geolocation,i(eo)}):(eo=!!window.navigator.geolocation,i(eo)):i(eo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Us=0,rs=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),f=i.distanceTo(c),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Us--,rs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Us++,Us>1?(y={maximumAge:6e5,timeout:0},rs=!0):(y=this.options.positionOptions,rs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},on.AttributionControl=ho,on.LogoControl=eu,on.ScaleControl=class{constructor(y){this._onMove=()=>{mc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,mc(this._map,this._container,this.options)},this.options=u.extend({},pd,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},on.FullscreenControl=class extends u.Evented{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},on.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},on.Popup=class extends u.Evented{constructor(y){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let f=this.options.anchor;const m=gc(this.options.offset);if(!f){const E=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=c.y+m.bottom.y<k?["top"]:c.y>this._map.transform.height-k?["bottom"]:[],c.x<E/2?P.push("left"):c.x>this._map.transform.width-E/2&&P.push("right"),f=P.length===0?"bottom":P.join("-")}const v=c.add(m[f]).round();b.setTransform(this._container,`${ru[f]} translate(${v.x}px,${v.y}px)`),pc(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=u.extend(Object.create(md),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=y;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(gd);y&&y.focus()}},on.Marker=iu,on.Style=Br,on.LngLat=u.LngLat,on.LngLatBounds=Dt,on.Point=u.Point,on.MercatorCoordinate=u.MercatorCoordinate,on.Evented=u.Evented,on.AJAXError=u.AJAXError,on.config=u.config,on.CanvasSource=Pe,on.GeoJSONSource=Er,on.ImageSource=Xt,on.RasterDEMTileSource=ii,on.RasterTileSource=Qn,on.VectorTileSource=dn,on.VideoSource=fn,on.setRTLTextPlugin=u.setRTLTextPlugin,on.getRTLTextPluginStatus=u.getRTLTextPluginStatus,on.prewarm=function(){Pr().acquire(Ie)},on.clearPrewarmedResources=function(){const y=$t;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ie),$t=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},yc.extend(on,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),on});var g=l;return g})})(DM);var nf=i4(DM.exports);function vB(e,t){return[{id:"background",type:"background",paint:{"background-color":t.background}},{id:"earth",type:"fill",source:e,"source-layer":"earth",paint:{"fill-color":t.earth}},{id:"landuse_park",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"]],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,t.park_a,12,t.park_b]}},{id:"landuse_hospital",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":t.hospital}},{id:"landuse_industrial",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":t.industrial}},{id:"landuse_school",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","school","university","college"]],paint:{"fill-color":t.school}},{id:"landuse_beach",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","beach"]],paint:{"fill-color":t.beach}},{id:"landuse_zoo",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","zoo"]],paint:{"fill-color":t.zoo}},{id:"landuse_military",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","military","naval_base","airfield"]],paint:{"fill-color":t.zoo}},{id:"natural_wood",type:"fill",source:e,"source-layer":"natural",filter:["any",["in","pmap:kind","wood","nature_reserve","forest"]],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,t.wood_a,12,t.wood_b]}},{id:"landuse_pedestrian",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","pedestrian"]],paint:{"fill-color":t.pedestrian}},{id:"natural_scrub",type:"fill",source:e,"source-layer":"natural",filter:["in","pmap:kind","scrub","grassland","grass"],paint:{"fill-color":["interpolate",["linear"],["zoom"],0,t.scrub_a,12,t.scrub_b]}},{id:"natural_glacier",type:"fill",source:e,"source-layer":"natural",filter:["==","pmap:kind","glacier"],paint:{"fill-color":t.glacier}},{id:"natural_sand",type:"fill",source:e,"source-layer":"natural",filter:["==","pmap:kind","sand"],paint:{"fill-color":t.sand}},{id:"landuse_aerodrome",type:"fill",source:e,"source-layer":"landuse",filter:["any",["in","pmap:kind","aerodrome"]],paint:{"fill-color":t.aerodrome}},{id:"transit_runway",type:"line",source:e,"source-layer":"transit",filter:["any",["in","pmap:kind_detail","runway"]],paint:{"line-color":t.runway,"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,12,4,18,30]}},{id:"transit_taxiway",type:"line",source:e,"source-layer":"transit",minzoom:13,filter:["any",["in","pmap:kind_detail","taxiway"]],paint:{"line-color":t.runway,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,15,6]}},{id:"water",type:"fill",source:e,"source-layer":"water",paint:{"fill-color":t.water}},{id:"landuse_pier",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","pier"]],paint:{"fill-color":t.pier}},{id:"roads_tunnels_other_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":t.tunnel_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_link_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":t.tunnel_link_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]}},{id:"roads_tunnels_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_tunnels_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.tunnel_highway_casing,"line-dasharray":[6,.5],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_tunnels_other",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":t.tunnel_other,"line-dasharray":[4.5,.5],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_tunnels_link",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":t.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_tunnels_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_tunnels_major",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_tunnels_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.tunnel_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"physical_line_stream",type:"line",source:e,"source-layer":"physical_line",minzoom:14,filter:["all",["in","pmap:kind","stream"]],paint:{"line-color":t.water,"line-width":.5}},{id:"physical_line_river",type:"line",source:e,"source-layer":"physical_line",minzoom:9,filter:["all",["in","pmap:kind","river"]],paint:{"line-color":t.water,"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1,18,12]}},{id:"buildings",type:"fill",source:e,"source-layer":"buildings",paint:{"fill-color":t.buildings,"fill-opacity":.5}},{id:"transit_pier",type:"line",source:e,"source-layer":"transit",filter:["any",["==","pmap:kind","pier"]],paint:{"line-color":t.transit_pier,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,16]}},{id:"roads_minor_service_casing",type:"line",source:e,"source-layer":"roads",minzoom:13,filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["==","pmap:kind_detail","service"]],paint:{"line-color":t.minor_service_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["!=","pmap:kind_detail","service"]],paint:{"line-color":t.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_link_casing",type:"line",source:e,"source-layer":"roads",minzoom:13,filter:["all",["==","pmap:link",1]],paint:{"line-color":t.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1.5]}},{id:"roads_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1.5]}},{id:"roads_major_casing_late",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major_casing_late,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_highway_casing_late",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.highway_casing_late,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_other",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":t.other,"line-dasharray":[3,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_link",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:link",1]],paint:{"line-color":t.link,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_minor_service",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["==","pmap:kind_detail","service"]],paint:{"line-color":t.minor_service,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8]}},{id:"roads_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"],["!=","pmap:kind_detail","service"]],paint:{"line-color":["interpolate",["exponential",1.6],["zoom"],11,t.minor_a,16,t.minor_b],"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_major_casing_early",type:"line",source:e,"source-layer":"roads",maxzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major_casing_early,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_major",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_highway_casing_early",type:"line",source:e,"source-layer":"roads",maxzoom:12,filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.highway_casing_early,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"transit_railway",type:"line",source:e,"source-layer":"transit",filter:["all",["==","pmap:kind","rail"]],paint:{"line-dasharray":[.3,.75],"line-opacity":.5,"line-color":t.railway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,.15,18,9]}},{id:"boundaries_country",type:"line",source:e,"source-layer":"boundaries",filter:["<=","pmap:min_admin_level",2],paint:{"line-color":t.boundaries,"line-width":1,"line-dasharray":[3,2]}},{id:"boundaries",type:"line",source:e,"source-layer":"boundaries",filter:[">","pmap:min_admin_level",2],paint:{"line-color":t.boundaries,"line-width":.5,"line-dasharray":[3,2]}},{id:"roads_bridges_other_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":t.bridges_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_link_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":t.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1.5]}},{id:"roads_bridges_minor_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_bridges_medium_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1.5]}},{id:"roads_bridges_major_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,10],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1.5]}},{id:"roads_bridges_other",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["in","pmap:kind","other","path"]],paint:{"line-color":t.bridges_other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_minor",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_bridges_link",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:link",1]],paint:{"line-color":t.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_bridges_medium",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,12,1.2,15,3,18,13]}},{id:"roads_bridges_major",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_bridges_highway_casing",type:"line",source:e,"source-layer":"roads",minzoom:12,filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.bridges_highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_bridges_highway",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"],["!=","pmap:link",1]],paint:{"line-color":t.bridges_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}}]}function xB(e,t){return[{id:"physical_line_waterway_label",type:"symbol",source:e,"source-layer":"physical_line",minzoom:13,filter:["all",["in","pmap:kind","river","stream"]],layout:{"symbol-placement":"line","text-font":["Roboto Regular"],"text-field":["get","name"],"text-size":12,"text-letter-spacing":.3},paint:{"text-color":t.waterway_label}},{id:"physical_point_peak",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["==","pmap:kind","peak"]],layout:{"text-font":["Roboto Italic"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],10,8,16,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":t.peak_label,"text-halo-width":1.5}},{id:"roads_labels_minor",type:"symbol",source:e,"source-layer":"roads",minzoom:15,filter:["any",["in","pmap:kind","minor_road","other","path"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["Roboto Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":t.roads_label_minor,"text-halo-color":t.roads_label_minor_halo,"text-halo-width":2}},{id:"physical_point_ocean",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["in","pmap:kind","sea","ocean","lake","water","bay","strait","fjord"]],layout:{"text-font":["Roboto Medium"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,10,10,12],"text-letter-spacing":.1,"text-max-width":9,"text-transform":"uppercase"},paint:{"text-color":t.ocean_label}},{id:"physical_point_lakes",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["in","pmap:kind","lake","water"]],layout:{"text-font":["Roboto Medium"],"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],3,0,6,12,10,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":t.ocean_label}},{id:"roads_labels_major",type:"symbol",source:e,"source-layer":"roads",minzoom:11,filter:["any",["in","pmap:kind","highway","major_road","medium_road"]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"symbol-placement":"line","text-font":["Roboto Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":t.roads_label_major,"text-halo-color":t.roads_label_major_halo,"text-halo-width":2}},{id:"places_subplace",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","neighbourhood"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["Roboto Regular"],"text-max-width":7,"text-letter-spacing":.1,"text-padding":["interpolate",["linear"],["zoom"],5,2,8,4,12,18,15,20],"text-size":["interpolate",["exponential",1.2],["zoom"],11,8,14,14,18,24],"text-transform":"uppercase"},paint:{"text-color":t.subplace_label,"text-halo-color":t.subplace_label_halo,"text-halo-width":2}},{id:"pois_important",type:"symbol",source:e,"source-layer":"pois",filter:["any",["<",["get","pmap:min_zoom"],13]],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-font":["Noto Sans Regular"],"text-field":["get","name"],"text-size":11,"text-max-width":9,"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2]},paint:{"text-color":t.subplace_label,"text-halo-color":t.subplace_label_halo,"text-halo-width":1.5}},{id:"places_locality_circle",type:"circle",source:e,"source-layer":"places",filter:["==","pmap:kind","locality"],paint:{"circle-radius":2,"circle-stroke-width":1.5,"circle-stroke-color":t.city_circle_stroke,"circle-color":t.city_circle,"circle-translate":[-6,0]},maxzoom:8},{id:"places_locality",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","locality"],layout:{"text-field":"{name}","text-font":["case",["<=",["get","pmap:min_zoom"],5],["literal",["Roboto Medium"]],["literal",["Roboto Regular"]]],"text-padding":["interpolate",["linear"],["zoom"],5,3,8,7,12,11],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","pmap:population_rank"],13],8,[">=",["get","pmap:population_rank"],13],13,0],4,["case",["<",["get","pmap:population_rank"],13],10,[">=",["get","pmap:population_rank"],13],15,0],6,["case",["<",["get","pmap:population_rank"],12],11,[">=",["get","pmap:population_rank"],12],17,0],8,["case",["<",["get","pmap:population_rank"],11],11,[">=",["get","pmap:population_rank"],11],18,0],10,["case",["<",["get","pmap:population_rank"],9],12,[">=",["get","pmap:population_rank"],9],20,0],15,["case",["<",["get","pmap:population_rank"],8],12,[">=",["get","pmap:population_rank"],8],22,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,8,4,10,8,12,6,22,2],"text-anchor":["step",["zoom"],"left",8,"center"],"text-radial-offset":.2},paint:{"text-color":t.city_label,"text-halo-color":t.city_label_halo,"text-halo-width":1}},{id:"places_region",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","region"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":["step",["zoom"],["get","name:short"],5,["get","name"]],"text-font":["Roboto Regular"],"text-size":["interpolate",["linear"],["zoom"],3,11,7,24],"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":t.state_label,"text-halo-color":t.state_label_halo,"text-halo-width":2}},{id:"places_country",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","country"],layout:{"symbol-sort-key":["get","pmap:min_zoom"],"text-field":"{name}","text-font":["Roboto Medium"],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","pmap:population_rank"],10],8,[">=",["get","pmap:population_rank"],10],12,0],6,["case",["<",["get","pmap:population_rank"],8],10,[">=",["get","pmap:population_rank"],8],18,0],8,["case",["<",["get","pmap:population_rank"],7],11,[">=",["get","pmap:population_rank"],7],20,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2],"text-transform":"uppercase"},paint:{"text-color":t.country_label}}]}var bB={background:"#dddddd",earth:"#ededed",park_a:"#bfc99c",park_b:"#bfc99c",hospital:"#ffeae8",industrial:"#f8ffed",school:"#f2fef9",wood_a:"#bfc99c",wood_b:"#bfc99c",pedestrian:"#eef0f0",scrub_a:"#bfc99c",scrub_b:"#bfc99c",glacier:"#ffffff",sand:"#ebe7da",beach:"#ebe7da",aerodrome:"#dbe7e7",runway:"#d1d9d9",water:"#84b7cf",pier:"#ededed",zoo:"#ebe6ed",military:"#ebe6ed",tunnel_other_casing:"#ffffff",tunnel_minor_casing:"#e2e2e2",tunnel_link_casing:"#e2e2e2",tunnel_medium_casing:"#e1e1e1",tunnel_major_casing:"#e3cfd3",tunnel_highway_casing:"#ebcea2",tunnel_other:"#f7f7f7",tunnel_minor:"#ebebeb",tunnel_link:"#ebebeb",tunnel_medium:"#ebebeb",tunnel_major:"#ebebeb",tunnel_highway:"#ebebeb",transit_pier:"#ededed",buildings:"#cbcece",minor_service_casing:"#e2e2e2",minor_casing:"#e2e2e2",link_casing:"#e2e2e2",medium_casing:"#e1e1e1",major_casing_late:"#e3cfd3",highway_casing_late:"#ebcea2",other:"#ffffff",minor_service:"#ffffff",minor_a:"#fff2bb",minor_b:"#fff2bb",link:"#fff2bb",medium:"#ffea94",major_casing_early:"#e3cfd3",major:"#ffdf59",highway_casing_early:"#ebcea2",highway:"#e9ac77",railway:"#b3bcc9",boundaries:"#5c4a6b",waterway_label:"#a4cae1",bridges_other_casing:"#ffffff",bridges_minor_casing:"#e2e2e2",bridges_link_casing:"#e1e1e1",bridges_medium_casing:"#e1e1e1",bridges_major_casing:"#e3cfd3",bridges_highway_casing:"#ebcea2",bridges_other:"#ffffff",bridges_minor:"#ffffff",bridges_link:"#e1e1e1",bridges_medium:"#ffffff",bridges_major:"#ffffff",bridges_highway:"#fefffc",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#91888b",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#61bb5b",subplace_label:"#757d91",subplace_label_halo:"#ffffff",city_circle:"#666666",city_circle_stroke:"#ffffff",city_label:"#3c3c3c",city_label_halo:"#ffffff",state_label:"#777777",state_label_halo:"#ffffff",country_label:"#9590aa"},wB={background:"#cccccc",earth:"#e0e0e0",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",pier:"#e0e0e0",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_medium_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_medium:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",transit_pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",medium_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",medium:"#f5f5f5",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",waterway_label:"#ffffff",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_medium_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_medium:"#f0eded",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#ffffff",peak_label:"#7e9aa0",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_circle:"#ffffff",city_circle_stroke:"#a3a3a3",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3"},SB={background:"#34373d",earth:"#1f1f1f",park_a:"#232325",park_b:"#232325",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#34373d",pier:"#222222",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_medium_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",medium_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",medium:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",waterway_label:"#717784",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_medium_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_medium:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",peak_label:"#898080",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_circle:"#000000",city_circle_stroke:"#7a7a7a",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c"},EB={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",pier:"#f5f5f5",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_medium_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",medium_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",waterway_label:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_medium_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",peak_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_circle:"#ffffff",city_circle_stroke:"#adadad",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8"},kB={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",pier:"#b8b8b8",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_medium_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_medium:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",transit_pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",medium_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",medium:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",waterway_label:"#7a7a7a",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_medium_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_medium:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",peak_label:"#5c5c5c",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_circle:"#c2c2c2",city_circle_stroke:"#7a7a7a",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585"},TB={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",pier:"#0a0a0a",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_medium_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_medium:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",transit_pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",medium_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",medium:"#292929",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",waterway_label:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_medium_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_medium:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",peak_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_circle:"#000000",city_circle_stroke:"#666666",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070"},CB={light:wB,dark:SB,white:EB,grayscale:kB,black:TB,contrast:bB},PB=CB;function LM(e,t){let n=PB[t];return vB(e,n).concat(xB(e,n))}var Lh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FM=W.exports;function Kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _v=!1;function it(e,t){return _v&&(_v=!1,t[0]!=="<"&&e.push("<!-- -->")),t==="<!-- -->"?_v=!0:e.push(t)}var bo=Object.prototype.hasOwnProperty,IB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ck={},Pk={};function OM(e){return bo.call(Pk,e)?!0:bo.call(Ck,e)?!1:IB.test(e)?Pk[e]=!0:(Ck[e]=!0,!1)}function Zi(e,t,n,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ni[e]=new Zi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ni[t]=new Zi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ni[e]=new Zi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ni[e]=new Zi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ni[e]=new Zi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ni[e]=new Zi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ni[e]=new Zi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ni[e]=new Zi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ni[e]=new Zi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vb=/[\-:]([a-z])/g;function Nb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vb,Nb);ni[t]=new Zi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vb,Nb);ni[t]=new Zi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vb,Nb);ni[t]=new Zi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ni[e]=new Zi(e,1,!1,e.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ni[e]=new Zi(e,1,!1,e.toLowerCase(),null,!0,!0)});var ug={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MB=["Webkit","ms","Moz","O"];Object.keys(ug).forEach(function(e){MB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ug[t]=ug[e]})});var AB=/["'&<>]/;function Ni(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=AB.exec(e);if(t){var n="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(n+=e.substring(l,o)),l=o+1,n+=t}e=l!==o?n+e.substring(l,o):n}return e}var zB=/([A-Z])/g,DB=/^ms-/,fx=Array.isArray;function ds(e,t){return{insertionMode:e,selectedValue:t}}function RB(e,t,n){switch(t){case"select":return ds(1,n.value!=null?n.value:n.defaultValue);case"svg":return ds(2,null);case"math":return ds(3,null);case"foreignObject":return ds(1,null);case"table":return ds(4,null);case"thead":case"tbody":case"tfoot":return ds(5,null);case"colgroup":return ds(7,null);case"tr":return ds(6,null)}return 4<=e.insertionMode||e.insertionMode===0?ds(1,null):e}function Ik(e,t){t!==""&&e.push(Ni(t),"<!-- -->")}var Mk=new Map;function $M(e,t,n){if(typeof n!="object")throw Error(Kt(62));t=!0;for(var o in n)if(bo.call(n,o)){var l=n[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=Ni(o);l=Ni((""+l).trim())}else{h=o;var g=Mk.get(h);g!==void 0||(g=Ni(h.replace(zB,"-$1").toLowerCase().replace(DB,"-ms-")),Mk.set(h,g)),h=g,l=typeof l=="number"?l===0||bo.call(ug,o)?""+l:l+"px":Ni((""+l).trim())}t?(t=!1,e.push(' style="',h,":",l)):e.push(";",h,":",l)}}t||e.push('"')}function Zo(e,t,n,o){switch(n){case"style":$M(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=ni.hasOwnProperty(n)?ni[n]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:o&&e.push(" ",n,'=""');break;case 4:o===!0?e.push(" ",n,'=""'):o!==!1&&e.push(" ",n,'="',Ni(o),'"');break;case 5:isNaN(o)||e.push(" ",n,'="',Ni(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",n,'="',Ni(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",n,'="',Ni(o),'"')}}else if(OM(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",n,'="',Ni(o),'"')}}}function cg(e,t,n){if(t!=null){if(n!=null)throw Error(Kt(60));if(typeof t!="object"||!("__html"in t))throw Error(Kt(61));t=t.__html,t!=null&&e.push(""+t)}}function LB(e){var t="";return FM.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function vv(e,t,n,o){e.push(ps(n));var l=n=null,h;for(h in t)if(bo.call(t,h)){var g=t[h];if(g!=null)switch(h){case"children":n=g;break;case"dangerouslySetInnerHTML":l=g;break;default:Zo(e,o,h,g)}}return e.push(">"),cg(e,l,n),typeof n=="string"?(e.push(Ni(n)),null):n}var FB=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ak=new Map;function ps(e){var t=Ak.get(e);if(t===void 0){if(!FB.test(e))throw Error(Kt(65,e));t="<"+e,Ak.set(e,t)}return t}function OB(e,t,n,o,l){switch(t){case"select":e.push(ps("select"));var h=null,g=null;for(C in n)if(bo.call(n,C)){var u=n[C];if(u!=null)switch(C){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"defaultValue":case"value":break;default:Zo(e,o,C,u)}}return e.push(">"),cg(e,g,h),h;case"option":g=l.selectedValue,e.push(ps("option"));var S=u=null,b=null,C=null;for(h in n)if(bo.call(n,h)&&(t=n[h],t!=null))switch(h){case"children":u=t;break;case"selected":b=t;break;case"dangerouslySetInnerHTML":C=t;break;case"value":S=t;default:Zo(e,o,h,t)}if(g!=null)if(n=S!==null?""+S:LB(u),fx(g)){for(o=0;o<g.length;o++)if(""+g[o]===n){e.push(' selected=""');break}}else""+g===n&&e.push(' selected=""');else b&&e.push(' selected=""');return e.push(">"),cg(e,C,u),u;case"textarea":e.push(ps("textarea")),C=g=h=null;for(u in n)if(bo.call(n,u)&&(S=n[u],S!=null))switch(u){case"children":C=S;break;case"value":h=S;break;case"defaultValue":g=S;break;case"dangerouslySetInnerHTML":throw Error(Kt(91));default:Zo(e,o,u,S)}if(h===null&&g!==null&&(h=g),e.push(">"),C!=null){if(h!=null)throw Error(Kt(92));if(fx(C)&&1<C.length)throw Error(Kt(93));h=""+C}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h!==null&&e.push(Ni(""+h)),null;case"input":e.push(ps("input")),S=C=u=h=null;for(g in n)if(bo.call(n,g)&&(b=n[g],b!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(399,"input"));case"defaultChecked":S=b;break;case"defaultValue":u=b;break;case"checked":C=b;break;case"value":h=b;break;default:Zo(e,o,g,b)}return C!==null?Zo(e,o,"checked",C):S!==null&&Zo(e,o,"checked",S),h!==null?Zo(e,o,"value",h):u!==null&&Zo(e,o,"value",u),e.push("/>"),null;case"menuitem":e.push(ps("menuitem"));for(var A in n)if(bo.call(n,A)&&(h=n[A],h!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(400));default:Zo(e,o,A,h)}return e.push(">"),null;case"listing":case"pre":e.push(ps(t)),g=h=null;for(S in n)if(bo.call(n,S)&&(u=n[S],u!=null))switch(S){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;default:Zo(e,o,S,u)}if(e.push(">"),g!=null){if(h!=null)throw Error(Kt(60));if(typeof g!="object"||!("__html"in g))throw Error(Kt(61));n=g.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(`
`,n):e.push(""+n))}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ps(t));for(var z in n)if(bo.call(n,z)&&(h=n[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(399,t));default:Zo(e,o,z,h)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return vv(e,n,t,o);case"html":return l.insertionMode===0&&e.push("<!DOCTYPE html>"),vv(e,n,t,o);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return vv(e,n,t,o);e.push(ps(t)),g=h=null;for(b in n)if(bo.call(n,b)&&(u=n[b],u!=null))switch(b){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"style":$M(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:OM(b)&&typeof u!="function"&&typeof u!="symbol"&&e.push(" ",b,'="',Ni(u),'"')}return e.push(">"),cg(e,g,h),h}}function zk(e,t,n){if(it(e,'<!--$?--><template id="'),n===null)throw Error(Kt(395));return it(e,n),it(e,'"></template>')}function $B(e,t,n,o){switch(n.insertionMode){case 0:case 1:return it(e,'<div hidden id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 2:return it(e,'<svg aria-hidden="true" style="display:none" id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 3:return it(e,'<math aria-hidden="true" style="display:none" id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 4:return it(e,'<table hidden id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 5:return it(e,'<table hidden><tbody id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 6:return it(e,'<table hidden><tr id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');case 7:return it(e,'<table hidden><colgroup id="'),it(e,t.segmentPrefix),t=o.toString(16),it(e,t),it(e,'">');default:throw Error(Kt(397))}}function BB(e,t){switch(t.insertionMode){case 0:case 1:return it(e,"</div>");case 2:return it(e,"</svg>");case 3:return it(e,"</math>");case 4:return it(e,"</table>");case 5:return it(e,"</tbody></table>");case 6:return it(e,"</tr></table>");case 7:return it(e,"</colgroup></table>");default:throw Error(Kt(397))}}function VB(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}var bf=Object.assign,NB=Symbol.for("react.element"),BM=Symbol.for("react.portal"),VM=Symbol.for("react.fragment"),NM=Symbol.for("react.strict_mode"),UM=Symbol.for("react.profiler"),jM=Symbol.for("react.provider"),GM=Symbol.for("react.context"),WM=Symbol.for("react.forward_ref"),qM=Symbol.for("react.suspense"),ZM=Symbol.for("react.suspense_list"),HM=Symbol.for("react.memo"),Ub=Symbol.for("react.lazy"),UB=Symbol.for("react.scope"),jB=Symbol.for("react.debug_trace_mode"),GB=Symbol.for("react.legacy_hidden"),WB=Symbol.for("react.default_value"),Dk=Symbol.iterator;function px(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case VM:return"Fragment";case BM:return"Portal";case UM:return"Profiler";case NM:return"StrictMode";case qM:return"Suspense";case ZM:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GM:return(e.displayName||"Context")+".Consumer";case jM:return(e._context.displayName||"Context")+".Provider";case WM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HM:return t=e.displayName||null,t!==null?t:px(e.type)||"Memo";case Ub:t=e._payload,e=e._init;try{return px(e(t))}catch{}}return null}var XM={};function Rk(e,t){if(e=e.contextTypes,!e)return XM;var n={},o;for(o in e)n[o]=t[o];return n}var xu=null;function Wy(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(Kt(401))}else{if(n===null)throw Error(Kt(401));Wy(e,n)}t.context._currentValue2=t.value}}function KM(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&KM(e)}function YM(e){var t=e.parent;t!==null&&YM(t),e.context._currentValue2=e.value}function JM(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Kt(402));e.depth===t.depth?Wy(e,t):JM(e,t)}function QM(e,t){var n=t.parent;if(n===null)throw Error(Kt(402));e.depth===n.depth?Wy(e,n):QM(e,n),t.context._currentValue2=t.value}function ay(e){var t=xu;t!==e&&(t===null?YM(e):e===null?KM(t):t.depth===e.depth?Wy(t,e):t.depth>e.depth?JM(t,e):QM(t,e),xu=e)}var Lk={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Fk(e,t,n,o){var l=e.state!==void 0?e.state:null;e.updater=Lk,e.props=n,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue2:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(n,l),l=g==null?l:bf({},l,g),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&Lk.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,g=h.replace,h.queue=null,h.replace=!1,g&&t.length===1)e.state=t[0];else{for(h=g?t[0]:e.state,l=!0,g=g?1:0;g<t.length;g++){var u=t[g];u=typeof u=="function"?u.call(e,h,n,o):u,u!=null&&(l?(l=!1,h=bf({},h,u)):bf(h,u))}e.state=h}else h.queue=null}var qB={id:1,overflow:""};function mx(e,t,n){var o=e.id;e=e.overflow;var l=32-hg(o)-1;o&=~(1<<l),n+=1;var h=32-hg(t)+l;if(30<h){var g=l-l%5;return h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,{id:1<<32-hg(t)+l|n<<l|o,overflow:h+e}}return{id:1<<h|n<<l|o,overflow:e}}var hg=Math.clz32?Math.clz32:XB,ZB=Math.log,HB=Math.LN2;function XB(e){return e>>>=0,e===0?32:31-(ZB(e)/HB|0)|0}function KB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YB=typeof Object.is=="function"?Object.is:KB,Ms=null,jb=null,dg=null,$n=null,rf=!1,sy=!1,Gf=0,ll=null,qy=0;function pu(){if(Ms===null)throw Error(Kt(321));return Ms}function Ok(){if(0<qy)throw Error(Kt(312));return{memoizedState:null,queue:null,next:null}}function Gb(){return $n===null?dg===null?(rf=!1,dg=$n=Ok()):(rf=!0,$n=dg):$n.next===null?(rf=!1,$n=$n.next=Ok()):(rf=!0,$n=$n.next),$n}function Wb(){jb=Ms=null,sy=!1,dg=null,qy=0,$n=ll=null}function e3(e,t){return typeof t=="function"?t(e):t}function $k(e,t,n){if(Ms=pu(),$n=Gb(),rf){var o=$n.queue;if(t=o.dispatch,ll!==null&&(n=ll.get(o),n!==void 0)){ll.delete(o),o=$n.memoizedState;do o=e(o,n.action),n=n.next;while(n!==null);return $n.memoizedState=o,[o,t]}return[$n.memoizedState,t]}return e=e===e3?typeof t=="function"?t():t:n!==void 0?n(t):t,$n.memoizedState=e,e=$n.queue={last:null,dispatch:null},e=e.dispatch=JB.bind(null,Ms,e),[$n.memoizedState,e]}function Bk(e,t){if(Ms=pu(),$n=Gb(),t=t===void 0?null:t,$n!==null){var n=$n.memoizedState;if(n!==null&&t!==null){var o=n[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!YB(t[l],o[l])){o=!1;break e}o=!0}if(o)return n[0]}}return e=e(),$n.memoizedState=[e,t],e}function JB(e,t,n){if(25<=qy)throw Error(Kt(301));if(e===Ms)if(sy=!0,e={action:n,next:null},ll===null&&(ll=new Map),n=ll.get(t),n===void 0)ll.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function QB(){throw Error(Kt(394))}function Bm(){}var Vk={readContext:function(e){return e._currentValue2},useContext:function(e){return pu(),e._currentValue2},useMemo:Bk,useReducer:$k,useRef:function(e){Ms=pu(),$n=Gb();var t=$n.memoizedState;return t===null?(e={current:e},$n.memoizedState=e):t},useState:function(e){return $k(e3,e)},useInsertionEffect:Bm,useLayoutEffect:function(){},useCallback:function(e,t){return Bk(function(){return e},t)},useImperativeHandle:Bm,useEffect:Bm,useDebugValue:Bm,useDeferredValue:function(e){return pu(),e},useTransition:function(){return pu(),[!1,QB]},useId:function(){var e=jb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-hg(e)-1)).toString(32)+t;var n=fg;if(n===null)throw Error(Kt(404));return t=Gf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return pu(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(Kt(407));return n()}},fg=null,xv=FM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function e8(e){console.error(e)}function of(){}function t8(e,t,n,o,l,h,g,u,S){var b=[],C=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:C,pingedTasks:b,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?e8:l,onAllReady:h===void 0?of:h,onShellReady:g===void 0?of:g,onShellError:u===void 0?of:u,onFatalError:S===void 0?of:S},n=ly(t,0,null,n),n.parentFlushed=!0,e=qb(t,e,null,n,C,XM,null,qB),b.push(e),t}function qb(e,t,n,o,l,h,g,u){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var S={node:t,ping:function(){var b=e.pingedTasks;b.push(S),b.length===1&&r3(e)},blockedBoundary:n,blockedSegment:o,abortSet:l,legacyContext:h,context:g,treeContext:u};return l.add(S),S}function ly(e,t,n,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n}}function Wf(e,t){e=e.onError,e(t)}function uy(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Nk(e,t,n,o,l){for(Ms={},jb=t,Gf=0,e=n(o,l);sy;)sy=!1,Gf=0,qy+=1,$n=null,e=n(o,l);return Wb(),e}function Uk(e,t,n,o){var l=n.render(),h=o.childContextTypes;if(h!=null){var g=t.legacyContext;if(typeof n.getChildContext!="function")o=g;else{n=n.getChildContext();for(var u in n)if(!(u in h))throw Error(Kt(108,px(o)||"Unknown",u));o=bf({},g,n)}t.legacyContext=o,wo(e,t,l),t.legacyContext=g}else wo(e,t,l)}function jk(e,t){if(e&&e.defaultProps){t=bf({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gx(e,t,n,o,l){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){l=Rk(n,t.legacyContext);var h=n.contextType;h=new n(o,typeof h=="object"&&h!==null?h._currentValue2:l),Fk(h,n,o,l),Uk(e,t,h,n)}else{h=Rk(n,t.legacyContext),l=Nk(e,t,n,o,h);var g=Gf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)Fk(l,n,o,h),Uk(e,t,l,n);else if(g){o=t.treeContext,t.treeContext=mx(o,1,0);try{wo(e,t,l)}finally{t.treeContext=o}}else wo(e,t,l)}else if(typeof n=="string")switch(l=t.blockedSegment,h=OB(l.chunks,n,o,e.responseState,l.formatContext),g=l.formatContext,l.formatContext=RB(g,n,o),yx(e,t,h),l.formatContext=g,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push("</",n,">")}else{switch(n){case GB:case jB:case NM:case UM:case VM:wo(e,t,o.children);return;case ZM:wo(e,t,o.children);return;case UB:throw Error(Kt(343));case qM:e:{n=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,g=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g},S=ly(e,l.chunks.length,u,l.formatContext);l.children.push(S);var b=ly(e,0,null,l.formatContext);b.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=b;try{if(yx(e,t,o),b.status=1,cy(u,b),u.pendingTasks===0)break e}catch(C){b.status=4,Wf(e,C),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=l}t=qb(e,h,n,S,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case WM:if(o=Nk(e,t,n.render,o,l),Gf!==0){n=t.treeContext,t.treeContext=mx(n,1,0);try{wo(e,t,o)}finally{t.treeContext=n}}else wo(e,t,o);return;case HM:n=n.type,o=jk(n,o),gx(e,t,n,o,l);return;case jM:if(l=o.children,n=n._context,o=o.value,h=n._currentValue2,n._currentValue2=o,g=xu,xu=o={parent:g,depth:g===null?0:g.depth+1,context:n,parentValue:h,value:o},t.context=o,wo(e,t,l),e=xu,e===null)throw Error(Kt(403));o=e.parentValue,e.context._currentValue2=o===WB?e.context._defaultValue:o,e=xu=e.parent,t.context=e;return;case GM:o=o.children,o=o(n._currentValue2),wo(e,t,o);return;case Ub:l=n._init,n=l(n._payload),o=jk(n,o),gx(e,t,n,o,void 0);return}throw Error(Kt(130,n==null?n:typeof n,""))}}function wo(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case NB:gx(e,t,n.type,n.props,n.ref);return;case BM:throw Error(Kt(257));case Ub:var o=n._init;n=o(n._payload),wo(e,t,n);return}if(fx(n)){Gk(e,t,n);return}if(n===null||typeof n!="object"?o=null:(o=Dk&&n[Dk]||n["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(n))){if(n=o.next(),!n.done){var l=[];do l.push(n.value),n=o.next();while(!n.done);Gk(e,t,l)}return}throw e=Object.prototype.toString.call(n),Error(Kt(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(t=t.blockedSegment.chunks,e.responseState.generateStaticMarkup?t.push(Ni(n)):Ik(t,n)):typeof n=="number"&&(t=t.blockedSegment.chunks,n=""+n,e.responseState.generateStaticMarkup?t.push(Ni(n)):Ik(t,n))}function Gk(e,t,n){for(var o=n.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=mx(h,o,l);try{yx(e,t,n[l])}finally{t.treeContext=h}}}function yx(e,t,n){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return wo(e,t,n)}catch(S){if(Wb(),typeof S=="object"&&S!==null&&typeof S.then=="function"){n=S;var g=t.blockedSegment,u=ly(e,g.chunks.length,null,g.formatContext);g.children.push(u),e=qb(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ay(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,ay(h),S}}function n8(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,n3(this,t,e)}function t3(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.push(null))):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(t3,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function cy(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&cy(e,n)}else e.completedSegments.push(t)}function n3(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(Kt(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=of,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&cy(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(n8,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(cy(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function r3(e){if(e.status!==2){var t=xu,n=xv.current;xv.current=Vk;var o=fg;fg=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var g=l[h],u=e,S=g.blockedSegment;if(S.status===0){ay(g.context);try{wo(u,g,g.node),g.abortSet.delete(g),S.status=1,n3(u,g.blockedBoundary,S)}catch(j){if(Wb(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var b=g.ping;j.then(b,b)}else{g.abortSet.delete(g),S.status=4;var C=g.blockedBoundary,A=j;if(Wf(u,A),C===null?uy(u,A):(C.pendingTasks--,C.forceClientRender||(C.forceClientRender=!0,C.parentFlushed&&u.clientRenderedBoundaries.push(C))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&Zb(e,e.destination)}catch(j){Wf(e,j),uy(e,j)}finally{fg=o,xv.current=n,n===Vk&&ay(t)}}}function Vm(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var o=n.id=e.nextSegmentId++;return e=e.responseState,it(t,'<template id="'),it(t,e.placeholderPrefix),e=o.toString(16),it(t,e),it(t,'"></template>');case 1:n.status=2;var l=!0;o=n.chunks;var h=0;n=n.children;for(var g=0;g<n.length;g++){for(l=n[g];h<l.index;h++)it(t,o[h]);l=Zy(e,t,l)}for(;h<o.length-1;h++)it(t,o[h]);return h<o.length&&(l=it(t,o[h])),l;default:throw Error(Kt(390))}}function Zy(e,t,n){var o=n.boundary;if(o===null)return Vm(e,t,n);if(o.parentFlushed=!0,o.forceClientRender)return e.responseState.generateStaticMarkup||it(t,"<!--$!-->"),Vm(e,t,n),e=e.responseState.generateStaticMarkup?!0:it(t,"<!--/$-->"),e;if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;return l=l.boundaryPrefix+h.toString(16),o=o.id=l,zk(t,e.responseState,o),Vm(e,t,n),it(t,"<!--/$-->")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),zk(t,e.responseState,o.id),Vm(e,t,n),it(t,"<!--/$-->");if(e.responseState.generateStaticMarkup||it(t,"<!--$-->"),n=o.completedSegments,n.length!==1)throw Error(Kt(391));return Zy(e,t,n[0]),e=e.responseState.generateStaticMarkup?!0:it(t,"<!--/$-->"),e}function Wk(e,t,n){return $B(t,e.responseState,n.formatContext,n.id),Zy(e,t,n),BB(t,n.formatContext)}function qk(e,t,n){for(var o=n.completedSegments,l=0;l<o.length;l++)i3(e,t,n,o[l]);if(o.length=0,e=e.responseState,o=n.id,n=n.rootSegmentID,it(t,e.startInlineScript),e.sentCompleteBoundaryFunction?it(t,'$RC("'):(e.sentCompleteBoundaryFunction=!0,it(t,'function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),o===null)throw Error(Kt(395));return n=n.toString(16),it(t,o),it(t,'","'),it(t,e.segmentPrefix),it(t,n),it(t,'")<\/script>')}function i3(e,t,n,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=n.rootSegmentID)===-1)throw Error(Kt(392));return Wk(e,t,o)}return Wk(e,t,o),e=e.responseState,it(t,e.startInlineScript),e.sentCompleteSegmentFunction?it(t,'$RS("'):(e.sentCompleteSegmentFunction=!0,it(t,'function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),it(t,e.segmentPrefix),l=l.toString(16),it(t,l),it(t,'","'),it(t,e.placeholderPrefix),it(t,l),it(t,'")<\/script>')}function Zb(e,t){try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Zy(e,t,n),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)it(t,o[n]);n<o.length&&it(t,o[n])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var g=e.responseState,u=l[h].id;if(it(o,g.startInlineScript),g.sentClientRenderFunction?it(o,'$RX("'):(g.sentClientRenderFunction=!0,it(o,'function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("')),u===null)throw Error(Kt(395));if(it(o,u),!it(o,'")<\/script>')){e.destination=null,h++,l.splice(0,h);return}}l.splice(0,h);var S=e.completedBoundaries;for(h=0;h<S.length;h++)if(!qk(e,t,S[h])){e.destination=null,h++,S.splice(0,h);return}S.splice(0,h);var b=e.partialBoundaries;for(h=0;h<b.length;h++){var C=b[h];e:{l=e,g=t;var A=C.completedSegments;for(u=0;u<A.length;u++)if(!i3(l,g,C,A[u])){u++,A.splice(0,u);var z=!1;break e}A.splice(0,u),z=!0}if(!z){e.destination=null,h++,b.splice(0,h);return}}b.splice(0,h);var j=e.completedBoundaries;for(h=0;h<j.length;h++)if(!qk(e,t,j[h])){e.destination=null,h++,j.splice(0,h);return}j.splice(0,h)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function r8(e){try{var t=e.abortableTasks;t.forEach(t3,e),t.clear(),e.destination!==null&&Zb(e,e.destination)}catch(n){Wf(e,n),uy(e,n)}}function i8(){}function o3(e,t,n){var o=!1,l=null,h="",g={push:function(S){return S!==null&&(h+=S),!0},destroy:function(S){o=!0,l=S}},u=!1;if(e=t8(e,VB(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,i8,void 0,function(){u=!0},void 0,void 0),r3(e),r8(e),e.status===1)e.status=2,g.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=g;try{Zb(e,g)}catch(S){Wf(e,S),uy(e,S)}}if(o)throw l;if(!u)throw Error(Kt(426));return h}Lh.renderToNodeStream=function(){throw Error(Kt(207))};Lh.renderToStaticMarkup=function(e,t){return o3(e,t,!0)};Lh.renderToStaticNodeStream=function(){throw Error(Kt(208))};Lh.renderToString=function(e,t){return o3(e,t,!1)};Lh.version="18.1.0";var Hb={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3=W.exports;function en(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var So=null,Eo=0;function Ft(e,t){if(t.length!==0)if(512<t.length)0<Eo&&(e.enqueue(new Uint8Array(So.buffer,0,Eo)),So=new Uint8Array(512),Eo=0),e.enqueue(t);else{var n=So.length-Eo;n<t.length&&(n===0?e.enqueue(So):(So.set(t.subarray(0,n),Eo),e.enqueue(So),t=t.subarray(n)),So=new Uint8Array(512),Eo=0),So.set(t,Eo),Eo+=t.length}}function Yn(e,t){return Ft(e,t),!0}function Zk(e){So&&0<Eo&&(e.enqueue(new Uint8Array(So.buffer,0,Eo)),So=null,Eo=0)}var s3=new TextEncoder;function sn(e){return s3.encode(e)}function mt(e){return s3.encode(e)}function l3(e,t){typeof e.error=="function"?e.error(t):e.close()}var ko=Object.prototype.hasOwnProperty,o8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hk={},Xk={};function u3(e){return ko.call(Xk,e)?!0:ko.call(Hk,e)?!1:o8.test(e)?Xk[e]=!0:(Hk[e]=!0,!1)}function Hi(e,t,n,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ri[e]=new Hi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ri[t]=new Hi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ri[e]=new Hi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ri[e]=new Hi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ri[e]=new Hi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ri[e]=new Hi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ri[e]=new Hi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ri[e]=new Hi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ri[e]=new Hi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xb=/[\-:]([a-z])/g;function Kb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xb,Kb);ri[t]=new Hi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xb,Kb);ri[t]=new Hi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xb,Kb);ri[t]=new Hi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ri[e]=new Hi(e,1,!1,e.toLowerCase(),null,!1,!1)});ri.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ri[e]=new Hi(e,1,!1,e.toLowerCase(),null,!0,!0)});var pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a8=["Webkit","ms","Moz","O"];Object.keys(pg).forEach(function(e){a8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pg[t]=pg[e]})});var s8=/["'&<>]/;function Qr(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=s8.exec(e);if(t){var n="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(n+=e.substring(l,o)),l=o+1,n+=t}e=l!==o?n+e.substring(l,o):n}return e}var l8=/([A-Z])/g,u8=/^ms-/,_x=Array.isArray,c8=mt("<script>"),h8=mt("<\/script>"),d8=mt('<script src="'),f8=mt('<script type="module" src="'),Kk=mt('" async=""><\/script>'),p8=/(<\/|<)(s)(cript)/gi;function m8(e,t,n,o){return""+t+(n==="s"?"\\u0073":"\\u0053")+o}function g8(e,t,n,o,l){e=e===void 0?"":e,t=t===void 0?c8:mt('<script nonce="'+Qr(t)+'">');var h=[];if(n!==void 0&&h.push(t,sn((""+n).replace(p8,m8)),h8),o!==void 0)for(n=0;n<o.length;n++)h.push(d8,sn(Qr(o[n])),Kk);if(l!==void 0)for(o=0;o<l.length;o++)h.push(f8,sn(Qr(l[o])),Kk);return{bootstrapChunks:h,startInlineScript:t,placeholderPrefix:mt(e+"P:"),segmentPrefix:mt(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Fa(e,t){return{insertionMode:e,selectedValue:t}}function y8(e){return Fa(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function _8(e,t,n){switch(t){case"select":return Fa(1,n.value!=null?n.value:n.defaultValue);case"svg":return Fa(2,null);case"math":return Fa(3,null);case"foreignObject":return Fa(1,null);case"table":return Fa(4,null);case"thead":case"tbody":case"tfoot":return Fa(5,null);case"colgroup":return Fa(7,null);case"tr":return Fa(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Fa(1,null):e}var Yk=mt("<!-- -->"),Jk=new Map,v8=mt(' style="'),Qk=mt(":"),x8=mt(";");function c3(e,t,n){if(typeof n!="object")throw Error(en(62));t=!0;for(var o in n)if(ko.call(n,o)){var l=n[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=sn(Qr(o));l=sn(Qr((""+l).trim()))}else{h=o;var g=Jk.get(h);g!==void 0||(g=mt(Qr(h.replace(l8,"-$1").toLowerCase().replace(u8,"-ms-"))),Jk.set(h,g)),h=g,l=typeof l=="number"?l===0||ko.call(pg,o)?sn(""+l):sn(l+"px"):sn(Qr((""+l).trim()))}t?(t=!1,e.push(v8,h,Qk,l)):e.push(x8,h,Qk,l)}}t||e.push(mu)}var el=mt(" "),Gc=mt('="'),mu=mt('"'),eT=mt('=""');function Ho(e,t,n,o){switch(n){case"style":c3(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=ri.hasOwnProperty(n)?ri[n]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=sn(t.attributeName),t.type){case 3:o&&e.push(el,n,eT);break;case 4:o===!0?e.push(el,n,eT):o!==!1&&e.push(el,n,Gc,sn(Qr(o)),mu);break;case 5:isNaN(o)||e.push(el,n,Gc,sn(Qr(o)),mu);break;case 6:!isNaN(o)&&1<=o&&e.push(el,n,Gc,sn(Qr(o)),mu);break;default:t.sanitizeURL&&(o=""+o),e.push(el,n,Gc,sn(Qr(o)),mu)}}else if(u3(n)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(el,sn(n),Gc,sn(Qr(o)),mu)}}}var fu=mt(">"),tT=mt("/>");function mg(e,t,n){if(t!=null){if(n!=null)throw Error(en(60));if(typeof t!="object"||!("__html"in t))throw Error(en(61));t=t.__html,t!=null&&e.push(sn(""+t))}}function b8(e){var t="";return a3.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}var bv=mt(' selected=""');function wv(e,t,n,o){e.push(ms(n));var l=n=null,h;for(h in t)if(ko.call(t,h)){var g=t[h];if(g!=null)switch(h){case"children":n=g;break;case"dangerouslySetInnerHTML":l=g;break;default:Ho(e,o,h,g)}}return e.push(fu),mg(e,l,n),typeof n=="string"?(e.push(sn(Qr(n))),null):n}var Sv=mt(`
`),w8=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,nT=new Map;function ms(e){var t=nT.get(e);if(t===void 0){if(!w8.test(e))throw Error(en(65,e));t=mt("<"+e),nT.set(e,t)}return t}var S8=mt("<!DOCTYPE html>");function E8(e,t,n,o,l){switch(t){case"select":e.push(ms("select"));var h=null,g=null;for(C in n)if(ko.call(n,C)){var u=n[C];if(u!=null)switch(C){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"defaultValue":case"value":break;default:Ho(e,o,C,u)}}return e.push(fu),mg(e,g,h),h;case"option":g=l.selectedValue,e.push(ms("option"));var S=u=null,b=null,C=null;for(h in n)if(ko.call(n,h)&&(t=n[h],t!=null))switch(h){case"children":u=t;break;case"selected":b=t;break;case"dangerouslySetInnerHTML":C=t;break;case"value":S=t;default:Ho(e,o,h,t)}if(g!=null)if(n=S!==null?""+S:b8(u),_x(g)){for(o=0;o<g.length;o++)if(""+g[o]===n){e.push(bv);break}}else""+g===n&&e.push(bv);else b&&e.push(bv);return e.push(fu),mg(e,C,u),u;case"textarea":e.push(ms("textarea")),C=g=h=null;for(u in n)if(ko.call(n,u)&&(S=n[u],S!=null))switch(u){case"children":C=S;break;case"value":h=S;break;case"defaultValue":g=S;break;case"dangerouslySetInnerHTML":throw Error(en(91));default:Ho(e,o,u,S)}if(h===null&&g!==null&&(h=g),e.push(fu),C!=null){if(h!=null)throw Error(en(92));if(_x(C)&&1<C.length)throw Error(en(93));h=""+C}return typeof h=="string"&&h[0]===`
`&&e.push(Sv),h!==null&&e.push(sn(Qr(""+h))),null;case"input":e.push(ms("input")),S=C=u=h=null;for(g in n)if(ko.call(n,g)&&(b=n[g],b!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(en(399,"input"));case"defaultChecked":S=b;break;case"defaultValue":u=b;break;case"checked":C=b;break;case"value":h=b;break;default:Ho(e,o,g,b)}return C!==null?Ho(e,o,"checked",C):S!==null&&Ho(e,o,"checked",S),h!==null?Ho(e,o,"value",h):u!==null&&Ho(e,o,"value",u),e.push(tT),null;case"menuitem":e.push(ms("menuitem"));for(var A in n)if(ko.call(n,A)&&(h=n[A],h!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(en(400));default:Ho(e,o,A,h)}return e.push(fu),null;case"listing":case"pre":e.push(ms(t)),g=h=null;for(S in n)if(ko.call(n,S)&&(u=n[S],u!=null))switch(S){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;default:Ho(e,o,S,u)}if(e.push(fu),g!=null){if(h!=null)throw Error(en(60));if(typeof g!="object"||!("__html"in g))throw Error(en(61));n=g.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(Sv,sn(n)):e.push(sn(""+n)))}return typeof h=="string"&&h[0]===`
`&&e.push(Sv),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ms(t));for(var z in n)if(ko.call(n,z)&&(h=n[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(en(399,t));default:Ho(e,o,z,h)}return e.push(tT),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return wv(e,n,t,o);case"html":return l.insertionMode===0&&e.push(S8),wv(e,n,t,o);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return wv(e,n,t,o);e.push(ms(t)),g=h=null;for(b in n)if(ko.call(n,b)&&(u=n[b],u!=null))switch(b){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"style":c3(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:u3(b)&&typeof u!="function"&&typeof u!="symbol"&&e.push(el,sn(b),Gc,sn(Qr(u)),mu)}return e.push(fu),mg(e,g,h),h}}var k8=mt("</"),T8=mt(">"),C8=mt('<template id="'),P8=mt('"></template>'),I8=mt("<!--$-->"),M8=mt('<!--$?--><template id="'),A8=mt('"></template>'),z8=mt("<!--$!-->"),D8=mt("<!--/$-->");function rT(e,t,n){if(Ft(e,M8),n===null)throw Error(en(395));return Ft(e,n),Yn(e,A8)}var R8=mt('<div hidden id="'),L8=mt('">'),F8=mt("</div>"),O8=mt('<svg aria-hidden="true" style="display:none" id="'),$8=mt('">'),B8=mt("</svg>"),V8=mt('<math aria-hidden="true" style="display:none" id="'),N8=mt('">'),U8=mt("</math>"),j8=mt('<table hidden id="'),G8=mt('">'),W8=mt("</table>"),q8=mt('<table hidden><tbody id="'),Z8=mt('">'),H8=mt("</tbody></table>"),X8=mt('<table hidden><tr id="'),K8=mt('">'),Y8=mt("</tr></table>"),J8=mt('<table hidden><colgroup id="'),Q8=mt('">'),eV=mt("</colgroup></table>");function tV(e,t,n,o){switch(n.insertionMode){case 0:case 1:return Ft(e,R8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,L8);case 2:return Ft(e,O8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,$8);case 3:return Ft(e,V8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,N8);case 4:return Ft(e,j8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,G8);case 5:return Ft(e,q8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,Z8);case 6:return Ft(e,X8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,K8);case 7:return Ft(e,J8),Ft(e,t.segmentPrefix),Ft(e,sn(o.toString(16))),Yn(e,Q8);default:throw Error(en(397))}}function nV(e,t){switch(t.insertionMode){case 0:case 1:return Yn(e,F8);case 2:return Yn(e,B8);case 3:return Yn(e,U8);case 4:return Yn(e,W8);case 5:return Yn(e,H8);case 6:return Yn(e,Y8);case 7:return Yn(e,eV);default:throw Error(en(397))}}var rV=mt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),iV=mt('$RS("'),oV=mt('","'),aV=mt('")<\/script>'),sV=mt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),lV=mt('$RC("'),uV=mt('","'),cV=mt('")<\/script>'),hV=mt('function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("'),dV=mt('$RX("'),fV=mt('")<\/script>'),wf=Object.assign,pV=Symbol.for("react.element"),h3=Symbol.for("react.portal"),d3=Symbol.for("react.fragment"),f3=Symbol.for("react.strict_mode"),p3=Symbol.for("react.profiler"),m3=Symbol.for("react.provider"),g3=Symbol.for("react.context"),y3=Symbol.for("react.forward_ref"),_3=Symbol.for("react.suspense"),v3=Symbol.for("react.suspense_list"),x3=Symbol.for("react.memo"),Yb=Symbol.for("react.lazy"),mV=Symbol.for("react.scope"),gV=Symbol.for("react.debug_trace_mode"),yV=Symbol.for("react.legacy_hidden"),_V=Symbol.for("react.default_value"),iT=Symbol.iterator;function vx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case d3:return"Fragment";case h3:return"Portal";case p3:return"Profiler";case f3:return"StrictMode";case _3:return"Suspense";case v3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case g3:return(e.displayName||"Context")+".Consumer";case m3:return(e._context.displayName||"Context")+".Provider";case y3:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x3:return t=e.displayName||null,t!==null?t:vx(e.type)||"Memo";case Yb:t=e._payload,e=e._init;try{return vx(e(t))}catch{}}return null}var b3={};function oT(e,t){if(e=e.contextTypes,!e)return b3;var n={},o;for(o in e)n[o]=t[o];return n}var bu=null;function Hy(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(en(401))}else{if(n===null)throw Error(en(401));Hy(e,n)}t.context._currentValue=t.value}}function w3(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&w3(e)}function S3(e){var t=e.parent;t!==null&&S3(t),e.context._currentValue=e.value}function E3(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(en(402));e.depth===t.depth?Hy(e,t):E3(e,t)}function k3(e,t){var n=t.parent;if(n===null)throw Error(en(402));e.depth===n.depth?Hy(e,n):k3(e,n),t.context._currentValue=t.value}function hy(e){var t=bu;t!==e&&(t===null?S3(e):e===null?w3(t):t.depth===e.depth?Hy(t,e):t.depth>e.depth?E3(t,e):k3(t,e),bu=e)}var aT={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function sT(e,t,n,o){var l=e.state!==void 0?e.state:null;e.updater=aT,e.props=n,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(n,l),l=g==null?l:wf({},l,g),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&aT.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,g=h.replace,h.queue=null,h.replace=!1,g&&t.length===1)e.state=t[0];else{for(h=g?t[0]:e.state,l=!0,g=g?1:0;g<t.length;g++){var u=t[g];u=typeof u=="function"?u.call(e,h,n,o):u,u!=null&&(l?(l=!1,h=wf({},h,u)):wf(h,u))}e.state=h}else h.queue=null}var vV={id:1,overflow:""};function xx(e,t,n){var o=e.id;e=e.overflow;var l=32-gg(o)-1;o&=~(1<<l),n+=1;var h=32-gg(t)+l;if(30<h){var g=l-l%5;return h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,{id:1<<32-gg(t)+l|n<<l|o,overflow:h+e}}return{id:1<<h|n<<l|o,overflow:e}}var gg=Math.clz32?Math.clz32:wV,xV=Math.log,bV=Math.LN2;function wV(e){return e>>>=0,e===0?32:31-(xV(e)/bV|0)|0}function SV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var EV=typeof Object.is=="function"?Object.is:SV,As=null,Jb=null,yg=null,Bn=null,af=!1,dy=!1,qf=0,ul=null,Xy=0;function gu(){if(As===null)throw Error(en(321));return As}function lT(){if(0<Xy)throw Error(en(312));return{memoizedState:null,queue:null,next:null}}function Qb(){return Bn===null?yg===null?(af=!1,yg=Bn=lT()):(af=!0,Bn=yg):Bn.next===null?(af=!1,Bn=Bn.next=lT()):(af=!0,Bn=Bn.next),Bn}function ew(){Jb=As=null,dy=!1,yg=null,Xy=0,Bn=ul=null}function T3(e,t){return typeof t=="function"?t(e):t}function uT(e,t,n){if(As=gu(),Bn=Qb(),af){var o=Bn.queue;if(t=o.dispatch,ul!==null&&(n=ul.get(o),n!==void 0)){ul.delete(o),o=Bn.memoizedState;do o=e(o,n.action),n=n.next;while(n!==null);return Bn.memoizedState=o,[o,t]}return[Bn.memoizedState,t]}return e=e===T3?typeof t=="function"?t():t:n!==void 0?n(t):t,Bn.memoizedState=e,e=Bn.queue={last:null,dispatch:null},e=e.dispatch=kV.bind(null,As,e),[Bn.memoizedState,e]}function cT(e,t){if(As=gu(),Bn=Qb(),t=t===void 0?null:t,Bn!==null){var n=Bn.memoizedState;if(n!==null&&t!==null){var o=n[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!EV(t[l],o[l])){o=!1;break e}o=!0}if(o)return n[0]}}return e=e(),Bn.memoizedState=[e,t],e}function kV(e,t,n){if(25<=Xy)throw Error(en(301));if(e===As)if(dy=!0,e={action:n,next:null},ul===null&&(ul=new Map),n=ul.get(t),n===void 0)ul.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function TV(){throw Error(en(394))}function Nm(){}var hT={readContext:function(e){return e._currentValue},useContext:function(e){return gu(),e._currentValue},useMemo:cT,useReducer:uT,useRef:function(e){As=gu(),Bn=Qb();var t=Bn.memoizedState;return t===null?(e={current:e},Bn.memoizedState=e):t},useState:function(e){return uT(T3,e)},useInsertionEffect:Nm,useLayoutEffect:function(){},useCallback:function(e,t){return cT(function(){return e},t)},useImperativeHandle:Nm,useEffect:Nm,useDebugValue:Nm,useDeferredValue:function(e){return gu(),e},useTransition:function(){return gu(),[!1,TV]},useId:function(){var e=Jb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-gg(e)-1)).toString(32)+t;var n=_g;if(n===null)throw Error(en(404));return t=qf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return gu(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(en(407));return n()}},_g=null,Ev=a3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function CV(e){console.error(e)}function sf(){}function PV(e,t,n,o,l,h,g,u,S){var b=[],C=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:C,pingedTasks:b,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?CV:l,onAllReady:h===void 0?sf:h,onShellReady:g===void 0?sf:g,onShellError:u===void 0?sf:u,onFatalError:S===void 0?sf:S},n=fy(t,0,null,n),n.parentFlushed=!0,e=tw(t,e,null,n,C,b3,null,vV),b.push(e),t}function tw(e,t,n,o,l,h,g,u){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var S={node:t,ping:function(){var b=e.pingedTasks;b.push(S),b.length===1&&I3(e)},blockedBoundary:n,blockedSegment:o,abortSet:l,legacyContext:h,context:g,treeContext:u};return l.add(S),S}function fy(e,t,n,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:n}}function Zf(e,t){e=e.onError,e(t)}function py(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,l3(e.destination,t)):(e.status=1,e.fatalError=t)}function dT(e,t,n,o,l){for(As={},Jb=t,qf=0,e=n(o,l);dy;)dy=!1,qf=0,Xy+=1,Bn=null,e=n(o,l);return ew(),e}function fT(e,t,n,o){var l=n.render(),h=o.childContextTypes;if(h!=null){var g=t.legacyContext;if(typeof n.getChildContext!="function")o=g;else{n=n.getChildContext();for(var u in n)if(!(u in h))throw Error(en(108,vx(o)||"Unknown",u));o=wf({},g,n)}t.legacyContext=o,To(e,t,l),t.legacyContext=g}else To(e,t,l)}function pT(e,t){if(e&&e.defaultProps){t=wf({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bx(e,t,n,o,l){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){l=oT(n,t.legacyContext);var h=n.contextType;h=new n(o,typeof h=="object"&&h!==null?h._currentValue:l),sT(h,n,o,l),fT(e,t,h,n)}else{h=oT(n,t.legacyContext),l=dT(e,t,n,o,h);var g=qf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)sT(l,n,o,h),fT(e,t,l,n);else if(g){o=t.treeContext,t.treeContext=xx(o,1,0);try{To(e,t,l)}finally{t.treeContext=o}}else To(e,t,l)}else if(typeof n=="string")switch(l=t.blockedSegment,h=E8(l.chunks,n,o,e.responseState,l.formatContext),g=l.formatContext,l.formatContext=_8(g,n,o),wx(e,t,h),l.formatContext=g,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push(k8,sn(n),T8)}else{switch(n){case yV:case gV:case f3:case p3:case d3:To(e,t,o.children);return;case v3:To(e,t,o.children);return;case mV:throw Error(en(343));case _3:e:{n=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,g=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g},S=fy(e,l.chunks.length,u,l.formatContext);l.children.push(S);var b=fy(e,0,null,l.formatContext);b.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=b;try{if(wx(e,t,o),b.status=1,my(u,b),u.pendingTasks===0)break e}catch(C){b.status=4,Zf(e,C),u.forceClientRender=!0}finally{t.blockedBoundary=n,t.blockedSegment=l}t=tw(e,h,n,S,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case y3:if(o=dT(e,t,n.render,o,l),qf!==0){n=t.treeContext,t.treeContext=xx(n,1,0);try{To(e,t,o)}finally{t.treeContext=n}}else To(e,t,o);return;case x3:n=n.type,o=pT(n,o),bx(e,t,n,o,l);return;case m3:if(l=o.children,n=n._context,o=o.value,h=n._currentValue,n._currentValue=o,g=bu,bu=o={parent:g,depth:g===null?0:g.depth+1,context:n,parentValue:h,value:o},t.context=o,To(e,t,l),e=bu,e===null)throw Error(en(403));o=e.parentValue,e.context._currentValue=o===_V?e.context._defaultValue:o,e=bu=e.parent,t.context=e;return;case g3:o=o.children,o=o(n._currentValue),To(e,t,o);return;case Yb:l=n._init,n=l(n._payload),o=pT(n,o),bx(e,t,n,o,void 0);return}throw Error(en(130,n==null?n:typeof n,""))}}function To(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case pV:bx(e,t,n.type,n.props,n.ref);return;case h3:throw Error(en(257));case Yb:var o=n._init;n=o(n._payload),To(e,t,n);return}if(_x(n)){mT(e,t,n);return}if(n===null||typeof n!="object"?o=null:(o=iT&&n[iT]||n["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(n))){if(n=o.next(),!n.done){var l=[];do l.push(n.value),n=o.next();while(!n.done);mT(e,t,l)}return}throw t=Object.prototype.toString.call(n),Error(en(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?n!==""&&t.blockedSegment.chunks.push(sn(Qr(n)),Yk):typeof n=="number"&&(e=""+n,e!==""&&t.blockedSegment.chunks.push(sn(Qr(e)),Yk))}function mT(e,t,n){for(var o=n.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=xx(h,o,l);try{wx(e,t,n[l])}finally{t.treeContext=h}}}function wx(e,t,n){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return To(e,t,n)}catch(S){if(ew(),typeof S=="object"&&S!==null&&typeof S.then=="function"){n=S;var g=t.blockedSegment,u=fy(e,g.chunks.length,null,g.formatContext);g.children.push(u),e=tw(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,hy(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,hy(h),S}}function IV(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,P3(this,t,e)}function C3(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.close())):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(C3,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function my(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&my(e,n)}else e.completedSegments.push(t)}function P3(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(en(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=sf,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&my(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(IV,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(my(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function I3(e){if(e.status!==2){var t=bu,n=Ev.current;Ev.current=hT;var o=_g;_g=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var g=l[h],u=e,S=g.blockedSegment;if(S.status===0){hy(g.context);try{To(u,g,g.node),g.abortSet.delete(g),S.status=1,P3(u,g.blockedBoundary,S)}catch(j){if(ew(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var b=g.ping;j.then(b,b)}else{g.abortSet.delete(g),S.status=4;var C=g.blockedBoundary,A=j;if(Zf(u,A),C===null?py(u,A):(C.pendingTasks--,C.forceClientRender||(C.forceClientRender=!0,C.parentFlushed&&u.clientRenderedBoundaries.push(C))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&nw(e,e.destination)}catch(j){Zf(e,j),py(e,j)}finally{_g=o,Ev.current=n,n===hT&&hy(t)}}}function Um(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var o=n.id=e.nextSegmentId++;return e=e.responseState,Ft(t,C8),Ft(t,e.placeholderPrefix),e=sn(o.toString(16)),Ft(t,e),Yn(t,P8);case 1:n.status=2;var l=!0;o=n.chunks;var h=0;n=n.children;for(var g=0;g<n.length;g++){for(l=n[g];h<l.index;h++)Ft(t,o[h]);l=Ky(e,t,l)}for(;h<o.length-1;h++)Ft(t,o[h]);return h<o.length&&(l=Yn(t,o[h])),l;default:throw Error(en(390))}}function Ky(e,t,n){var o=n.boundary;if(o===null)return Um(e,t,n);if(o.parentFlushed=!0,o.forceClientRender)Yn(t,z8),Um(e,t,n);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;l=mt(l.boundaryPrefix+h.toString(16)),o=o.id=l,rT(t,e.responseState,o),Um(e,t,n)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),rT(t,e.responseState,o.id),Um(e,t,n);else{if(Yn(t,I8),n=o.completedSegments,n.length!==1)throw Error(en(391));Ky(e,t,n[0])}return Yn(t,D8)}function gT(e,t,n){return tV(t,e.responseState,n.formatContext,n.id),Ky(e,t,n),nV(t,n.formatContext)}function yT(e,t,n){for(var o=n.completedSegments,l=0;l<o.length;l++)M3(e,t,n,o[l]);if(o.length=0,e=e.responseState,o=n.id,n=n.rootSegmentID,Ft(t,e.startInlineScript),e.sentCompleteBoundaryFunction?Ft(t,lV):(e.sentCompleteBoundaryFunction=!0,Ft(t,sV)),o===null)throw Error(en(395));return n=sn(n.toString(16)),Ft(t,o),Ft(t,uV),Ft(t,e.segmentPrefix),Ft(t,n),Yn(t,cV)}function M3(e,t,n,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=n.rootSegmentID)===-1)throw Error(en(392));return gT(e,t,o)}return gT(e,t,o),e=e.responseState,Ft(t,e.startInlineScript),e.sentCompleteSegmentFunction?Ft(t,iV):(e.sentCompleteSegmentFunction=!0,Ft(t,rV)),Ft(t,e.segmentPrefix),l=sn(l.toString(16)),Ft(t,l),Ft(t,oV),Ft(t,e.placeholderPrefix),Ft(t,l),Yn(t,aV)}function nw(e,t){So=new Uint8Array(512),Eo=0;try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Ky(e,t,n),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(n=0;n<o.length-1;n++)Ft(t,o[n]);n<o.length&&Yn(t,o[n])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var g=e.responseState,u=l[h].id;if(Ft(o,g.startInlineScript),g.sentClientRenderFunction?Ft(o,dV):(g.sentClientRenderFunction=!0,Ft(o,hV)),u===null)throw Error(en(395));Ft(o,u),Yn(o,fV)}l.splice(0,h);var S=e.completedBoundaries;for(h=0;h<S.length;h++)yT(e,t,S[h]);S.splice(0,h),Zk(t),So=new Uint8Array(512),Eo=0;var b=e.partialBoundaries;for(h=0;h<b.length;h++){var C=b[h];e:{l=e,g=t;var A=C.completedSegments;for(u=0;u<A.length;u++)if(!M3(l,g,C,A[u])){u++,A.splice(0,u);var z=!1;break e}A.splice(0,u),z=!0}if(!z){e.destination=null,h++,b.splice(0,h);return}}b.splice(0,h);var j=e.completedBoundaries;for(h=0;h<j.length;h++)yT(e,t,j[h]);j.splice(0,h)}finally{Zk(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function _T(e){try{var t=e.abortableTasks;t.forEach(C3,e),t.clear(),e.destination!==null&&nw(e,e.destination)}catch(n){Zf(e,n),py(e,n)}}Hb.renderToReadableStream=function(e,t){return new Promise(function(n,o){var l,h,g=new Promise(function(C,A){h=C,l=A}),u=PV(e,g8(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),y8(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,h,function(){var C=new ReadableStream({type:"bytes",pull:function(A){if(u.status===1)u.status=2,l3(A,u.fatalError);else if(u.status!==2&&u.destination===null){u.destination=A;try{nw(u,A)}catch(z){Zf(u,z),py(u,z)}}},cancel:function(){_T(u)}});C.allReady=g,n(C)},function(C){g.catch(function(){}),o(C)},l);if(t&&t.signal){var S=t.signal,b=function(){_T(u),S.removeEventListener("abort",b)};S.addEventListener("abort",b)}I3(u)})};Hb.version="18.1.0";var Fh,A3;Fh=Lh,A3=Hb;Fh.version;var MV=Fh.renderToString;Fh.renderToStaticMarkup;Fh.renderToNodeStream;Fh.renderToStaticNodeStream;A3.renderToReadableStream;const AV=0,zV=0,DV=0,z3="https://api.protomaps.com/tiles/v3/{z}/{x}/{y}.mvt?key=1003762824b9687f",D3='Basemap <a href="https://github.com/protomaps/basemaps">Protomaps</a> \xA9 <a href="https://openstreetmap.org">OpenStreetMap</a>';nf.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",()=>{},!0);const RV=un("div",{height:"calc(100vh - $4 - $4)"}),LV=un("div",{color:"black"}),FV=un("div",{marginBottom:"0.5em","&:not(:last-of-type)":{borderBottom:"1px solid black"}}),OV=un("div",{position:"absolute",top:"10px",right:"10px",width:40,height:40,backgroundColor:"#444",cursor:"pointer",zIndex:9999}),$V=un("div",{position:"absolute",backgroundColor:"#444",top:"50px",right:"10px",padding:"$1",zIndex:9999}),gy=un("label",{display:"flex",gap:6,cursor:"pointer"}),BV=un("ul",{listStyleType:"none"}),VV=e=>Be(LV,{children:e.features.map((t,n)=>Pt(FV,{children:[Pt("span",{children:[Be("strong",{children:t.layer["source-layer"]}),Pt("span",{style:{fontSize:"0.8em"},children:[" (",t.geometry.type,")"]})]}),Be("table",{children:Object.entries(t.properties).map(([o,l],h)=>Pt("tr",{children:[Be("td",{children:o}),Be("td",{children:typeof l=="boolean"?JSON.stringify(l):l})]},h))})]},n))}),NV=e=>{const{layers:t,onChange:n}=e,o=W.exports.useRef(null),l=t.filter(S=>S.visible).length,h=l>0&&l!==t.length;if(W.exports.useEffect(()=>{o.current&&(o.current.indeterminate=h)},[h]),!e.layers.length)return Pt(jf,{children:[Be("h4",{children:"Layers"}),Be("span",{children:"No vector layers found"})]});const g=()=>{const S=l!==t.length,b=t.map(C=>({...C,visible:S}));n(b)},u=S=>{const b=S.target.getAttribute("data-layer-id"),C=t.map(A=>A.id===b?{...A,visible:!A.visible}:A);n(C)};return Pt(jf,{children:[Be("h4",{children:"Layers"}),Pt(gy,{children:[Be("input",{ref:o,type:"checkbox",checked:l===t.length,onChange:g}),Be("em",{children:"All layers"})]}),Be(BV,{children:e.layers.map(({id:S,visible:b},C)=>Be("li",{children:Pt(gy,{style:{paddingLeft:8},children:[Be("input",{type:"checkbox",checked:b,onChange:u,"data-layer-id":S}),Be("span",{style:{width:".8rem",height:".8rem",backgroundColor:xf[C%12]}}),S]})},S))})]})},UV=async e=>{const t=await e.getHeader(),n=await e.getMetadata();let o=[];return n.type!=="baselayer"&&(o=LM("basemap","black")),o.push({id:"raster",type:"raster",source:"source"}),{version:8,sources:{source:{type:"raster",tiles:[`pmtiles://${e.source.getKey()}/{z}/{x}/{y}`],minzoom:t.minZoom,maxzoom:t.maxZoom},basemap:{type:"vector",tiles:[z3],maxzoom:15,attribution:D3}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o}},jV=async e=>{const t=await e.getHeader(),n=await e.getMetadata();let o=[],l=.35;n.type!=="baselayer"&&(o=LM("basemap","black"),l=.9),n.tilestats;const h=n.vector_layers;if(h)for(const[u,S]of h.entries())o.push({id:`${S.id}_fill`,type:"fill",source:"source","source-layer":S.id,paint:{"fill-color":xf[u%12],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],l,l-.15],"fill-outline-color":["case",["boolean",["feature-state","hover"],!1],"hsl(0,100%,90%)","rgba(0,0,0,0.2)"]},filter:["==",["geometry-type"],"Polygon"]}),o.push({id:`${S.id}_stroke`,type:"line",source:"source","source-layer":S.id,paint:{"line-color":xf[u%12],"line-width":["case",["boolean",["feature-state","hover"],!1],2,.5]},filter:["==",["geometry-type"],"LineString"]}),o.push({id:`${S.id}_point`,type:"circle",source:"source","source-layer":S.id,paint:{"circle-color":xf[u%12],"circle-radius":["case",["boolean",["feature-state","hover"],!1],6,5]},filter:["==",["geometry-type"],"Point"]});const g=[t.minLon,t.minLat,t.maxLon,t.maxLat];return{style:{version:8,sources:{source:{type:"vector",tiles:[`pmtiles://${e.source.getKey()}/{z}/{x}/{y}`],minzoom:t.minZoom,maxzoom:t.maxZoom,bounds:g},basemap:{type:"vector",tiles:[z3],maxzoom:15,bounds:g,attribution:D3}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o},layersVisibility:h.map(u=>({id:u.id,visible:!0}))}};function GV(e){const t=W.exports.useRef(null),[n,o]=W.exports.useState(!0),[l,h]=W.exports.useState(!1),[g,u]=W.exports.useState(!1),[S,b]=W.exports.useState([]),C=W.exports.useRef(null),A=W.exports.useRef(new Set),z=W.exports.useRef(l);W.exports.useEffect(()=>{z.current=l},[l]);const j=()=>{o(!n)},Z=()=>{h(!l),C.current.getCanvas().style.cursor=l?"":"crosshair"},H=()=>{u(!g),C.current.showTileBoundaries=!g},de=B=>{b(B);const N=C.current;for(const{id:K,visible:ce}of B){const ue=ce?"visible":"none";N.setLayoutProperty(`${K}_fill`,"visibility",ue),N.setLayoutProperty(`${K}_stroke`,"visibility",ue),N.setLayoutProperty(`${K}_point`,"visibility",ue)}};return W.exports.useEffect(()=>{const B=new cF;nf.addProtocol("pmtiles",B.tile),B.add(e.file);const N=new nf.Map({container:t.current,hash:"map",zoom:AV,center:[zV,DV],style:{version:8,sources:{},layers:[]}});N.addControl(new nf.NavigationControl({}),"bottom-left"),N.on("load",N.resize);const K=new nf.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return C.current=N,N.on("mousemove",ce=>{const ue=A.current;for(const nt of ue)N.setFeatureState(nt,{hover:!1}),ue.delete(nt);if(!z.current){K.remove();return}const{x:ye,y:me}=ce.point,Te=2;let Ne=N.queryRenderedFeatures([[ye-Te,me-Te],[ye+Te,me+Te]]);Ne=Ne.filter(nt=>nt.source==="source");for(const nt of Ne)N.setFeatureState(nt,{hover:!0}),ue.add(nt);const we=MV(Be(VV,{features:Ne}));Ne.length?(K.setHTML(we),K.setLngLat(ce.lngLat),K.addTo(N)):K.remove()}),()=>{N.remove()}},[]),W.exports.useEffect(()=>{(async()=>{if(C.current){const N=C.current,K=await e.file.getHeader();if(e.mapHashPassed||N.fitBounds([[K.minLon,K.minLat],[K.maxLon,K.maxLat]],{animate:!1}),K.tileType===Eu.Png||K.tileType===Eu.Webp||K.tileType===Eu.Jpeg){const ce=await UV(e.file);N.setStyle(ce)}else{const{style:ce,layersVisibility:ue}=await jV(e.file);N.setStyle(ce),b(ue)}}})()},[]),Pt(RV,{ref:t,children:[Be("div",{ref:t}),Be(OV,{onClick:j,children:"menu"}),n?Pt($V,{children:[Be("h4",{children:"Filter"}),Be("h4",{children:"Popup"}),Pt(gy,{children:[Be("input",{type:"checkbox",checked:l,onChange:Z}),"show attributes"]}),Be("h4",{children:"Tiles"}),Pt(gy,{children:[Be("input",{type:"checkbox",checked:g,onChange:H}),"show tile boundaries"]}),Be(NV,{layers:S,onChange:de})]}):null]})}function WV(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function qV(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ZV=function(){function e(n){var o=this;this._insertTag=function(l){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,h),o.tags.push(l)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qV(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var h=WV(l);try{h.insertRule(o,h.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),bi="-ms-",yy="-moz-",vn="-webkit-",R3="comm",rw="rule",iw="decl",HV="@import",L3="@keyframes",XV=Math.abs,Yy=String.fromCharCode,KV=Object.assign;function YV(e,t){return Jr(e,0)^45?(((t<<2^Jr(e,0))<<2^Jr(e,1))<<2^Jr(e,2))<<2^Jr(e,3):0}function F3(e){return e.trim()}function JV(e,t){return(e=t.exec(e))?e[0]:e}function wn(e,t,n){return e.replace(t,n)}function Sx(e,t){return e.indexOf(t)}function Jr(e,t){return e.charCodeAt(t)|0}function Hf(e,t,n){return e.slice(t,n)}function $a(e){return e.length}function ow(e){return e.length}function jm(e,t){return t.push(e),e}function QV(e,t){return e.map(t).join("")}var Jy=1,Th=1,O3=0,co=0,Tr=0,Oh="";function Qy(e,t,n,o,l,h,g){return{value:e,root:t,parent:n,type:o,props:l,children:h,line:Jy,column:Th,length:g,return:""}}function Hd(e,t){return KV(Qy("",null,null,"",null,null,0),e,{length:-e.length},t)}function e9(){return Tr}function t9(){return Tr=co>0?Jr(Oh,--co):0,Th--,Tr===10&&(Th=1,Jy--),Tr}function Ao(){return Tr=co<O3?Jr(Oh,co++):0,Th++,Tr===10&&(Th=1,Jy++),Tr}function qa(){return Jr(Oh,co)}function vg(){return co}function cp(e,t){return Hf(Oh,e,t)}function Xf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $3(e){return Jy=Th=1,O3=$a(Oh=e),co=0,[]}function B3(e){return Oh="",e}function xg(e){return F3(cp(co-1,Ex(e===91?e+2:e===40?e+1:e)))}function n9(e){for(;(Tr=qa())&&Tr<33;)Ao();return Xf(e)>2||Xf(Tr)>3?"":" "}function r9(e,t){for(;--t&&Ao()&&!(Tr<48||Tr>102||Tr>57&&Tr<65||Tr>70&&Tr<97););return cp(e,vg()+(t<6&&qa()==32&&Ao()==32))}function Ex(e){for(;Ao();)switch(Tr){case e:return co;case 34:case 39:e!==34&&e!==39&&Ex(Tr);break;case 40:e===41&&Ex(e);break;case 92:Ao();break}return co}function i9(e,t){for(;Ao()&&e+Tr!==47+10;)if(e+Tr===42+42&&qa()===47)break;return"/*"+cp(t,co-1)+"*"+Yy(e===47?e:Ao())}function o9(e){for(;!Xf(qa());)Ao();return cp(e,co)}function a9(e){return B3(bg("",null,null,null,[""],e=$3(e),0,[0],e))}function bg(e,t,n,o,l,h,g,u,S){for(var b=0,C=0,A=g,z=0,j=0,Z=0,H=1,de=1,B=1,N=0,K="",ce=l,ue=h,ye=o,me=K;de;)switch(Z=N,N=Ao()){case 40:if(Z!=108&&Jr(me,A-1)==58){Sx(me+=wn(xg(N),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:me+=xg(N);break;case 9:case 10:case 13:case 32:me+=n9(Z);break;case 92:me+=r9(vg()-1,7);continue;case 47:switch(qa()){case 42:case 47:jm(s9(i9(Ao(),vg()),t,n),S);break;default:me+="/"}break;case 123*H:u[b++]=$a(me)*B;case 125*H:case 59:case 0:switch(N){case 0:case 125:de=0;case 59+C:j>0&&$a(me)-A&&jm(j>32?xT(me+";",o,n,A-1):xT(wn(me," ","")+";",o,n,A-2),S);break;case 59:me+=";";default:if(jm(ye=vT(me,t,n,b,C,l,u,K,ce=[],ue=[],A),h),N===123)if(C===0)bg(me,t,ye,ye,ce,h,A,u,ue);else switch(z===99&&Jr(me,3)===110?100:z){case 100:case 109:case 115:bg(e,ye,ye,o&&jm(vT(e,ye,ye,0,0,l,u,K,l,ce=[],A),ue),l,ue,A,u,o?ce:ue);break;default:bg(me,ye,ye,ye,[""],ue,0,u,ue)}}b=C=j=0,H=B=1,K=me="",A=g;break;case 58:A=1+$a(me),j=Z;default:if(H<1){if(N==123)--H;else if(N==125&&H++==0&&t9()==125)continue}switch(me+=Yy(N),N*H){case 38:B=C>0?1:(me+="\f",-1);break;case 44:u[b++]=($a(me)-1)*B,B=1;break;case 64:qa()===45&&(me+=xg(Ao())),z=qa(),C=A=$a(K=me+=o9(vg())),N++;break;case 45:Z===45&&$a(me)==2&&(H=0)}}return h}function vT(e,t,n,o,l,h,g,u,S,b,C){for(var A=l-1,z=l===0?h:[""],j=ow(z),Z=0,H=0,de=0;Z<o;++Z)for(var B=0,N=Hf(e,A+1,A=XV(H=g[Z])),K=e;B<j;++B)(K=F3(H>0?z[B]+" "+N:wn(N,/&\f/g,z[B])))&&(S[de++]=K);return Qy(e,t,n,l===0?rw:u,S,b,C)}function s9(e,t,n){return Qy(e,t,n,R3,Yy(e9()),Hf(e,2,-2),0)}function xT(e,t,n,o){return Qy(e,t,n,iw,Hf(e,0,o),Hf(e,o+1,-1),o)}function ph(e,t){for(var n="",o=ow(e),l=0;l<o;l++)n+=t(e[l],l,e,t)||"";return n}function l9(e,t,n,o){switch(e.type){case HV:case iw:return e.return=e.return||e.value;case R3:return"";case L3:return e.return=e.value+"{"+ph(e.children,o)+"}";case rw:e.value=e.props.join(",")}return $a(n=ph(e.children,o))?e.return=e.value+"{"+n+"}":""}function u9(e){var t=ow(e);return function(n,o,l,h){for(var g="",u=0;u<t;u++)g+=e[u](n,o,l,h)||"";return g}}function c9(e){return function(t){t.root||(t=t.return)&&e(t)}}function V3(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var h9=function(t,n,o){for(var l=0,h=0;l=h,h=qa(),l===38&&h===12&&(n[o]=1),!Xf(h);)Ao();return cp(t,co)},d9=function(t,n){var o=-1,l=44;do switch(Xf(l)){case 0:l===38&&qa()===12&&(n[o]=1),t[o]+=h9(co-1,n,o);break;case 2:t[o]+=xg(l);break;case 4:if(l===44){t[++o]=qa()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=Yy(l)}while(l=Ao());return t},f9=function(t,n){return B3(d9($3(t),n))},bT=new WeakMap,p9=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!bT.get(o))&&!l){bT.set(t,!0);for(var h=[],g=f9(n,h),u=o.props,S=0,b=0;S<g.length;S++)for(var C=0;C<u.length;C++,b++)t.props[b]=h[S]?g[S].replace(/&\f/g,u[C]):u[C]+" "+g[S]}}},m9=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function N3(e,t){switch(YV(e,t)){case 5103:return vn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vn+e+yy+e+bi+e+e;case 6828:case 4268:return vn+e+bi+e+e;case 6165:return vn+e+bi+"flex-"+e+e;case 5187:return vn+e+wn(e,/(\w+).+(:[^]+)/,vn+"box-$1$2"+bi+"flex-$1$2")+e;case 5443:return vn+e+bi+"flex-item-"+wn(e,/flex-|-self/,"")+e;case 4675:return vn+e+bi+"flex-line-pack"+wn(e,/align-content|flex-|-self/,"")+e;case 5548:return vn+e+bi+wn(e,"shrink","negative")+e;case 5292:return vn+e+bi+wn(e,"basis","preferred-size")+e;case 6060:return vn+"box-"+wn(e,"-grow","")+vn+e+bi+wn(e,"grow","positive")+e;case 4554:return vn+wn(e,/([^-])(transform)/g,"$1"+vn+"$2")+e;case 6187:return wn(wn(wn(e,/(zoom-|grab)/,vn+"$1"),/(image-set)/,vn+"$1"),e,"")+e;case 5495:case 3959:return wn(e,/(image-set\([^]*)/,vn+"$1$`$1");case 4968:return wn(wn(e,/(.+:)(flex-)?(.*)/,vn+"box-pack:$3"+bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vn+e+e;case 4095:case 3583:case 4068:case 2532:return wn(e,/(.+)-inline(.+)/,vn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($a(e)-1-t>6)switch(Jr(e,t+1)){case 109:if(Jr(e,t+4)!==45)break;case 102:return wn(e,/(.+:)(.+)-([^]+)/,"$1"+vn+"$2-$3$1"+yy+(Jr(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Sx(e,"stretch")?N3(wn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Jr(e,t+1)!==115)break;case 6444:switch(Jr(e,$a(e)-3-(~Sx(e,"!important")&&10))){case 107:return wn(e,":",":"+vn)+e;case 101:return wn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vn+(Jr(e,14)===45?"inline-":"")+"box$3$1"+vn+"$2$3$1"+bi+"$2box$3")+e}break;case 5936:switch(Jr(e,t+11)){case 114:return vn+e+bi+wn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vn+e+bi+wn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vn+e+bi+wn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vn+e+bi+e+e}return e}var g9=function(t,n,o,l){if(t.length>-1&&!t.return)switch(t.type){case iw:t.return=N3(t.value,t.length);break;case L3:return ph([Hd(t,{value:wn(t.value,"@","@"+vn)})],l);case rw:if(t.length)return QV(t.props,function(h){switch(JV(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ph([Hd(t,{props:[wn(h,/:(read-\w+)/,":"+yy+"$1")]})],l);case"::placeholder":return ph([Hd(t,{props:[wn(h,/:(plac\w+)/,":"+vn+"input-$1")]}),Hd(t,{props:[wn(h,/:(plac\w+)/,":"+yy+"$1")]}),Hd(t,{props:[wn(h,/:(plac\w+)/,bi+"input-$1")]})],l)}return""})}},y9=[g9],_9=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(H){var de=H.getAttribute("data-emotion");de.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var l=t.stylisPlugins||y9,h={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(H){for(var de=H.getAttribute("data-emotion").split(" "),B=1;B<de.length;B++)h[de[B]]=!0;u.push(H)});var S,b=[p9,m9];{var C,A=[l9,c9(function(H){C.insert(H)})],z=u9(b.concat(l,A)),j=function(de){return ph(a9(de),z)};S=function(de,B,N,K){C=N,j(de?de+"{"+B.styles+"}":B.styles),K&&(Z.inserted[B.name]=!0)}}var Z={key:n,sheet:new ZV({key:n,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:S};return Z.sheet.hydrate(u),Z},U3={exports:{}},Tn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=typeof Symbol=="function"&&Symbol.for,aw=Zr?Symbol.for("react.element"):60103,sw=Zr?Symbol.for("react.portal"):60106,e0=Zr?Symbol.for("react.fragment"):60107,t0=Zr?Symbol.for("react.strict_mode"):60108,n0=Zr?Symbol.for("react.profiler"):60114,r0=Zr?Symbol.for("react.provider"):60109,i0=Zr?Symbol.for("react.context"):60110,lw=Zr?Symbol.for("react.async_mode"):60111,o0=Zr?Symbol.for("react.concurrent_mode"):60111,a0=Zr?Symbol.for("react.forward_ref"):60112,s0=Zr?Symbol.for("react.suspense"):60113,v9=Zr?Symbol.for("react.suspense_list"):60120,l0=Zr?Symbol.for("react.memo"):60115,u0=Zr?Symbol.for("react.lazy"):60116,x9=Zr?Symbol.for("react.block"):60121,b9=Zr?Symbol.for("react.fundamental"):60117,w9=Zr?Symbol.for("react.responder"):60118,S9=Zr?Symbol.for("react.scope"):60119;function Oo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aw:switch(e=e.type,e){case lw:case o0:case e0:case n0:case t0:case s0:return e;default:switch(e=e&&e.$$typeof,e){case i0:case a0:case u0:case l0:case r0:return e;default:return t}}case sw:return t}}}function j3(e){return Oo(e)===o0}Tn.AsyncMode=lw;Tn.ConcurrentMode=o0;Tn.ContextConsumer=i0;Tn.ContextProvider=r0;Tn.Element=aw;Tn.ForwardRef=a0;Tn.Fragment=e0;Tn.Lazy=u0;Tn.Memo=l0;Tn.Portal=sw;Tn.Profiler=n0;Tn.StrictMode=t0;Tn.Suspense=s0;Tn.isAsyncMode=function(e){return j3(e)||Oo(e)===lw};Tn.isConcurrentMode=j3;Tn.isContextConsumer=function(e){return Oo(e)===i0};Tn.isContextProvider=function(e){return Oo(e)===r0};Tn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aw};Tn.isForwardRef=function(e){return Oo(e)===a0};Tn.isFragment=function(e){return Oo(e)===e0};Tn.isLazy=function(e){return Oo(e)===u0};Tn.isMemo=function(e){return Oo(e)===l0};Tn.isPortal=function(e){return Oo(e)===sw};Tn.isProfiler=function(e){return Oo(e)===n0};Tn.isStrictMode=function(e){return Oo(e)===t0};Tn.isSuspense=function(e){return Oo(e)===s0};Tn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===e0||e===o0||e===n0||e===t0||e===s0||e===v9||typeof e=="object"&&e!==null&&(e.$$typeof===u0||e.$$typeof===l0||e.$$typeof===r0||e.$$typeof===i0||e.$$typeof===a0||e.$$typeof===b9||e.$$typeof===w9||e.$$typeof===S9||e.$$typeof===x9)};Tn.typeOf=Oo;U3.exports=Tn;var G3=U3.exports,E9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},k9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},W3={};W3[G3.ForwardRef]=E9;W3[G3.Memo]=k9;var T9=!0;function q3(e,t,n){var o="";return n.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):o+=l+" "}),o}var uw=function(t,n,o){var l=t.key+"-"+n.name;(o===!1||T9===!1)&&t.registered[l]===void 0&&(t.registered[l]=n.styles)},cw=function(t,n,o){uw(t,n,o);var l=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var h=n;do t.insert(n===h?"."+l:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function C9(e){for(var t=0,n,o=0,l=e.length;l>=4;++o,l-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var P9={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},I9=/[A-Z]|^ms/g,M9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Z3=function(t){return t.charCodeAt(1)===45},wT=function(t){return t!=null&&typeof t!="boolean"},kv=V3(function(e){return Z3(e)?e:e.replace(I9,"-$&").toLowerCase()}),ST=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(M9,function(o,l,h){return Ba={name:l,styles:h,next:Ba},l})}return P9[t]!==1&&!Z3(t)&&typeof n=="number"&&n!==0?n+"px":n};function Kf(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ba={name:n.name,styles:n.styles,next:Ba},n.name;if(n.styles!==void 0){var o=n.next;if(o!==void 0)for(;o!==void 0;)Ba={name:o.name,styles:o.styles,next:Ba},o=o.next;var l=n.styles+";";return l}return A9(e,t,n)}case"function":{if(e!==void 0){var h=Ba,g=n(e);return Ba=h,Kf(e,t,g)}break}}if(t==null)return n;var u=t[n];return u!==void 0?u:n}function A9(e,t,n){var o="";if(Array.isArray(n))for(var l=0;l<n.length;l++)o+=Kf(e,t,n[l])+";";else for(var h in n){var g=n[h];if(typeof g!="object")t!=null&&t[g]!==void 0?o+=h+"{"+t[g]+"}":wT(g)&&(o+=kv(h)+":"+ST(h,g)+";");else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var u=0;u<g.length;u++)wT(g[u])&&(o+=kv(h)+":"+ST(h,g[u])+";");else{var S=Kf(e,t,g);switch(h){case"animation":case"animationName":{o+=kv(h)+":"+S+";";break}default:o+=h+"{"+S+"}"}}}return o}var ET=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ba,hw=function(t,n,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,h="";Ba=void 0;var g=t[0];g==null||g.raw===void 0?(l=!1,h+=Kf(o,n,g)):h+=g[0];for(var u=1;u<t.length;u++)h+=Kf(o,n,t[u]),l&&(h+=g[u]);ET.lastIndex=0;for(var S="",b;(b=ET.exec(h))!==null;)S+="-"+b[1];var C=C9(h)+S;return{name:C,styles:h,next:Ba}},z9=function(t){return t()},H3=qv["useInsertionEffect"]?qv["useInsertionEffect"]:!1,X3=H3||z9,kT=H3||W.exports.useLayoutEffect,c0={}.hasOwnProperty,K3=W.exports.createContext(typeof HTMLElement!="undefined"?_9({key:"css"}):null);K3.Provider;var dw=function(t){return W.exports.forwardRef(function(n,o){var l=W.exports.useContext(K3);return t(n,l,o)})},h0=W.exports.createContext({}),kx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Y3=function(t,n){var o={};for(var l in n)c0.call(n,l)&&(o[l]=n[l]);return o[kx]=t,o},D9=function(t){var n=t.cache,o=t.serialized,l=t.isStringTag;return uw(n,o,l),X3(function(){return cw(n,o,l)}),null},J3=dw(function(e,t,n){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var l=e[kx],h=[o],g="";typeof e.className=="string"?g=q3(t.registered,h,e.className):e.className!=null&&(g=e.className+" ");var u=hw(h,void 0,W.exports.useContext(h0));g+=t.key+"-"+u.name;var S={};for(var b in e)c0.call(e,b)&&b!=="css"&&b!==kx&&(S[b]=e[b]);return S.ref=n,S.className=g,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(D9,{cache:t,serialized:u,isStringTag:typeof l=="string"}),W.exports.createElement(l,S))}),Co=jf;function bt(e,t,n){return c0.call(t,"css")?Be(J3,Y3(e,t),n):Be(e,t,n)}function Vi(e,t,n){return c0.call(t,"css")?Pt(J3,Y3(e,t),n):Pt(e,t,n)}const R9={black:"#000",white:"#fff"};var Yf=R9;const L9={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var $c=L9;const F9={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var Bc=F9;const O9={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var Vc=O9;const $9={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var Nc=$9;const B9={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var Uc=B9;const V9={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Xd=V9;const N9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var U9=N9;function Si(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var j9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,G9=V3(function(e){return j9.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),W9=dw(function(e,t){var n=e.styles,o=hw([n],void 0,W.exports.useContext(h0)),l=W.exports.useRef();return kT(function(){var h=t.key+"-global",g=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,S=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),S!==null&&(u=!0,S.setAttribute("data-emotion",h),g.hydrate([S])),l.current=[g,u],function(){g.flush()}},[t]),kT(function(){var h=l.current,g=h[0],u=h[1];if(u){h[1]=!1;return}if(o.next!==void 0&&cw(t,o.next,!0),g.tags.length){var S=g.tags[g.tags.length-1].nextElementSibling;g.before=S,g.flush()}t.insert("",o,g,!1)},[t,o.name]),null}),q9=G9,Z9=function(t){return t!=="theme"},TT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?q9:Z9},CT=function(t,n,o){var l;if(n){var h=n.shouldForwardProp;l=t.__emotion_forwardProp&&h?function(g){return t.__emotion_forwardProp(g)&&h(g)}:h}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},H9=function(t){var n=t.cache,o=t.serialized,l=t.isStringTag;return uw(n,o,l),X3(function(){return cw(n,o,l)}),null},X9=function e(t,n){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,h,g;n!==void 0&&(h=n.label,g=n.target);var u=CT(t,n,o),S=u||TT(l),b=!S("as");return function(){var C=arguments,A=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&A.push("label:"+h+";"),C[0]==null||C[0].raw===void 0)A.push.apply(A,C);else{A.push(C[0][0]);for(var z=C.length,j=1;j<z;j++)A.push(C[j],C[0][j])}var Z=dw(function(H,de,B){var N=b&&H.as||l,K="",ce=[],ue=H;if(H.theme==null){ue={};for(var ye in H)ue[ye]=H[ye];ue.theme=W.exports.useContext(h0)}typeof H.className=="string"?K=q3(de.registered,ce,H.className):H.className!=null&&(K=H.className+" ");var me=hw(A.concat(ce),de.registered,ue);K+=de.key+"-"+me.name,g!==void 0&&(K+=" "+g);var Te=b&&u===void 0?TT(N):S,Ne={};for(var we in H)b&&we==="as"||Te(we)&&(Ne[we]=H[we]);return Ne.className=K,Ne.ref=B,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(H9,{cache:de,serialized:me,isStringTag:typeof N=="string"}),W.exports.createElement(N,Ne))});return Z.displayName=h!==void 0?h:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",Z.defaultProps=t.defaultProps,Z.__emotion_real=Z,Z.__emotion_base=l,Z.__emotion_styles=A,Z.__emotion_forwardProp=u,Object.defineProperty(Z,"toString",{value:function(){return"."+g}}),Z.withComponent=function(H,de){return e(H,Ze({},n,de,{shouldForwardProp:CT(Z,de,!0)})).apply(void 0,A)},Z}},K9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Tx=X9.bind();K9.forEach(function(e){Tx[e]=Tx(e)});var Y9=Tx;function J9(e){return e==null||Object.keys(e).length===0}function Q9(e){const{styles:t,defaultTheme:n={}}=e;return Be(W9,{styles:typeof t=="function"?l=>t(J9(l)?n:l):t})}/** @license MUI v5.10.16
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Q3(e,t){return Y9(e,t)}const eN=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function lf(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function ws(e,t,n={clone:!0}){const o=n.clone?Ze({},e):e;return lf(e)&&lf(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(lf(t[l])&&l in e&&lf(e[l])?o[l]=ws(e[l],t[l],n):o[l]=t[l])}),o}function Ru(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Za(e){if(typeof e!="string")throw new Error(Ru(7));return e.charAt(0).toUpperCase()+e.slice(1)}function tN(e,t=166){let n;function o(...l){const h=()=>{e.apply(this,l)};clearTimeout(n),n=setTimeout(h,t)}return o.clear=()=>{clearTimeout(n)},o}function nN(e){return e&&e.ownerDocument||document}function PT(e){return nN(e).defaultView||window}function rN(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const iN=typeof window!="undefined"?W.exports.useLayoutEffect:W.exports.useEffect;var fw=iN;function eA(...e){return W.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{rN(n,t)})},e)}function oN(e,t){const n=Ze({},t);return Object.keys(e).forEach(o=>{n[o]===void 0&&(n[o]=e[o])}),n}function pw(e,t,n){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((h,g)=>(g&&(h.push(t(g)),n&&n[g]&&h.push(n[g])),h),[]).join(" ")}),o}const IT=e=>e,aN=()=>{let e=IT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=IT}}},sN=aN();var tA=sN;const lN={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function d0(e,t,n="Mui"){const o=lN[t];return o?`${n}-${o}`:`${tA.generate(e)}-${t}`}function mw(e,t,n="Mui"){const o={};return t.forEach(l=>{o[l]=d0(e,l,n)}),o}function Sf(e,t){return t?ws(e,t,{clone:!1}):e}const gw={xs:0,sm:600,md:900,lg:1200,xl:1536},MT={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gw[e]}px)`};function Cl(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const h=o.breakpoints||MT;return t.reduce((g,u,S)=>(g[h.up(h.keys[S])]=n(t[S]),g),{})}if(typeof t=="object"){const h=o.breakpoints||MT;return Object.keys(t).reduce((g,u)=>{if(Object.keys(h.values||gw).indexOf(u)!==-1){const S=h.up(u);g[S]=n(t[u],u)}else{const S=u;g[S]=t[S]}return g},{})}return n(t)}function uN(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const h=e.up(l);return o[h]={},o},{}))||{}}function cN(e,t){return e.reduce((n,o)=>{const l=n[o];return(!l||Object.keys(l).length===0)&&delete n[o],n},t)}function yw(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((l,h)=>l&&l[h]?l[h]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function AT(e,t,n,o=n){let l;return typeof e=="function"?l=e(n):Array.isArray(e)?l=e[n]||o:l=yw(e,n)||o,t&&(l=t(l,o)),l}function gt(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:l}=e,h=g=>{if(g[t]==null)return null;const u=g[t],S=g.theme,b=yw(S,o)||{};return Cl(g,u,A=>{let z=AT(b,l,A);return A===z&&typeof A=="string"&&(z=AT(b,l,`${t}${A==="default"?"":Za(A)}`,A)),n===!1?z:{[n]:z}})};return h.propTypes={},h.filterProps=[t],h}function Pl(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(h=>{o[h]=l}),o),{}),n=o=>Object.keys(o).reduce((l,h)=>t[h]?Sf(l,t[h](o)):l,{});return n.propTypes={},n.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),n}function hN(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const dN={m:"margin",p:"padding"},fN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},zT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},pN=hN(e=>{if(e.length>2)if(zT[e])e=zT[e];else return[e];const[t,n]=e.split(""),o=dN[t],l=fN[n]||"";return Array.isArray(l)?l.map(h=>o+h):[o+l]}),mN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],gN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],nA=[...mN,...gN];function hp(e,t,n,o){var l;const h=(l=yw(e,t,!1))!=null?l:n;return typeof h=="number"?g=>typeof g=="string"?g:h*g:Array.isArray(h)?g=>typeof g=="string"?g:h[g]:typeof h=="function"?h:()=>{}}function rA(e){return hp(e,"spacing",8)}function dp(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),o=e(n);return t>=0?o:typeof o=="number"?-o:`-${o}`}function yN(e,t){return n=>e.reduce((o,l)=>(o[l]=dp(t,n),o),{})}function _N(e,t,n,o){if(t.indexOf(n)===-1)return null;const l=pN(n),h=yN(l,o),g=e[n];return Cl(e,g,h)}function vN(e,t){const n=rA(e.theme);return Object.keys(e).map(o=>_N(e,t,o,n)).reduce(Sf,{})}function f0(e){return vN(e,nA)}f0.propTypes={};f0.filterProps=nA;function fp(e){return typeof e!="number"?e:`${e}px solid`}const xN=gt({prop:"border",themeKey:"borders",transform:fp}),bN=gt({prop:"borderTop",themeKey:"borders",transform:fp}),wN=gt({prop:"borderRight",themeKey:"borders",transform:fp}),SN=gt({prop:"borderBottom",themeKey:"borders",transform:fp}),EN=gt({prop:"borderLeft",themeKey:"borders",transform:fp}),kN=gt({prop:"borderColor",themeKey:"palette"}),TN=gt({prop:"borderTopColor",themeKey:"palette"}),CN=gt({prop:"borderRightColor",themeKey:"palette"}),PN=gt({prop:"borderBottomColor",themeKey:"palette"}),IN=gt({prop:"borderLeftColor",themeKey:"palette"}),_w=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=hp(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:dp(t,o)});return Cl(e,e.borderRadius,n)}return null};_w.propTypes={};_w.filterProps=["borderRadius"];const MN=Pl(xN,bN,wN,SN,EN,kN,TN,CN,PN,IN,_w);var iA=MN;const AN=gt({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),zN=gt({prop:"display"}),DN=gt({prop:"overflow"}),RN=gt({prop:"textOverflow"}),LN=gt({prop:"visibility"}),FN=gt({prop:"whiteSpace"});var oA=Pl(AN,zN,DN,RN,LN,FN);const ON=gt({prop:"flexBasis"}),$N=gt({prop:"flexDirection"}),BN=gt({prop:"flexWrap"}),VN=gt({prop:"justifyContent"}),NN=gt({prop:"alignItems"}),UN=gt({prop:"alignContent"}),jN=gt({prop:"order"}),GN=gt({prop:"flex"}),WN=gt({prop:"flexGrow"}),qN=gt({prop:"flexShrink"}),ZN=gt({prop:"alignSelf"}),HN=gt({prop:"justifyItems"}),XN=gt({prop:"justifySelf"}),KN=Pl(ON,$N,BN,VN,NN,UN,jN,GN,WN,qN,ZN,HN,XN);var aA=KN;const vw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=hp(e.theme,"spacing",8),n=o=>({gap:dp(t,o)});return Cl(e,e.gap,n)}return null};vw.propTypes={};vw.filterProps=["gap"];const xw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=hp(e.theme,"spacing",8),n=o=>({columnGap:dp(t,o)});return Cl(e,e.columnGap,n)}return null};xw.propTypes={};xw.filterProps=["columnGap"];const bw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=hp(e.theme,"spacing",8),n=o=>({rowGap:dp(t,o)});return Cl(e,e.rowGap,n)}return null};bw.propTypes={};bw.filterProps=["rowGap"];const YN=gt({prop:"gridColumn"}),JN=gt({prop:"gridRow"}),QN=gt({prop:"gridAutoFlow"}),e7=gt({prop:"gridAutoColumns"}),t7=gt({prop:"gridAutoRows"}),n7=gt({prop:"gridTemplateColumns"}),r7=gt({prop:"gridTemplateRows"}),i7=gt({prop:"gridTemplateAreas"}),o7=gt({prop:"gridArea"}),a7=Pl(vw,xw,bw,YN,JN,QN,e7,t7,n7,r7,i7,o7);var sA=a7;function ww(e,t){return t==="grey"?t:e}const s7=gt({prop:"color",themeKey:"palette",transform:ww}),l7=gt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ww}),u7=gt({prop:"backgroundColor",themeKey:"palette",transform:ww}),c7=Pl(s7,l7,u7);var lA=c7;const h7=gt({prop:"position"}),d7=gt({prop:"zIndex",themeKey:"zIndex"}),f7=gt({prop:"top"}),p7=gt({prop:"right"}),m7=gt({prop:"bottom"}),g7=gt({prop:"left"});var uA=Pl(h7,d7,f7,p7,m7,g7);const y7=gt({prop:"boxShadow",themeKey:"shadows"});var cA=y7;function Il(e){return e<=1&&e!==0?`${e*100}%`:e}const _7=gt({prop:"width",transform:Il}),hA=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,l,h;return{maxWidth:((o=e.theme)==null||(l=o.breakpoints)==null||(h=l.values)==null?void 0:h[n])||gw[n]||Il(n)}};return Cl(e,e.maxWidth,t)}return null};hA.filterProps=["maxWidth"];const v7=gt({prop:"minWidth",transform:Il}),x7=gt({prop:"height",transform:Il}),b7=gt({prop:"maxHeight",transform:Il}),w7=gt({prop:"minHeight",transform:Il});gt({prop:"size",cssProperty:"width",transform:Il});gt({prop:"size",cssProperty:"height",transform:Il});const S7=gt({prop:"boxSizing"}),E7=Pl(_7,hA,v7,x7,b7,w7,S7);var dA=E7;const k7=gt({prop:"fontFamily",themeKey:"typography"}),T7=gt({prop:"fontSize",themeKey:"typography"}),C7=gt({prop:"fontStyle",themeKey:"typography"}),P7=gt({prop:"fontWeight",themeKey:"typography"}),I7=gt({prop:"letterSpacing"}),M7=gt({prop:"textTransform"}),A7=gt({prop:"lineHeight"}),z7=gt({prop:"textAlign"}),D7=gt({prop:"typography",cssProperty:!1,themeKey:"typography"}),R7=Pl(D7,k7,T7,C7,P7,I7,A7,z7,M7);var fA=R7;const DT={borders:iA.filterProps,display:oA.filterProps,flexbox:aA.filterProps,grid:sA.filterProps,positions:uA.filterProps,palette:lA.filterProps,shadows:cA.filterProps,sizing:dA.filterProps,spacing:f0.filterProps,typography:fA.filterProps},pA={borders:iA,display:oA,flexbox:aA,grid:sA,positions:uA,palette:lA,shadows:cA,sizing:dA,spacing:f0,typography:fA},L7=Object.keys(DT).reduce((e,t)=>(DT[t].forEach(n=>{e[n]=pA[t]}),e),{});function F7(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function O7(e,t){return typeof e=="function"?e(t):e}function $7(e=pA){const t=Object.keys(e).reduce((l,h)=>(e[h].filterProps.forEach(g=>{l[g]=e[h]}),l),{});function n(l,h,g){const u={[l]:h,theme:g},S=t[l];return S?S(u):{[l]:h}}function o(l){const{sx:h,theme:g={}}=l||{};if(!h)return null;function u(S){let b=S;if(typeof S=="function")b=S(g);else if(typeof S!="object")return S;if(!b)return null;const C=uN(g.breakpoints),A=Object.keys(C);let z=C;return Object.keys(b).forEach(j=>{const Z=O7(b[j],g);if(Z!=null)if(typeof Z=="object")if(t[j])z=Sf(z,n(j,Z,g));else{const H=Cl({theme:g},Z,de=>({[j]:de}));F7(H,Z)?z[j]=o({sx:Z,theme:g}):z=Sf(z,H)}else z=Sf(z,n(j,Z,g))}),cN(A,z)}return Array.isArray(h)?h.map(u):u(h)}return o}const mA=$7();mA.filterProps=["sx"];var gA=mA;const B7=["sx"],V7=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(n=>{L7[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function N7(e){const{sx:t}=e,n=Si(e,B7),{systemProps:o,otherProps:l}=V7(n);let h;return Array.isArray(t)?h=[o,...t]:typeof t=="function"?h=(...g)=>{const u=t(...g);return lf(u)?Ze({},o,u):o}:h=Ze({},o,t),Ze({},l,{sx:h})}function yA(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=yA(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function Jf(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=yA(e))&&(o&&(o+=" "),o+=t);return o}const U7=["values","unit","step"],j7=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>Ze({},n,{[o.key]:o.val}),{})};function G7(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,l=Si(e,U7),h=j7(t),g=Object.keys(h);function u(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n})`}function S(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-o/100}${n})`}function b(z,j){const Z=g.indexOf(j);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n}) and (max-width:${(Z!==-1&&typeof t[g[Z]]=="number"?t[g[Z]]:j)-o/100}${n})`}function C(z){return g.indexOf(z)+1<g.length?b(z,g[g.indexOf(z)+1]):u(z)}function A(z){const j=g.indexOf(z);return j===0?u(g[1]):j===g.length-1?S(g[j]):b(z,g[g.indexOf(z)+1]).replace("@media","@media not all and")}return Ze({keys:g,values:h,up:u,down:S,between:b,only:C,not:A,unit:n},l)}const W7={borderRadius:4};var q7=W7;function Z7(e=8){if(e.mui)return e;const t=rA({spacing:e}),n=(...o)=>(o.length===0?[1]:o).map(h=>{const g=t(h);return typeof g=="number"?`${g}px`:g}).join(" ");return n.mui=!0,n}const H7=["breakpoints","palette","spacing","shape"];function Sw(e={},...t){const{breakpoints:n={},palette:o={},spacing:l,shape:h={}}=e,g=Si(e,H7),u=G7(n),S=Z7(l);let b=ws({breakpoints:u,direction:"ltr",components:{},palette:Ze({mode:"light"},o),spacing:S,shape:Ze({},q7,h)},g);return b=t.reduce((C,A)=>ws(C,A),b),b}const X7=W.exports.createContext(null);var _A=X7;function vA(){return W.exports.useContext(_A)}const K7=typeof Symbol=="function"&&Symbol.for;var Y7=K7?Symbol.for("mui.nested"):"__THEME_NESTED__";function J7(e,t){return typeof t=="function"?t(e):Ze({},e,t)}function Q7(e){const{children:t,theme:n}=e,o=vA(),l=W.exports.useMemo(()=>{const h=o===null?n:J7(o,n);return h!=null&&(h[Y7]=o!==null),h},[n,o]);return Be(_A.Provider,{value:l,children:t})}function eU(e){return Object.keys(e).length===0}function tU(e=null){const t=vA();return!t||eU(t)?e:t}const nU=Sw();function Ew(e=nU){return tU(e)}const rU=["className","component"];function iU(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:o,styleFunctionSx:l=gA}=e,h=Q3("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(l);return W.exports.forwardRef(function(S,b){const C=Ew(t),A=N7(S),{className:z,component:j="div"}=A,Z=Si(A,rU);return Be(h,Ze({as:j,ref:b,className:Jf(z,o?o(n):n),theme:C},Z))})}const oU=["variant"];function RT(e){return e.length===0}function xA(e){const{variant:t}=e,n=Si(e,oU);let o=t||"";return Object.keys(n).sort().forEach(l=>{l==="color"?o+=RT(o)?e[l]:Za(e[l]):o+=`${RT(o)?l:Za(l)}${Za(e[l].toString())}`}),o}const aU=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],sU=["theme"],lU=["theme"];function Kd(e){return Object.keys(e).length===0}function uU(e){return typeof e=="string"&&e.charCodeAt(0)>96}const cU=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,hU=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const o={};return n.forEach(l=>{const h=xA(l.props);o[h]=l.style}),o},dU=(e,t,n,o)=>{var l,h;const{ownerState:g={}}=e,u=[],S=n==null||(l=n.components)==null||(h=l[o])==null?void 0:h.variants;return S&&S.forEach(b=>{let C=!0;Object.keys(b.props).forEach(A=>{g[A]!==b.props[A]&&e[A]!==b.props[A]&&(C=!1)}),C&&u.push(t[xA(b.props)])}),u};function wg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const fU=Sw();function pU(e={}){const{defaultTheme:t=fU,rootShouldForwardProp:n=wg,slotShouldForwardProp:o=wg,styleFunctionSx:l=gA}=e,h=g=>{const u=Kd(g.theme)?t:g.theme;return l(Ze({},g,{theme:u}))};return h.__mui_systemSx=!0,(g,u={})=>{eN(g,ce=>ce.filter(ue=>!(ue!=null&&ue.__mui_systemSx)));const{name:S,slot:b,skipVariantsResolver:C,skipSx:A,overridesResolver:z}=u,j=Si(u,aU),Z=C!==void 0?C:b&&b!=="Root"||!1,H=A||!1;let de,B=wg;b==="Root"?B=n:b?B=o:uU(g)&&(B=void 0);const N=Q3(g,Ze({shouldForwardProp:B,label:de},j)),K=(ce,...ue)=>{const ye=ue?ue.map(we=>typeof we=="function"&&we.__emotion_real!==we?nt=>{let{theme:wt}=nt,It=Si(nt,sU);return we(Ze({theme:Kd(wt)?t:wt},It))}:we):[];let me=ce;S&&z&&ye.push(we=>{const nt=Kd(we.theme)?t:we.theme,wt=cU(S,nt);if(wt){const It={};return Object.entries(wt).forEach(([Lt,Bt])=>{It[Lt]=typeof Bt=="function"?Bt(Ze({},we,{theme:nt})):Bt}),z(we,It)}return null}),S&&!Z&&ye.push(we=>{const nt=Kd(we.theme)?t:we.theme;return dU(we,hU(S,nt),nt,S)}),H||ye.push(h);const Te=ye.length-ue.length;if(Array.isArray(ce)&&Te>0){const we=new Array(Te).fill("");me=[...ce,...we],me.raw=[...ce.raw,...we]}else typeof ce=="function"&&ce.__emotion_real!==ce&&(me=we=>{let{theme:nt}=we,wt=Si(we,lU);return ce(Ze({theme:Kd(nt)?t:nt},wt))});return N(me,...ye)};return N.withConfig&&(K.withConfig=N.withConfig),K}}function mU(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:oN(t.components[n].defaultProps,o)}function gU({props:e,name:t,defaultTheme:n}){const o=Ew(n);return mU({theme:o,name:t,props:e})}function kw(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function yU(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function Lu(e){if(e.type)return e;if(e.charAt(0)==="#")return Lu(yU(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Ru(9,e));let o=e.substring(t+1,e.length-1),l;if(n==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(Ru(10,l))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:n,values:o,colorSpace:l}}function p0(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,h)=>h<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function _U(e){e=Lu(e);const{values:t}=e,n=t[0],o=t[1]/100,l=t[2]/100,h=o*Math.min(l,1-l),g=(b,C=(b+n/30)%12)=>l-h*Math.max(Math.min(C-3,9-C,1),-1);let u="rgb";const S=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(u+="a",S.push(t[3])),p0({type:u,values:S})}function LT(e){e=Lu(e);let t=e.type==="hsl"||e.type==="hsla"?Lu(_U(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function vU(e,t){const n=LT(e),o=LT(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function FT(e,t){return e=Lu(e),t=kw(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,p0(e)}function xU(e,t){if(e=Lu(e),t=kw(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return p0(e)}function bU(e,t){if(e=Lu(e),t=kw(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return p0(e)}const wU={};function SU(e){const t=Ew();return Be(h0.Provider,{value:typeof t=="object"?t:wU,children:e.children})}function EU(e){const{children:t,theme:n}=e;return Be(Q7,{theme:n,children:Be(SU,{children:t})})}function kU(e,t){return Ze({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const TU=["mode","contrastThreshold","tonalOffset"],OT={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yf.white,default:Yf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Tv={text:{primary:Yf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function $T(e,t,n,o){const l=o.light||o,h=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=bU(e.main,l):t==="dark"&&(e.dark=xU(e.main,h)))}function CU(e="light"){return e==="dark"?{main:Vc[200],light:Vc[50],dark:Vc[400]}:{main:Vc[700],light:Vc[400],dark:Vc[800]}}function PU(e="light"){return e==="dark"?{main:Bc[200],light:Bc[50],dark:Bc[400]}:{main:Bc[500],light:Bc[300],dark:Bc[700]}}function IU(e="light"){return e==="dark"?{main:$c[500],light:$c[300],dark:$c[700]}:{main:$c[700],light:$c[400],dark:$c[800]}}function MU(e="light"){return e==="dark"?{main:Nc[400],light:Nc[300],dark:Nc[700]}:{main:Nc[700],light:Nc[500],dark:Nc[900]}}function AU(e="light"){return e==="dark"?{main:Uc[400],light:Uc[300],dark:Uc[700]}:{main:Uc[800],light:Uc[500],dark:Uc[900]}}function zU(e="light"){return e==="dark"?{main:Xd[400],light:Xd[300],dark:Xd[700]}:{main:"#ed6c02",light:Xd[500],dark:Xd[900]}}function DU(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2}=e,l=Si(e,TU),h=e.primary||CU(t),g=e.secondary||PU(t),u=e.error||IU(t),S=e.info||MU(t),b=e.success||AU(t),C=e.warning||zU(t);function A(H){return vU(H,Tv.text.primary)>=n?Tv.text.primary:OT.text.primary}const z=({color:H,name:de,mainShade:B=500,lightShade:N=300,darkShade:K=700})=>{if(H=Ze({},H),!H.main&&H[B]&&(H.main=H[B]),!H.hasOwnProperty("main"))throw new Error(Ru(11,de?` (${de})`:"",B));if(typeof H.main!="string")throw new Error(Ru(12,de?` (${de})`:"",JSON.stringify(H.main)));return $T(H,"light",N,o),$T(H,"dark",K,o),H.contrastText||(H.contrastText=A(H.main)),H},j={dark:Tv,light:OT};return ws(Ze({common:Ze({},Yf),mode:t,primary:z({color:h,name:"primary"}),secondary:z({color:g,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:u,name:"error"}),warning:z({color:C,name:"warning"}),info:z({color:S,name:"info"}),success:z({color:b,name:"success"}),grey:U9,contrastThreshold:n,getContrastText:A,augmentColor:z,tonalOffset:o},j[t]),l)}const RU=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function LU(e){return Math.round(e*1e5)/1e5}const BT={textTransform:"uppercase"},VT='"Roboto", "Helvetica", "Arial", sans-serif';function FU(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:o=VT,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:g=400,fontWeightMedium:u=500,fontWeightBold:S=700,htmlFontSize:b=16,allVariants:C,pxToRem:A}=n,z=Si(n,RU),j=l/14,Z=A||(B=>`${B/b*j}rem`),H=(B,N,K,ce,ue)=>Ze({fontFamily:o,fontWeight:B,fontSize:Z(N),lineHeight:K},o===VT?{letterSpacing:`${LU(ce/N)}em`}:{},ue,C),de={h1:H(h,96,1.167,-1.5),h2:H(h,60,1.2,-.5),h3:H(g,48,1.167,0),h4:H(g,34,1.235,.25),h5:H(g,24,1.334,0),h6:H(u,20,1.6,.15),subtitle1:H(g,16,1.75,.15),subtitle2:H(u,14,1.57,.1),body1:H(g,16,1.5,.15),body2:H(g,14,1.43,.15),button:H(u,14,1.75,.4,BT),caption:H(g,12,1.66,.4),overline:H(g,12,2.66,1,BT)};return ws(Ze({htmlFontSize:b,pxToRem:Z,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:g,fontWeightMedium:u,fontWeightBold:S},de),z,{clone:!1})}const OU=.2,$U=.14,BU=.12;function Kn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${OU})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${$U})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${BU})`].join(",")}const VU=["none",Kn(0,2,1,-1,0,1,1,0,0,1,3,0),Kn(0,3,1,-2,0,2,2,0,0,1,5,0),Kn(0,3,3,-2,0,3,4,0,0,1,8,0),Kn(0,2,4,-1,0,4,5,0,0,1,10,0),Kn(0,3,5,-1,0,5,8,0,0,1,14,0),Kn(0,3,5,-1,0,6,10,0,0,1,18,0),Kn(0,4,5,-2,0,7,10,1,0,2,16,1),Kn(0,5,5,-3,0,8,10,1,0,3,14,2),Kn(0,5,6,-3,0,9,12,1,0,3,16,2),Kn(0,6,6,-3,0,10,14,1,0,4,18,3),Kn(0,6,7,-4,0,11,15,1,0,4,20,3),Kn(0,7,8,-4,0,12,17,2,0,5,22,4),Kn(0,7,8,-4,0,13,19,2,0,5,24,4),Kn(0,7,9,-4,0,14,21,2,0,5,26,4),Kn(0,8,9,-5,0,15,22,2,0,6,28,5),Kn(0,8,10,-5,0,16,24,2,0,6,30,5),Kn(0,8,11,-5,0,17,26,2,0,6,32,5),Kn(0,9,11,-5,0,18,28,2,0,7,34,6),Kn(0,9,12,-6,0,19,29,2,0,7,36,6),Kn(0,10,13,-6,0,20,31,3,0,8,38,7),Kn(0,10,13,-6,0,21,33,3,0,8,40,7),Kn(0,10,14,-6,0,22,35,3,0,8,42,7),Kn(0,11,14,-7,0,23,36,3,0,9,44,8),Kn(0,11,15,-7,0,24,38,3,0,9,46,8)];var NU=VU;const UU=["duration","easing","delay"],jU={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},GU={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NT(e){return`${Math.round(e)}ms`}function WU(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function qU(e){const t=Ze({},jU,e.easing),n=Ze({},GU,e.duration);return Ze({getAutoHeightDuration:WU,create:(l=["all"],h={})=>{const{duration:g=n.standard,easing:u=t.easeInOut,delay:S=0}=h;return Si(h,UU),(Array.isArray(l)?l:[l]).map(b=>`${b} ${typeof g=="string"?g:NT(g)} ${u} ${typeof S=="string"?S:NT(S)}`).join(",")}},e,{easing:t,duration:n})}const ZU={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var HU=ZU;const XU=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Tw(e={},...t){const{mixins:n={},palette:o={},transitions:l={},typography:h={}}=e,g=Si(e,XU);if(e.vars)throw new Error(Ru(18));const u=DU(o),S=Sw(e);let b=ws(S,{mixins:kU(S.breakpoints,n),palette:u,shadows:NU.slice(),typography:FU(u,h),transitions:qU(l),zIndex:Ze({},HU)});return b=ws(b,g),b=t.reduce((C,A)=>ws(C,A),b),b}const KU=Tw();var Cw=KU;function Pw({props:e,name:t}){return gU({props:e,name:t,defaultTheme:Cw})}const YU=e=>wg(e)&&e!=="classes",JU=pU({defaultTheme:Cw,rootShouldForwardProp:YU});var $h=JU;const QU=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var UT=QU;function jT(e){return typeof e=="string"}function Iw(e){const{children:t,defer:n=!1,fallback:o=null}=e,[l,h]=W.exports.useState(!1);return fw(()=>{n||h(!0)},[n]),W.exports.useEffect(()=>{n&&h(!0)},[n]),Be(W.exports.Fragment,{children:l?t:o})}const ej=["onChange","maxRows","minRows","style","value"];function Gm(e,t){return parseInt(e[t],10)||0}const tj={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function GT(e){return e==null||Object.keys(e).length===0}const nj=W.exports.forwardRef(function(t,n){const{onChange:o,maxRows:l,minRows:h=1,style:g,value:u}=t,S=Si(t,ej),{current:b}=W.exports.useRef(u!=null),C=W.exports.useRef(null),A=eA(n,C),z=W.exports.useRef(null),j=W.exports.useRef(0),[Z,H]=W.exports.useState({}),de=W.exports.useCallback(()=>{const ue=C.current,me=PT(ue).getComputedStyle(ue);if(me.width==="0px")return{};const Te=z.current;Te.style.width=me.width,Te.value=ue.value||t.placeholder||"x",Te.value.slice(-1)===`
`&&(Te.value+=" ");const Ne=me["box-sizing"],we=Gm(me,"padding-bottom")+Gm(me,"padding-top"),nt=Gm(me,"border-bottom-width")+Gm(me,"border-top-width"),wt=Te.scrollHeight;Te.value="x";const It=Te.scrollHeight;let Lt=wt;h&&(Lt=Math.max(Number(h)*It,Lt)),l&&(Lt=Math.min(Number(l)*It,Lt)),Lt=Math.max(Lt,It);const Bt=Lt+(Ne==="border-box"?we+nt:0),cn=Math.abs(Lt-wt)<=1;return{outerHeightStyle:Bt,overflow:cn}},[l,h,t.placeholder]),B=(ue,ye)=>{const{outerHeightStyle:me,overflow:Te}=ye;return j.current<20&&(me>0&&Math.abs((ue.outerHeightStyle||0)-me)>1||ue.overflow!==Te)?(j.current+=1,{overflow:Te,outerHeightStyle:me}):ue},N=W.exports.useCallback(()=>{const ue=de();GT(ue)||H(ye=>B(ye,ue))},[de]),K=()=>{const ue=de();GT(ue)||by.exports.flushSync(()=>{H(ye=>B(ye,ue))})};W.exports.useEffect(()=>{const ue=tN(()=>{j.current=0,C.current&&K()}),ye=PT(C.current);ye.addEventListener("resize",ue);let me;return typeof ResizeObserver!="undefined"&&(me=new ResizeObserver(ue),me.observe(C.current)),()=>{ue.clear(),ye.removeEventListener("resize",ue),me&&me.disconnect()}}),fw(()=>{N()}),W.exports.useEffect(()=>{j.current=0},[u]);const ce=ue=>{j.current=0,b||N(),o&&o(ue)};return Pt(W.exports.Fragment,{children:[Be("textarea",Ze({value:u,onChange:ce,ref:A,rows:h,style:Ze({height:Z.outerHeightStyle,overflow:Z.overflow?"hidden":null},g)},S)),Be("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:z,tabIndex:-1,style:Ze({},tj.shadow,g,{padding:0})})]})});var rj=nj;function ij(e){return d0("MuiSvgIcon",e)}mw("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const oj=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],aj=e=>{const{color:t,fontSize:n,classes:o}=e,l={root:["root",t!=="inherit"&&`color${Za(t)}`,`fontSize${Za(n)}`]};return pw(l,ij,o)},sj=$h("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Za(n.color)}`],t[`fontSize${Za(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,o,l,h,g,u,S,b,C,A,z,j,Z,H,de,B,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(o=n.create)==null?void 0:o.call(n,"fill",{duration:(l=e.transitions)==null||(h=l.duration)==null?void 0:h.shorter}),fontSize:{inherit:"inherit",small:((g=e.typography)==null||(u=g.pxToRem)==null?void 0:u.call(g,20))||"1.25rem",medium:((S=e.typography)==null||(b=S.pxToRem)==null?void 0:b.call(S,24))||"1.5rem",large:((C=e.typography)==null||(A=C.pxToRem)==null?void 0:A.call(C,35))||"2.1875rem"}[t.fontSize],color:(z=(j=(e.vars||e).palette)==null||(Z=j[t.color])==null?void 0:Z.main)!=null?z:{action:(H=(e.vars||e).palette)==null||(de=H.action)==null?void 0:de.active,disabled:(B=(e.vars||e).palette)==null||(N=B.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),bA=W.exports.forwardRef(function(t,n){const o=Pw({props:t,name:"MuiSvgIcon"}),{children:l,className:h,color:g="inherit",component:u="svg",fontSize:S="medium",htmlColor:b,inheritViewBox:C=!1,titleAccess:A,viewBox:z="0 0 24 24"}=o,j=Si(o,oj),Z=Ze({},o,{color:g,component:u,fontSize:S,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:z}),H={};C||(H.viewBox=z);const de=aj(Z);return Pt(sj,Ze({as:u,className:Jf(de.root,h),focusable:"false",color:b,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},H,j,{ownerState:Z,children:[l,A?Be("title",{children:A}):null]}))});bA.muiName="SvgIcon";var Cx=bA;function Bh(e,t){function n(o,l){return Be(Cx,Ze({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return n.muiName=Cx.muiName,W.exports.memo(W.exports.forwardRef(n))}function lj(e){return d0("MuiPaper",e)}mw("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const uj=["className","component","elevation","square","variant"],cj=e=>{const{square:t,elevation:n,variant:o,classes:l}=e,h={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return pw(h,lj,l)},hj=$h("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Ze({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ze({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${FT("#fff",UT(t.elevation))}, ${FT("#fff",UT(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),dj=W.exports.forwardRef(function(t,n){const o=Pw({props:t,name:"MuiPaper"}),{className:l,component:h="div",elevation:g=1,square:u=!1,variant:S="elevation"}=o,b=Si(o,uj),C=Ze({},o,{component:h,elevation:g,square:u,variant:S}),A=cj(C);return Be(hj,Ze({as:h,ownerState:C,className:Jf(A.root,l),ref:n},b))});var fj=dj;function pj({props:e,states:t,muiFormControl:n}){return t.reduce((o,l)=>(o[l]=e[l],n&&typeof e[l]=="undefined"&&(o[l]=n[l]),o),{})}const mj=W.exports.createContext(void 0);var wA=mj;function gj(){return W.exports.useContext(wA)}function yj(e){return Be(Q9,Ze({},e,{defaultTheme:Cw}))}function WT(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function _j(e,t=!1){return e&&(WT(e.value)&&e.value!==""||t&&WT(e.defaultValue)&&e.defaultValue!=="")}function vj(e){return d0("MuiInputBase",e)}const xj=mw("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Px=xj;const bj=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],wj=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Za(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Sj=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Ej=e=>{const{classes:t,color:n,disabled:o,error:l,endAdornment:h,focused:g,formControl:u,fullWidth:S,hiddenLabel:b,multiline:C,readOnly:A,size:z,startAdornment:j,type:Z}=e,H={root:["root",`color${Za(n)}`,o&&"disabled",l&&"error",S&&"fullWidth",g&&"focused",u&&"formControl",z==="small"&&"sizeSmall",C&&"multiline",j&&"adornedStart",h&&"adornedEnd",b&&"hiddenLabel",A&&"readOnly"],input:["input",o&&"disabled",Z==="search"&&"inputTypeSearch",C&&"inputMultiline",z==="small"&&"inputSizeSmall",b&&"inputHiddenLabel",j&&"inputAdornedStart",h&&"inputAdornedEnd",A&&"readOnly"]};return pw(H,vj,t)},kj=$h("div",{name:"MuiInputBase",slot:"Root",overridesResolver:wj})(({theme:e,ownerState:t})=>Ze({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Px.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ze({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Tj=$h("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Sj})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",o=Ze({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Ze({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Px.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus:-ms-input-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${Px.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Cj=Be(yj,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Pj=W.exports.forwardRef(function(t,n){var o;const l=Pw({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:g,autoFocus:u,className:S,components:b={},componentsProps:C={},defaultValue:A,disabled:z,disableInjectingGlobalStyles:j,endAdornment:Z,fullWidth:H=!1,id:de,inputComponent:B="input",inputProps:N={},inputRef:K,maxRows:ce,minRows:ue,multiline:ye=!1,name:me,onBlur:Te,onChange:Ne,onClick:we,onFocus:nt,onKeyDown:wt,onKeyUp:It,placeholder:Lt,readOnly:Bt,renderSuffix:cn,rows:bn,slotProps:Ue={},slots:ot={},startAdornment:Tt,type:Ot="text",value:at}=l,hn=Si(l,bj),Dt=N.value!=null?N.value:at,{current:Zn}=W.exports.useRef(Dt!=null),dn=W.exports.useRef(),Qn=W.exports.useCallback($t=>{},[]),ii=eA(dn,K,N.ref,Qn),[Er,Rn]=W.exports.useState(!1),Xt=gj(),fn=pj({props:l,muiFormControl:Xt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});fn.focused=Xt?Xt.focused:Er,W.exports.useEffect(()=>{!Xt&&z&&Er&&(Rn(!1),Te&&Te())},[Xt,z,Er,Te]);const Pe=Xt&&Xt.onFilled,Fr=Xt&&Xt.onEmpty,Hr=W.exports.useCallback($t=>{_j($t)?Pe&&Pe():Fr&&Fr()},[Pe,Fr]);fw(()=>{Zn&&Hr({value:Dt})},[Dt,Hr,Zn]);const tn=$t=>{if(fn.disabled){$t.stopPropagation();return}nt&&nt($t),N.onFocus&&N.onFocus($t),Xt&&Xt.onFocus?Xt.onFocus($t):Rn(!0)},Nt=$t=>{Te&&Te($t),N.onBlur&&N.onBlur($t),Xt&&Xt.onBlur?Xt.onBlur($t):Rn(!1)},ki=($t,...Pr)=>{if(!Zn){const je=$t.target||dn.current;if(je==null)throw new Error(Ru(1));Hr({value:je.value})}N.onChange&&N.onChange($t,...Pr),Ne&&Ne($t,...Pr)};W.exports.useEffect(()=>{Hr(dn.current)},[]);const oi=$t=>{dn.current&&$t.currentTarget===$t.target&&dn.current.focus(),we&&we($t)};let Ti=B,Or=N;ye&&Ti==="input"&&(bn?Or=Ze({type:void 0,minRows:bn,maxRows:bn},Or):Or=Ze({type:void 0,maxRows:ce,minRows:ue},Or),Ti=rj);const Sn=$t=>{Hr($t.animationName==="mui-auto-fill-cancel"?dn.current:{value:"x"})};W.exports.useEffect(()=>{Xt&&Xt.setAdornedStart(Boolean(Tt))},[Xt,Tt]);const Xi=Ze({},l,{color:fn.color||"primary",disabled:fn.disabled,endAdornment:Z,error:fn.error,focused:fn.focused,formControl:Xt,fullWidth:H,hiddenLabel:fn.hiddenLabel,multiline:ye,size:fn.size,startAdornment:Tt,type:Ot}),et=Ej(Xi),Ie=ot.root||b.Root||kj,Wt=Ue.root||C.root||{},Jt=ot.input||b.Input||Tj;return Or=Ze({},Or,(o=Ue.input)!=null?o:C.input),Pt(W.exports.Fragment,{children:[!j&&Cj,Pt(Ie,Ze({},Wt,!jT(Ie)&&{ownerState:Ze({},Xi,Wt.ownerState)},{ref:n,onClick:oi},hn,{className:Jf(et.root,Wt.className,S),children:[Tt,Be(wA.Provider,{value:null,children:Be(Jt,Ze({ownerState:Xi,"aria-invalid":fn.error,"aria-describedby":h,autoComplete:g,autoFocus:u,defaultValue:A,disabled:fn.disabled,id:de,onAnimationStart:Sn,name:me,placeholder:Lt,readOnly:Bt,required:fn.required,rows:bn,value:Dt,onKeyDown:wt,onKeyUp:It,type:Ot},Or,!jT(Jt)&&{as:Ti,ownerState:Ze({},Xi,Or.ownerState)},{ref:ii,className:Jf(et.input,Or.className),onBlur:Nt,onChange:ki,onFocus:tn}))}),Z,cn?cn(Ze({},fn,{startAdornment:Tt})):null]}))]})});var Ij=Pj;const Mj=Tw(),Aj=iU({defaultTheme:Mj,defaultClassName:"MuiBox-root",generateClassName:tA.generate});var Rr=Aj,qT=Bh(Be("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),zj=Bh(Be("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),Dj=Bh(Be("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Rj=Bh(Be("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy"),Lj=Bh(Be("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),Fj=Bh(Be("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const ZT=e=>{let t;const n=new Set,o=(S,b)=>{const C=typeof S=="function"?S(t):S;if(!Object.is(C,t)){const A=t;t=(b!=null?b:typeof C!="object")?C:Object.assign({},t,C),n.forEach(z=>z(t,A))}},l=()=>t,u={setState:o,getState:l,subscribe:S=>(n.add(S),()=>n.delete(S)),destroy:()=>n.clear()};return t=e(o,l,u),u},Oj=e=>e?ZT(e):ZT;var SA={exports:{}},EA={},kA={exports:{}},TA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch=W.exports;function $j(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bj=typeof Object.is=="function"?Object.is:$j,Vj=Ch.useState,Nj=Ch.useEffect,Uj=Ch.useLayoutEffect,jj=Ch.useDebugValue;function Gj(e,t){var n=t(),o=Vj({inst:{value:n,getSnapshot:t}}),l=o[0].inst,h=o[1];return Uj(function(){l.value=n,l.getSnapshot=t,Cv(l)&&h({inst:l})},[e,n,t]),Nj(function(){return Cv(l)&&h({inst:l}),e(function(){Cv(l)&&h({inst:l})})},[e]),jj(n),n}function Cv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bj(e,n)}catch{return!0}}function Wj(e,t){return t()}var qj=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?Wj:Gj;TA.useSyncExternalStore=Ch.useSyncExternalStore!==void 0?Ch.useSyncExternalStore:qj;kA.exports=TA;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=W.exports,Zj=kA.exports;function Hj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xj=typeof Object.is=="function"?Object.is:Hj,Kj=Zj.useSyncExternalStore,Yj=m0.useRef,Jj=m0.useEffect,Qj=m0.useMemo,eG=m0.useDebugValue;EA.useSyncExternalStoreWithSelector=function(e,t,n,o,l){var h=Yj(null);if(h.current===null){var g={hasValue:!1,value:null};h.current=g}else g=h.current;h=Qj(function(){function S(j){if(!b){if(b=!0,C=j,j=o(j),l!==void 0&&g.hasValue){var Z=g.value;if(l(Z,j))return A=Z}return A=j}if(Z=A,Xj(C,j))return Z;var H=o(j);return l!==void 0&&l(Z,H)?Z:(C=j,A=H)}var b=!1,C,A,z=n===void 0?null:n;return[function(){return S(t())},z===null?void 0:function(){return S(z())}]},[t,n,o,l]);var u=Kj(e,h[0],h[1]);return Jj(function(){g.hasValue=!0,g.value=u},[u]),eG(u),u};SA.exports=EA;var tG=SA.exports;const{useSyncExternalStoreWithSelector:nG}=tG;function CA(e,t=e.getState,n){const o=nG(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return W.exports.useDebugValue(o),o}const HT=e=>{const t=typeof e=="function"?Oj(e):e,n=(o,l)=>CA(t,o,l);return Object.assign(n,t),n},PA=e=>e?HT(e):HT;function IA(){const e=W.exports.createContext(void 0);return{Provider:({createStore:l,children:h})=>{const g=W.exports.useRef();return g.current||(g.current=l()),W.exports.createElement(e.Provider,{value:g.current},h)},useStore:(l,h)=>{const g=W.exports.useContext(e);if(!g)throw new Error("Seems like you have not used zustand provider as an ancestor.");return CA(g,l,h)},useStoreApi:()=>{const l=W.exports.useContext(e);if(!l)throw new Error("Seems like you have not used zustand provider as an ancestor.");return W.exports.useMemo(()=>({...l}),[l])}}}const MA=(e,t)=>(...n)=>Object.assign({},e,t(...n));var AA={},g0={},Mw={exports:{}},zA={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(Ef,function(){var n=typeof Promise=="function",o=typeof self=="object"?self:Ef,l=typeof Symbol!="undefined",h=typeof Map!="undefined",g=typeof Set!="undefined",u=typeof WeakMap!="undefined",S=typeof WeakSet!="undefined",b=typeof DataView!="undefined",C=l&&typeof Symbol.iterator!="undefined",A=l&&typeof Symbol.toStringTag!="undefined",z=g&&typeof Set.prototype.entries=="function",j=h&&typeof Map.prototype.entries=="function",Z=z&&Object.getPrototypeOf(new Set().entries()),H=j&&Object.getPrototypeOf(new Map().entries()),de=C&&typeof Array.prototype[Symbol.iterator]=="function",B=de&&Object.getPrototypeOf([][Symbol.iterator]()),N=C&&typeof String.prototype[Symbol.iterator]=="function",K=N&&Object.getPrototypeOf(""[Symbol.iterator]()),ce=8,ue=-1;function ye(me){var Te=typeof me;if(Te!=="object")return Te;if(me===null)return"null";if(me===o)return"global";if(Array.isArray(me)&&(A===!1||!(Symbol.toStringTag in me)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&me===window.location)return"Location";if(typeof window.document=="object"&&me===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&me===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&me===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&me instanceof window.HTMLElement){if(me.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(me.tagName==="TD")return"HTMLTableDataCellElement";if(me.tagName==="TH")return"HTMLTableHeaderCellElement"}}var Ne=A&&me[Symbol.toStringTag];if(typeof Ne=="string")return Ne;var we=Object.getPrototypeOf(me);return we===RegExp.prototype?"RegExp":we===Date.prototype?"Date":n&&we===Promise.prototype?"Promise":g&&we===Set.prototype?"Set":h&&we===Map.prototype?"Map":S&&we===WeakSet.prototype?"WeakSet":u&&we===WeakMap.prototype?"WeakMap":b&&we===DataView.prototype?"DataView":h&&we===H?"Map Iterator":g&&we===Z?"Set Iterator":de&&we===B?"Array Iterator":N&&we===K?"String Iterator":we===null?"Object":Object.prototype.toString.call(me).slice(ce,ue)}return ye})})(zA);/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var XT=zA.exports;function DA(){this._key="chai/deep-eql__"+Math.random()+Date.now()}DA.prototype={get:function(t){return t[this._key]},set:function(t,n){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:n,configurable:!0})}};var Aw=typeof WeakMap=="function"?WeakMap:DA;/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function KT(e,t,n){if(!n||Ph(e)||Ph(t))return null;var o=n.get(e);if(o){var l=o.get(t);if(typeof l=="boolean")return l}return null}/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function Wm(e,t,n,o){if(!(!n||Ph(e)||Ph(t))){var l=n.get(e);l?l.set(t,o):(l=new Aw,l.set(t,o),n.set(e,l))}}/*!
 * Primary Export
 */Mw.exports=y0;Mw.exports.MemoizeMap=Aw;function y0(e,t,n){if(n&&n.comparator)return YT(e,t,n);var o=RA(e,t);return o!==null?o:YT(e,t,n)}function RA(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t?!0:Ph(e)||Ph(t)?!1:null}/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function YT(e,t,n){n=n||{},n.memoize=n.memoize===!1?!1:n.memoize||new Aw;var o=n&&n.comparator,l=KT(e,t,n.memoize);if(l!==null)return l;var h=KT(t,e,n.memoize);if(h!==null)return h;if(o){var g=o(e,t);if(g===!1||g===!0)return Wm(e,t,n.memoize,g),g;var u=RA(e,t);if(u!==null)return u}var S=XT(e);if(S!==XT(t))return Wm(e,t,n.memoize,!1),!1;Wm(e,t,n.memoize,!0);var b=rG(e,t,S,n);return Wm(e,t,n.memoize,b),b}function rG(e,t,n,o){switch(n){case"String":case"Number":case"Boolean":case"Date":return y0(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return LA(e,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Pu(e,t,o);case"RegExp":return iG(e,t);case"Generator":return oG(e,t,o);case"DataView":return Pu(new Uint8Array(e.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return Pu(new Uint8Array(e),new Uint8Array(t),o);case"Set":return JT(e,t,o);case"Map":return JT(e,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return sG(e,t,o)}}/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */function iG(e,t){return e.toString()===t.toString()}/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function JT(e,t,n){if(e.size!==t.size)return!1;if(e.size===0)return!0;var o=[],l=[];return e.forEach(function(g,u){o.push([g,u])}),t.forEach(function(g,u){l.push([g,u])}),Pu(o.sort(),l.sort(),n)}/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function Pu(e,t,n){var o=e.length;if(o!==t.length)return!1;if(o===0)return!0;for(var l=-1;++l<o;)if(y0(e[l],t[l],n)===!1)return!1;return!0}/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function oG(e,t,n){return Pu(Ix(e),Ix(t),n)}/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */function aG(e){return typeof Symbol!="undefined"&&typeof e=="object"&&typeof Symbol.iterator!="undefined"&&typeof e[Symbol.iterator]=="function"}/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function QT(e){if(aG(e))try{return Ix(e[Symbol.iterator]())}catch{return[]}return[]}/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function Ix(e){for(var t=e.next(),n=[t.value];t.done===!1;)t=e.next(),n.push(t.value);return n}/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function eC(e){var t=[];for(var n in e)t.push(n);return t}function tC(e){var t=Object.getOwnPropertySymbols(e);return t}/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function LA(e,t,n,o){var l=n.length;if(l===0)return!0;for(var h=0;h<l;h+=1)if(y0(e[n[h]],t[n[h]],o)===!1)return!1;return!0}/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function sG(e,t,n){var o=eC(e),l=eC(t),h=tC(e),g=tC(t);if(o=o.concat(h),l=l.concat(g),o.length&&o.length===l.length)return Pu(nC(o).sort(),nC(l).sort())===!1?!1:LA(e,t,o,n);var u=QT(e),S=QT(t);return u.length&&u.length===S.length?(u.sort(),S.sort(),Pu(u,S,n)):o.length===0&&u.length===0&&l.length===0&&S.length===0}/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */function Ph(e){return e===null||typeof e!="object"}function nC(e){return e.map(function(n){return typeof n=="symbol"?n.toString():n})}var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.findOrCreate=void 0;function lG(e,t,n){const o=e.findIndex(h=>t(h));if(o>=0)return e[o];const l=n();return e.push(l),l}_0.findOrCreate=lG;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.asArraysFactory=void 0;function uG(e){return()=>e.map(t=>t.items)}v0.asArraysFactory=uG;var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.asEntriesFactory=void 0;function cG(e){return t=>{var n,o;const l=(n=t==null?void 0:t.keyName)!==null&&n!==void 0?n:"key",h=(o=t==null?void 0:t.itemsName)!==null&&o!==void 0?o:"items";return e.map(g=>({[l]:g.key,[h]:g.items}))}}x0.asEntriesFactory=cG;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.asMapFactory=void 0;function hG(e){return()=>{const t=new Map;for(const n of e)t.set(n.key,n.items);return t}}b0.asMapFactory=hG;var w0={};Object.defineProperty(w0,"__esModule",{value:!0});w0.asObjectFactory=void 0;function dG(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"}function fG(e){return()=>{const t={};for(const n of e)dG(n.key)&&(t[n.key]=n.items);return t}}w0.asObjectFactory=fG;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.asTuplesFactory=void 0;function pG(e){return()=>e.map(t=>[t.key,t.items])}S0.asTuplesFactory=pG;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.keysFactory=void 0;function mG(e){return()=>e.map(t=>t.key)}E0.keysFactory=mG;var gG=Ef&&Ef.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(g0,"__esModule",{value:!0});g0.group=void 0;const yG=gG(Mw.exports),_G=_0,vG=v0,xG=x0,bG=b0,wG=w0,SG=S0,EG=E0;function kG(e,t){const n=[];let o=0;for(const l of e){const h=t(l,o);o++;const g=S=>(0,yG.default)(S.key,h),u=()=>({key:h,items:[]});(0,_G.findOrCreate)(n,g,u).items.push(l)}return n}function TG(e){return Object.freeze({by:n=>{const l=kG(e,typeof n=="function"?n:h=>h[n]);return Object.freeze({asArrays:(0,vG.asArraysFactory)(l),asEntries:(0,xG.asEntriesFactory)(l),asMap:(0,bG.asMapFactory)(l),asObject:(0,wG.asObjectFactory)(l),asTuples:(0,SG.asTuplesFactory)(l),keys:(0,EG.keysFactory)(l)})}})}g0.group=TG;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.group=void 0;var t=g0;Object.defineProperty(e,"group",{enumerable:!0,get:function(){return t.group}})})(AA);const zw={scheme:"Light Theme",author:"mac gainor (https://github.com/mac-s-g)",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},FA={scheme:"Dark Theme",author:"Chris Kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},OA=()=>null;OA.when=()=>!1;var Pv,Iv,Mv,Av,zv,Dv,Rv,Lv,Fv,Ov,$v,Bv,Vv,Nv,Uv;const CG=e=>PA(MA({enableClipboard:(Pv=e.enableClipboard)!==null&&Pv!==void 0?Pv:!0,indentWidth:(Iv=e.indentWidth)!==null&&Iv!==void 0?Iv:3,groupArraysAfterLength:(Mv=e.groupArraysAfterLength)!==null&&Mv!==void 0?Mv:100,collapseStringsAfterLength:e.collapseStringsAfterLength===!1?Number.MAX_VALUE:(Av=e.collapseStringsAfterLength)!==null&&Av!==void 0?Av:50,maxDisplayLength:(zv=e.maxDisplayLength)!==null&&zv!==void 0?zv:30,rootName:(Dv=e.rootName)!==null&&Dv!==void 0?Dv:"root",onChange:(Rv=e.onChange)!==null&&Rv!==void 0?Rv:()=>{},onCopy:(Lv=e.onCopy)!==null&&Lv!==void 0?Lv:void 0,keyRenderer:(Fv=e.keyRenderer)!==null&&Fv!==void 0?Fv:OA,editable:(Ov=e.editable)!==null&&Ov!==void 0?Ov:!1,defaultInspectDepth:($v=e.defaultInspectDepth)!==null&&$v!==void 0?$v:5,objectSortKeys:(Bv=e.objectSortKeys)!==null&&Bv!==void 0?Bv:!1,quotesOnKeys:(Vv=e.quotesOnKeys)!==null&&Vv!==void 0?Vv:!0,displayDataTypes:(Nv=e.displayDataTypes)!==null&&Nv!==void 0?Nv:!0,inspectCache:{},hoverPath:null,colorspace:zw,value:e.value,displayObjectSize:(Uv=e.displayObjectSize)!==null&&Uv!==void 0?Uv:!0},(t,n)=>({getInspectCache:(o,l)=>{const h=l!==void 0?o.join(".")+`[${l}]nt`:o.join(".");return n().inspectCache[h]},setInspectCache:(o,l,h)=>{const g=h!==void 0?o.join(".")+`[${h}]nt`:o.join(".");t(u=>({inspectCache:{...u.inspectCache,[g]:typeof l=="function"?l(u.inspectCache[g]):l}}))},setHover:(o,l)=>{t({hoverPath:o?{path:o,nestedIndex:l}:null})}}))),{useStore:an,useStoreApi:$A,Provider:PG}=IA(),Dw=()=>an(e=>e.colorspace.base07);function IG({timeout:e=2e3}={}){const[t,n]=W.exports.useState(!1),o=W.exports.useRef(null),l=W.exports.useCallback(S=>{const b=o.current;b&&window.clearTimeout(b),o.current=window.setTimeout(()=>n(!1),e),n(S)},[e]),h=an(S=>S.onCopy),g=W.exports.useCallback((S,b)=>{if(typeof h=="function")try{const C=h(S,b);C instanceof Promise?C.then(()=>{l(!0)}).catch(A=>{console.error(`error when copy ${S.length===0?"src":`src[${S.join(".")}`}]`,A)}):l(!0)}catch(C){console.error(`error when copy ${S.length===0?"src":`src[${S.join(".")}`}]`,C)}else{const C=JSON.stringify(typeof b=="function"?b.toString():b,null,"  ");"clipboard"in navigator?navigator.clipboard.writeText(C).then(()=>l(!0)).catch(()=>Tk(C)):Tk(C)}},[l,h]),u=W.exports.useCallback(()=>{n(!1),o.current&&clearTimeout(o.current)},[]);return{copy:g,reset:u,copied:t}}const MG=(e,t,n)=>{if(e===null||n===null||typeof e!="object"||typeof n!="object")return!1;if(Object.is(e,n)&&t.length!==0)return"";const o=[],l=[...t];let h=e;for(;h!==n||l.length!==0;){if(typeof h!="object"||h===null)return!1;if(Object.is(h,n))return o.reduce((u,S,b)=>typeof S=="number"?u+`[${S}]`:u+`${b===0?"":"."}${S}`,"");const g=l.shift();o.push(g),h=h[g]}return!1};function Rw(e,t){const n=an(o=>o.value);return W.exports.useMemo(()=>MG(n,e,t),[e,t,n])}function AG(e,t,n){const o=e.length,l=Rw(e,t),h=an(A=>A.getInspectCache),g=an(A=>A.setInspectCache),u=an(A=>A.defaultInspectDepth);W.exports.useEffect(()=>{if(h(e,n)===void 0)if(n!==void 0)g(e,!1,n);else{const z=l?!1:o<u;g(e,z)}},[u,o,h,l,n,e,g]);const[S,b]=W.exports.useState(()=>{const A=h(e,n);return A!==void 0?A:n!==void 0||l?!1:o<u}),C=W.exports.useCallback(A=>{b(z=>{const j=typeof A=="boolean"?A:A(z);return g(e,j,n),j})},[n,e,g]);return[S,C]}class zG extends Error{constructor(t){super(t?`${t}
`:`The behavior is not expected and not allowed.
If you see this in development, please fix the error ASAP.
If you see this in production, please contract our customer service.
`)}}const yl=$h(e=>bt(Rr,{component:"div",...e}))`
  display: inline-block;
`,BA=({dataType:e,enable:t=!0})=>t?bt(yl,{className:"data-type-label",sx:{mx:.5,fontSize:"0.7rem",opacity:.8},children:e}):null;function fs(e,t,n){var o;const l=(o=n.displayTypeLabel)!==null&&o!==void 0?o:!0,h=Oe.memo(t),g=b=>{const C=an(z=>z.displayDataTypes),A=an(z=>z.colorspace[n.colorKey]);return Vi(yl,{sx:{color:A},children:[l&&C&&bt(BA,{dataType:e}),bt(yl,{className:`${e}-value`,children:bt(h,{value:b.value})})]})};if(g.displayName=`easy-${e}-type`,!n.fromString)return{Component:g};const u=n.fromString,S=({value:b,setValue:C})=>{const A=an(z=>z.colorspace[n.colorKey]);return bt(Ij,{value:`${b}`,onChange:W.exports.useCallback(z=>{const j=u(z.target.value);C(j)},[C]),size:"small",multiline:!0,sx:{color:A,padding:.5,borderStyle:"solid",borderColor:"black",borderWidth:1,fontSize:"0.8rem",fontFamily:"monospace",display:"inline-flex"}})};return S.displayName=`easy-${e}-type-editor`,{Component:g,Editor:S}}const DG=e=>{const t=e.toString();let n=!0;const o=t.indexOf(")"),l=t.indexOf("=>");return l!==-1&&l>o&&(n=!1),n?t.substring(t.indexOf("{",o)+1,t.lastIndexOf("}")):t.substring(t.indexOf("=>")+2)},RG=e=>{const t=e.toString();return t.indexOf("function")!==-1?t.substring(8,t.indexOf("{")).trim():t.substring(0,t.indexOf("=>")+2).trim()},LG="{",FG="}",OG=e=>Vi(Iw,{children:[bt(BA,{dataType:"function"}),Vi(Rr,{component:"span",className:"data-function-start",sx:{letterSpacing:.5},children:[RG(e.value)," ",LG]})]}),$G=()=>bt(Iw,{children:bt(Rr,{component:"span",className:"data-function-end",children:FG})}),BG=e=>{const t=an(n=>n.colorspace.base05);return bt(Iw,{children:bt(Rr,{className:"data-function",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?2:0,color:t},children:e.inspect?DG(e.value):bt(Rr,{component:"span",className:"data-function-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})})},VG=e=>bt(Cx,{...e,children:bt("path",{d:"M 12 2 C 10.615 1.998 9.214625 2.2867656 7.890625 2.8847656 L 8.9003906 4.6328125 C 9.9043906 4.2098125 10.957 3.998 12 4 C 15.080783 4 17.738521 5.7633175 19.074219 8.3222656 L 17.125 9 L 21.25 11 L 22.875 7 L 20.998047 7.6523438 C 19.377701 4.3110398 15.95585 2 12 2 z M 6.5097656 4.4882812 L 2.2324219 5.0820312 L 3.734375 6.3808594 C 1.6515335 9.4550558 1.3615962 13.574578 3.3398438 17 C 4.0308437 18.201 4.9801562 19.268234 6.1601562 20.115234 L 7.1699219 18.367188 C 6.3019219 17.710187 5.5922656 16.904 5.0722656 16 C 3.5320014 13.332354 3.729203 10.148679 5.2773438 7.7128906 L 6.8398438 9.0625 L 6.5097656 4.4882812 z M 19.929688 13 C 19.794687 14.08 19.450734 15.098 18.927734 16 C 17.386985 18.668487 14.531361 20.090637 11.646484 19.966797 L 12.035156 17.9375 L 8.2402344 20.511719 L 10.892578 23.917969 L 11.265625 21.966797 C 14.968963 22.233766 18.681899 20.426323 20.660156 17 C 21.355156 15.801 21.805219 14.445 21.949219 13 L 19.929688 13 z"})}),NG="{",UG="[",jG="}",GG="]";function VA(e){let t,n="";return Array.isArray(e)?t=e.length:e instanceof Map||e instanceof Set?(n=e[Symbol.toStringTag],t=e.size):t=Object.keys(e).length,Object.prototype.hasOwnProperty.call(e,Symbol.toStringTag)&&(n=e[Symbol.toStringTag]),`${t} Items${n?` (${n})`:""}`}const WG=e=>{const t=an(u=>u.colorspace.base04),n=Dw(),o=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),l=W.exports.useMemo(()=>e.inspect?VA(e.value):"",[e.inspect,e.value]),h=an(u=>u.displayObjectSize),g=Rw(e.path,e.value);return Vi(Rr,{component:"span",className:"data-object-start",sx:{letterSpacing:.5},children:[o?UG:NG,h?bt(Rr,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null,g&&!e.inspect?Vi(Co,{children:[bt(VG,{sx:{fontSize:12,color:n,mx:.5}}),g]}):null]})},qG=e=>{const t=an(h=>h.colorspace.base04),n=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),o=an(h=>h.displayObjectSize),l=W.exports.useMemo(()=>e.inspect?"":VA(e.value),[e.inspect,e.value]);return Vi(Rr,{component:"span",className:"data-object-end",children:[n?GG:jG,o?bt(Rr,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null]})};function ZG(e){return typeof(e==null?void 0:e[Symbol.iterator])=="function"}const HG=e=>{const t=Dw(),n=an(z=>z.colorspace.base02),o=an(z=>z.groupArraysAfterLength),l=Rw(e.path,e.value),[h,g]=W.exports.useState(an(z=>z.maxDisplayLength)),u=an(z=>z.objectSortKeys),S=W.exports.useMemo(()=>{if(!e.inspect)return null;const z=e.value;if(ZG(z)&&!Array.isArray(z)){const de=[];if(z instanceof Map)for(const B of z){const[N,K]=B,ce=`${N}`;de.push(bt(Wc,{path:[...e.path,ce],value:K,editable:!1},ce))}else{let B=0;for(const N of z)de.push(bt(Wc,{path:[...e.path,`iterator:${B}`],value:N,nestedIndex:B,editable:!1},B)),B++}return de}if(Array.isArray(z)){if(z.length<=o){const B=z.slice(0,h).map((N,K)=>{const ce=[...e.path,K];return bt(Wc,{path:ce,value:N},K)});if(z.length>h){const N=z.length-h;B.push(Vi(yl,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>g(K=>K*2),children:["hidden ",N," items..."]},"last"))}return B}return AA.group(z).by((B,N)=>Math.floor(N/o)).asArrays().map((B,N)=>{const K=[...e.path];return bt(Wc,{path:K,value:B,nestedIndex:N},N)})}let Z=Object.entries(z);u&&(Z=Z.sort(([de],[B])=>u===!0?de.localeCompare(B):u(de,B)));const H=Z.slice(0,h).map(([de,B])=>{const N=[...e.path,de];return bt(Wc,{path:N,value:B},de)});if(Z.length>h){const de=Z.length-h;H.push(Vi(yl,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>g(B=>B*2),children:["hidden ",de," items..."]},"last"))}return H},[e.inspect,e.value,e.path,o,h,t,u]),b=e.inspect?.6:0,C=an(z=>z.indentWidth),A=e.inspect?C-b:C;return bt(Rr,{className:"data-object",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?A-.6:0,marginLeft:b,color:t,borderLeft:e.inspect?`1px solid ${n}`:"none"},children:e.inspect?S:l?null:bt(Rr,{component:"span",className:"data-object-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})},XG=()=>PA(MA({registry:[]},e=>({registerTypes:t=>{e(n=>({registry:typeof t=="function"?t(n.registry):t}))}}))),{Provider:KG,useStore:NA,useStoreApi:lZ}=IA(),YG={is:e=>typeof e=="object",Component:HG,PreComponent:WG,PostComponent:qG};function JG(e,t,n){let o;for(const l of n)if(l.is(e,t)&&(o=l,typeof e=="object"))return l;if(o===void 0){if(typeof e=="object")return YG;throw new zG("this is not possible")}return o}function QG(e,t){const n=NA(o=>o.registry);return W.exports.useMemo(()=>JG(e,t,n),[e,t,n])}function eW(){const e=[];function t(l){function h(g,u){var S,b;return Object.is(g.value,u.value)&&g.inspect&&u.inspect&&((S=g.path)===null||S===void 0?void 0:S.join("."))===((b=u.path)===null||b===void 0?void 0:b.join("."))}l.Component=W.exports.memo(l.Component,h),l.Editor&&(l.Editor=W.exports.memo(l.Editor,function(u,S){return Object.is(u.value,S.value)})),l.PreComponent&&(l.PreComponent=W.exports.memo(l.PreComponent,h)),l.PostComponent&&(l.PostComponent=W.exports.memo(l.PostComponent,h)),e.push(l)}t({is:l=>typeof l=="boolean",...fs("bool",({value:l})=>bt(Co,{children:l?"true":"false"}),{colorKey:"base0E",fromString:l=>Boolean(l)})});const n={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};t({is:l=>l instanceof Date,...fs("date",({value:l})=>bt(Co,{children:l.toLocaleTimeString("en-us",n)}),{colorKey:"base0D"})}),t({is:l=>l===null,...fs("null",()=>{const l=an(h=>h.colorspace.base02);return bt(Rr,{sx:{fontSize:"0.8rem",backgroundColor:l,fontWeight:"bold",borderRadius:"3px",padding:"0.5px 2px"},children:"NULL"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>l===void 0,...fs("undefined",()=>{const l=an(h=>h.colorspace.base02);return bt(Rr,{sx:{fontSize:"0.7rem",backgroundColor:l,borderRadius:"3px",padding:"0.5px 2px"},children:"undefined"})},{colorKey:"base05",displayTypeLabel:!1})}),t({is:l=>typeof l=="string",...fs("string",l=>{const[h,g]=W.exports.useState(!1),u=an(C=>C.collapseStringsAfterLength),S=h?l.value:l.value.slice(0,u),b=l.value.length>u;return Vi(Rr,{component:"span",sx:{overflowWrap:"anywhere",cursor:b?"pointer":"inherit"},onClick:()=>{g(C=>!C)},children:['"',S,h?bt("span",{children:"..."}):bt(Co,{}),'"']})},{colorKey:"base09",fromString:l=>l})}),t({is:l=>typeof l=="function",Component:BG,PreComponent:OG,PostComponent:$G});const o=l=>l%1===0;return t({is:l=>typeof l=="number"&&isNaN(l),...fs("NaN",()=>{const l=an(h=>h.colorspace.base02);return bt(Rr,{sx:{backgroundColor:l,fontSize:"0.8rem",fontWeight:"bold",borderRadius:"3px"},children:"NaN"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>typeof l=="number"&&!o(l),...fs("float",({value:l})=>bt(Co,{children:`${l}`}),{colorKey:"base0B",fromString:l=>parseFloat(l)})}),t({is:l=>typeof l=="number"&&o(l),...fs("int",({value:l})=>bt(Co,{children:`${l}`}),{colorKey:"base0F",fromString:l=>parseInt(l)})}),t({is:l=>typeof l=="bigint",...fs("bigint",({value:l})=>bt(Co,{children:`${l}n`}),{colorKey:"base0F",fromString:l=>BigInt(l.replace(/\D/g,""))})}),e}const qm=$h(e=>bt(Rr,{...e,component:"span"}))`
  cursor: pointer;
  padding-left: 0.7rem;
`,Wc=e=>{const{value:t,path:n,nestedIndex:o}=e;var l;const h=(l=e.editable)!==null&&l!==void 0?l:void 0,g=an(at=>at.editable),u=W.exports.useMemo(()=>g===!1||h===!1?!1:typeof g=="function"?!!g(n,t):g,[n,h,g,t]),[S,b]=W.exports.useState(typeof t=="function"?()=>t:t),C=n.length,A=n[C-1],z=an(at=>at.hoverPath),j=W.exports.useMemo(()=>z&&n.every((at,hn)=>at===z.path[hn]&&o===z.nestedIndex),[z,n,o]),Z=an(at=>at.setHover),H=an(at=>at.value),[de,B]=AG(n,t,o),[N,K]=W.exports.useState(!1),ce=an(at=>at.onChange),ue=Dw(),ye=an(at=>at.colorspace.base0C),{Component:me,PreComponent:Te,PostComponent:Ne,Editor:we}=QG(t,n),nt=an(at=>at.quotesOnKeys),wt=an(at=>at.rootName),It=H===t,Lt=Number.isInteger(Number(A)),Bt=an(at=>at.enableClipboard),{copy:cn,copied:bn}=IG(),Ue=W.exports.useMemo(()=>N?Vi(Co,{children:[bt(qm,{children:bt(Dj,{sx:{fontSize:".8rem"},onClick:()=>{K(!1),b(t)}})}),bt(qm,{children:bt(qT,{sx:{fontSize:".8rem"},onClick:()=>{K(!1),ce(n,t,S)}})})]}):Vi(Co,{children:[Bt&&bt(qm,{onClick:at=>{at.preventDefault();try{cn(n,t)}catch(hn){console.error(hn)}},children:bn?bt(qT,{sx:{fontSize:".8rem"}}):bt(Rj,{sx:{fontSize:".8rem"}})}),we&&u&&bt(qm,{onClick:at=>{at.preventDefault(),K(!0)},children:bt(Lj,{sx:{fontSize:".8rem"}})})]}),[we,bn,cn,u,N,Bt,ce,n,S,t]),ot=!!(Te&&Ne),Tt=an(at=>at.keyRenderer),Ot=W.exports.useMemo(()=>({path:n,inspect:de,setInspect:B,value:t}),[de,n,B,t]);return Vi(Rr,{className:"data-key-pair","data-testid":"data-key-pair"+n.join("."),onMouseEnter:W.exports.useCallback(()=>Z(n,o),[Z,n,o]),children:[Vi(yl,{component:"span",className:"data-key",sx:{lineHeight:1.5,color:ue,letterSpacing:.5,opacity:.8},onClick:W.exports.useCallback(at=>{at.isDefaultPrevented()||B(hn=>!hn)},[B]),children:[ot?de?bt(Fj,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):bt(zj,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):null,It?wt!==!1?nt?Vi(Co,{children:['"',wt,'"']}):bt(Co,{children:wt}):null:Tt.when(Ot)?bt(Tt,{...Ot}):o===void 0&&(Lt?bt(Rr,{component:"span",style:{color:ye},children:A}):nt?Vi(Co,{children:['"',A,'"']}):bt(Co,{children:A})),It?wt!==!1?bt(yl,{sx:{mx:.5},children:":"}):null:o===void 0&&bt(yl,{sx:{mx:.5},children:":"}),Te&&bt(Te,{...Ot}),j&&ot&&de&&Ue]}),N&&u?we&&bt(we,{value:S,setValue:b}):me?bt(me,{...Ot}):bt(Rr,{component:"span",className:"data-value-fallback",children:`fallback: ${t}`}),Ne&&bt(Ne,{...Ot}),j&&ot&&!de&&Ue,j&&!ot&&Ue]})},rC="(prefers-color-scheme: dark)";function tW(){const[e,t]=W.exports.useState(!1);return W.exports.useEffect(()=>{const n=l=>{t(l.matches)};t(window.matchMedia(rC).matches);const o=window.matchMedia(rC);return o.addEventListener("change",n),()=>o.removeEventListener("change",n)},[]),e}function qo(e,t){const n=$A();W.exports.useEffect(()=>{t!==void 0&&n.setState({[e]:t})},[e,t,n])}const nW=e=>{const t=$A();qo("value",e.value),qo("editable",e.editable),qo("indentWidth",e.indentWidth),qo("onChange",e.onChange),qo("groupArraysAfterLength",e.groupArraysAfterLength),qo("keyRenderer",e.keyRenderer),qo("maxDisplayLength",e.maxDisplayLength),qo("enableClipboard",e.enableClipboard),qo("rootName",e.rootName),qo("displayDataTypes",e.displayDataTypes),qo("displayObjectSize",e.displayObjectSize),qo("onCopy",e.onCopy),W.exports.useEffect(()=>{e.theme==="light"?t.setState({colorspace:zw}):e.theme==="dark"?t.setState({colorspace:FA}):typeof e.theme=="object"&&t.setState({colorspace:e.theme})},[t,e.theme]);const n=W.exports.useRef(!0),o=W.exports.useMemo(()=>eW(),[]),l=NA(S=>S.registerTypes);if(n.current){var h;const S=[...o];(h=e.valueTypes)===null||h===void 0||h.forEach(b=>{S.push(b)}),l(S),n.current=!1}W.exports.useEffect(()=>{var S;const b=[...o];(S=e.valueTypes)===null||S===void 0||S.forEach(C=>{b.push(C)}),l(b)},[o,e.valueTypes,l]);const g=an(S=>S.value),u=an(S=>S.setHover);return bt(fj,{elevation:0,className:e.className,style:e.style,sx:{fontFamily:"monospace",userSelect:"none",contentVisibility:"auto"},onMouseLeave:W.exports.useCallback(()=>{u(null)},[u]),children:bt(Wc,{value:g,path:W.exports.useMemo(()=>[],[])})})},rW=function(t){const n=tW();var o;const l=W.exports.useMemo(()=>t.theme==="auto"?n?"light":"dark":(o=t.theme)!==null&&o!==void 0?o:"light",[n,t.theme]),h=W.exports.useMemo(()=>{const u=typeof l=="object"?l.base00:l==="dark"?FA.base00:zw.base00;return Tw({components:{MuiPaper:{styleOverrides:{root:{backgroundColor:u}}}},palette:{mode:l==="dark"?"dark":"light",background:{default:u}}})},[l]),g={...t,theme:l};return bt(EU,{theme:h,children:bt(KG,{createStore:XG,children:bt(PG,{createStore:()=>CG(t),children:bt(nW,{...g})})})})},iW=un("div",{padding:"2rem"}),oW=un("div",{paddingBottom:"2rem",fontFamily:"monospace"});function aW(e){const[t,n]=W.exports.useState(),[o,l]=W.exports.useState(null);return W.exports.useEffect(()=>{const h=e.file;(async()=>{n(await h.getMetadata()),l(await h.getHeader())})()},[e.file]),Pt(iW,{children:[o?Pt(oW,{children:[Pt("div",{children:["root directory: offset=",o.rootDirectoryOffset," len=",o.rootDirectoryLength]}),Pt("div",{children:["metadata: offset=",o.jsonMetadataOffset," len=",o.jsonMetadataLength]}),Pt("div",{children:["leaf directories: offset=",o.leafDirectoryOffset," len=",o.leafDirectoryLength]}),Pt("div",{children:["tile data: offset=",o.tileDataOffset," len=",o.tileDataLength]}),Pt("div",{children:["num addressed tiles: ",o.numAddressedTiles]}),Pt("div",{children:["num tile entries: ",o.numTileEntries]}),Pt("div",{children:["num tile contents: ",o.numTileContents]}),Pt("div",{children:["clustered: ",o.clustered?"true":"false"]}),Pt("div",{children:["internal compression: ",o.internalCompression]}),Pt("div",{children:["tile compression: ",o.tileCompression]}),Pt("div",{children:["tile type: ",o.tileType]}),Pt("div",{children:["min zoom: ",o.minZoom]}),Pt("div",{children:["max zoom: ",o.maxZoom]}),Pt("div",{children:["min lon, min lat, max lon, max lat: ",o.minLon,", ",o.minLat,", ",o.maxLon,", ",o.maxLat]}),Pt("div",{children:["center zoom: ",o.centerZoom]}),Pt("div",{children:["center lon, center lat: ",o.centerLon,", ",o.centerLat]})]}):null,Be(rW,{value:t,theme:"dark",defaultInspectDepth:1})]})}const sW=W.exports.forwardRef((e,t)=>{const{pressed:n,defaultPressed:o=!1,onPressedChange:l,...h}=e,[g=!1,u]=op({prop:n,onChange:l,defaultProp:o});return W.exports.createElement(uo.button,Ze({type:"button","aria-pressed":g,"data-state":g?"on":"off","data-disabled":e.disabled?"":void 0},h,{ref:t,onClick:ji(e.onClick,()=>{e.disabled||u(!g)})}))});function lW(e){const t=e+"CollectionProvider",[n,o]=ap(t),[l,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),g=z=>{const{scope:j,children:Z}=z,H=Oe.useRef(null),de=Oe.useRef(new Map).current;return Oe.createElement(l,{scope:j,itemMap:de,collectionRef:H},Z)},u=e+"CollectionSlot",S=Oe.forwardRef((z,j)=>{const{scope:Z,children:H}=z,de=h(u,Z),B=Ts(j,de.collectionRef);return Oe.createElement(Uf,{ref:B},H)}),b=e+"CollectionItemSlot",C="data-radix-collection-item";return[{Provider:g,Slot:S,ItemSlot:Oe.forwardRef((z,j)=>{const{scope:Z,children:H,...de}=z,B=Oe.useRef(null),N=Ts(j,B),K=h(b,Z);return Oe.useEffect(()=>(K.itemMap.set(B,{ref:B,...de}),()=>{K.itemMap.delete(B)})),Oe.createElement(Uf,{[C]:"",ref:N},H)})},function(z){const j=h(e+"CollectionConsumer",z);return Oe.useCallback(()=>{const Z=j.collectionRef.current;if(!Z)return[];const H=Array.from(Z.querySelectorAll(`[${C}]`));return Array.from(j.itemMap.values()).sort((de,B)=>H.indexOf(de.ref.current)-H.indexOf(B.ref.current))},[j.collectionRef,j.itemMap])},o]}const uW={bubbles:!1,cancelable:!0},[Mx,UA,cW]=lW("RovingFocusGroup"),[hW,k0]=ap("RovingFocusGroup",[cW]),[dW,fW]=hW("RovingFocusGroup"),pW=W.exports.forwardRef((e,t)=>W.exports.createElement(Mx.Provider,{scope:e.__scopeRovingFocusGroup},W.exports.createElement(Mx.Slot,{scope:e.__scopeRovingFocusGroup},W.exports.createElement(mW,Ze({},e,{ref:t}))))),mW=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,dir:l="ltr",loop:h=!1,currentTabStopId:g,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:S,onEntryFocus:b,...C}=e,A=W.exports.useRef(null),z=Ts(t,A),[j=null,Z]=op({prop:g,defaultProp:u,onChange:S}),[H,de]=W.exports.useState(!1),B=bl(b),N=UA(n),K=W.exports.useRef(!1);return W.exports.useEffect(()=>{const ce=A.current;if(ce)return ce.addEventListener("rovingFocusGroup.onEntryFocus",B),()=>ce.removeEventListener("rovingFocusGroup.onEntryFocus",B)},[B]),W.exports.createElement(dW,{scope:n,orientation:o,dir:l,loop:h,currentTabStopId:j,onItemFocus:W.exports.useCallback(ce=>Z(ce),[Z]),onItemShiftTab:W.exports.useCallback(()=>de(!0),[])},W.exports.createElement(uo.div,Ze({tabIndex:H?-1:0,"data-orientation":o},C,{ref:z,style:{outline:"none",...e.style},onMouseDown:ji(e.onMouseDown,()=>{K.current=!0}),onFocus:ji(e.onFocus,ce=>{const ue=!K.current;if(ce.target===ce.currentTarget&&ue&&!H){const ye=new Event("rovingFocusGroup.onEntryFocus",uW);if(ce.currentTarget.dispatchEvent(ye),!ye.defaultPrevented){const me=N().filter(Te=>Te.focusable);jA([me.find(Te=>Te.active),me.find(Te=>Te.id===j),...me].filter(Boolean).map(Te=>Te.ref.current))}}K.current=!1}),onBlur:ji(e.onBlur,()=>de(!1))})))}),gW=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:l=!1,...h}=e,g=_f(),u=fW("RovingFocusGroupItem",n),S=u.currentTabStopId===g,b=UA(n);return W.exports.createElement(Mx.ItemSlot,{scope:n,id:g,focusable:o,active:l},W.exports.createElement(uo.span,Ze({tabIndex:S?0:-1,"data-orientation":u.orientation},h,{ref:t,onMouseDown:ji(e.onMouseDown,C=>{o?u.onItemFocus(g):C.preventDefault()}),onFocus:ji(e.onFocus,()=>u.onItemFocus(g)),onKeyDown:ji(e.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey)return void u.onItemShiftTab();if(C.target!==C.currentTarget)return;const A=function(Z,H,de){const B=function(N,K){return K!=="rtl"?N:N==="ArrowLeft"?"ArrowRight":N==="ArrowRight"?"ArrowLeft":N}(Z.key,de);return H==="vertical"&&["ArrowLeft","ArrowRight"].includes(B)||H==="horizontal"&&["ArrowUp","ArrowDown"].includes(B)?void 0:yW[B]}(C,u.orientation,u.dir);if(A!==void 0){C.preventDefault();let Z=b().filter(H=>H.focusable).map(H=>H.ref.current);if(A==="last")Z.reverse();else if(A==="prev"||A==="next"){A==="prev"&&Z.reverse();const H=Z.indexOf(C.currentTarget);Z=u.loop?(j=H+1,(z=Z).map((de,B)=>z[(j+B)%z.length])):Z.slice(H+1)}setTimeout(()=>jA(Z))}var z,j})})))}),yW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jA(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}const GA=pW,Lw=gW,[WA,qA]=ap("ToggleGroup",[k0]),ZA=k0(),_W=Oe.forwardRef((e,t)=>{const{type:n,...o}=e;if(n==="single"){const l=o;return Oe.createElement(vW,Ze({},l,{ref:t}))}if(n==="multiple"){const l=o;return Oe.createElement(xW,Ze({},l,{ref:t}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")}),[HA,XA]=WA("ToggleGroup"),vW=Oe.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:l=()=>{},...h}=e,[g,u]=op({prop:n,defaultProp:o,onChange:l});return Oe.createElement(HA,{scope:e.__scopeToggleGroup,type:"single",value:g?[g]:[],onItemActivate:u,onItemDeactivate:Oe.useCallback(()=>u(""),[u])},Oe.createElement(KA,Ze({},h,{ref:t})))}),xW=Oe.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:l=()=>{},...h}=e,[g=[],u]=op({prop:n,defaultProp:o,onChange:l}),S=Oe.useCallback(C=>u((A=[])=>[...A,C]),[u]),b=Oe.useCallback(C=>u((A=[])=>A.filter(z=>z!==C)),[u]);return Oe.createElement(HA,{scope:e.__scopeToggleGroup,type:"multiple",value:g,onItemActivate:S,onItemDeactivate:b},Oe.createElement(KA,Ze({},h,{ref:t})))}),[bW,wW]=WA("ToggleGroup"),KA=Oe.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:o=!1,rovingFocus:l=!0,orientation:h,dir:g="ltr",loop:u=!0,...S}=e,b=ZA(n),C={role:"group",dir:g,...S};return Oe.createElement(bW,{scope:n,rovingFocus:l,disabled:o},l?Oe.createElement(GA,Ze({asChild:!0},b,{orientation:h,dir:g,loop:u}),Oe.createElement(uo.div,Ze({},C,{ref:t}))):Oe.createElement(uo.div,Ze({},C,{ref:t})))}),SW=Oe.forwardRef((e,t)=>{const n=XA("ToggleGroupItem",e.__scopeToggleGroup),o=wW("ToggleGroupItem",e.__scopeToggleGroup),l=ZA(e.__scopeToggleGroup),h=n.value.includes(e.value),g=o.disabled||e.disabled,u={...e,pressed:h,disabled:g},S=Oe.useRef(null);return o.rovingFocus?Oe.createElement(Lw,Ze({asChild:!0},l,{focusable:!g,active:h,ref:S}),Oe.createElement(iC,Ze({},u,{ref:t}))):Oe.createElement(iC,Ze({},u,{ref:t}))}),iC=Oe.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:o,...l}=e,h=XA("ToggleGroupItem",n),g={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u=h.type==="single"?g:void 0;return Oe.createElement(sW,Ze({},u,l,{ref:t,onPressedChange:S=>{S?h.onItemActivate(o):h.onItemDeactivate(o)}}))}),EW=_W,kW=SW,[TW,uZ]=ap("Toolbar",[k0,qA]),Fw=k0(),YA=qA(),[CW,PW]=TW("Toolbar"),IW=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,orientation:o="horizontal",dir:l="ltr",loop:h=!0,...g}=e,u=Fw(n);return W.exports.createElement(CW,{scope:n,orientation:o},W.exports.createElement(GA,Ze({asChild:!0},u,{orientation:o,dir:l,loop:h}),W.exports.createElement(uo.div,Ze({role:"toolbar","aria-orientation":o,dir:l},g,{ref:t}))))}),MW=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=Fw(n);return W.exports.createElement(Lw,Ze({asChild:!0},l,{focusable:!e.disabled}),W.exports.createElement(uo.button,Ze({type:"button"},o,{ref:t})))}),AW=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=Fw(n);return W.exports.createElement(Lw,Ze({asChild:!0},l,{focusable:!0}),W.exports.createElement(uo.a,Ze({},o,{ref:t,onKeyDown:ji(e.onKeyDown,h=>{h.key===" "&&h.currentTarget.click()})})))}),zW=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=PW("ToolbarToggleGroup",n),h=YA(n);return W.exports.createElement(EW,Ze({"data-orientation":l.orientation},h,o,{ref:t,rovingFocus:!1}))}),DW=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:n,...o}=e,l=YA(n);return W.exports.createElement(MW,Ze({asChild:!0},e),W.exports.createElement(kW,Ze({},l,o,{ref:t})))}),RW=IW,LW=AW,FW=zW,OW=DW,$W=un(RW,{display:"flex",height:"$4",width:"100%",boxSizing:"border-box",minWidth:"max-content",backgroundColor:"white",boxShadow:'0 2px 10px "black"'}),JA={all:"unset",flex:"0 0 auto",color:"$black",display:"inline-flex",padding:"0 $1 0 $1",fontSize:"$2",alignItems:"center","&:hover":{backgroundColor:"$hover",color:"$white"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px blue"}},BW=un(LW,{...JA,backgroundColor:"transparent",color:"black",display:"inline-flex",justifyContent:"center",alignItems:"center"},{"&:hover":{backgroundColor:"$hover",color:"$white",cursor:"pointer"}}),VW=un(FW,{display:"inline-flex",borderRadius:4}),NW=un(OW,{...JA,boxShadow:0,backgroundColor:"white",marginLeft:2,cursor:"pointer","&:first-child":{marginLeft:0},"&[data-state=on]":{backgroundColor:"$primary",color:"$primaryText"}}),UW=$W,jW=BW,GW=VW,jv=NW;function WW(e){const[t,n]=W.exports.useState("maplibre");let o;return t==="maplibre"?o=Be(GV,{file:e.file,mapHashPassed:e.mapHashPassed}):t==="inspector"?o=Be(_B,{file:e.file}):o=Be(aW,{file:e.file}),Pt(jf,{children:[Pt(UW,{"aria-label":"Formatting options",children:[Pt(GW,{type:"single",defaultValue:"center","aria-label":"Text alignment",value:t,onValueChange:n,children:[Be(jv,{value:"maplibre","aria-label":"Right aligned",children:"Map View"}),Pt(jv,{value:"inspector","aria-label":"Left aligned",children:[Be(FL,{})," Tile Inspector"]}),Be(jv,{value:"metadata","aria-label":"Left aligned",children:"Metadata"})]}),Be(jW,{css:{marginRight:10},children:e.file.source.getKey()})]}),o]})}function Vh(e,t,n,o){function l(h){return h instanceof n?h:new n(function(g){g(h)})}return new(n||(n=Promise))(function(h,g){function u(C){try{b(o.next(C))}catch(A){g(A)}}function S(C){try{b(o.throw(C))}catch(A){g(A)}}function b(C){C.done?h(C.value):l(C.value).then(u,S)}b((o=o.apply(e,t||[])).next())})}function Nh(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,l,h,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(b){return function(C){return S([b,C])}}function S(b){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,l&&(h=b[0]&2?l.return:b[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,b[1])).done)return h;switch(l=0,h&&(b=[b[0]&2,h.value]),b[0]){case 0:case 1:h=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,l=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!h||b[1]>h[0]&&b[1]<h[3])){n.label=b[1];break}if(b[0]===6&&n.label<h[1]){n.label=h[1],h=b;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(b);break}h[2]&&n.ops.pop(),n.trys.pop();continue}b=t.call(e,n)}catch(C){b=[6,C],l=0}finally{o=h=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}function qW(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),l,h=[],g;try{for(;(t===void 0||t-- >0)&&!(l=o.next()).done;)h.push(l.value)}catch(u){g={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(g)throw g.error}}return h}function ZW(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(qW(arguments[t]));return e}var HW=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function pp(e,t){var n=XW(e);if(typeof n.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function XW(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var o=t.split(".").pop().toLowerCase(),l=HW.get(o);l&&Object.defineProperty(e,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return e}var KW=[".DS_Store","Thumbs.db"];function YW(e){return Vh(this,void 0,void 0,function(){return Nh(this,function(t){return _y(e)&&JW(e)?[2,nq(e.dataTransfer,e.type)]:QW(e)?[2,eq(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,tq(e)]:[2,[]]})})}function JW(e){return _y(e.dataTransfer)}function QW(e){return _y(e)&&_y(e.target)}function _y(e){return typeof e=="object"&&e!==null}function eq(e){return Ax(e.target.files).map(function(t){return pp(t)})}function tq(e){return Vh(this,void 0,void 0,function(){var t;return Nh(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(o){return o.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(o){return pp(o)})]}})})}function nq(e,t){return Vh(this,void 0,void 0,function(){var n,o;return Nh(this,function(l){switch(l.label){case 0:return e===null?[2,[]]:e.items?(n=Ax(e.items).filter(function(h){return h.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(rq))]):[3,2];case 1:return o=l.sent(),[2,oC(QA(o))];case 2:return[2,oC(Ax(e.files).map(function(h){return pp(h)}))]}})})}function oC(e){return e.filter(function(t){return KW.indexOf(t.name)===-1})}function Ax(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(o)}return t}function rq(e){if(typeof e.webkitGetAsEntry!="function")return aC(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?ez(t):aC(e)}function QA(e){return e.reduce(function(t,n){return ZW(t,Array.isArray(n)?QA(n):[n])},[])}function aC(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=pp(t);return Promise.resolve(n)}function iq(e){return Vh(this,void 0,void 0,function(){return Nh(this,function(t){return[2,e.isDirectory?ez(e):oq(e)]})})}function ez(e){var t=e.createReader();return new Promise(function(n,o){var l=[];function h(){var g=this;t.readEntries(function(u){return Vh(g,void 0,void 0,function(){var S,b,C;return Nh(this,function(A){switch(A.label){case 0:if(u.length)return[3,5];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,Promise.all(l)];case 2:return S=A.sent(),n(S),[3,4];case 3:return b=A.sent(),o(b),[3,4];case 4:return[3,6];case 5:C=Promise.all(u.map(iq)),l.push(C),h(),A.label=6;case 6:return[2]}})})},function(u){o(u)})}h()})}function oq(e){return Vh(this,void 0,void 0,function(){return Nh(this,function(t){return[2,new Promise(function(n,o){e.file(function(l){var h=pp(l,e.fullPath);n(h)},function(l){o(l)})})]})})}var aq=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),o=e.name||"",l=(e.type||"").toLowerCase(),h=l.replace(/\/.*$/,"");return n.some(function(g){var u=g.trim().toLowerCase();return u.charAt(0)==="."?o.toLowerCase().endsWith(u):u.endsWith("/*")?h===u.replace(/\/.*$/,""):l===u})}return!0};function sC(e){return uq(e)||lq(e)||tz(e)||sq()}function sq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lq(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uq(e){if(Array.isArray(e))return zx(e)}function cq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qf(e,t){return fq(e)||dq(e,t)||tz(e,t)||hq()}function hq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tz(e,t){if(!!e){if(typeof e=="string")return zx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zx(e,t)}}function zx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function dq(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,g,u;try{for(n=n.call(e);!(l=(g=n.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function fq(e){if(Array.isArray(e))return e}var pq="file-invalid-type",mq="file-too-large",gq="file-too-small",yq="too-many-files",_q=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:pq,message:"File type must be ".concat(n)}},lC=function(t){return{code:mq,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},uC=function(t){return{code:gq,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},vq={code:yq,message:"Too many files"};function nz(e,t){var n=e.type==="application/x-moz-file"||aq(e,t);return[n,n?null:_q(t)]}function rz(e,t,n){if(yu(e.size))if(yu(t)&&yu(n)){if(e.size>n)return[!1,lC(n)];if(e.size<t)return[!1,uC(t)]}else{if(yu(t)&&e.size<t)return[!1,uC(t)];if(yu(n)&&e.size>n)return[!1,lC(n)]}return[!0,null]}function yu(e){return e!=null}function xq(e){var t=e.files,n=e.accept,o=e.minSize,l=e.maxSize,h=e.multiple,g=e.maxFiles,u=e.validator;return!h&&t.length>1||h&&g>=1&&t.length>g?!1:t.every(function(S){var b=nz(S,n),C=Qf(b,1),A=C[0],z=rz(S,o,l),j=Qf(z,1),Z=j[0],H=u?u(S):null;return A&&Z&&!H})}function vy(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Zm(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function cC(e){e.preventDefault()}function bq(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function wq(e){return e.indexOf("Edge/")!==-1}function Sq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return bq(e)||wq(e)}function La(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(o){for(var l=arguments.length,h=new Array(l>1?l-1:0),g=1;g<l;g++)h[g-1]=arguments[g];return t.some(function(u){return!vy(o)&&u&&u.apply(void 0,[o].concat(h)),vy(o)})}}function Eq(){return"showOpenFilePicker"in window}function kq(e){return yu(e)?Object.entries(e).filter(function(t){var n=Qf(t,2),o=n[0],l=n[1],h=!0;return iz(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(l)||!l.every(oz))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),h=!1),h}).map(function(t){var n=Qf(t,2),o=n[0],l=n[1];return{accept:cq({},o,l)}}):e}function Tq(e){if(yu(e))return Object.entries(e).reduce(function(t,n){var o=Qf(n,2),l=o[0],h=o[1];return[].concat(sC(t),[l],sC(h))},[]).filter(function(t){return iz(t)||oz(t)}).join(",")}function Cq(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Pq(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function iz(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function oz(e){return/^.*\.[\w]+$/.test(e)}var Iq=["children"],Mq=["open"],Aq=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zq=["refKey","onChange","onClick"];function Dq(e){return Fq(e)||Lq(e)||az(e)||Rq()}function Rq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lq(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fq(e){if(Array.isArray(e))return Dx(e)}function Gv(e,t){return Bq(e)||$q(e,t)||az(e,t)||Oq()}function Oq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function az(e,t){if(!!e){if(typeof e=="string")return Dx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dx(e,t)}}function Dx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $q(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],l=!0,h=!1,g,u;try{for(n=n.call(e);!(l=(g=n.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(S){h=!0,u=S}finally{try{!l&&n.return!=null&&n.return()}finally{if(h)throw u}}return o}}function Bq(e){if(Array.isArray(e))return e}function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,o)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(o){Rx(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Rx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xy(e,t){if(e==null)return{};var n=Vq(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function Vq(e,t){if(e==null)return{};var n={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}var Ow=W.exports.forwardRef(function(e,t){var n=e.children,o=xy(e,Iq),l=lz(o),h=l.open,g=xy(l,Mq);return W.exports.useImperativeHandle(t,function(){return{open:h}},[h]),Be(jf,{children:n(sr(sr({},g),{},{open:h}))})});Ow.displayName="Dropzone";var sz={disabled:!1,getFilesFromEvent:YW,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ow.defaultProps=sz;Ow.propTypes={children:Me.func,accept:Me.objectOf(Me.arrayOf(Me.string)),multiple:Me.bool,preventDropOnDocument:Me.bool,noClick:Me.bool,noKeyboard:Me.bool,noDrag:Me.bool,noDragEventsBubbling:Me.bool,minSize:Me.number,maxSize:Me.number,maxFiles:Me.number,disabled:Me.bool,getFilesFromEvent:Me.func,onFileDialogCancel:Me.func,onFileDialogOpen:Me.func,useFsAccessApi:Me.bool,autoFocus:Me.bool,onDragEnter:Me.func,onDragLeave:Me.func,onDragOver:Me.func,onDrop:Me.func,onDropAccepted:Me.func,onDropRejected:Me.func,onError:Me.func,validator:Me.func};var Lx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function lz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=sr(sr({},sz),e),n=t.accept,o=t.disabled,l=t.getFilesFromEvent,h=t.maxSize,g=t.minSize,u=t.multiple,S=t.maxFiles,b=t.onDragEnter,C=t.onDragLeave,A=t.onDragOver,z=t.onDrop,j=t.onDropAccepted,Z=t.onDropRejected,H=t.onFileDialogCancel,de=t.onFileDialogOpen,B=t.useFsAccessApi,N=t.autoFocus,K=t.preventDropOnDocument,ce=t.noClick,ue=t.noKeyboard,ye=t.noDrag,me=t.noDragEventsBubbling,Te=t.onError,Ne=t.validator,we=W.exports.useMemo(function(){return Tq(n)},[n]),nt=W.exports.useMemo(function(){return kq(n)},[n]),wt=W.exports.useMemo(function(){return typeof de=="function"?de:dC},[de]),It=W.exports.useMemo(function(){return typeof H=="function"?H:dC},[H]),Lt=W.exports.useRef(null),Bt=W.exports.useRef(null),cn=W.exports.useReducer(Nq,Lx),bn=Gv(cn,2),Ue=bn[0],ot=bn[1],Tt=Ue.isFocused,Ot=Ue.isFileDialogActive,at=W.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&B&&Eq()),hn=function(){!at.current&&Ot&&setTimeout(function(){if(Bt.current){var Ie=Bt.current.files;Ie.length||(ot({type:"closeDialog"}),It())}},300)};W.exports.useEffect(function(){return window.addEventListener("focus",hn,!1),function(){window.removeEventListener("focus",hn,!1)}},[Bt,Ot,It,at]);var Dt=W.exports.useRef([]),Zn=function(Ie){Lt.current&&Lt.current.contains(Ie.target)||(Ie.preventDefault(),Dt.current=[])};W.exports.useEffect(function(){return K&&(document.addEventListener("dragover",cC,!1),document.addEventListener("drop",Zn,!1)),function(){K&&(document.removeEventListener("dragover",cC),document.removeEventListener("drop",Zn))}},[Lt,K]),W.exports.useEffect(function(){return!o&&N&&Lt.current&&Lt.current.focus(),function(){}},[Lt,N,o]);var dn=W.exports.useCallback(function(et){Te?Te(et):console.error(et)},[Te]),Qn=W.exports.useCallback(function(et){et.preventDefault(),et.persist(),Ti(et),Dt.current=[].concat(Dq(Dt.current),[et.target]),Zm(et)&&Promise.resolve(l(et)).then(function(Ie){if(!(vy(et)&&!me)){var Wt=Ie.length,Jt=Wt>0&&xq({files:Ie,accept:we,minSize:g,maxSize:h,multiple:u,maxFiles:S,validator:Ne}),$t=Wt>0&&!Jt;ot({isDragAccept:Jt,isDragReject:$t,isDragActive:!0,type:"setDraggedFiles"}),b&&b(et)}}).catch(function(Ie){return dn(Ie)})},[l,b,dn,me,we,g,h,u,S,Ne]),ii=W.exports.useCallback(function(et){et.preventDefault(),et.persist(),Ti(et);var Ie=Zm(et);if(Ie&&et.dataTransfer)try{et.dataTransfer.dropEffect="copy"}catch{}return Ie&&A&&A(et),!1},[A,me]),Er=W.exports.useCallback(function(et){et.preventDefault(),et.persist(),Ti(et);var Ie=Dt.current.filter(function(Jt){return Lt.current&&Lt.current.contains(Jt)}),Wt=Ie.indexOf(et.target);Wt!==-1&&Ie.splice(Wt,1),Dt.current=Ie,!(Ie.length>0)&&(ot({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Zm(et)&&C&&C(et))},[Lt,C,me]),Rn=W.exports.useCallback(function(et,Ie){var Wt=[],Jt=[];et.forEach(function($t){var Pr=nz($t,we),je=Gv(Pr,2),At=je[0],zt=je[1],hr=rz($t,g,h),ai=Gv(hr,2),St=ai[0],si=ai[1],li=Ne?Ne($t):null;if(At&&St&&!li)Wt.push($t);else{var Ki=[zt,si];li&&(Ki=Ki.concat(li)),Jt.push({file:$t,errors:Ki.filter(function(ui){return ui})})}}),(!u&&Wt.length>1||u&&S>=1&&Wt.length>S)&&(Wt.forEach(function($t){Jt.push({file:$t,errors:[vq]})}),Wt.splice(0)),ot({acceptedFiles:Wt,fileRejections:Jt,type:"setFiles"}),z&&z(Wt,Jt,Ie),Jt.length>0&&Z&&Z(Jt,Ie),Wt.length>0&&j&&j(Wt,Ie)},[ot,u,we,g,h,S,z,j,Z,Ne]),Xt=W.exports.useCallback(function(et){et.preventDefault(),et.persist(),Ti(et),Dt.current=[],Zm(et)&&Promise.resolve(l(et)).then(function(Ie){vy(et)&&!me||Rn(Ie,et)}).catch(function(Ie){return dn(Ie)}),ot({type:"reset"})},[l,Rn,dn,me]),fn=W.exports.useCallback(function(){if(at.current){ot({type:"openDialog"}),wt();var et={multiple:u,types:nt};window.showOpenFilePicker(et).then(function(Ie){return l(Ie)}).then(function(Ie){Rn(Ie,null),ot({type:"closeDialog"})}).catch(function(Ie){Cq(Ie)?(It(Ie),ot({type:"closeDialog"})):Pq(Ie)?(at.current=!1,Bt.current&&(Bt.current.value=null,Bt.current.click())):dn(Ie)});return}Bt.current&&(ot({type:"openDialog"}),wt(),Bt.current.value=null,Bt.current.click())},[ot,wt,It,B,Rn,dn,nt,u]),Pe=W.exports.useCallback(function(et){!Lt.current||!Lt.current.isEqualNode(et.target)||(et.key===" "||et.key==="Enter"||et.keyCode===32||et.keyCode===13)&&(et.preventDefault(),fn())},[Lt,fn]),Fr=W.exports.useCallback(function(){ot({type:"focus"})},[]),Hr=W.exports.useCallback(function(){ot({type:"blur"})},[]),tn=W.exports.useCallback(function(){ce||(Sq()?setTimeout(fn,0):fn())},[ce,fn]),Nt=function(Ie){return o?null:Ie},ki=function(Ie){return ue?null:Nt(Ie)},oi=function(Ie){return ye?null:Nt(Ie)},Ti=function(Ie){me&&Ie.stopPropagation()},Or=W.exports.useMemo(function(){return function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=et.refKey,Wt=Ie===void 0?"ref":Ie,Jt=et.role,$t=et.onKeyDown,Pr=et.onFocus,je=et.onBlur,At=et.onClick,zt=et.onDragEnter,hr=et.onDragOver,ai=et.onDragLeave,St=et.onDrop,si=xy(et,Aq);return sr(sr(Rx({onKeyDown:ki(La($t,Pe)),onFocus:ki(La(Pr,Fr)),onBlur:ki(La(je,Hr)),onClick:Nt(La(At,tn)),onDragEnter:oi(La(zt,Qn)),onDragOver:oi(La(hr,ii)),onDragLeave:oi(La(ai,Er)),onDrop:oi(La(St,Xt)),role:typeof Jt=="string"&&Jt!==""?Jt:"presentation"},Wt,Lt),!o&&!ue?{tabIndex:0}:{}),si)}},[Lt,Pe,Fr,Hr,tn,Qn,ii,Er,Xt,ue,ye,o]),Sn=W.exports.useCallback(function(et){et.stopPropagation()},[]),Xi=W.exports.useMemo(function(){return function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=et.refKey,Wt=Ie===void 0?"ref":Ie,Jt=et.onChange,$t=et.onClick,Pr=xy(et,zq),je=Rx({accept:we,multiple:u,type:"file",style:{display:"none"},onChange:Nt(La(Jt,Xt)),onClick:Nt(La($t,Sn)),tabIndex:-1},Wt,Bt);return sr(sr({},je),Pr)}},[Bt,n,u,Xt,o]);return sr(sr({},Ue),{},{isFocused:Tt&&!o,getRootProps:Or,getInputProps:Xi,rootRef:Lt,inputRef:Bt,open:Nt(fn)})}function Nq(e,t){switch(t.type){case"focus":return sr(sr({},e),{},{isFocused:!0});case"blur":return sr(sr({},e),{},{isFocused:!1});case"openDialog":return sr(sr({},Lx),{},{isFileDialogActive:!0});case"closeDialog":return sr(sr({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return sr(sr({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return sr(sr({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return sr({},Lx);default:return e}}function dC(){}const[Uq,cZ]=MI("Label",{id:void 0,controlRef:{current:null}}),jq=W.exports.forwardRef((e,t)=>{const{htmlFor:n,id:o,...l}=e,h=W.exports.useRef(null),g=W.exports.useRef(null),u=Ts(t,g),S=_f(o);return W.exports.useEffect(()=>{if(n){const b=document.getElementById(n);if(g.current&&b){const C=()=>b.getAttribute("aria-labelledby"),A=[S,C()].filter(Boolean).join(" ");return b.setAttribute("aria-labelledby",A),h.current=b,()=>{var z;const j=(z=C())===null||z===void 0?void 0:z.replace(S,"");j===""?b.removeAttribute("aria-labelledby"):j&&b.setAttribute("aria-labelledby",j)}}}},[S,n]),W.exports.createElement(Uq,{id:S,controlRef:h},W.exports.createElement(uo.span,Ze({role:"label",id:S},l,{ref:u,onMouseDown:b=>{var C;(C=e.onMouseDown)===null||C===void 0||C.call(e,b),!b.defaultPrevented&&b.detail>1&&b.preventDefault()},onClick:b=>{var C;if((C=e.onClick)===null||C===void 0||C.call(e,b),!h.current||b.defaultPrevented)return;const A=h.current.contains(b.target),z=b.isTrusted===!0;!A&&z&&(h.current.click(),h.current.focus())}})))}),Gq=jq,Wq=un("input",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"$3",fontFamily:"$sans","&:focus":{boxShadow:"0 0 0 1px black"},width:"100%",border:"1px solid $white",padding:"$1",boxSizing:"border-box",margin:"0 0 $2 0",borderRadius:"$2"}),Wv=un(Gq,{display:"block",fontSize:"$3",fontWeight:300,userSelect:"none",padding:"0 0 $1 0"}),qq=un("h1",{paddingBottom:"$1",fontWeight:500}),Zq=un("div",{maxWidth:780,marginLeft:"auto",marginRight:"auto",padding:"$3"}),Hq=un("button",{padding:"$1 $2",marginBottom:"$1",borderRadius:"$2",cursor:"pointer",variants:{color:{violet:{backgroundColor:"blueviolet",color:"white","&:hover":{backgroundColor:"darkviolet"}},gray:{backgroundColor:"gainsboro","&:hover":{backgroundColor:"lightgray"}}}}}),Xq=un("div",{padding:"$2",border:"1px dashed $white",textAlign:"center",margin:"0 0 $2 0"}),Kq=un("div",{padding:"$1","&:not(:last-child)":{borderBottom:"1px solid $white"},"&:hover":{backgroundColor:"$hover"},variants:{selected:{true:{backgroundColor:"red"}}}}),Yq=un("div",{borderRadius:"$1",border:"1px solid $white",margin:"0 0 $2 0"}),fC=["https://r2-public.protomaps.com/protomaps-sample-datasets/protomaps-basemap-opensource-20230408.pmtiles","https://protomaps.github.io/PMTiles/protomaps(vector)ODbL_firenze.pmtiles","https://protomaps.github.io/PMTiles/stamen_toner(raster)CC-BY+ODbL_z3.pmtiles","https://r2-public.protomaps.com/protomaps-sample-datasets/cb_2018_us_zcta510_500k.pmtiles","https://protomaps.github.io/PMTiles/usgs-mt-whitney-8-15-webp-512.pmtiles"];function Jq(e){const t=W.exports.useCallback(C=>{e.setFile(new dh(new yF(C[0])))},[]),{acceptedFiles:n,getRootProps:o,getInputProps:l}=lz({onDrop:t}),[h,g]=W.exports.useState("");W.exports.useState(1);const u=C=>{g(C.target.value)},S=C=>()=>{e.setFile(new dh(fC[C]))};return Pt(Zq,{children:[Be(qq,{children:"PMTiles Viewer"}),Be(Wv,{htmlFor:"remoteUrl",children:"Specify a remote URL"}),Be(Wq,{id:"remoteUrl",placeholder:"https://example.com/my_archive.pmtiles",onChange:u}),Be(Hq,{color:"gray",onClick:()=>{e.setFile(new dh(h))},disabled:!h.trim(),children:"Load URL"}),Be(Wv,{htmlFor:"localFile",children:"Select a local file"}),Pt(Xq,{...o(),children:[Be("input",{...l()}),Be("p",{children:"Drag + drop a file here, or click to select"})]}),Be(Wv,{children:"Load an example"}),Be(Yq,{children:fC.map((C,A)=>Be(Kq,{onClick:S(A),children:C},A))})]})}const Qq=un("div",{height:"$4",display:"flex",alignItems:"center",padding:"0 $2 0 $2"}),eZ=un("a",{fontWeight:500,color:"unset",textDecoration:"none"}),tZ=un("a",{color:"white",textDecoration:"none",fontSize:"$1"}),nZ=un("span",{marginLeft:"auto"}),rZ=un(ML,{backgroundColor:"black",position:"fixed",inset:0,opacity:"40%",zIndex:3}),iZ=un(AL,{backgroundColor:"black",color:"#ef4444",padding:"$1",borderRadius:6,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",zIndex:4,"&:focus":{outline:"none"}}),oZ="5b8627b".substr(0,8);function aZ(){QF();const[e,t]=W.exports.useState(),[n,o]=W.exports.useState(),[l,h]=W.exports.useState(!1);W.exports.useEffect(()=>{const S=new URLSearchParams(location.search).get("url");if(S){const b=new dh(S);o(b)}location.hash.includes("map")&&h(!0)},[]),W.exports.useEffect(()=>{n&&n.getHeader().catch(S=>{t(S.message)})},[n]),W.exports.useEffect(()=>{const S=new URL(window.location.href);n!=null&&n.source.getKey().startsWith("http")?(S.searchParams.set("url",n.source.getKey()),history.pushState(null,"",S.toString())):(S.searchParams.delete("url"),history.pushState(null,"",S.toString()))},[n]);const g=S=>{S.preventDefault(),o(void 0)},u=()=>{t(void 0)};return Pt("div",{children:[Pt(Qq,{children:[Be(eZ,{href:"/PMTiles/",onClick:g,children:"PMTiles Viewer"}),Be(nZ,{children:Pt(tZ,{href:"https://github.com/protomaps/PMTiles",target:"_blank",children:[Be(RL,{})," ",oZ]})})]}),n?Be(WW,{file:n,mapHashPassed:l}):Be(Jq,{setFile:o}),Be(PL,{open:e!==void 0,children:Pt(IL,{children:[Be(rZ,{}),Pt(iZ,{onEscapeKeyDown:u,onPointerDownOutside:u,children:[Be("div",{children:n?n.source.getKey():null}),Be("div",{children:e}),Be(zL,{})]})]})})]})}const pC=document.getElementById("root");pC&&Zv.createRoot(pC).render(Be(Oe.StrictMode,{children:Be(aZ,{})}));
